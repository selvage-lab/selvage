[
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any, Optional\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.config import get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef parse_date_from_filename(filename: str) -> Optional[datetime]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    # YYYYMMDD_HHMMSS í˜•ì‹ ê²€ìƒ‰\\\\n    if len(parts) >= 2:\\\\n        # ì ‘ë‘ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: YYYYMMDD_HHMMSS_...\\\\n        if (\\\\n            parts[0].isdigit()\\\\n            and len(parts[0]) == 8\\\\n            and parts[1].isdigit()\\\\n            and len(parts[1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì ‘ë¯¸ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: ..._YYYYMMDD_HHMMSS\\\\n        if (\\\\n            parts[-2].isdigit()\\\\n            and len(parts[-2]) == 8\\\\n            and parts[-1].isdigit()\\\\n            and len(parts[-1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì¤‘ê°„ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°\\\\n        for i in range(len(parts) - 1):\\\\n            if (\\\\n                parts[i].isdigit()\\\\n                and len(parts[i]) == 8\\\\n                and parts[i + 1].isdigit()\\\\n                and len(parts[i + 1]) == 6\\\\n            ):\\\\n                try:\\\\n                    return datetime.strptime(\\\\n                        f\\\\\\\"{parts[i]}_{parts[i + 1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\"\\\\n                    )\\\\n                except ValueError:\\\\n                    pass\\\\n\\\\n    return None\\\\n\\\\n\\\\ndef extract_model_name_from_filename(filename: str, date_parts_count: int = 0) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    if date_parts_count == 2 and len(parts) > 2:\\\\n        # ë‚ ì§œ ë¶€ë¶„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n    elif len(parts) > 0 and not parts[-1].isdigit():\\\\n        # ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return parts[-1]\\\\n\\\\n    return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef determine_file_format(file_path: Path) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ì˜ í˜•ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_suffix = file_path.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    if not file_suffix:\\\\n        # í™•ì¥ì ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬\\\\n        try:\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì¸ì§€ í™•ì¸\\\\n            llm_eval_dir = get_default_llm_eval_data_dir().resolve()\\\\n            file_parent = file_path.parent.resolve()\\\\n\\\\n            is_in_llm_eval_dir = str(file_parent).startswith(str(llm_eval_dir))\\\\n\\\\n            # íŒŒì¼ëª…ì— ë‚ ì§œ í˜•ì‹ì´ ìˆëŠ”ì§€ í™•ì¸\\\\n            parts = file_path.stem.split(\\\\\\\"_\\\\\\\")\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            if is_in_llm_eval_dir or has_date_format:\\\\n                return \\\\\\\"json\\\\\\\"\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"íŒŒì¼ í˜•ì‹ ê²°ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return file_suffix if file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"] else \\\\\\\"txt\\\\\\\"\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # ë‚ ì§œ ì¶”ì¶œ\\\\n    date_candidate = parse_date_from_filename(file.stem)\\\\n    if date_candidate is None:\\\\n        date_candidate = mtime\\\\n        date_parts_count = 0\\\\n    else:\\\\n        date_parts_count = 2\\\\n\\\\n    # ëª¨ë¸ëª… ì¶”ì¶œ\\\\n    model_name_candidate = extract_model_name_from_filename(file.stem, date_parts_count)\\\\n\\\\n    # íŒŒì¼ í˜•ì‹ ê²°ì •\\\\n    file_format = determine_file_format(file)\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef display_file_info(file_info: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    col1, col2, col3 = st.columns(3)\\\\n    with col1:\\\\n        st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {file_info['name']}\\\\\\\")\\\\n    with col2:\\\\n        st.markdown(f\\\\\\\"**ë‚ ì§œ**: {file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\")\\\\n    with col3:\\\\n        st.markdown(f\\\\\\\"**í¬ê¸°**: {file_info['size_str']}\\\\\\\")\\\\n\\\\n\\\\ndef parse_json_content(content: str) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON ë¬¸ìì—´ì„ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        return json.loads(content)\\\\n    except json.JSONDecodeError:\\\\n        return {}\\\\n\\\\n\\\\ndef parse_prompt_content(prompt_list: list) -> list:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ë°ì´í„°ì˜ content í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(prompt_list, list):\\\\n        return prompt_list\\\\n\\\\n    parsed_list = []\\\\n    for item in prompt_list:\\\\n        item_copy = copy.deepcopy(item)\\\\n        if (\\\\n            isinstance(item_copy, dict)\\\\n            and \\\\\\\"content\\\\\\\" in item_copy\\\\n            and isinstance(item_copy[\\\\\\\"content\\\\\\\"], str)\\\\n        ):\\\\n            try:\\\\n                item_copy[\\\\\\\"content\\\\\\\"] = json.loads(item_copy[\\\\\\\"content\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n        parsed_list.append(item_copy)\\\\n\\\\n    return parsed_list\\\\n\\\\n\\\\ndef display_json_field_in_expander(key: str, value: Any) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON í•„ë“œë¥¼ ì ‘ì„ ìˆ˜ ìˆëŠ” expanderë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not value:  # Noneì´ê±°ë‚˜ ë¹ˆ ê°’\\\\n        with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n            st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n        return\\\\n\\\\n    with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n        if key == \\\\\\\"prompt\\\\\\\" and isinstance(value, list):\\\\n            parsed_value = parse_prompt_content(value)\\\\n            st.json(parsed_value, expanded=True)\\\\n        else:\\\\n            st.json(value, expanded=True)\\\\n\\\\n\\\\ndef display_review_result_raw_json(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ì›ë³¸ JSONì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## ì›ë³¸ JSON ë°ì´í„°\\\\\\\")\\\\n    data_to_display = copy.deepcopy(json_data)\\\\n\\\\n    # ì£¼ìš” í•„ë“œë¥¼ expanderë¡œ í‘œì‹œ\\\\n    target_keys = [\\\\\\\"prompt\\\\\\\", \\\\\\\"review_request\\\\\\\", \\\\\\\"review_response\\\\\\\"]\\\\n    for key in target_keys:\\\\n        if key in data_to_display:\\\\n            display_json_field_in_expander(key, data_to_display.pop(key))\\\\n\\\\n    # ë‚˜ë¨¸ì§€ ë°ì´í„° í‘œì‹œ\\\\n    if data_to_display:\\\\n        st.markdown(\\\\\\\"---\\\\\\\")\\\\n        st.markdown(\\\\\\\"### ì›ë³¸ ë°ì´í„°\\\\\\\")\\\\n        st.json(json_data, expanded=False)\\\\n\\\\n\\\\ndef filter_failed_test_cases(test_cases: list) -> tuple[list, int]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return [], 0\\\\n\\\\n    filtered_cases = []\\\\n\\\\n    for tc in test_cases:\\\\n        if not isinstance(tc, dict) or tc.get(\\\\\\\"success\\\\\\\") is not False:\\\\n            continue\\\\n\\\\n        tc_copy = copy.deepcopy(tc)\\\\n\\\\n        # metricsData ë‚´ë¶€ì—ì„œ ì‹¤íŒ¨í•œ í•­ëª©ë§Œ í•„í„°ë§\\\\n        if \\\\\\\"metricsData\\\\\\\" in tc_copy and isinstance(tc_copy[\\\\\\\"metricsData\\\\\\\"], list):\\\\n            filtered_metrics = [\\\\n                m\\\\n                for m in tc_copy[\\\\\\\"metricsData\\\\\\\"]\\\\n                if isinstance(m, dict) and m.get(\\\\\\\"success\\\\\\\") is False\\\\n            ]\\\\n            tc_copy[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics or []\\\\n\\\\n        filtered_cases.append(tc_copy)\\\\n\\\\n    return filtered_cases, len(filtered_cases)\\\\n\\\\n\\\\ndef parse_test_case_inputs(test_cases: list) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ì…ë ¥ í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return\\\\n\\\\n    for test_case in test_cases:\\\\n        if not isinstance(test_case, dict):\\\\n            continue\\\\n\\\\n        # input í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"input\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"input\\\\\\\"], str):\\\\n            try:\\\\n                parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                if isinstance(parsed_input, list):\\\\n                    parsed_input = parse_prompt_content(parsed_input)\\\\n                test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n        # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"actualOutput\\\\\\\"], str):\\\\n            try:\\\\n                test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(test_case[\\\\\\\"actualOutput\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n\\\\ndef display_llm_eval_results(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ë°ì´í„° ë³µì‚¬\\\\n    display_data = copy.deepcopy(json_data)\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ ê³„ì‚°\\\\n    test_cases = (\\\\n        display_data.get(\\\\\\\"testCases\\\\\\\", []) if isinstance(display_data, dict) else []\\\\n    )\\\\n    num_total_cases = len(test_cases) if isinstance(test_cases, list) else 0\\\\n\\\\n    # í•„í„°ë§ ì»¨íŠ¸ë¡¤\\\\n    col_checkbox, col_count = st.columns([0.8, 0.2])\\\\n    with col_checkbox:\\\\n        filter_failed_tests = st.checkbox(\\\\n            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n        )\\\\n\\\\n    # í•„í„°ë§ ì ìš©\\\\n    num_displayed_cases = num_total_cases\\\\n    if (\\\\n        filter_failed_tests\\\\n        and isinstance(display_data, dict)\\\\n        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n    ):\\\\n        filtered_cases, num_displayed_cases = filter_failed_test_cases(\\\\n            display_data[\\\\\\\"testCases\\\\\\\"]\\\\n        )\\\\n        display_data[\\\\\\\"testCases\\\\\\\"] = filtered_cases\\\\n        count_caption_text = (\\\\n            f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n        )\\\\n    else:\\\\n        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n    with col_count:\\\\n        st.caption(count_caption_text)\\\\n\\\\n    # ì…ë ¥ í•„ë“œ íŒŒì‹±\\\\n    if isinstance(display_data, dict) and \\\\\\\"testCases\\\\\\\" in display_data:\\\\n        parse_test_case_inputs(display_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n    # ê²°ê³¼ í‘œì‹œ\\\\n    st.json(display_data, expanded=False)\\\\n\\\\n\\\\ndef display_review_result(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTMLë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if \\\\\\\"review_response\\\\\\\" not in json_data or not json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        review_response = ReviewResponse.model_validate(json_data[\\\\\\\"review_response\\\\\\\"])\\\\n        formatter = ReviewFormatter()\\\\n        html_content = formatter.to_markdown(review_response)\\\\n        st.markdown(html_content)\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n        st.json(json_data[\\\\\\\"review_response\\\\\\\"], expanded=False)\\\\n\\\\n\\\\ndef load_and_display_file_content(file_path: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ë‚´ìš©ì„ ë¡œë“œí•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        file_format = determine_file_format(file_path)\\\\n\\\\n        if file_format == \\\\\\\"json\\\\\\\":\\\\n            json_data = parse_json_content(content)\\\\n            if not json_data:\\\\n                st.error(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ JSON í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n                st.text(content)\\\\n                return\\\\n\\\\n            view_type = st.session_state.get(\\\\\\\"view_type\\\\\\\")\\\\n\\\\n            if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                    st.session_state.show_raw_json = False\\\\n\\\\n                show_raw_json = st.checkbox(\\\\n                    \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                )\\\\n\\\\n                if show_raw_json:\\\\n                    display_review_result_raw_json(json_data)\\\\n                else:\\\\n                    display_review_result(json_data)\\\\n\\\\n            elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                display_llm_eval_results(json_data)\\\\n        else:\\\\n            # í…ìŠ¤íŠ¸ íŒŒì¼ì€ ê·¸ëŒ€ë¡œ í‘œì‹œ\\\\n            st.text(content)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef sort_file_infos(\\\\n    file_infos: list[dict[str, Any]], sort_option: str\\\\n) -> list[dict[str, Any]]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ ëª©ë¡ì„ ì •ë ¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    return file_infos\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # ë·° íƒ€ì… ì„¸ì…˜ ì €ì¥\\\\n    st.session_state.view_type = view_type\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ì •ë³´ ìƒì„±\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\"], index=0)\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    file_infos = sort_file_infos(file_infos, sort_option)\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´ì™€ ë‚´ìš© í‘œì‹œ\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    display_file_info(selected_file_info)\\\\n    load_and_display_file_content(selected_file_info[\\\\\\\"path\\\\\\\"])\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import subprocess\\\\n\\\\n    file_path = os.path.abspath(__file__)\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\nfrom typing import Any, Optional\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\nfrom typing import Any, Optional\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.config import get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    load_and_display_file_content(selected_file_info[\\\\\\\"path\\\\\\\"])\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    file_path = os.path.abspath(__file__)\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    cmd = [\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    load_and_display_file_content(selected_file_info[\\\\\\\"path\\\\\\\"])\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import subprocess\\\\n\\\\n    file_path = os.path.abspath(__file__)\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    cmd = [\\\\n```\\\", \\\"line_number\\\": 506}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"Design\", \"line_number\": 18, \"file\": \"reviewer/src/ui.py\", \"description\": \"`sys.path`ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ëª¨ë“ˆ ì„í¬íŠ¸ ê²½ë¡œë¥¼ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ê³ , íŒ¨í‚¤ì§€ ê´€ë¦¬ ì‹œìŠ¤í…œ(pip ë“±)ê³¼ì˜ ì¶©ëŒì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ `sys.path` ìˆ˜ì •ì„ ì œê±°í•˜ì—¬ ë” í‘œì¤€ì ì¸ Python ëª¨ë“ˆ ì„í¬íŠ¸ ë°©ì‹ì„ ë”°ë¥´ê²Œ í•©ë‹ˆë‹¤.\", \"suggestion\": \"ì´ ë³€ê²½ì€ ì¢‹ì€ ë°©í–¥ì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ê°€ íŒ¨í‚¤ì§€ë¡œ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´, `sys.path` ìˆ˜ì • ì—†ì´ë„ ë‚´ë¶€ ëª¨ë“ˆ ì„í¬íŠ¸ê°€ ì˜ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\"..\\\")))\", \"improved_code\": \"\"}, {\"type\": \"Style\", \"line_number\": 509, \"file\": \"reviewer/src/ui.py\", \"description\": \"`run_app` í•¨ìˆ˜ ë‚´ì—ì„œ `os`ì™€ `sys` ëª¨ë“ˆì„ ë‹¤ì‹œ ì„í¬íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ëª¨ë“ˆë“¤ì€ íŒŒì¼ ìƒë‹¨ì—ì„œ ì´ë¯¸ ì„í¬íŠ¸ë˜ì—ˆìœ¼ë¯€ë¡œ í•¨ìˆ˜ ë‚´ì—ì„œì˜ ì„í¬íŠ¸ëŠ” ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.\", \"suggestion\": \"í•¨ìˆ˜ ë‚´ ë¶ˆí•„ìš”í•œ ì¤‘ë³µ ì„í¬íŠ¸ë¥¼ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ë” ê¹”ë”í•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤. (ì´ ë³€ê²½ì—ì„œ ì´ë¯¸ ì œê±°ë¨)\", \"severity\": \"info\", \"original_code\": \"    import os\\n    import subprocess\\n    import sys\", \"improved_code\": \"    import subprocess\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `sys.path` ì§ì ‘ ìˆ˜ì •ì„ ì œê±°í•˜ê³  í•¨ìˆ˜ ë‚´ ë¶ˆí•„ìš”í•œ ì¤‘ë³µ ì„í¬íŠ¸ë¥¼ ì œê±°í•˜ì—¬ ì½”ë“œì˜ êµ¬ì¡°ì™€ ìŠ¤íƒ€ì¼ì„ ê°œì„ í•©ë‹ˆë‹¤. ì´ëŠ” ë” í‘œì¤€ì ì´ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ì½”ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"í‘œì¤€ì ì¸ Python íŒ¨í‚¤ì§• ë° ì„í¬íŠ¸ ë°©ì‹ì„ ê³„ì† ë”°ë¥´ì„¸ìš”.\", \"ë¶ˆí•„ìš”í•˜ê±°ë‚˜ ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ ì •ê¸°ì ìœ¼ë¡œ ê²€í† í•˜ê³  ì œê±°í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any, Optional\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef parse_date_from_filename(filename: str) -> Optional[datetime]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    # YYYYMMDD_HHMMSS í˜•ì‹ ê²€ìƒ‰\\\\n    if len(parts) >= 2:\\\\n        # ì ‘ë‘ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: YYYYMMDD_HHMMSS_...\\\\n        if (\\\\n            parts[0].isdigit()\\\\n            and len(parts[0]) == 8\\\\n            and parts[1].isdigit()\\\\n            and len(parts[1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì ‘ë¯¸ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: ..._YYYYMMDD_HHMMSS\\\\n        if (\\\\n            parts[-2].isdigit()\\\\n            and len(parts[-2]) == 8\\\\n            and parts[-1].isdigit()\\\\n            and len(parts[-1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì¤‘ê°„ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°\\\\n        for i in range(len(parts) - 1):\\\\n            if (\\\\n                parts[i].isdigit()\\\\n                and len(parts[i]) == 8\\\\n                and parts[i + 1].isdigit()\\\\n                and len(parts[i + 1]) == 6\\\\n            ):\\\\n                try:\\\\n                    return datetime.strptime(\\\\n                        f\\\\\\\"{parts[i]}_{parts[i + 1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\"\\\\n                    )\\\\n                except ValueError:\\\\n                    pass\\\\n\\\\n    return None\\\\n\\\\n\\\\ndef extract_model_name_from_filename(filename: str, date_parts_count: int = 0) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    if date_parts_count == 2 and len(parts) > 2:\\\\n        # ë‚ ì§œ ë¶€ë¶„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n    elif len(parts) > 0 and not parts[-1].isdigit():\\\\n        # ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return parts[-1]\\\\n\\\\n    return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef determine_file_format(file_path: Path) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ì˜ í˜•ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_suffix = file_path.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    if not file_suffix:\\\\n        # í™•ì¥ì ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬\\\\n        try:\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì¸ì§€ í™•ì¸\\\\n            llm_eval_dir = get_default_llm_eval_data_dir().resolve()\\\\n            file_parent = file_path.parent.resolve()\\\\n\\\\n            is_in_llm_eval_dir = str(file_parent).startswith(str(llm_eval_dir))\\\\n\\\\n            # íŒŒì¼ëª…ì— ë‚ ì§œ í˜•ì‹ì´ ìˆëŠ”ì§€ í™•ì¸\\\\n            parts = file_path.stem.split(\\\\\\\"_\\\\\\\")\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            if is_in_llm_eval_dir or has_date_format:\\\\n                return \\\\\\\"json\\\\\\\"\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return file_suffix if file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"] else \\\\\\\"txt\\\\\\\"\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # ë‚ ì§œ ì¶”ì¶œ\\\\n    date_candidate = parse_date_from_filename(file.stem)\\\\n    if date_candidate is None:\\\\n        date_candidate = mtime\\\\n        date_parts_count = 0\\\\n    else:\\\\n        date_parts_count = 2\\\\n\\\\n    # ëª¨ë¸ëª… ì¶”ì¶œ\\\\n    model_name_candidate = extract_model_name_from_filename(file.stem, date_parts_count)\\\\n\\\\n    # íŒŒì¼ í˜•ì‹ ê²°ì •\\\\n    file_format = determine_file_format(file)\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef display_file_info(file_info: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    col1, col2, col3 = st.columns(3)\\\\n    with col1:\\\\n        st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {file_info['name']}\\\\\\\")\\\\n    with col2:\\\\n        st.markdown(f\\\\\\\"**ë‚ ì§œ**: {file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\")\\\\n    with col3:\\\\n        st.markdown(f\\\\\\\"**í¬ê¸°**: {file_info['size_str']}\\\\\\\")\\\\n\\\\n\\\\ndef parse_json_content(content: str) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON ë¬¸ìì—´ì„ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        return json.loads(content)\\\\n    except json.JSONDecodeError:\\\\n        return {}\\\\n\\\\n\\\\ndef parse_prompt_content(prompt_list: list) -> list:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ë°ì´í„°ì˜ content í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(prompt_list, list):\\\\n        return prompt_list\\\\n\\\\n    parsed_list = []\\\\n    for item in prompt_list:\\\\n        item_copy = copy.deepcopy(item)\\\\n        if (\\\\n            isinstance(item_copy, dict)\\\\n            and \\\\\\\"content\\\\\\\" in item_copy\\\\n            and isinstance(item_copy[\\\\\\\"content\\\\\\\"], str)\\\\n        ):\\\\n            try:\\\\n                item_copy[\\\\\\\"content\\\\\\\"] = json.loads(item_copy[\\\\\\\"content\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n        parsed_list.append(item_copy)\\\\n\\\\n    return parsed_list\\\\n\\\\n\\\\ndef display_json_field_in_expander(key: str, value: Any) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON í•„ë“œë¥¼ ì ‘ì„ ìˆ˜ ìˆëŠ” expanderë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not value:  # Noneì´ê±°ë‚˜ ë¹ˆ ê°’\\\\n        with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n            st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n        return\\\\n\\\\n    with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n        if key == \\\\\\\"prompt\\\\\\\" and isinstance(value, list):\\\\n            parsed_value = parse_prompt_content(value)\\\\n            st.json(parsed_value, expanded=True)\\\\n        else:\\\\n            st.json(value, expanded=True)\\\\n\\\\n\\\\ndef display_review_result_raw_json(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ì›ë³¸ JSONì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## ì›ë³¸ JSON ë°ì´í„°\\\\\\\")\\\\n    data_to_display = copy.deepcopy(json_data)\\\\n\\\\n    # ì£¼ìš” í•„ë“œë¥¼ expanderë¡œ í‘œì‹œ\\\\n    target_keys = [\\\\\\\"prompt\\\\\\\", \\\\\\\"review_request\\\\\\\", \\\\\\\"review_response\\\\\\\"]\\\\n    for key in target_keys:\\\\n        if key in data_to_display:\\\\n            display_json_field_in_expander(key, data_to_display.pop(key))\\\\n\\\\n    # ë‚˜ë¨¸ì§€ ë°ì´í„° í‘œì‹œ\\\\n    if data_to_display:\\\\n        st.markdown(\\\\\\\"---\\\\\\\")\\\\n        st.markdown(\\\\\\\"### ì›ë³¸ ë°ì´í„°\\\\\\\")\\\\n        st.json(json_data, expanded=False)\\\\n\\\\n\\\\ndef filter_failed_test_cases(test_cases: list) -> tuple[list, int]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return [], 0\\\\n\\\\n    filtered_cases = []\\\\n\\\\n    for tc in test_cases:\\\\n        if not isinstance(tc, dict) or tc.get(\\\\\\\"success\\\\\\\") is not False:\\\\n            continue\\\\n\\\\n        tc_copy = copy.deepcopy(tc)\\\\n\\\\n        # metricsData ë‚´ë¶€ì—ì„œ ì‹¤íŒ¨í•œ í•­ëª©ë§Œ í•„í„°ë§\\\\n        if \\\\\\\"metricsData\\\\\\\" in tc_copy and isinstance(tc_copy[\\\\\\\"metricsData\\\\\\\"], list):\\\\n            filtered_metrics = [\\\\n                m\\\\n                for m in tc_copy[\\\\\\\"metricsData\\\\\\\"]\\\\n                if isinstance(m, dict) and m.get(\\\\\\\"success\\\\\\\") is False\\\\n            ]\\\\n            tc_copy[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics or []\\\\n\\\\n        filtered_cases.append(tc_copy)\\\\n\\\\n    return filtered_cases, len(filtered_cases)\\\\n\\\\n\\\\ndef parse_test_case_inputs(test_cases: list) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ì…ë ¥ í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return\\\\n\\\\n    for test_case in test_cases:\\\\n        if not isinstance(test_case, dict):\\\\n            continue\\\\n\\\\n        # input í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"input\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"input\\\\\\\"], str):\\\\n            try:\\\\n                parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                if isinstance(parsed_input, list):\\\\n                    parsed_input = parse_prompt_content(parsed_input)\\\\n                test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n        # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"actualOutput\\\\\\\"], str):\\\\n            try:\\\\n                test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(test_case[\\\\\\\"actualOutput\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n\\\\ndef display_llm_eval_results(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ë°ì´í„° ë³µì‚¬\\\\n    display_data = copy.deepcopy(json_data)\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ ê³„ì‚°\\\\n    test_cases = (\\\\n        display_data.get(\\\\\\\"testCases\\\\\\\", []) if isinstance(display_data, dict) else []\\\\n    )\\\\n    num_total_cases = len(test_cases) if isinstance(test_cases, list) else 0\\\\n\\\\n    # í•„í„°ë§ ì»¨íŠ¸ë¡¤\\\\n    col_checkbox, col_count = st.columns([0.8, 0.2])\\\\n    with col_checkbox:\\\\n        filter_failed_tests = st.checkbox(\\\\n            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n        )\\\\n\\\\n    # í•„í„°ë§ ì ìš©\\\\n    num_displayed_cases = num_total_cases\\\\n    if (\\\\n        filter_failed_tests\\\\n        and isinstance(display_data, dict)\\\\n        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n    ):\\\\n        filtered_cases, num_displayed_cases = filter_failed_test_cases(\\\\n            display_data[\\\\\\\"testCases\\\\\\\"]\\\\n        )\\\\n        display_data[\\\\\\\"testCases\\\\\\\"] = filtered_cases\\\\n        count_caption_text = (\\\\n            f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n        )\\\\n    else:\\\\n        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n    with col_count:\\\\n        st.caption(count_caption_text)\\\\n\\\\n    # ì…ë ¥ í•„ë“œ íŒŒì‹±\\\\n    if isinstance(display_data, dict) and \\\\\\\"testCases\\\\\\\" in display_data:\\\\n        parse_test_case_inputs(display_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n    # ê²°ê³¼ í‘œì‹œ\\\\n    st.json(display_data, expanded=False)\\\\n\\\\n\\\\ndef display_review_result(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTMLë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if \\\\\\\"review_response\\\\\\\" not in json_data or not json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        review_response = ReviewResponse.model_validate(json_data[\\\\\\\"review_response\\\\\\\"])\\\\n        formatter = ReviewFormatter()\\\\n        html_content = formatter.to_markdown(review_response)\\\\n        st.markdown(html_content)\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n        st.json(json_data[\\\\\\\"review_response\\\\\\\"], expanded=False)\\\\n\\\\n\\\\ndef load_and_display_file_content(file_path: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ë‚´ìš©ì„ ë¡œë“œí•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        format = determine_file_format(file_path)\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            json_data = parse_json_content(content)\\\\n            if not json_data:\\\\n                st.error(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ JSON í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n                st.text(content)\\\\n                return\\\\n\\\\n            view_type = st.session_state.get(\\\\\\\"view_type\\\\\\\")\\\\n\\\\n            if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                    st.session_state.show_raw_json = False\\\\n\\\\n                show_raw_json = st.checkbox(\\\\n                    \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                )\\\\n\\\\n                if show_raw_json:\\\\n                    display_review_result_raw_json(json_data)\\\\n                else:\\\\n                    display_review_result(json_data)\\\\n\\\\n            elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                display_llm_eval_results(json_data)\\\\n        else:\\\\n            # í…ìŠ¤íŠ¸ íŒŒì¼ì€ ê·¸ëŒ€ë¡œ í‘œì‹œ\\\\n            st.text(content)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef sort_file_infos(\\\\n    file_infos: list[dict[str, Any]], sort_option: str\\\\n) -> list[dict[str, Any]]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ ëª©ë¡ì„ ì •ë ¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    return file_infos\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # ë·° íƒ€ì… ì„¸ì…˜ ì €ì¥\\\\n    st.session_state.view_type = view_type\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ì •ë³´ ìƒì„±\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\"], index=0)\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    file_infos = sort_file_infos(file_infos, sort_option)\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´ì™€ ë‚´ìš© í‘œì‹œ\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    display_file_info(selected_file_info)\\\\n    load_and_display_file_content(selected_file_info[\\\\\\\"path\\\\\\\"])\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    file_path = os.path.abspath(__file__)\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        return\\\\n\\\\n    try:\\\\n        review_response = ReviewResponse.model_validate(json_data[\\\\\\\"review_response\\\\\\\"])\\\\n        formatter = ReviewFormatter()\\\\n        html_content = formatter.to_html(review_response)\\\\n        st.html(html_content)\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n        st.json(json_data[\\\\\\\"review_response\\\\\\\"], expanded=False)\\\\n\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        return\\\\n\\\\n    try:\\\\n        review_response = ReviewResponse.model_validate(json_data[\\\\\\\"review_response\\\\\\\"])\\\\n        formatter = ReviewFormatter()\\\\n        html_content = formatter.to_markdown(review_response)\\\\n        st.markdown(html_content)\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n        st.json(json_data[\\\\\\\"review_response\\\\\\\"], expanded=False)\\\\n\\\\n\\\\n```\\\", \\\"line_number\\\": 364}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/review_formatter.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter: ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport html\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” ë¦¬ë·° ì‘ë‹µì„ ë§ˆí¬ë‹¤ìš´, HTML ë“± ë‹¤ì–‘í•œ ì¶œë ¥ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def format(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info {  }\\\\\\\",\\\\n            \\\\\\\".warning {  }\\\\\\\",\\\\n            \\\\\\\".error {  }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info {  }\\\\\\\",\\\\n            \\\\\\\".warning {  }\\\\\\\",\\\\n            \\\\\\\".error {  }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 109}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 109, \"file\": \"reviewer/src/utils/review_formatter.py\", \"description\": \"HTML ë³´ê³ ì„œì—ì„œ ì´ìŠˆ ì‹¬ê°ë„(info, warning, error) ë° ê¶Œì¥ì‚¬í•­ ì„¹ì…˜ì— ëŒ€í•œ ì£¼ìš” ì‹œê°ì  ìŠ¤íƒ€ì¼(ë°°ê²½ìƒ‰, í…Œë‘ë¦¬ ìƒ‰ìƒ)ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” ê° ì‹¬ê°ë„ì— ë”°ë¼ ë‹¤ë¥¸ ìƒ‰ìƒì˜ ì™¼ìª½ í…Œë‘ë¦¬ê°€ ìˆì—ˆê³ , ì´ìŠˆ ë° ê¶Œì¥ì‚¬í•­ ì„¹ì…˜ì—ëŠ” ë°°ê²½ìƒ‰ì´ ì ìš©ë˜ì–´ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìŠ¤íƒ€ì¼ ì œê±°ë¡œ ì¸í•´ ì‚¬ìš©ìê°€ ì´ìŠˆì˜ ì¤‘ìš”ë„ë¥¼ í•œëˆˆì— íŒŒì•…í•˜ê±°ë‚˜ íŠ¹ì • ì„¹ì…˜ì„ êµ¬ë¶„í•˜ê¸° ì–´ë ¤ì›Œì¡ŒìŠµë‹ˆë‹¤.\", \"suggestion\": \"HTML ë³´ê³ ì„œì˜ ê°€ë…ì„± í–¥ìƒì„ ìœ„í•´ ì œê±°ëœ ìŠ¤íƒ€ì¼(`.issue`ì˜ ë°°ê²½ìƒ‰ ë° ì™¼ìª½ í…Œë‘ë¦¬, `.info`, `.warning`, `.error`ì˜ `border-left-color`, `.recommendations`ì˜ ë°°ê²½ìƒ‰)ì„ ë³µì›í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ì •ë³´ë¥¼ ë” ì‰½ê²Œ ì‹ë³„í•˜ê³  ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›ë˜ ìŠ¤íƒ€ì¼ë¡œ ë˜ëŒë¦¬ë©´ ì‹œê°ì  ëª…í™•ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n            \\\"<style>\\\",\\n            \\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\",\\n            \\\"h1 { color: #333; }\\\",\\n            \\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\",\\n            \\\"h3 { color: #555; }\\\",\\n            \\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\",\\n            \\\".info { border-left-color: #2196F3; }\\\",\\n            \\\".warning { border-left-color: #FF9800; }\\\",\\n            \\\".error { border-left-color: #F44336; }\\\",\\n            \\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\",\\n            \\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\",\\n            \\\"</style>\\\",\\n            \\\"<style>\\\",\\n            \\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\",\\n            \\\"code { font-family: 'Courier New', Courier, monospace; }\\\",\\n            \\\"</style>\\\",\\n```\", \"improved_code\": \"```python\\n            \\\"<style>\\\",\\n            \\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\",\\n            \\\"h1 { color: #333; }\\\",\\n            \\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\",\\n            \\\"h3 { color: #555; }\\\",\\n            \\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\", // ìŠ¤íƒ€ì¼ ë³µì›\\n            \\\".info { border-left-color: #2196F3; }\\\", // ìŠ¤íƒ€ì¼ ë³µì›\\n            \\\".warning { border-left-color: #FF9800; }\\\", // ìŠ¤íƒ€ì¼ ë³µì›\\n            \\\".error { border-left-color: #F44336; }\\\", // ìŠ¤íƒ€ì¼ ë³µì›\\n            \\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\",\\n            \\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\", // ìŠ¤íƒ€ì¼ ë³µì›\\n            \\\"</style>\\\",\\n            \\\"<style>\\\",\\n            \\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\",\\n            \\\"code { font-family: 'Courier New', Courier, monospace; }\\\",\\n            \\\"</style>\\\",\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 364, \"file\": \"reviewer/src/ui.py\", \"description\": \"`display_review_result` í•¨ìˆ˜ì—ì„œ ë¦¬ë·° ê²°ê³¼ë¥¼ ê¸°ì¡´ HTML(`st.html`) ë°©ì‹ ëŒ€ì‹  ë§ˆí¬ë‹¤ìš´(`st.markdown`)ìœ¼ë¡œ í‘œì‹œí•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ `ReviewFormatter.to_markdown` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©°, ê²°ê³¼ì ìœ¼ë¡œ UIì— í‘œì‹œë˜ëŠ” ë¦¬ë·° ë‚´ìš©ì˜ í˜•ì‹ì´ ë³€ê²½ë©ë‹ˆë‹¤.\", \"suggestion\": \"ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œì˜ ë³€ê²½ì€ ì¼ë°˜ì ìœ¼ë¡œ ë‚´ìš©ì„ ë” ê°„ê²°í•˜ê²Œ í‘œì‹œí•  ìˆ˜ ìˆì§€ë§Œ, HTMLì´ ì œê³µí•˜ë˜ ì„¸ë°€í•œ ìŠ¤íƒ€ì¼ë§ì´ë‚˜ ë³µì¡í•œ êµ¬ì¡° í‘œí˜„ì—ëŠ” í•œê³„ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì´ ì˜ë„ëœ ê¸°ëŠ¥ ê°œì„ ì˜ ì¼ë¶€ì´ê³  ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ì¶©ë¶„í•œ ì •ë³´ ì „ë‹¬ ë° ê°€ë…ì„±ì´ í™•ë³´ëœë‹¤ë©´ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì´ì „ì— HTML ë Œë”ë§ì„ í†µí•´ ì œê³µë˜ë˜ íŠ¹ì • ì‹œê°ì  ì´ì (ì˜ˆ: `review_formatter.py`ì—ì„œ ë³€ê²½ëœ ìŠ¤íƒ€ì¼ë§ê³¼ ì—°ê´€ëœ ë¶€ë¶„)ì´ ì¤‘ìš”í–ˆë‹¤ë©´, í•´ë‹¹ ê¸°ëŠ¥ì´ ì˜ë„ì¹˜ ì•Šê²Œ ì†ì‹¤ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë³€ê²½ì˜ ì˜í–¥ ë²”ìœ„ë¥¼ ê³ ë ¤í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì— ë¶€ì •ì ì¸ ì˜í–¥ì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        return\\n\\n    try:\\n        review_response = ReviewResponse.model_validate(json_data[\\\"review_response\\\"])\\n        formatter = ReviewFormatter()\\n        html_content = formatter.to_html(review_response)\\n        st.html(html_content)\\n    except Exception as e:\\n        st.error(f\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\")\\n        st.json(json_data[\\\"review_response\\\"], expanded=False)\\n\\n\\n```\", \"improved_code\": \"```python\\n        return\\n\\n    try:\\n        review_response = ReviewResponse.model_validate(json_data[\\\"review_response\\\"])\\n        formatter = ReviewFormatter()\\n        html_content = formatter.to_markdown(review_response)\\n        st.markdown(html_content)\\n    except Exception as e:\\n        st.error(f\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\")\\n        st.json(json_data[\\\"review_response\\\"], expanded=False)\\n\\n\\n```\"}], \"summary\": \"ì½”ë“œ ë³€ê²½ ì‚¬í•­ì€ ì£¼ë¡œ ë‘ ê°€ì§€ì…ë‹ˆë‹¤: 1) `reviewer/src/ui.py`ì—ì„œ ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•˜ëŠ” ë°©ì‹ì´ HTMLì—ì„œ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. 2) `reviewer/src/utils/review_formatter.py`ì—ì„œ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜ ì‹œ ì ìš©ë˜ë˜ ì¼ë¶€ CSS ìŠ¤íƒ€ì¼(ì´ìŠˆ ì‹¬ê°ë„ë³„ ìƒ‰ìƒ êµ¬ë¶„, ì„¹ì…˜ ë°°ê²½ìƒ‰ ë“±)ì´ ì œê±°ë˜ì–´ HTML ì¶œë ¥ë¬¼ì˜ ì‹œê°ì  í‘œí˜„ì´ ë‹¨ìˆœí™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ UI í‘œì‹œ ë°©ì‹ ë³€ê²½ê³¼ ê·¸ì— ë”°ë¥¸ í¬ë§·í„°ì˜ HTML ìŠ¤íƒ€ì¼ ì¡°ì •ì´ ì´ë£¨ì–´ì¡ŒìŠµë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"HTML ë³´ê³ ì„œ ìŠ¤íƒ€ì¼ ë³µì› ë˜ëŠ” ê°œì„ : `review_formatter.py`ì—ì„œ ì œê±°ëœ HTML ìŠ¤íƒ€ì¼(íŠ¹íˆ ì´ìŠˆ ì‹¬ê°ë„ë³„ ì‹œê°ì  êµ¬ë¶„ ë° ì„¹ì…˜ ë°°ê²½ìƒ‰)ì„ ë³µì›í•˜ê±°ë‚˜, ë§ˆí¬ë‹¤ìš´ ì¶œë ¥ì—ì„œë„ ìœ ì‚¬í•œ ì‹œê°ì  ë‹¨ì„œë¥¼ ì œê³µí•  ë°©ë²•ì„ ê³ ë ¤í•˜ì—¬ ì‚¬ìš©ì ê°€ë…ì„±ì„ ë†’ì´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"UI ë³€ê²½ ì˜í–¥ ê²€í† : `ui.py`ì—ì„œ ë¦¬ë·° ê²°ê³¼ í‘œì‹œ ë°©ì‹ì„ HTMLì—ì„œ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€ê²½í•œ ê²ƒì˜ ì˜í–¥ì„ ì¢…í•©ì ìœ¼ë¡œ ê²€í† í•˜ì„¸ìš”. ë§ˆí¬ë‹¤ìš´ì´ ëª¨ë“  ê²½ìš°ì— ì¶©ë¶„í•œ í‘œí˜„ë ¥ì„ ì œê³µí•˜ëŠ”ì§€, ê¸°ì¡´ HTML ë°©ì‹ì´ ì œê³µí•˜ë˜ ì¥ì  ì¤‘ ìœ ì§€í•  í•„ìš”ê°€ ìˆëŠ” ê²ƒì€ ì—†ëŠ”ì§€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"ì¼ê´€ì„± ìˆëŠ” ì‚¬ìš©ì ê²½í—˜ ì œê³µ: ë§Œì•½ HTML ì¶œë ¥ì´ ì—¬ì „íˆ ì§€ì›ë˜ëŠ” ê¸°ëŠ¥ì´ë¼ë©´, ìŠ¤íƒ€ì¼ ë‹¨ìˆœí™”ë¡œ ì¸í•´ ì •ë³´ ì „ë‹¬ë ¥ì´ ì €í•˜ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ê³¼ HTML ì¶œë ¥ ê°„ì˜ ì‚¬ìš©ì ê²½í—˜ ì¼ê´€ì„±ë„ ê³ ë ¤í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any, Optional\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef parse_date_from_filename(filename: str) -> Optional[datetime]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    # YYYYMMDD_HHMMSS í˜•ì‹ ê²€ìƒ‰\\\\n    if len(parts) >= 2:\\\\n        # ì ‘ë‘ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: YYYYMMDD_HHMMSS_...\\\\n        if (\\\\n            parts[0].isdigit()\\\\n            and len(parts[0]) == 8\\\\n            and parts[1].isdigit()\\\\n            and len(parts[1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì ‘ë¯¸ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: ..._YYYYMMDD_HHMMSS\\\\n        if (\\\\n            parts[-2].isdigit()\\\\n            and len(parts[-2]) == 8\\\\n            and parts[-1].isdigit()\\\\n            and len(parts[-1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì¤‘ê°„ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°\\\\n        for i in range(len(parts) - 1):\\\\n            if (\\\\n                parts[i].isdigit()\\\\n                and len(parts[i]) == 8\\\\n                and parts[i + 1].isdigit()\\\\n                and len(parts[i + 1]) == 6\\\\n            ):\\\\n                try:\\\\n                    return datetime.strptime(\\\\n                        f\\\\\\\"{parts[i]}_{parts[i + 1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\"\\\\n                    )\\\\n                except ValueError:\\\\n                    pass\\\\n\\\\n    return None\\\\n\\\\n\\\\ndef extract_model_name_from_filename(filename: str, date_parts_count: int = 0) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    if date_parts_count == 2 and len(parts) > 2:\\\\n        # ë‚ ì§œ ë¶€ë¶„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n    elif len(parts) > 0 and not parts[-1].isdigit():\\\\n        # ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return parts[-1]\\\\n\\\\n    return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef determine_file_format(file_path: Path) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ì˜ í˜•ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_suffix = file_path.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    if not file_suffix:\\\\n        # í™•ì¥ì ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬\\\\n        try:\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì¸ì§€ í™•ì¸\\\\n            llm_eval_dir = get_default_llm_eval_data_dir().resolve()\\\\n            file_parent = file_path.parent.resolve()\\\\n\\\\n            is_in_llm_eval_dir = str(file_parent).startswith(str(llm_eval_dir))\\\\n\\\\n            # íŒŒì¼ëª…ì— ë‚ ì§œ í˜•ì‹ì´ ìˆëŠ”ì§€ í™•ì¸\\\\n            parts = file_path.stem.split(\\\\\\\"_\\\\\\\")\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            if is_in_llm_eval_dir or has_date_format:\\\\n                return \\\\\\\"json\\\\\\\"\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return file_suffix if file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"] else \\\\\\\"txt\\\\\\\"\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # ë‚ ì§œ ì¶”ì¶œ\\\\n    date_candidate = parse_date_from_filename(file.stem)\\\\n    if date_candidate is None:\\\\n        date_candidate = mtime\\\\n        date_parts_count = 0\\\\n    else:\\\\n        date_parts_count = 2\\\\n\\\\n    # ëª¨ë¸ëª… ì¶”ì¶œ\\\\n    model_name_candidate = extract_model_name_from_filename(file.stem, date_parts_count)\\\\n\\\\n    # íŒŒì¼ í˜•ì‹ ê²°ì •\\\\n    file_format = determine_file_format(file)\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef display_file_info(file_info: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    col1, col2, col3 = st.columns(3)\\\\n    with col1:\\\\n        st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {file_info['name']}\\\\\\\")\\\\n    with col2:\\\\n        st.markdown(f\\\\\\\"**ë‚ ì§œ**: {file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\")\\\\n    with col3:\\\\n        st.markdown(f\\\\\\\"**í¬ê¸°**: {file_info['size_str']}\\\\\\\")\\\\n\\\\n\\\\ndef parse_json_content(content: str) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON ë¬¸ìì—´ì„ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        return json.loads(content)\\\\n    except json.JSONDecodeError:\\\\n        return {}\\\\n\\\\n\\\\ndef parse_prompt_content(prompt_list: list) -> list:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ë°ì´í„°ì˜ content í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(prompt_list, list):\\\\n        return prompt_list\\\\n\\\\n    parsed_list = []\\\\n    for item in prompt_list:\\\\n        item_copy = copy.deepcopy(item)\\\\n        if (\\\\n            isinstance(item_copy, dict)\\\\n            and \\\\\\\"content\\\\\\\" in item_copy\\\\n            and isinstance(item_copy[\\\\\\\"content\\\\\\\"], str)\\\\n        ):\\\\n            try:\\\\n                item_copy[\\\\\\\"content\\\\\\\"] = json.loads(item_copy[\\\\\\\"content\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n        parsed_list.append(item_copy)\\\\n\\\\n    return parsed_list\\\\n\\\\n\\\\ndef display_json_field_in_expander(key: str, value: Any) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON í•„ë“œë¥¼ ì ‘ì„ ìˆ˜ ìˆëŠ” expanderë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not value:  # Noneì´ê±°ë‚˜ ë¹ˆ ê°’\\\\n        with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n            st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n        return\\\\n\\\\n    with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n        if key == \\\\\\\"prompt\\\\\\\" and isinstance(value, list):\\\\n            parsed_value = parse_prompt_content(value)\\\\n            st.json(parsed_value, expanded=True)\\\\n        else:\\\\n            st.json(value, expanded=True)\\\\n\\\\n\\\\ndef display_review_result_raw_json(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ì›ë³¸ JSONì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## ì›ë³¸ JSON ë°ì´í„°\\\\\\\")\\\\n    data_to_display = copy.deepcopy(json_data)\\\\n\\\\n    # ì£¼ìš” í•„ë“œë¥¼ expanderë¡œ í‘œì‹œ\\\\n    target_keys = [\\\\\\\"prompt\\\\\\\", \\\\\\\"review_request\\\\\\\", \\\\\\\"review_response\\\\\\\"]\\\\n    for key in target_keys:\\\\n        if key in data_to_display:\\\\n            display_json_field_in_expander(key, data_to_display.pop(key))\\\\n\\\\n    # ë‚˜ë¨¸ì§€ ë°ì´í„° í‘œì‹œ\\\\n    if data_to_display:\\\\n        st.markdown(\\\\\\\"---\\\\\\\")\\\\n        st.markdown(\\\\\\\"### ì›ë³¸ ë°ì´í„°\\\\\\\")\\\\n        st.json(json_data, expanded=False)\\\\n\\\\n\\\\ndef filter_failed_test_cases(test_cases: list) -> tuple[list, int]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return [], 0\\\\n\\\\n    filtered_cases = []\\\\n\\\\n    for tc in test_cases:\\\\n        if not isinstance(tc, dict) or tc.get(\\\\\\\"success\\\\\\\") is not False:\\\\n            continue\\\\n\\\\n        tc_copy = copy.deepcopy(tc)\\\\n\\\\n        # metricsData ë‚´ë¶€ì—ì„œ ì‹¤íŒ¨í•œ í•­ëª©ë§Œ í•„í„°ë§\\\\n        if \\\\\\\"metricsData\\\\\\\" in tc_copy and isinstance(tc_copy[\\\\\\\"metricsData\\\\\\\"], list):\\\\n            filtered_metrics = [\\\\n                m\\\\n                for m in tc_copy[\\\\\\\"metricsData\\\\\\\"]\\\\n                if isinstance(m, dict) and m.get(\\\\\\\"success\\\\\\\") is False\\\\n            ]\\\\n            tc_copy[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics or []\\\\n\\\\n        filtered_cases.append(tc_copy)\\\\n\\\\n    return filtered_cases, len(filtered_cases)\\\\n\\\\n\\\\ndef parse_test_case_inputs(test_cases: list) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ì…ë ¥ í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return\\\\n\\\\n    for test_case in test_cases:\\\\n        if not isinstance(test_case, dict):\\\\n            continue\\\\n\\\\n        # input í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"input\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"input\\\\\\\"], str):\\\\n            try:\\\\n                parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                if isinstance(parsed_input, list):\\\\n                    parsed_input = parse_prompt_content(parsed_input)\\\\n                test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n        # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"actualOutput\\\\\\\"], str):\\\\n            try:\\\\n                test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(test_case[\\\\\\\"actualOutput\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n\\\\ndef display_llm_eval_results(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ë°ì´í„° ë³µì‚¬\\\\n    display_data = copy.deepcopy(json_data)\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ ê³„ì‚°\\\\n    test_cases = (\\\\n        display_data.get(\\\\\\\"testCases\\\\\\\", []) if isinstance(display_data, dict) else []\\\\n    )\\\\n    num_total_cases = len(test_cases) if isinstance(test_cases, list) else 0\\\\n\\\\n    # í•„í„°ë§ ì»¨íŠ¸ë¡¤\\\\n    col_checkbox, col_count = st.columns([0.8, 0.2])\\\\n    with col_checkbox:\\\\n        filter_failed_tests = st.checkbox(\\\\n            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n        )\\\\n\\\\n    # í•„í„°ë§ ì ìš©\\\\n    num_displayed_cases = num_total_cases\\\\n    if (\\\\n        filter_failed_tests\\\\n        and isinstance(display_data, dict)\\\\n        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n    ):\\\\n        filtered_cases, num_displayed_cases = filter_failed_test_cases(\\\\n            display_data[\\\\\\\"testCases\\\\\\\"]\\\\n        )\\\\n        display_data[\\\\\\\"testCases\\\\\\\"] = filtered_cases\\\\n        count_caption_text = (\\\\n            f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n        )\\\\n    else:\\\\n        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n    with col_count:\\\\n        st.caption(count_caption_text)\\\\n\\\\n    # ì…ë ¥ í•„ë“œ íŒŒì‹±\\\\n    if isinstance(display_data, dict) and \\\\\\\"testCases\\\\\\\" in display_data:\\\\n        parse_test_case_inputs(display_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n    # ê²°ê³¼ í‘œì‹œ\\\\n    st.json(display_data, expanded=False)\\\\n\\\\n\\\\ndef display_review_result(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTMLë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if \\\\\\\"review_response\\\\\\\" not in json_data or not json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        review_response = ReviewResponse.model_validate(json_data[\\\\\\\"review_response\\\\\\\"])\\\\n        formatter = ReviewFormatter()\\\\n        html_content = formatter.to_html(review_response)\\\\n        st.html(html_content)\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n        st.json(json_data[\\\\\\\"review_response\\\\\\\"], expanded=False)\\\\n\\\\n\\\\ndef load_and_display_file_content(file_path: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ë‚´ìš©ì„ ë¡œë“œí•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        format = determine_file_format(file_path)\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            json_data = parse_json_content(content)\\\\n            if not json_data:\\\\n                st.error(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ JSON í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n                st.text(content)\\\\n                return\\\\n\\\\n            view_type = st.session_state.get(\\\\\\\"view_type\\\\\\\")\\\\n\\\\n            if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                    st.session_state.show_raw_json = False\\\\n\\\\n                show_raw_json = st.checkbox(\\\\n                    \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                )\\\\n\\\\n                if show_raw_json:\\\\n                    display_review_result_raw_json(json_data)\\\\n                else:\\\\n                    display_review_result(json_data)\\\\n\\\\n            elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                display_llm_eval_results(json_data)\\\\n        else:\\\\n            # í…ìŠ¤íŠ¸ íŒŒì¼ì€ ê·¸ëŒ€ë¡œ í‘œì‹œ\\\\n            st.text(content)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef sort_file_infos(\\\\n    file_infos: list[dict[str, Any]], sort_option: str\\\\n) -> list[dict[str, Any]]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ ëª©ë¡ì„ ì •ë ¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n    return file_infos\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # ë·° íƒ€ì… ì„¸ì…˜ ì €ì¥\\\\n    st.session_state.view_type = view_type\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ì •ë³´ ìƒì„±\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    file_infos = sort_file_infos(file_infos, sort_option)\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´ì™€ ë‚´ìš© í‘œì‹œ\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    display_file_info(selected_file_info)\\\\n    load_and_display_file_content(selected_file_info[\\\\\\\"path\\\\\\\"])\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    file_path = os.path.abspath(__file__)\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import (\\\\n    get_default_raw_log_dir,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_prompt_dir,\\\\n    get_default_review_request_dir,\\\\n)\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ui.py íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ê³ , ê·¸ ì•„ë˜ data í´ë”ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_merged_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":  # macOS\\\\n        return (\\\\n            Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n        )\\\\n    elif sys.platform == \\\\\\\"win32\\\\\\\":  # Windows\\\\n        return Path(os.getenv(\\\\\\\"APPDATA\\\\\\\", \\\\\\\"\\\\\\\")) / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n    else:  # Linux ë“± ê¸°íƒ€\\\\n        return Path.home() / \\\\\\\".config\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n\\\\n\\\\ndef get_result_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\n    logger.warning(\\\\n        \\\\\\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n    )\\\\n    return []\\\\n\\\\n\\\\ndef get_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_raw_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_review_request_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    request_dir = get_default_review_request_dir()\\\\n    if not request_dir.exists():\\\\n        return []\\\\n\\\\n    request_files = list(request_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return request_files\\\\n\\\\n\\\\ndef get_review_prompt_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    if not prompt_dir.exists():\\\\n        return []\\\\n\\\\n    prompt_files = list(prompt_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return prompt_files\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    # data í´ë” ë‚´ ëª¨ë“  íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ (í™•ì¥ì ë¬´ê´€)\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_merged_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    merged_data_dir = get_default_merged_data_dir()\\\\n    if not merged_data_dir.exists():\\\\n        return []\\\\n\\\\n    merged_files = list(merged_data_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return merged_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\\\n    model_name_candidate = \\\\\\\"\\\\\\\"\\\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\\\n\\\\n    try:\\\\n        parts = file.stem.split(\\\\\\\"_\\\\\\\")\\\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\\\n        if len(parts) >= 3:\\\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\\\n            if (\\\\n                parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\\\n            elif (\\\\n                parts[-2].isdigit()\\\\n                and len(parts[-2]) == 8\\\\n                and parts[-1].isdigit()\\\\n                and len(parts[-1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[:-2])\\\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n                model_name_candidate = parts[-1]\\\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\\\n                if (\\\\n                    len(parts) >= 3\\\\n                    and parts[-2].isdigit()\\\\n                    and len(parts[-2]) == 6\\\\n                    and parts[-3].isdigit()\\\\n                    and len(parts[-3]) == 8\\\\n                ):\\\\n                    date_str = f\\\\\\\"{parts[-3]}_{parts[-2]}\\\\\\\"\\\\n                    try:\\\\n                        date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                    except ValueError:\\\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\\\n        elif (\\\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = file.stem\\\\n        elif (\\\\n            len(parts) == 1 and not parts[0].isdigit()\\\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = parts[0]\\\\n\\\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\\\n        pass  # model_name_candidate = \\\\\\\"\\\\\\\", date_candidate = mtime ìœ ì§€\\\\n\\\\n    file_suffix = file.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\\\n    if not file_suffix:\\\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\\\n        try:\\\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\\\n\\\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\\\n            file_parent_resolved = file.parent.resolve()\\\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\\\n\\\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\\\n            file_parent_str = str(file_parent_resolved)\\\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\\\n\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\\\n\\\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            if is_in_llm_eval_dir:\\\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            elif has_date_format:\\\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            else:\\\\n                file_format = \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\\\n            file_format = \\\\\\\"txt\\\\\\\"\\\\n    elif file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"]:\\\\n        file_format = file_suffix\\\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\\\n        file_format = \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any, Optional\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef parse_date_from_filename(filename: str) -> Optional[datetime]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ì •ë³´ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    # YYYYMMDD_HHMMSS í˜•ì‹ ê²€ìƒ‰\\\\n    if len(parts) >= 2:\\\\n        # ì ‘ë‘ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: YYYYMMDD_HHMMSS_...\\\\n        if (\\\\n            parts[0].isdigit()\\\\n            and len(parts[0]) == 8\\\\n            and parts[1].isdigit()\\\\n            and len(parts[1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì ‘ë¯¸ì‚¬ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°: ..._YYYYMMDD_HHMMSS\\\\n        if (\\\\n            parts[-2].isdigit()\\\\n            and len(parts[-2]) == 8\\\\n            and parts[-1].isdigit()\\\\n            and len(parts[-1]) == 6\\\\n        ):\\\\n            try:\\\\n                return datetime.strptime(f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            except ValueError:\\\\n                pass\\\\n\\\\n        # ì¤‘ê°„ì— ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°\\\\n        for i in range(len(parts) - 1):\\\\n            if (\\\\n                parts[i].isdigit()\\\\n                and len(parts[i]) == 8\\\\n                and parts[i + 1].isdigit()\\\\n                and len(parts[i + 1]) == 6\\\\n            ):\\\\n                try:\\\\n                    return datetime.strptime(\\\\n                        f\\\\\\\"{parts[i]}_{parts[i + 1]}\\\\\\\", \\\\\\\"%Y%m%d_%H%M%S\\\\\\\"\\\\n                    )\\\\n                except ValueError:\\\\n                    pass\\\\n\\\\n    return None\\\\n\\\\n\\\\ndef extract_model_name_from_filename(filename: str, date_parts_count: int = 0) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parts = filename.split(\\\\\\\"_\\\\\\\")\\\\n\\\\n    if date_parts_count == 2 and len(parts) > 2:\\\\n        # ë‚ ì§œ ë¶€ë¶„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n    elif len(parts) > 0 and not parts[-1].isdigit():\\\\n        # ë§ˆì§€ë§‰ ë¶€ë¶„ì´ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n        return parts[-1]\\\\n\\\\n    return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef determine_file_format(file_path: Path) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ì˜ í˜•ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_suffix = file_path.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    if not file_suffix:\\\\n        # í™•ì¥ì ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬\\\\n        try:\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì¸ì§€ í™•ì¸\\\\n            llm_eval_dir = get_default_llm_eval_data_dir().resolve()\\\\n            file_parent = file_path.parent.resolve()\\\\n\\\\n            is_in_llm_eval_dir = str(file_parent).startswith(str(llm_eval_dir))\\\\n\\\\n            # íŒŒì¼ëª…ì— ë‚ ì§œ í˜•ì‹ì´ ìˆëŠ”ì§€ í™•ì¸\\\\n            parts = file_path.stem.split(\\\\\\\"_\\\\\\\")\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            if is_in_llm_eval_dir or has_date_format:\\\\n                return \\\\\\\"json\\\\\\\"\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            return \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return file_suffix if file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"] else \\\\\\\"txt\\\\\\\"\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # ë‚ ì§œ ì¶”ì¶œ\\\\n    date_candidate = parse_date_from_filename(file.stem)\\\\n    if date_candidate is None:\\\\n        date_candidate = mtime\\\\n        date_parts_count = 0\\\\n    else:\\\\n        date_parts_count = 2\\\\n\\\\n    # ëª¨ë¸ëª… ì¶”ì¶œ\\\\n    model_name_candidate = extract_model_name_from_filename(file.stem, date_parts_count)\\\\n\\\\n    # íŒŒì¼ í˜•ì‹ ê²°ì •\\\\n    file_format = determine_file_format(file)\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n```\\\", \\\"line_number\\\": 9}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef display_file_info(file_info: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    col1, col2, col3 = st.columns(3)\\\\n    with col1:\\\\n        st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {file_info['name']}\\\\\\\")\\\\n    with col2:\\\\n        st.markdown(f\\\\\\\"**ë‚ ì§œ**: {file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\")\\\\n    with col3:\\\\n        st.markdown(f\\\\\\\"**í¬ê¸°**: {file_info['size_str']}\\\\\\\")\\\\n\\\\n\\\\ndef parse_json_content(content: str) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON ë¬¸ìì—´ì„ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        return json.loads(content)\\\\n    except json.JSONDecodeError:\\\\n        return {}\\\\n\\\\n\\\\ndef parse_prompt_content(prompt_list: list) -> list:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ë°ì´í„°ì˜ content í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(prompt_list, list):\\\\n        return prompt_list\\\\n\\\\n    parsed_list = []\\\\n    for item in prompt_list:\\\\n        item_copy = copy.deepcopy(item)\\\\n        if (\\\\n            isinstance(item_copy, dict)\\\\n            and \\\\\\\"content\\\\\\\" in item_copy\\\\n            and isinstance(item_copy[\\\\\\\"content\\\\\\\"], str)\\\\n        ):\\\\n            try:\\\\n                item_copy[\\\\\\\"content\\\\\\\"] = json.loads(item_copy[\\\\\\\"content\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n        parsed_list.append(item_copy)\\\\n\\\\n    return parsed_list\\\\n\\\\n\\\\ndef display_json_field_in_expander(key: str, value: Any) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"JSON í•„ë“œë¥¼ ì ‘ì„ ìˆ˜ ìˆëŠ” expanderë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not value:  # Noneì´ê±°ë‚˜ ë¹ˆ ê°’\\\\n        with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n            st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n        return\\\\n\\\\n    with st.expander(f\\\\\\\"{key} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False):\\\\n        if key == \\\\\\\"prompt\\\\\\\" and isinstance(value, list):\\\\n            parsed_value = parse_prompt_content(value)\\\\n            st.json(parsed_value, expanded=True)\\\\n        else:\\\\n            st.json(value, expanded=True)\\\\n\\\\n\\\\ndef display_review_result_raw_json(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ì›ë³¸ JSONì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## ì›ë³¸ JSON ë°ì´í„°\\\\\\\")\\\\n    data_to_display = copy.deepcopy(json_data)\\\\n\\\\n    # ì£¼ìš” í•„ë“œë¥¼ expanderë¡œ í‘œì‹œ\\\\n    target_keys = [\\\\\\\"prompt\\\\\\\", \\\\\\\"review_request\\\\\\\", \\\\\\\"review_response\\\\\\\"]\\\\n    for key in target_keys:\\\\n        if key in data_to_display:\\\\n            display_json_field_in_expander(key, data_to_display.pop(key))\\\\n\\\\n    # ë‚˜ë¨¸ì§€ ë°ì´í„° í‘œì‹œ\\\\n    if data_to_display:\\\\n        st.markdown(\\\\\\\"---\\\\\\\")\\\\n        st.markdown(\\\\\\\"### ì›ë³¸ ë°ì´í„°\\\\\\\")\\\\n        st.json(json_data, expanded=False)\\\\n\\\\n\\\\ndef filter_failed_test_cases(test_cases: list) -> tuple[list, int]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return [], 0\\\\n\\\\n    filtered_cases = []\\\\n\\\\n    for tc in test_cases:\\\\n        if not isinstance(tc, dict) or tc.get(\\\\\\\"success\\\\\\\") is not False:\\\\n            continue\\\\n\\\\n        tc_copy = copy.deepcopy(tc)\\\\n\\\\n        # metricsData ë‚´ë¶€ì—ì„œ ì‹¤íŒ¨í•œ í•­ëª©ë§Œ í•„í„°ë§\\\\n        if \\\\\\\"metricsData\\\\\\\" in tc_copy and isinstance(tc_copy[\\\\\\\"metricsData\\\\\\\"], list):\\\\n            filtered_metrics = [\\\\n                m\\\\n                for m in tc_copy[\\\\\\\"metricsData\\\\\\\"]\\\\n                if isinstance(m, dict) and m.get(\\\\\\\"success\\\\\\\") is False\\\\n            ]\\\\n            tc_copy[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics or []\\\\n\\\\n        filtered_cases.append(tc_copy)\\\\n\\\\n    return filtered_cases, len(filtered_cases)\\\\n\\\\n\\\\ndef parse_test_case_inputs(test_cases: list) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì˜ ì…ë ¥ í•„ë“œë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not isinstance(test_cases, list):\\\\n        return\\\\n\\\\n    for test_case in test_cases:\\\\n        if not isinstance(test_case, dict):\\\\n            continue\\\\n\\\\n        # input í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"input\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"input\\\\\\\"], str):\\\\n            try:\\\\n                parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                if isinstance(parsed_input, list):\\\\n                    parsed_input = parse_prompt_content(parsed_input)\\\\n                test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n        # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n        if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(test_case[\\\\\\\"actualOutput\\\\\\\"], str):\\\\n            try:\\\\n                test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(test_case[\\\\\\\"actualOutput\\\\\\\"])\\\\n            except json.JSONDecodeError:\\\\n                pass\\\\n\\\\n\\\\ndef display_llm_eval_results(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ë°ì´í„° ë³µì‚¬\\\\n    display_data = copy.deepcopy(json_data)\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìˆ˜ ê³„ì‚°\\\\n    test_cases = (\\\\n        display_data.get(\\\\\\\"testCases\\\\\\\", []) if isinstance(display_data, dict) else []\\\\n    )\\\\n    num_total_cases = len(test_cases) if isinstance(test_cases, list) else 0\\\\n\\\\n    # í•„í„°ë§ ì»¨íŠ¸ë¡¤\\\\n    col_checkbox, col_count = st.columns([0.8, 0.2])\\\\n    with col_checkbox:\\\\n        filter_failed_tests = st.checkbox(\\\\n            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n        )\\\\n\\\\n    # í•„í„°ë§ ì ìš©\\\\n    num_displayed_cases = num_total_cases\\\\n    if (\\\\n        filter_failed_tests\\\\n        and isinstance(display_data, dict)\\\\n        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n    ):\\\\n        filtered_cases, num_displayed_cases = filter_failed_test_cases(\\\\n            display_data[\\\\\\\"testCases\\\\\\\"]\\\\n        )\\\\n        display_data[\\\\\\\"testCases\\\\\\\"] = filtered_cases\\\\n        count_caption_text = (\\\\n            f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n        )\\\\n    else:\\\\n        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n    with col_count:\\\\n        st.caption(count_caption_text)\\\\n\\\\n    # ì…ë ¥ í•„ë“œ íŒŒì‹±\\\\n    if isinstance(display_data, dict) and \\\\\\\"testCases\\\\\\\" in display_data:\\\\n        parse_test_case_inputs(display_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n    # ê²°ê³¼ í‘œì‹œ\\\\n    st.json(display_data, expanded=False)\\\\n\\\\n\\\\ndef display_review_result(json_data: dict[str, Any]) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTMLë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if \\\\\\\"review_response\\\\\\\" not in json_data or not json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        review_response = ReviewResponse.model_validate(json_data[\\\\\\\"review_response\\\\\\\"])\\\\n        formatter = ReviewFormatter()\\\\n        html_content = formatter.to_html(review_response)\\\\n        st.html(html_content)\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n        st.json(json_data[\\\\\\\"review_response\\\\\\\"], expanded=False)\\\\n\\\\n\\\\ndef load_and_display_file_content(file_path: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ë‚´ìš©ì„ ë¡œë“œí•˜ê³  í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        format = determine_file_format(file_path)\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            json_data = parse_json_content(content)\\\\n            if not json_data:\\\\n                st.error(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ JSON í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n                st.text(content)\\\\n                return\\\\n\\\\n            view_type = st.session_state.get(\\\\\\\"view_type\\\\\\\")\\\\n\\\\n            if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                    st.session_state.show_raw_json = False\\\\n\\\\n                show_raw_json = st.checkbox(\\\\n                    \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                )\\\\n\\\\n                if show_raw_json:\\\\n                    display_review_result_raw_json(json_data)\\\\n                else:\\\\n                    display_review_result(json_data)\\\\n\\\\n            elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                display_llm_eval_results(json_data)\\\\n        else:\\\\n            # í…ìŠ¤íŠ¸ íŒŒì¼ì€ ê·¸ëŒ€ë¡œ í‘œì‹œ\\\\n            st.text(content)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef sort_file_infos(\\\\n    file_infos: list[dict[str, Any]], sort_option: str\\\\n) -> list[dict[str, Any]]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ ëª©ë¡ì„ ì •ë ¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n    return file_infos\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 178}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    log_dir = get_default_raw_log_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    request_dir = get_default_review_request_dir()\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # ë·° íƒ€ì… ì„¸ì…˜ ì €ì¥\\\\n    st.session_state.view_type = view_type\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 437}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n            `â€‹``\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n        files = get_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n        files = get_review_request_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ì„ ì •ë³´ì™€ í•¨ê»˜ ì €ì¥\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            `â€‹``\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ì •ë³´ ìƒì„±\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n```\\\", \\\"line_number\\\": 475}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    file_infos = sort_file_infos(file_infos, sort_option)\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n```\\\", \\\"line_number\\\": 493}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    selected_file_path = selected_file_info[\\\\\\\"path\\\\\\\"]\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n    try:\\\\n        with open(selected_file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        # íŒŒì¼ ì •ë³´ í‘œì‹œ\\\\n        col1, col2, col3 = st.columns(3)\\\\n        with col1:\\\\n            st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {selected_file_info['name']}\\\\\\\")\\\\n        with col2:\\\\n            st.markdown(\\\\n                f\\\\\\\"**ë‚ ì§œ**: {selected_file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\"\\\\n            )\\\\n        with col3:\\\\n            st.markdown(f\\\\\\\"**í¬ê¸°**: {selected_file_info['size_str']}\\\\\\\")\\\\n\\\\n        # íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ\\\\n        format = selected_file_info[\\\\\\\"format\\\\\\\"]\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                        st.session_state.show_raw_json = False\\\\n                    show_raw_json = st.checkbox(\\\\n                        \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                    )\\\\n\\\\n                    if show_raw_json:\\\\n                        st.markdown(\\\\\\\"## ì›ë³¸ JSON ë°ì´í„°\\\\\\\")\\\\n                        data_to_display = copy.deepcopy(json_data)\\\\n                        target_keys_in_order = [\\\\n                            \\\\\\\"prompt\\\\\\\",\\\\n                            \\\\\\\"review_request\\\\\\\",\\\\n                            \\\\\\\"review_response\\\\\\\",\\\\n                        ]\\\\n\\\\n                        for key_to_expand in target_keys_in_order:\\\\n                            if key_to_expand in data_to_display:\\\\n                                value = data_to_display.pop(key_to_expand)\\\\n                                with st.expander(\\\\n                                    f\\\\\\\"{key_to_expand} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False\\\\n                                ):\\\\n                                    if key_to_expand == \\\\\\\"prompt\\\\\\\" and isinstance(\\\\n                                        value, list\\\\n                                    ):\\\\n                                        parsed_prompt_list = []\\\\n                                        for p_item in value:\\\\n                                            p_item_copy = copy.deepcopy(p_item)\\\\n                                            if (\\\\n                                                isinstance(p_item_copy, dict)\\\\n                                                and \\\\\\\"content\\\\\\\" in p_item_copy\\\\n                                                and isinstance(\\\\n                                                    p_item_copy[\\\\\\\"content\\\\\\\"], str\\\\n                                                )\\\\n                                            ):\\\\n                                                try:\\\\n                                                    p_item_copy[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                        p_item_copy[\\\\\\\"content\\\\\\\"]\\\\n                                                    )\\\\n                                                except json.JSONDecodeError:\\\\n                                                    pass\\\\n                                            parsed_prompt_list.append(p_item_copy)\\\\n                                        st.json(parsed_prompt_list, expanded=True)\\\\n                                    elif value:  # Check if value is not None or empty\\\\n                                        st.json(value, expanded=True)\\\\n                                    else:\\\\n                                        st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n\\\\n                        if data_to_display:\\\\n                            st.markdown(\\\\\\\"---\\\\\\\")\\\\n                            st.markdown(\\\\\\\"### ì›ë³¸ ë°ì´í„°\\\\\\\")\\\\n                            st.json(json_data, expanded=False)\\\\n                    else:\\\\n                        if (\\\\n                            \\\\\\\"review_response\\\\\\\" in json_data\\\\n                            and json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                        ):\\\\n                            review_response = ReviewResponse.model_validate(\\\\n                                json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                            )\\\\n                            formatter = ReviewFormatter()\\\\n                            html_content = formatter.to_html(review_response)\\\\n                            st.markdown(html_content, unsafe_allow_html=True)\\\\n                        else:\\\\n                            st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data, expanded=False)\\\\n                elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## reviewRequest ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data, expanded=False)\\\\n                elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\\\\\")\\\\n                    if isinstance(json_data, list):\\\\n                        for item in json_data:\\\\n                            if (\\\\n                                isinstance(item, dict)\\\\n                                and \\\\\\\"content\\\\\\\" in item\\\\n                                and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                            ):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass\\\\n                    st.json(json_data, expanded=False)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    data_to_display = copy.deepcopy(json_data)\\\\n\\\\n                    target_keys_in_order = [\\\\n                        \\\\\\\"prompt\\\\\\\",\\\\n                        \\\\\\\"review_request\\\\\\\",\\\\n                        \\\\\\\"review_response\\\\\\\",\\\\n                    ]\\\\n\\\\n                    for key_to_expand in target_keys_in_order:\\\\n                        if key_to_expand in data_to_display:\\\\n                            value = data_to_display.pop(key_to_expand)\\\\n                            with st.expander(\\\\n                                f\\\\\\\"{key_to_expand} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False\\\\n                            ):\\\\n                                if key_to_expand == \\\\\\\"prompt\\\\\\\":\\\\n                                    parsed_prompt_content = []\\\\n                                    if isinstance(value, list):\\\\n                                        for item_prompt in value:\\\\n                                            item_c = copy.deepcopy(item_prompt)\\\\n                                            if (\\\\n                                                isinstance(item_c, dict)\\\\n                                                and \\\\\\\"content\\\\\\\" in item_c\\\\n                                                and isinstance(item_c[\\\\\\\"content\\\\\\\"], str)\\\\n                                            ):\\\\n                                                try:\\\\n                                                    item_c[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                        item_c[\\\\\\\"content\\\\\\\"]\\\\n                                                    )\\\\n                                                except json.JSONDecodeError:\\\\n                                                    pass\\\\n                                            parsed_prompt_content.append(item_c)\\\\n                                        st.json(parsed_prompt_content, expanded=True)\\\\n                                    else:\\\\n                                        st.json(value, expanded=True)  # Fallback\\\\n                                elif key_to_expand == \\\\\\\"review_response\\\\\\\":\\\\n                                    if value:\\\\n                                        try:\\\\n                                            review_response_obj = (\\\\n                                                ReviewResponse.model_validate(value)\\\\n                                            )\\\\n                                            formatter = ReviewFormatter()\\\\n                                            html_content = formatter.to_html(\\\\n                                                review_response_obj\\\\n                                            )\\\\n                                            st.markdown(\\\\n                                                html_content, unsafe_allow_html=True\\\\n                                            )\\\\n                                            with st.expander(\\\\n                                                f\\\\\\\"{key_to_expand} ì›ë³¸ JSON ë³´ê¸°\\\\\\\",\\\\n                                                expanded=False,\\\\n                                            ):\\\\n                                                st.json(value, expanded=True)\\\\n                                        except Exception:\\\\n                                            st.json(\\\\n                                                value, expanded=True\\\\n                                            )  # Fallback to raw JSON\\\\n                                    else:\\\\n                                        st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n                                elif (\\\\n                                    value\\\\n                                ):  # For review_request and other potential future keys\\\\n                                    st.json(value, expanded=True)\\\\n                                else:\\\\n                                    st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n\\\\n                    if data_to_display:\\\\n                        st.markdown(\\\\\\\"---\\\\\\\")\\\\n                        st.markdown(\\\\\\\"### ê¸°íƒ€ ë¡œê·¸ ì •ë³´\\\\\\\")\\\\n                        st.json(data_to_display, expanded=False)\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n\\\\n                    num_total_cases = 0\\\\n                    if (\\\\n                        isinstance(json_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in json_data\\\\n                        and isinstance(json_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        num_total_cases = len(json_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n                    col_checkbox, col_count = st.columns(\\\\n                        [0.8, 0.2]\\\\n                    )  # ì²´í¬ë°•ìŠ¤ì™€ ì¹´ìš´íŠ¸ ì»¬ëŸ¼ ë¹„ìœ¨ ì¡°ì •\\\\n\\\\n                    with col_checkbox:\\\\n                        filter_failed_tests = st.checkbox(\\\\n                            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n                            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n                        )\\\\n\\\\n                    surviving_test_cases = []\\\\n                    if filter_failed_tests:\\\\n                        if (\\\\n                            isinstance(display_data, dict)\\\\n                            and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                            and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                        ):\\\\n                            surviving_test_cases = []\\\\n                            for tc_original in display_data[\\\\n                                \\\\\\\"testCases\\\\\\\"\\\\n                            ]:  # ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ\\\\n                                if (\\\\n                                    isinstance(tc_original, dict)\\\\n                                    and tc_original.get(\\\\\\\"success\\\\\\\") is False\\\\n                                ):\\\\n                                    # testCase.successê°€ falseì¸ ê²½ìš°ì—ë§Œ tc_to_add ë¡œì§ ìˆ˜í–‰\\\\n                                    tc_to_add = copy.deepcopy(\\\\n                                        tc_original\\\\n                                    )  # ë³µì‚¬ë³¸ ì‚¬ìš©\\\\n\\\\n                                    # metricsData ë‚´ë¶€ë¥¼ successê°€ falseì¸ í•­ëª©ë§Œ ë‚¨ë„ë¡ í•„í„°ë§\\\\n                                    if \\\\\\\"metricsData\\\\\\\" in tc_to_add and isinstance(\\\\n                                        tc_to_add[\\\\\\\"metricsData\\\\\\\"], list\\\\n                                    ):\\\\n                                        filtered_metrics = [\\\\n                                            m\\\\n                                            for m in tc_to_add[\\\\\\\"metricsData\\\\\\\"]\\\\n                                            if isinstance(m, dict)\\\\n                                            and m.get(\\\\\\\"success\\\\\\\") is False\\\\n                                        ]\\\\n                                        # metricsDataê°€ ë¹„ì–´ìˆì§€ ì•Šê±°ë‚˜, ì›ë˜ metricsDataê°€ ìˆì—ˆë˜ ê²½ìš°ì—ë§Œ í• ë‹¹\\\\n                                        # (í•­ìƒ metricsData í‚¤ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¡°ê±´ë¬¸ ì œê±° ê°€ëŠ¥)\\\\n                                        if (\\\\n                                            filtered_metrics\\\\n                                            or tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics\\\\n                                        elif (\\\\n                                            not filtered_metrics\\\\n                                            and tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            # ëª¨ë“  ë©”íŠ¸ë¦­ì´ trueì—¬ì„œ filtered_metricsê°€ ë¹„ì—ˆì§€ë§Œ, ì›ë˜ metricsDataê°€ ìˆì—ˆë‹¤ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì„¤ì •\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = []\\\\n\\\\n                                    surviving_test_cases.append(tc_to_add)\\\\n\\\\n                            display_data[\\\\\\\"testCases\\\\\\\"] = surviving_test_cases\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\\\n                        # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n                    # í•„í„°ë§ë˜ì—ˆê±°ë‚˜ ì „ì²´ testCasesì— ëŒ€í•´ ë‚´ë¶€ í•„ë“œ íŒŒì‹± ì ìš©\\\\n                    if (\\\\n                        isinstance(display_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                        and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        for test_case in display_data[\\\\\\\"testCases\\\\\\\"]:\\\\n                            if isinstance(test_case, dict):\\\\n                                # input í•„ë“œ ì²˜ë¦¬: í”„ë¡¬í”„íŠ¸ì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ íŒŒì‹±\\\\n                                if \\\\\\\"input\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"input\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                                        if isinstance(parsed_input, list):\\\\n                                            for item in parsed_input:\\\\n                                                if (\\\\n                                                    isinstance(item, dict)\\\\n                                                    and \\\\\\\"content\\\\\\\" in item\\\\n                                                    and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                                                ):\\\\n                                                    try:\\\\n                                                        item[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                            item[\\\\\\\"content\\\\\\\"]\\\\n                                                        )\\\\n                                                    except json.JSONDecodeError:\\\\n                                                        pass\\\\n                                        test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n\\\\n                                # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n                                if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"actualOutput\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(\\\\n                                            test_case[\\\\\\\"actualOutput\\\\\\\"]\\\\n                                        )\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n                    st.json(display_data, expanded=False)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n        elif format == \\\\\\\"html\\\\\\\":\\\\n            # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\\\n            # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\\\n            # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\\\n            html_content_with_style = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            <div style=\\\\\\\"height: 600px; overflow-y: scroll;\\\\\\\">\\\\n                {content}\\\\n            </div>\\\\n            \\\\\\\"\\\\\\\"\\\\\\\"\\\\n            # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\\\n            st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n        else:\\\\n            # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\\\n            st.markdown(content, unsafe_allow_html=True)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    # í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œ\\\\n    file_path = os.path.abspath(__file__)\\\\n\\\\n    # í¬íŠ¸ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    # Streamlit ì‹¤í–‰\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´ì™€ ë‚´ìš© í‘œì‹œ\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    display_file_info(selected_file_info)\\\\n    load_and_display_file_content(selected_file_info[\\\\\\\"path\\\\\\\"])\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    file_path = os.path.abspath(__file__)\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 506}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 63, \"file\": \"reviewer/src/ui.py\", \"description\": \"`parse_date_from_filename` í•¨ìˆ˜ ë‚´ì—ì„œ `datetime.strptime` í˜¸ì¶œ ì‹œ ë°œìƒí•˜ëŠ” `ValueError`ê°€ `pass`ë¡œ ì²˜ë¦¬ë˜ì–´, ë‚ ì§œ í˜•ì‹ íŒŒì‹± ì‹¤íŒ¨ê°€ ì¡°ìš©íˆ ë¬´ì‹œë©ë‹ˆë‹¤. ì´ëŠ” ë””ë²„ê¹…ì„ ì–´ë µê²Œ ë§Œë“¤ê³ , ì‚¬ìš©ìê°€ íŒŒì¼ëª…ì— ë‚ ì§œê°€ ìˆë‹¤ê³  ì˜ˆìƒí–ˆì§€ë§Œ í”„ë¡œê·¸ë¨ì´ ì´ë¥¼ ì¸ì§€í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`ValueError` ë°œìƒ ì‹œ `None`ì„ ë°˜í™˜í•˜ê¸° ì „ì— ê²½ê³  ë˜ëŠ” ë””ë²„ê·¸ ë¡œê·¸ë¥¼ ë‚¨ê²¨ ë¬¸ì œë¥¼ ì¸ì§€í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. í•¨ìˆ˜ëŠ” ì´ë¯¸ ì—¬ëŸ¬ íŒ¨í„´ì„ ì‹œë„í•˜ê³  ë§ˆì§€ë§‰ì— `None`ì„ ë°˜í™˜í•˜ë¯€ë¡œ, ë¡œê¹… ì¶”ê°€ê°€ ì£¼ëœ ê°œì„ ì ì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"            try:\\n                return datetime.strptime(f\\\"{parts[0]}_{parts[1]}\\\", \\\"%Y%m%d_%H%M%S\\\")\\n            except ValueError:\\n                pass\", \"improved_code\": \"            try:\\n                return datetime.strptime(f\\\"{parts[0]}_{parts[1]}\\\", \\\"%Y%m%d_%H%M%S\\\")\\n            except ValueError:\\n                logger.debug(f\\\"Failed to parse date from parts: {parts[0]}_{parts[1]} in YYYYMMDD_HHMMSS_... pattern\\\")\\n                pass\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 17, \"file\": \"reviewer/src/ui.py\", \"description\": \"`sys.path.append`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì‘ë™í•˜ì§€ë§Œ, í”„ë¡œì íŠ¸ê°€ ì»¤ì§€ê±°ë‚˜ ë‹¤ë¥¸ í™˜ê²½ìœ¼ë¡œ ë°°í¬ë  ë•Œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Pythonì˜ íŒ¨í‚¤ì§• ì‹œìŠ¤í…œì„ í™œìš©í•˜ëŠ” ê²ƒì´ ë” ê²¬ê³ í•œ ë°©ë²•ì…ë‹ˆë‹¤.\", \"suggestion\": \"í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `setup.py` ë˜ëŠ” `pyproject.toml`ì„ êµ¬ì„±í•˜ê³ , `pip install -e .`ì™€ ê°™ì´ ì„¤ì¹˜í•˜ì—¬ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê±°ë‚˜, ì‹¤í–‰ ì‹œ `PYTHONPATH` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê±°ë‚˜, `python -m reviewer.src.ui`ì™€ ê°™ì´ ëª¨ë“ˆë¡œ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì´ ê²½ìš° ì½”ë“œ ë³€ê²½ ì—†ì´ ì‹¤í–‰ ë°©ì‹ë§Œ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\"..\\\")))\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\", \"improved_code\": \"# í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì‹¤í–‰ ë°©ì‹ ë³€ê²½ì„ í†µí•´ sys.path.append ì œê±° ê¶Œì¥\\n# ì˜ˆ: `python -m reviewer.src.ui` ë¡œ ì‹¤í–‰ ì‹œ ì•„ë˜ì™€ ê°™ì´ ì§ì ‘ ì„í¬íŠ¸ ê°€ëŠ¥\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 347, \"file\": \"reviewer/src/ui.py\", \"description\": \"`determine_file_format` í•¨ìˆ˜ëŠ” íŒŒì¼ í™•ì¥ìì— ë”°ë¼ \\\"html\\\" í˜•ì‹ì„ ë°˜í™˜í•  ìˆ˜ ìˆì§€ë§Œ, `load_and_display_file_content` í•¨ìˆ˜ì—ì„œëŠ” \\\"json\\\"ì´ ì•„ë‹Œ ëª¨ë“  íŒŒì¼ í˜•ì‹ì„ `st.text(content)`ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì´ì „ ì½”ë“œì—ì„œ ì§€ì›í–ˆë˜ ì¼ë°˜ HTML íŒŒì¼ì˜ ë Œë”ë§ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë§Œì•½ ì¼ë°˜ HTML íŒŒì¼(ë¦¬ë·° ê²°ê³¼ HTMLì´ ì•„ë‹Œ)ì„ ê³„ì†í•´ì„œ HTMLë¡œ ë Œë”ë§í•´ì•¼ í•œë‹¤ë©´, `load_and_display_file_content` í•¨ìˆ˜ì— \\\"html\\\" í˜•ì‹ì— ëŒ€í•œ ì²˜ë¦¬ ë¡œì§ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. `st.components.v1.html(content, height=600, scrolling=True)` ë˜ëŠ” `st.markdown(content, unsafe_allow_html=True)` (ë³´ì•ˆ ìœ„í—˜ ì¸ì§€ í•„ìš”) ì‚¬ìš©ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `st.html()`ì€ iframeì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë” ì•ˆì „í•œ ì„ íƒì…ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"        if format == \\\"json\\\":\\n            # ... json handling ...\\n        else:\\n            # í…ìŠ¤íŠ¸ íŒŒì¼ì€ ê·¸ëŒ€ë¡œ í‘œì‹œ\\n            st.text(content)\", \"improved_code\": \"        if format == \\\"json\\\":\\n            # ... json handling ...\\n        elif format == \\\"html\\\":\\n            st.components.v1.html(content, height=600, scrolling=True) # iframeì„ ì‚¬ìš©í•œ HTML ë Œë”ë§\\n        else: # txt, log ë“± ê¸°íƒ€ í…ìŠ¤íŠ¸ ê¸°ë°˜ íŒŒì¼\\n            st.text(content)\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 120, \"file\": \"reviewer/src/ui.py\", \"description\": \"`determine_file_format` í•¨ìˆ˜ ë‚´ í™•ì¥ì ì—†ëŠ” íŒŒì¼ì„ ì²˜ë¦¬í•˜ëŠ” `try-except Exception` ë¸”ë¡ì´ ë„ˆë¬´ ê´‘ë²”ìœ„í•œ ì˜ˆì™¸(bare `Exception`)ë¥¼ ì¡ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì˜¤ë¥˜ê¹Œì§€ ìˆ¨ê¸¸ ìˆ˜ ìˆì–´ ë””ë²„ê¹…ì„ ì–´ë µê²Œ ë§Œë“­ë‹ˆë‹¤.\", \"suggestion\": \"ê°€ëŠ¥í•œ íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: `OSError`, `AttributeError` ë“± ì˜ˆìƒë˜ëŠ” ì˜¤ë¥˜)ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¡ê±°ë‚˜, ìµœì†Œí•œ ë¡œê¹…ì„ ì¶”ê°€í•˜ì—¬ ì–´ë–¤ ì¢…ë¥˜ì˜ ì˜ˆì™¸ê°€ ë°œìƒí–ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¬¸ì œ ë°œìƒ ì‹œ ì›ì¸ íŒŒì•…ì´ ìš©ì´í•´ì§‘ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"        except Exception:\\n            return \\\"txt\\\"\", \"improved_code\": \"        except Exception as e:\\n            logger.warning(f\\\"Error determining file format for extensionless file {file_path}: {e}\\\", exc_info=True)\\n            return \\\"txt\\\"\"}], \"summary\": \"ì½”ë“œ ë³€ê²½ì€ Streamlit UI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëŒ€ëŒ€ì ì¸ ë¦¬íŒ©í† ë§ì„ í¬í•¨í•©ë‹ˆë‹¤. ë§ì€ ë‚´ë¶€ ë¡œì§ì´ ë” ì‘ê³  ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ í—¬í¼ í•¨ìˆ˜ë¡œ ë¶„ë¦¬ë˜ì–´ ì½”ë“œì˜ ëª¨ë“ˆì„±ê³¼ ê°€ë…ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤. íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ë° ëª¨ë¸ ì´ë¦„ì„ ì¶”ì¶œí•˜ëŠ” ë¡œì§, íŒŒì¼ í˜•ì‹ì„ ê²°ì •í•˜ëŠ” ë¡œì§, ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•(JSON, ë¦¬ë·° ê²°ê³¼, LLM í‰ê°€ ê²°ê³¼)ì„ í‘œì‹œí•˜ëŠ” ë¡œì§ì´ ê°œì„ ë˜ê³  ëª…í™•í•´ì¡ŒìŠµë‹ˆë‹¤. ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥(ì˜ˆ: ì›ì‹œ ë¡œê·¸, ê°œë³„ ìš”ì²­/í”„ë¡¬í”„íŠ¸ íŒŒì¼ ë³´ê¸°)ì´ ì œê±°ë˜ì–´ UIê°€ ê°„ì†Œí™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ì½”ë“œ í’ˆì§ˆê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"íŒŒì‹± í•¨ìˆ˜ ë‚´ì—ì„œ ì¡°ìš©íˆ ë„˜ì–´ê°€ëŠ”(pass) ì˜ˆì™¸ ì²˜ë¦¬ ë¶€ë¶„ì— ë¡œê¹…ì„ ì¶”ê°€í•˜ì—¬ ë””ë²„ê¹… ìš©ì´ì„±ì„ ë†’ì´ì„¸ìš”.\", \"ì¥ê¸°ì ì¸ ìœ ì§€ë³´ìˆ˜ì„±ì„ ìœ„í•´ `sys.path.append` ëŒ€ì‹  Python íŒ¨í‚¤ì§• í‘œì¤€ì´ë‚˜ `PYTHONPATH` ì„¤ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"ì¼ë°˜ HTML íŒŒì¼ ë Œë”ë§ ê¸°ëŠ¥ì´ ì˜ë„ì ìœ¼ë¡œ ì œê±°ëœ ê²ƒì¸ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ ê´€ë ¨ ë¡œì§ì„ ë³µì›í•˜ê±°ë‚˜ ëª…í™•íˆ í•˜ì„¸ìš”.\", \"ê´‘ë²”ìœ„í•œ `except Exception:` ì‚¬ìš© ì‹œ íŠ¹ì • ì˜ˆì™¸ë¥¼ ëª…ì‹œí•˜ê±°ë‚˜ ë¡œê¹…ì„ ì¶”ê°€í•˜ì—¬ ì˜¤ë¥˜ ì¶”ì ì„ ìš©ì´í•˜ê²Œ í•˜ì„¸ìš”.\", \"í° í•¨ìˆ˜ë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ëŠ” í˜„ì¬ì˜ ì¢‹ì€ ë¦¬íŒ©í† ë§ ê´€í–‰ì„ ê³„ì† ìœ ì§€í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ui.py íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ê³ , ê·¸ ì•„ë˜ data í´ë”ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    # data í´ë” ë‚´ ëª¨ë“  íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ (í™•ì¥ì ë¬´ê´€)\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\\\n    model_name_candidate = \\\\\\\"\\\\\\\"\\\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\\\n\\\\n    try:\\\\n        parts = file.stem.split(\\\\\\\"_\\\\\\\")\\\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\\\n        if len(parts) >= 3:\\\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\\\n            if (\\\\n                parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\\\n            elif (\\\\n                parts[-2].isdigit()\\\\n                and len(parts[-2]) == 8\\\\n                and parts[-1].isdigit()\\\\n                and len(parts[-1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[:-2])\\\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n                model_name_candidate = parts[-1]\\\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\\\n                if (\\\\n                    len(parts) >= 3\\\\n                    and parts[-2].isdigit()\\\\n                    and len(parts[-2]) == 6\\\\n                    and parts[-3].isdigit()\\\\n                    and len(parts[-3]) == 8\\\\n                ):\\\\n                    date_str = f\\\\\\\"{parts[-3]}_{parts[-2]}\\\\\\\"\\\\n                    try:\\\\n                        date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                    except ValueError:\\\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\\\n        elif (\\\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = file.stem\\\\n        elif (\\\\n            len(parts) == 1 and not parts[0].isdigit()\\\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = parts[0]\\\\n\\\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\\\n        pass  # model_name_candidate = \\\\\\\"\\\\\\\", date_candidate = mtime ìœ ì§€\\\\n\\\\n    file_suffix = file.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\\\n    if not file_suffix:\\\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\\\n        try:\\\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\\\n\\\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\\\n            file_parent_resolved = file.parent.resolve()\\\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\\\n\\\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\\\n            file_parent_str = str(file_parent_resolved)\\\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\\\n\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\\\n\\\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            if is_in_llm_eval_dir:\\\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            elif has_date_format:\\\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            else:\\\\n                file_format = \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\\\n            file_format = \\\\\\\"txt\\\\\\\"\\\\n    elif file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"]:\\\\n        file_format = file_suffix\\\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\\\n        file_format = \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ì„ ì •ë³´ì™€ í•¨ê»˜ ì €ì¥\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    selected_file_path = selected_file_info[\\\\\\\"path\\\\\\\"]\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n    try:\\\\n        with open(selected_file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        # íŒŒì¼ ì •ë³´ í‘œì‹œ\\\\n        col1, col2, col3 = st.columns(3)\\\\n        with col1:\\\\n            st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {selected_file_info['name']}\\\\\\\")\\\\n        with col2:\\\\n            st.markdown(\\\\n                f\\\\\\\"**ë‚ ì§œ**: {selected_file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\"\\\\n            )\\\\n        with col3:\\\\n            st.markdown(f\\\\\\\"**í¬ê¸°**: {selected_file_info['size_str']}\\\\\\\")\\\\n\\\\n        # íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ\\\\n        format = selected_file_info[\\\\\\\"format\\\\\\\"]\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    # ì›ë³¸ JSON ë°ì´í„° ë³´ê¸° ì²´í¬ë°•ìŠ¤ ì¶”ê°€\\\\n                    if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                        st.session_state.show_raw_json = False\\\\n                    show_raw_json = st.checkbox(\\\\n                        \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                    )\\\\n\\\\n                    if show_raw_json:\\\\n                        st.markdown(\\\\\\\"## ì›ë³¸ JSON ë°ì´í„°\\\\\\\")\\\\n                        data_to_display = copy.deepcopy(json_data)\\\\n                        target_keys_in_order = [\\\\n                            \\\\\\\"prompt\\\\\\\",\\\\n                            \\\\\\\"review_request\\\\\\\",\\\\n                            \\\\\\\"review_response\\\\\\\",\\\\n                        ]\\\\n\\\\n                        for key_to_expand in target_keys_in_order:\\\\n                            if key_to_expand in data_to_display:\\\\n                                value = data_to_display.pop(key_to_expand)\\\\n                                with st.expander(\\\\n                                    f\\\\\\\"{key_to_expand} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False\\\\n                                ):\\\\n                                    if key_to_expand == \\\\\\\"prompt\\\\\\\" and isinstance(\\\\n                                        value, list\\\\n                                    ):\\\\n                                        parsed_prompt_list = []\\\\n                                        for p_item in value:\\\\n                                            p_item_copy = copy.deepcopy(p_item)\\\\n                                            if (\\\\n                                                isinstance(p_item_copy, dict)\\\\n                                                and \\\\\\\"content\\\\\\\" in p_item_copy\\\\n                                                and isinstance(\\\\n                                                    p_item_copy[\\\\\\\"content\\\\\\\"], str\\\\n                                                )\\\\n                                            ):\\\\n                                                try:\\\\n                                                    p_item_copy[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                        p_item_copy[\\\\\\\"content\\\\\\\"]\\\\n                                                    )\\\\n                                                except json.JSONDecodeError:\\\\n                                                    pass\\\\n                                            parsed_prompt_list.append(p_item_copy)\\\\n                                        st.json(parsed_prompt_list, expanded=True)\\\\n                                    elif value:  # Check if value is not None or empty\\\\n                                        st.json(value, expanded=True)\\\\n                                    else:\\\\n                                        st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n\\\\n                        if data_to_display:\\\\n                            st.markdown(\\\\\\\"---\\\\\\\")\\\\n                            st.markdown(\\\\\\\"### ì›ë³¸ ë°ì´í„°\\\\\\\")\\\\n                            st.json(json_data, expanded=False)\\\\n                    else:\\\\n                        if (\\\\n                            \\\\\\\"review_response\\\\\\\" in json_data\\\\n                            and json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                        ):\\\\n                            review_response = ReviewResponse.model_validate(\\\\n                                json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                            )\\\\n                            formatter = ReviewFormatter()\\\\n                            html_content = formatter.to_html(review_response)\\\\n                            # st.markdown(html_content, unsafe_allow_html=True)\\\\n                            st.html(html_content)\\\\n                        else:\\\\n                            st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n\\\\n                    num_total_cases = 0\\\\n                    if (\\\\n                        isinstance(json_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in json_data\\\\n                        and isinstance(json_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        num_total_cases = len(json_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n                    col_checkbox, col_count = st.columns(\\\\n                        [0.8, 0.2]\\\\n                    )  # ì²´í¬ë°•ìŠ¤ì™€ ì¹´ìš´íŠ¸ ì»¬ëŸ¼ ë¹„ìœ¨ ì¡°ì •\\\\n\\\\n                    with col_checkbox:\\\\n                        filter_failed_tests = st.checkbox(\\\\n                            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n                            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n                        )\\\\n\\\\n                    surviving_test_cases = []\\\\n                    if filter_failed_tests:\\\\n                        if (\\\\n                            isinstance(display_data, dict)\\\\n                            and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                            and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                        ):\\\\n                            surviving_test_cases = []\\\\n                            for tc_original in display_data[\\\\n                                \\\\\\\"testCases\\\\\\\"\\\\n                            ]:  # ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ\\\\n                                if (\\\\n                                    isinstance(tc_original, dict)\\\\n                                    and tc_original.get(\\\\\\\"success\\\\\\\") is False\\\\n                                ):\\\\n                                    # testCase.successê°€ falseì¸ ê²½ìš°ì—ë§Œ tc_to_add ë¡œì§ ìˆ˜í–‰\\\\n                                    tc_to_add = copy.deepcopy(\\\\n                                        tc_original\\\\n                                    )  # ë³µì‚¬ë³¸ ì‚¬ìš©\\\\n\\\\n                                    # metricsData ë‚´ë¶€ë¥¼ successê°€ falseì¸ í•­ëª©ë§Œ ë‚¨ë„ë¡ í•„í„°ë§\\\\n                                    if \\\\\\\"metricsData\\\\\\\" in tc_to_add and isinstance(\\\\n                                        tc_to_add[\\\\\\\"metricsData\\\\\\\"], list\\\\n                                    ):\\\\n                                        filtered_metrics = [\\\\n                                            m\\\\n                                            for m in tc_to_add[\\\\\\\"metricsData\\\\\\\"]\\\\n                                            if isinstance(m, dict)\\\\n                                            and m.get(\\\\\\\"success\\\\\\\") is False\\\\n                                        ]\\\\n                                        # metricsDataê°€ ë¹„ì–´ìˆì§€ ì•Šê±°ë‚˜, ì›ë˜ metricsDataê°€ ìˆì—ˆë˜ ê²½ìš°ì—ë§Œ í• ë‹¹\\\\n                                        # (í•­ìƒ metricsData í‚¤ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¡°ê±´ë¬¸ ì œê±° ê°€ëŠ¥)\\\\n                                        if (\\\\n                                            filtered_metrics\\\\n                                            or tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics\\\\n                                        elif (\\\\n                                            not filtered_metrics\\\\n                                            and tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            # ëª¨ë“  ë©”íŠ¸ë¦­ì´ trueì—¬ì„œ filtered_metricsê°€ ë¹„ì—ˆì§€ë§Œ, ì›ë˜ metricsDataê°€ ìˆì—ˆë‹¤ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì„¤ì •\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = []\\\\n\\\\n                                    surviving_test_cases.append(tc_to_add)\\\\n\\\\n                            display_data[\\\\\\\"testCases\\\\\\\"] = surviving_test_cases\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n                    # í•„í„°ë§ë˜ì—ˆê±°ë‚˜ ì „ì²´ testCasesì— ëŒ€í•´ ë‚´ë¶€ í•„ë“œ íŒŒì‹± ì ìš©\\\\n                    if (\\\\n                        isinstance(display_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                        and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        for test_case in display_data[\\\\\\\"testCases\\\\\\\"]:\\\\n                            if isinstance(test_case, dict):\\\\n                                # input í•„ë“œ ì²˜ë¦¬: í”„ë¡¬í”„íŠ¸ì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ íŒŒì‹±\\\\n                                if \\\\\\\"input\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"input\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                                        if isinstance(parsed_input, list):\\\\n                                            for item in parsed_input:\\\\n                                                if (\\\\n                                                    isinstance(item, dict)\\\\n                                                    and \\\\\\\"content\\\\\\\" in item\\\\n                                                    and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                                                ):\\\\n                                                    try:\\\\n                                                        item[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                            item[\\\\\\\"content\\\\\\\"]\\\\n                                                        )\\\\n                                                    except json.JSONDecodeError:\\\\n                                                        pass\\\\n                                        test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n\\\\n                                # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n                                if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"actualOutput\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(\\\\n                                            test_case[\\\\\\\"actualOutput\\\\\\\"]\\\\n                                        )\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n                    st.json(display_data, expanded=False)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    # í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œ\\\\n    file_path = os.path.abspath(__file__)\\\\n\\\\n    # í¬íŠ¸ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    # Streamlit ì‹¤í–‰\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import (\\\\n    get_default_raw_log_dir,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_prompt_dir,\\\\n    get_default_review_request_dir,\\\\n)\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 20}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_merged_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":  # macOS\\\\n        return (\\\\n            Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n        )\\\\n    elif sys.platform == \\\\\\\"win32\\\\\\\":  # Windows\\\\n        return Path(os.getenv(\\\\\\\"APPDATA\\\\\\\", \\\\\\\"\\\\\\\")) / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n    else:  # Linux ë“± ê¸°íƒ€\\\\n        return Path.home() / \\\\\\\".config\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n\\\\n\\\\ndef get_result_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\n    logger.warning(\\\\n        \\\\\\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n    )\\\\n    return []\\\\n\\\\n\\\\ndef get_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_raw_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_review_request_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    request_dir = get_default_review_request_dir()\\\\n    if not request_dir.exists():\\\\n        return []\\\\n\\\\n    request_files = list(request_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return request_files\\\\n\\\\n\\\\ndef get_review_prompt_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    if not prompt_dir.exists():\\\\n        return []\\\\n\\\\n    prompt_files = list(prompt_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return prompt_files\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n```\\\", \\\"line_number\\\": 32}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_merged_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    merged_data_dir = get_default_merged_data_dir()\\\\n    if not merged_data_dir.exists():\\\\n        return []\\\\n\\\\n    merged_files = list(merged_data_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return merged_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n```\\\", \\\"line_number\\\": 45}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    log_dir = get_default_raw_log_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    request_dir = get_default_review_request_dir()\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"line_number\\\": 188}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n            `â€‹``\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n        files = get_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n        files = get_review_request_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            `â€‹``\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n```\\\", \\\"line_number\\\": 223}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                        st.session_state.show_raw_json = False\\\\n                    show_raw_json = st.checkbox(\\\\n                        \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    # ì›ë³¸ JSON ë°ì´í„° ë³´ê¸° ì²´í¬ë°•ìŠ¤ ì¶”ê°€\\\\n                    if \\\\\\\"show_raw_json\\\\\\\" not in st.session_state:\\\\n                        st.session_state.show_raw_json = False\\\\n                    show_raw_json = st.checkbox(\\\\n                        \\\\\\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\\\\\", key=\\\\\\\"show_raw_json\\\\\\\"\\\\n                    )\\\\n```\\\", \\\"line_number\\\": 290}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n                            review_response = ReviewResponse.model_validate(\\\\n                                json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                            )\\\\n                            formatter = ReviewFormatter()\\\\n                            html_content = formatter.to_html(review_response)\\\\n                            st.markdown(html_content, unsafe_allow_html=True)\\\\n                        else:\\\\n                            st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data, expanded=False)\\\\n                elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## reviewRequest ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data, expanded=False)\\\\n                elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\\\\\")\\\\n                    if isinstance(json_data, list):\\\\n                        for item in json_data:\\\\n                            if (\\\\n                                isinstance(item, dict)\\\\n                                and \\\\\\\"content\\\\\\\" in item\\\\n                                and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                            ):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass\\\\n                    st.json(json_data, expanded=False)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    data_to_display = copy.deepcopy(json_data)\\\\n\\\\n                    target_keys_in_order = [\\\\n                        \\\\\\\"prompt\\\\\\\",\\\\n                        \\\\\\\"review_request\\\\\\\",\\\\n                        \\\\\\\"review_response\\\\\\\",\\\\n                    ]\\\\n\\\\n                    for key_to_expand in target_keys_in_order:\\\\n                        if key_to_expand in data_to_display:\\\\n                            value = data_to_display.pop(key_to_expand)\\\\n                            with st.expander(\\\\n                                f\\\\\\\"{key_to_expand} ë‚´ìš© ë³´ê¸°\\\\\\\", expanded=False\\\\n                            ):\\\\n                                if key_to_expand == \\\\\\\"prompt\\\\\\\":\\\\n                                    parsed_prompt_content = []\\\\n                                    if isinstance(value, list):\\\\n                                        for item_prompt in value:\\\\n                                            item_c = copy.deepcopy(item_prompt)\\\\n                                            if (\\\\n                                                isinstance(item_c, dict)\\\\n                                                and \\\\\\\"content\\\\\\\" in item_c\\\\n                                                and isinstance(item_c[\\\\\\\"content\\\\\\\"], str)\\\\n                                            ):\\\\n                                                try:\\\\n                                                    item_c[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                        item_c[\\\\\\\"content\\\\\\\"]\\\\n                                                    )\\\\n                                                except json.JSONDecodeError:\\\\n                                                    pass\\\\n                                            parsed_prompt_content.append(item_c)\\\\n                                        st.json(parsed_prompt_content, expanded=True)\\\\n                                    else:\\\\n                                        st.json(value, expanded=True)  # Fallback\\\\n                                elif key_to_expand == \\\\\\\"review_response\\\\\\\":\\\\n                                    if value:\\\\n                                        try:\\\\n                                            review_response_obj = (\\\\n                                                ReviewResponse.model_validate(value)\\\\n                                            )\\\\n                                            formatter = ReviewFormatter()\\\\n                                            html_content = formatter.to_html(\\\\n                                                review_response_obj\\\\n                                            )\\\\n                                            st.markdown(\\\\n                                                html_content, unsafe_allow_html=True\\\\n                                            )\\\\n                                            with st.expander(\\\\n                                                f\\\\\\\"{key_to_expand} ì›ë³¸ JSON ë³´ê¸°\\\\\\\",\\\\n                                                expanded=False,\\\\n                                            ):\\\\n                                                st.json(value, expanded=True)\\\\n                                        except Exception:\\\\n                                            st.json(\\\\n                                                value, expanded=True\\\\n                                            )  # Fallback to raw JSON\\\\n                                    else:\\\\n                                        st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n                                elif (\\\\n                                    value\\\\n                                ):  # For review_request and other potential future keys\\\\n                                    st.json(value, expanded=True)\\\\n                                else:\\\\n                                    st.write(\\\\\\\"ë‚´ìš© ì—†ìŒ\\\\\\\")\\\\n\\\\n                    if data_to_display:\\\\n                        st.markdown(\\\\\\\"---\\\\\\\")\\\\n                        st.markdown(\\\\\\\"### ê¸°íƒ€ ë¡œê·¸ ì •ë³´\\\\\\\")\\\\n                        st.json(data_to_display, expanded=False)\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                            review_response = ReviewResponse.model_validate(\\\\n                                json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                            )\\\\n                            formatter = ReviewFormatter()\\\\n                            html_content = formatter.to_html(review_response)\\\\n                            # st.markdown(html_content, unsafe_allow_html=True)\\\\n                            st.html(html_content)\\\\n                        else:\\\\n                            st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n```\\\", \\\"line_number\\\": 352}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\\\n                        # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n```\\\", \\\"line_number\\\": 432}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n                                        pass\\\\n                    st.json(display_data, expanded=False)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n        elif format == \\\\\\\"html\\\\\\\":\\\\n            # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\\\n            # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\\\n            # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\\\n            html_content_with_style = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            <div style=\\\\\\\"height: 600px; overflow-y: scroll;\\\\\\\">\\\\n                {content}\\\\n            </div>\\\\n            \\\\\\\"\\\\\\\"\\\\\\\"\\\\n            # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\\\n            st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n        else:\\\\n            # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\\\n            st.markdown(content, unsafe_allow_html=True)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                                        pass\\\\n                    st.json(display_data, expanded=False)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\n```\\\", \\\"line_number\\\": 482}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 20, \"file\": \"reviewer/src/ui.py\", \"description\": \"ë¶ˆí•„ìš”í•œ ì„í¬íŠ¸ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë“¤(get_default_raw_log_dir, get_default_review_prompt_dir, get_default_review_request_dir)ì„ ì„í¬íŠ¸í•˜ëŠ” ê²ƒì€ ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì„í¬íŠ¸ëŠ” ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì ì ˆí•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\"..\\\")))\\nfrom reviewer.src.config import (\\n    get_default_raw_log_dir,\\n    get_default_results_dir,\\n    get_default_review_log_dir,\\n    get_default_review_prompt_dir,\\n    get_default_review_request_dir,\\n)\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\", \"improved_code\": \"# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\"..\\\")))\\nfrom reviewer.src.config import get_default_results_dir, get_default_review_log_dir\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 32, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë“¤(get_default_merged_data_dir, get_result_files, get_log_files, get_review_request_files, get_review_prompt_files)ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ë“¤ì€ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì½”ë“œ ê°„ì†Œí™”ë¥¼ ìœ„í•´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ëŠ” ì œê±°í•˜ì—¬ ì½”ë“œ ë² ì´ìŠ¤ë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"def get_default_merged_data_dir() -> Path:\\n    \\\"\\\"\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n    if sys.platform == \\\"darwin\\\":  # macOS\\n        return (\\n            Path.home() / \\\"Library\\\" / \\\"Application Support\\\" / \\\"reviewer\\\" / \\\"merged_data\\\"\\n        )\\n    elif sys.platform == \\\"win32\\\":  # Windows\\n        return Path(os.getenv(\\\"APPDATA\\\", \\\"\\\")) / \\\"reviewer\\\" / \\\"merged_data\\\"\\n    else:  # Linux ë“± ê¸°íƒ€\\n        return Path.home() / \\\".config\\\" / \\\"reviewer\\\" / \\\"merged_data\\\"\\n\\n\\ndef get_result_files() -> list[Path]:\\n    \\\"\\\"\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\"\\\"\\\"\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\n    logger.warning(\\n        \\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\"\\n    )\\n    return []\\n\\n\\ndef get_log_files() -> list[Path]:\\n    \\\"\\\"\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    log_dir = get_default_raw_log_dir()\\n    if not log_dir.exists():\\n        return []\\n\\n    log_files = list(log_dir.glob(\\\"*.json\\\"))\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\n    return log_files\\n\\n\\ndef get_review_request_files() -> list[Path]:\\n    \\\"\\\"\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    request_dir = get_default_review_request_dir()\\n    if not request_dir.exists():\\n        return []\\n\\n    request_files = list(request_dir.glob(\\\"*.json\\\"))\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\n    return request_files\\n\\n\\ndef get_review_prompt_files() -> list[Path]:\\n    \\\"\\\"\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    prompt_dir = get_default_review_prompt_dir()\\n    if not prompt_dir.exists():\\n        return []\\n\\n    prompt_files = list(prompt_dir.glob(\\\"*.json\\\"))\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\n    return prompt_files\", \"improved_code\": \"# ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ë“¤ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 45, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ get_merged_data_files()ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì½”ë“œ ê°„ì†Œí™”ë¥¼ ìœ„í•´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ëŠ” ì œê±°í•˜ì—¬ ì½”ë“œ ë² ì´ìŠ¤ë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"def get_merged_data_files() -> list[Path]:\\n    \\\"\\\"\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    merged_data_dir = get_default_merged_data_dir()\\n    if not merged_data_dir.exists():\\n        return []\\n\\n    merged_files = list(merged_data_dir.glob(\\\"*.json\\\"))\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\n    return merged_files\", \"improved_code\": \"# ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 188, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë””ë ‰í† ë¦¬ ì •ë³´ í‘œì‹œ ë° ë³´ê¸° ìœ í˜• ì˜µì…˜ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ í•„ìš”í•œ ë””ë ‰í† ë¦¬ ì •ë³´ë§Œ í‘œì‹œí•˜ê³ , ë³´ê¸° ìœ í˜•ë„ 'ë¦¬ë·° ê²°ê³¼'ì™€ 'llm_eval ê²°ê³¼'ë§Œ ë‚¨ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°„ì†Œí™”í•˜ì—¬ í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì œê³µí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ ë” ì§ê´€ì ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"# ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\nresults_dir = get_default_results_dir()\\nlog_dir = get_default_raw_log_dir()\\nreview_log_dir = get_default_review_log_dir()\\nrequest_dir = get_default_review_request_dir()\\nprompt_dir = get_default_review_prompt_dir()\\nst.sidebar.markdown(f\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\")\\nst.sidebar.markdown(f\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\")\\nst.sidebar.markdown(f\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\")\\nst.sidebar.markdown(f\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\")\\nst.sidebar.markdown(f\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\")\\nst.sidebar.markdown(\\n    f\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\"\\n)\\n\\n# ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\nview_type = st.sidebar.selectbox(\\n    \\\"ë³´ê¸° ìœ í˜•:\\\",\\n    [\\n        \\\"ë¦¬ë·° ê²°ê³¼\\\",\\n        \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n        \\\"reviewRequest\\\",\\n        \\\"í”„ë¡¬í”„íŠ¸\\\",\\n        \\\"review log\\\",\\n        \\\"llm_eval ê²°ê³¼\\\",\\n    ],\\n    index=0,\\n)\", \"improved_code\": \"# ê²°ê³¼ ë””ë ‰í† ë¦¬ í‘œì‹œ\\nresults_dir = get_default_results_dir()\\nreview_log_dir = get_default_review_log_dir()\\nst.sidebar.markdown(f\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\")\\nst.sidebar.markdown(f\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\")\\nst.sidebar.markdown(\\n    f\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\"\\n)\\n\\n# ê²°ê³¼ ì„ íƒ\\nview_type = st.sidebar.selectbox(\\n    \\\"ë³´ê¸° ìœ í˜•:\\\",\\n    [\\n        \\\"ë¦¬ë·° ê²°ê³¼\\\",\\n        \\\"llm_eval ê²°ê³¼\\\",\\n    ],\\n    index=0,\\n)\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 223, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³´ê¸° ìœ í˜•ì— ëŒ€í•œ ì¡°ê±´ë¬¸ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ 'ë¦¬ë·° ê²°ê³¼'ì™€ 'llm_eval ê²°ê³¼' ë‘ ê°€ì§€ ìœ í˜•ë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¡°ê±´ë¬¸ì„ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"elif view_type == \\\"ì‘ë‹µ ë¡œê·¸\\\":\\n    files = get_log_files()\\n    if not files:\\n        st.info(\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\\nelif view_type == \\\"reviewRequest\\\":\\n    files = get_review_request_files()\\n    if not files:\\n        st.info(\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\\nelif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n    files = get_review_prompt_files()\\n    if not files:\\n        st.info(\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\\nelif view_type == \\\"review log\\\":\\n    files = get_review_log_files()\\n    if not files:\\n        st.info(\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\\nelse:  # llm_eval ê²°ê³¼\", \"improved_code\": \"else:  # llm_eval ê²°ê³¼\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 352, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³´ê¸° ìœ í˜•ì— ëŒ€í•œ ì²˜ë¦¬ ë¡œì§ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ HTML ë Œë”ë§ ë°©ì‹ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. st.markdown(html_content, unsafe_allow_html=True) ëŒ€ì‹  st.html(html_content)ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"Streamlitì˜ st.html() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ unsafe_allow_html=True ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ì•ˆì „í•˜ê³  ê¶Œì¥ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ë³€ê²½ì€ ë³´ì•ˆì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"html_content = formatter.to_html(review_response)\\nst.markdown(html_content, unsafe_allow_html=True)\\nelse:\\n    st.warning(\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\nelif view_type == \\\"ì‘ë‹µ ë¡œê·¸\\\":\\n    st.markdown(\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\")\\n    st.json(json_data, expanded=False)\\nelif view_type == \\\"reviewRequest\\\":\\n    st.markdown(\\\"## reviewRequest ë‚´ìš©\\\")\\n    st.json(json_data, expanded=False)\\nelif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n    st.markdown(\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\")\\n    if isinstance(json_data, list):\\n        for item in json_data:\\n            if (\\n                isinstance(item, dict)\\n                and \\\"content\\\" in item\\n                and isinstance(item[\\\"content\\\"], str)\\n            ):\\n                try:\\n                    item[\\\"content\\\"] = json.loads(item[\\\"content\\\"])\\n                except json.JSONDecodeError:\\n                    pass\\n    st.json(json_data, expanded=False)\\nelif view_type == \\\"review log\\\":\\n    st.markdown(\\\"## review log\\\")\\n    data_to_display = copy.deepcopy(json_data)\\n\\n    target_keys_in_order = [\\n        \\\"prompt\\\",\\n        \\\"review_request\\\",\\n        \\\"review_response\\\",\\n    ]\\n\\n    for key_to_expand in target_keys_in_order:\\n        if key_to_expand in data_to_display:\\n            value = data_to_display.pop(key_to_expand)\\n            with st.expander(\\n                f\\\"{key_to_expand} ë‚´ìš© ë³´ê¸°\\\", expanded=False\\n            ):\\n                if key_to_expand == \\\"prompt\\\":\\n                    parsed_prompt_content = []\\n                    if isinstance(value, list):\\n                        for item_prompt in value:\\n                            item_c = copy.deepcopy(item_prompt)\\n                            if (\\n                                isinstance(item_c, dict)\\n                                and \\\"content\\\" in item_c\\n                                and isinstance(item_c[\\\"content\\\"], str)\\n                            ):\\n                                try:\\n                                    item_c[\\\"content\\\"] = json.loads(\\n                                        item_c[\\\"content\\\"]\\n                                    )\\n                                except json.JSONDecodeError:\\n                                    pass\\n                            parsed_prompt_content.append(item_c)\\n                        st.json(parsed_prompt_content, expanded=True)\\n                    else:\\n                        st.json(value, expanded=True)  # Fallback\\n                elif key_to_expand == \\\"review_response\\\":\\n                    if value:\\n                        try:\\n                            review_response_obj = (\\n                                ReviewResponse.model_validate(value)\\n                            )\\n                            formatter = ReviewFormatter()\\n                            html_content = formatter.to_html(\\n                                review_response_obj\\n                            )\\n                            st.markdown(\\n                                html_content, unsafe_allow_html=True\\n                            )\\n                            with st.expander(\\n                                f\\\"{key_to_expand} ì›ë³¸ JSON ë³´ê¸°\\\",\\n                                expanded=False,\\n                            ):\\n                                st.json(value, expanded=True)\\n                        except Exception:\\n                            st.json(\\n                                value, expanded=True\\n                            )  # Fallback to raw JSON\\n                    else:\\n                        st.write(\\\"ë‚´ìš© ì—†ìŒ\\\")\\n                elif (\\n                    value\\n                ):  # For review_request and other potential future keys\\n                    st.json(value, expanded=True)\\n                else:\\n                    st.write(\\\"ë‚´ìš© ì—†ìŒ\\\")\\n\\n    if data_to_display:\\n        st.markdown(\\\"---\\\")\\n        st.markdown(\\\"### ê¸°íƒ€ ë¡œê·¸ ì •ë³´\\\")\\n        st.json(data_to_display, expanded=False)\", \"improved_code\": \"html_content = formatter.to_html(review_response)\\n# st.markdown(html_content, unsafe_allow_html=True)\\nst.html(html_content)\\nelse:\\n    st.warning(\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 432, \"file\": \"reviewer/src/ui.py\", \"description\": \"ë¶ˆí•„ìš”í•œ ì£¼ì„ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì½”ë“œ ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ ë¶ˆí•„ìš”í•œ ì„¤ëª…ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë¶ˆí•„ìš”í•œ ì£¼ì„ì€ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì½”ë“œ ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"count_caption_text = f\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\"\\nelse:\\n    # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\n    # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\n    count_caption_text = f\\\"(ì´ {num_total_cases}ê±´)\\\"\", \"improved_code\": \"count_caption_text = f\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\"\\nelse:\\n    count_caption_text = f\\\"(ì´ {num_total_cases}ê±´)\\\"\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 482, \"file\": \"reviewer/src/ui.py\", \"description\": \"HTML ë° ê¸°íƒ€ í˜•ì‹ íŒŒì¼ ì²˜ë¦¬ ë¡œì§ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ JSON íŒŒì¼ë§Œ ì²˜ë¦¬í•˜ë„ë¡ ê°„ì†Œí™”ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ ì²˜ë¦¬ ë¡œì§ì„ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"# JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\nst.text(content)\\nelif format == \\\"html\\\":\\n    # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\n    # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\n    # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\n    html_content_with_style = f\\\"\\\"\\\"\\n    <div style=\\\"height: 600px; overflow-y: scroll;\\\">\\n        {content}\\n    </div>\\n    \\\"\\\"\\\"\\n    # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\n    st.markdown(html_content_with_style, unsafe_allow_html=True)\\nelse:\\n    # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\n    st.markdown(content, unsafe_allow_html=True)\", \"improved_code\": \"# JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\nst.text(content)\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 290, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì£¼ì„ì´ ì¶”ê°€ë˜ì–´ ì½”ë“œì˜ ëª©ì ì„ ëª…í™•íˆ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤. 'ì›ë³¸ JSON ë°ì´í„° ë³´ê¸° ì²´í¬ë°•ìŠ¤ ì¶”ê°€'ë¼ëŠ” ì£¼ì„ì´ ì¶”ê°€ë˜ì–´ í•´ë‹¹ ì½”ë“œ ë¸”ë¡ì˜ ëª©ì ì„ ëª…í™•íˆ í•©ë‹ˆë‹¤.\", \"suggestion\": \"ì½”ë“œì˜ ëª©ì ì„ ì„¤ëª…í•˜ëŠ” ì£¼ì„ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ì½”ë“œ ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì ì ˆí•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"if view_type == \\\"ë¦¬ë·° ê²°ê³¼\\\":\\n    if \\\"show_raw_json\\\" not in st.session_state:\\n        st.session_state.show_raw_json = False\\n    show_raw_json = st.checkbox(\\n        \\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\", key=\\\"show_raw_json\\\"\\n    )\", \"improved_code\": \"if view_type == \\\"ë¦¬ë·° ê²°ê³¼\\\":\\n    # ì›ë³¸ JSON ë°ì´í„° ë³´ê¸° ì²´í¬ë°•ìŠ¤ ì¶”ê°€\\n    if \\\"show_raw_json\\\" not in st.session_state:\\n        st.session_state.show_raw_json = False\\n    show_raw_json = st.checkbox(\\n        \\\"ì›ë³¸ JSON ë°ì´í„° ë³´ê¸°\\\", key=\\\"show_raw_json\\\"\\n    )\"}], \"summary\": \"ì´ ì½”ë“œ ë³€ê²½ì€ Streamlitì„ ì‚¬ìš©í•œ ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ(ui.py)ì„ ê°„ì†Œí™”í•˜ê³  ìµœì í™”í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤. ì£¼ìš” ë³€ê²½ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\\n\\n1. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì„í¬íŠ¸ì™€ í•¨ìˆ˜ë“¤ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\\n2. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ê°€ ê°„ì†Œí™”ë˜ì–´ 'ë¦¬ë·° ê²°ê³¼'ì™€ 'llm_eval ê²°ê³¼' ë‘ ê°€ì§€ ë³´ê¸° ìœ í˜•ë§Œ ì œê³µí•©ë‹ˆë‹¤.\\n3. ë¶ˆí•„ìš”í•œ ë””ë ‰í† ë¦¬ ì •ë³´ í‘œì‹œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\\n4. HTML ë Œë”ë§ ë°©ì‹ì´ st.markdown(unsafe_allow_html=True)ì—ì„œ st.html()ë¡œ ë³€ê²½ë˜ì–´ ë³´ì•ˆì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\\n5. ë¶ˆí•„ìš”í•œ ì£¼ì„ê³¼ ì½”ë“œê°€ ì œê±°ë˜ì–´ ì „ë°˜ì ì¸ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\\n\\nì´ëŸ¬í•œ ë³€ê²½ì€ ì½”ë“œë² ì´ìŠ¤ë¥¼ ë” ê°„ê²°í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰½ê²Œ ë§Œë“¤ì—ˆìœ¼ë©°, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ë” ì§ê´€ì ìœ¼ë¡œ ê°œì„ í–ˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"ë¶ˆí•„ìš”í•œ ì½”ë“œì™€ ê¸°ëŠ¥ì„ ì œê±°í•˜ëŠ” ë¦¬íŒ©í† ë§ì„ ê³„ì† ì§„í–‰í•˜ì—¬ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ì„¸ìš”.\", \"st.markdown(unsafe_allow_html=True) ëŒ€ì‹  st.html()ê³¼ ê°™ì€ ë” ì•ˆì „í•œ Streamlit APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ë‹¤ë¥¸ ë¶€ë¶„ì—ë„ ì ìš©í•˜ì„¸ìš”.\", \"ì£¼ìš” í•¨ìˆ˜ì™€ í´ë˜ìŠ¤ì— ë” ìì„¸í•œ docstringì„ ì¶”ê°€í•˜ì—¬ ì½”ë“œ ë¬¸ì„œí™”ë¥¼ ê°œì„ í•˜ì„¸ìš”.\", \"get_file_info() í•¨ìˆ˜ëŠ” ë³µì¡í•œ íŒŒì¼ëª… íŒŒì‹± ë¡œì§ì„ í¬í•¨í•˜ê³  ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ ë” ì‘ì€ í•¨ìˆ˜ë“¤ë¡œ ë¶„ë¦¬í•˜ì—¬ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"íŒŒì¼ í˜•ì‹ ê°ì§€ ë¡œì§(get_file_info í•¨ìˆ˜ ë‚´)ì´ ë³µì¡í•˜ë¯€ë¡œ, ì´ë¥¼ ë³„ë„ì˜ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ê±°ë‚˜ ë‹¨ìˆœí™”í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom enum import Enum\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_model_info, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.models.review_prompt import ReviewPrompt\\\\nfrom reviewer.src.utils.prompts.models.review_prompt_with_file_content import (\\\\n    ReviewPromptWithFileContent,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest, ReviewResponse\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ, í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ë¨)\\\\\\\",\\\\n        deprecated=True,\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\nclass ReviewStatus(Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—´ê±°í˜• í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    SUCCESS = \\\\\\\"SUCCESS\\\\\\\"\\\\n    FAILED = \\\\\\\"FAILED\\\\\\\"\\\\n\\\\n\\\\ndef save_review_log(\\\\n    prompt: ReviewPrompt | ReviewPromptWithFileContent | None,\\\\n    review_request: ReviewRequest,\\\\n    review_response: ReviewResponse | None,\\\\n    status: ReviewStatus,\\\\n    error: Exception | None = None,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    now = datetime.now()\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n        \\\\\\\"prompt\\\\\\\": prompt_data,\\\\n        \\\\\\\"review_request\\\\\\\": review_request.model_dump(mode=\\\\\\\"json\\\\\\\"),\\\\n        \\\\\\\"review_response\\\\\\\": response_data,\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    formatted = now.strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    file_name = f\\\\\\\"{formatted}_{model_name}_review_log\\\\\\\"\\\\n    file_path = log_dir / f\\\\\\\"{file_name}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    try:\\\\n        # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n        review_request = ReviewRequest(\\\\n            diff_content=diff_content,\\\\n            processed_diff=diff_result,\\\\n            file_paths=[file.filename for file in diff_result.files],\\\\n            use_full_context=use_full_context,\\\\n            model=args.model,\\\\n            repo_path=repo_path,\\\\n        )\\\\n\\\\n        # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n        save_review_request(review_request)\\\\n\\\\n        # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n        llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n        # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n        logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n        review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n        review_response = llm_gateway.review_code(review_prompt)\\\\n        save_review_log(\\\\n            review_prompt, review_request, review_response, ReviewStatus.SUCCESS\\\\n        )\\\\n\\\\n        logger.info(\\\\\\\"ì½”ë“œ ë¦¬ë·°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        save_review_log(\\\\n            review_prompt,\\\\n            review_request,\\\\n            None,\\\\n            ReviewStatus.FAILED,\\\\n            error=e,\\\\n        )\\\\n        return\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í˜„ì¬ ì‹œê°„\\\\n    now = datetime.now()\\\\n\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    now = datetime.now()\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n```\\\", \\\"line_number\\\": 512}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    file_path = log_dir / f\\\\\\\"{log_id}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    formatted = now.strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    file_name = f\\\\\\\"{formatted}_{model_name}_review_log\\\\\\\"\\\\n    file_path = log_dir / f\\\\\\\"{file_name}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n```\\\", \\\"line_number\\\": 540}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import (\\\\n    get_default_raw_log_dir,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_prompt_dir,\\\\n    get_default_review_request_dir,\\\\n)\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ui.py íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ê³ , ê·¸ ì•„ë˜ data í´ë”ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_merged_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":  # macOS\\\\n        return (\\\\n            Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n        )\\\\n    elif sys.platform == \\\\\\\"win32\\\\\\\":  # Windows\\\\n        return Path(os.getenv(\\\\\\\"APPDATA\\\\\\\", \\\\\\\"\\\\\\\")) / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n    else:  # Linux ë“± ê¸°íƒ€\\\\n        return Path.home() / \\\\\\\".config\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n\\\\n\\\\ndef get_result_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\n    logger.warning(\\\\n        \\\\\\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n    )\\\\n    return []\\\\n\\\\n\\\\ndef get_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_raw_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_review_request_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    request_dir = get_default_review_request_dir()\\\\n    if not request_dir.exists():\\\\n        return []\\\\n\\\\n    request_files = list(request_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return request_files\\\\n\\\\n\\\\ndef get_review_prompt_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    if not prompt_dir.exists():\\\\n        return []\\\\n\\\\n    prompt_files = list(prompt_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return prompt_files\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    # data í´ë” ë‚´ ëª¨ë“  íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ (í™•ì¥ì ë¬´ê´€)\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_merged_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    merged_data_dir = get_default_merged_data_dir()\\\\n    if not merged_data_dir.exists():\\\\n        return []\\\\n\\\\n    merged_files = list(merged_data_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return merged_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\\\n    model_name_candidate = \\\\\\\"\\\\\\\"\\\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\\\n\\\\n    try:\\\\n        parts = file.stem.split(\\\\\\\"_\\\\\\\")\\\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\\\n        if len(parts) >= 3:\\\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\\\n            if (\\\\n                parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\\\n            elif (\\\\n                parts[-2].isdigit()\\\\n                and len(parts[-2]) == 8\\\\n                and parts[-1].isdigit()\\\\n                and len(parts[-1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[:-2])\\\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n                model_name_candidate = parts[-1]\\\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\\\n                if (\\\\n                    len(parts) >= 3\\\\n                    and parts[-2].isdigit()\\\\n                    and len(parts[-2]) == 6\\\\n                    and parts[-3].isdigit()\\\\n                    and len(parts[-3]) == 8\\\\n                ):\\\\n                    date_str = f\\\\\\\"{parts[-3]}_{parts[-2]}\\\\\\\"\\\\n                    try:\\\\n                        date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                    except ValueError:\\\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\\\n        elif (\\\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = file.stem\\\\n        elif (\\\\n            len(parts) == 1 and not parts[0].isdigit()\\\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = parts[0]\\\\n\\\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\\\n        pass  # model_name_candidate = \\\\\\\"\\\\\\\", date_candidate = mtime ìœ ì§€\\\\n\\\\n    file_suffix = file.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\\\n    if not file_suffix:\\\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\\\n        try:\\\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\\\n\\\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\\\n            file_parent_resolved = file.parent.resolve()\\\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\\\n\\\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\\\n            file_parent_str = str(file_parent_resolved)\\\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\\\n\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\\\n\\\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            if is_in_llm_eval_dir:\\\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            elif has_date_format:\\\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            else:\\\\n                file_format = \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\\\n            file_format = \\\\\\\"txt\\\\\\\"\\\\n    elif file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"]:\\\\n        file_format = file_suffix\\\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\\\n        file_format = \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    log_dir = get_default_raw_log_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    request_dir = get_default_review_request_dir()\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n        files = get_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n        files = get_review_request_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ì„ ì •ë³´ì™€ í•¨ê»˜ ì €ì¥\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    selected_file_path = selected_file_info[\\\\\\\"path\\\\\\\"]\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n    try:\\\\n        with open(selected_file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        # íŒŒì¼ ì •ë³´ í‘œì‹œ\\\\n        col1, col2, col3 = st.columns(3)\\\\n        with col1:\\\\n            st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {selected_file_info['name']}\\\\\\\")\\\\n        with col2:\\\\n            st.markdown(\\\\n                f\\\\\\\"**ë‚ ì§œ**: {selected_file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\"\\\\n            )\\\\n        with col3:\\\\n            st.markdown(f\\\\\\\"**í¬ê¸°**: {selected_file_info['size_str']}\\\\\\\")\\\\n\\\\n        # íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ\\\\n        format = selected_file_info[\\\\\\\"format\\\\\\\"]\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    # ë¦¬ë·° ë¡œê·¸ì—ì„œ review_response ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\\\\n                    if \\\\\\\"review_response\\\\\\\" in json_data and json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n                        # ë”•ì…”ë„ˆë¦¬ë¥¼ ReviewResponse ê°ì²´ë¡œ ë³€í™˜\\\\n                        review_response = ReviewResponse.model_validate(\\\\n                            json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                        )\\\\n\\\\n                        # ReviewFormatterë¥¼ ì‚¬ìš©í•˜ì—¬ HTMLë¡œ ë³€í™˜\\\\n                        formatter = ReviewFormatter()\\\\n                        html_content = formatter.to_html(review_response)\\\\n\\\\n                        # HTML ë‚´ìš©ì„ Streamlitì— í‘œì‹œ\\\\n                        html_content_with_style = html_content\\\\n                        st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n                    else:\\\\n                        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        st.json(json_data)\\\\n                elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n                    # ë¡œê·¸ ë°ì´í„°ë¥¼ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n                    # ë¦¬ë·° ìš”ì²­ ë°ì´í„°ë¥¼ raw JSONìœ¼ë¡œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## reviewRequest ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n                    # í”„ë¡¬í”„íŠ¸ ë°ì´í„° (ìµœìƒìœ„ê°€ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°) ì²˜ë¦¬\\\\n                    # ê° í•­ëª©ì˜ 'content'ê°€ ë¬¸ìì—´í™”ëœ JSONì´ë©´ íŒŒì‹±\\\\n                    st.markdown(\\\\\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\\\\\")\\\\n                    if isinstance(json_data, list):\\\\n                        for item in json_data:\\\\n                            if (\\\\n                                isinstance(item, dict)\\\\n                                and \\\\\\\"content\\\\\\\" in item\\\\n                                and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                            ):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n\\\\n                    num_total_cases = 0\\\\n                    if (\\\\n                        isinstance(json_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in json_data\\\\n                        and isinstance(json_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        num_total_cases = len(json_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n                    col_checkbox, col_count = st.columns(\\\\n                        [0.8, 0.2]\\\\n                    )  # ì²´í¬ë°•ìŠ¤ì™€ ì¹´ìš´íŠ¸ ì»¬ëŸ¼ ë¹„ìœ¨ ì¡°ì •\\\\n\\\\n                    with col_checkbox:\\\\n                        filter_failed_tests = st.checkbox(\\\\n                            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n                            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n                        )\\\\n\\\\n                    surviving_test_cases = []\\\\n                    if filter_failed_tests:\\\\n                        if (\\\\n                            isinstance(display_data, dict)\\\\n                            and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                            and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                        ):\\\\n                            surviving_test_cases = []\\\\n                            for tc_original in display_data[\\\\n                                \\\\\\\"testCases\\\\\\\"\\\\n                            ]:  # ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ\\\\n                                if (\\\\n                                    isinstance(tc_original, dict)\\\\n                                    and tc_original.get(\\\\\\\"success\\\\\\\") is False\\\\n                                ):\\\\n                                    # testCase.successê°€ falseì¸ ê²½ìš°ì—ë§Œ tc_to_add ë¡œì§ ìˆ˜í–‰\\\\n                                    tc_to_add = copy.deepcopy(\\\\n                                        tc_original\\\\n                                    )  # ë³µì‚¬ë³¸ ì‚¬ìš©\\\\n\\\\n                                    # metricsData ë‚´ë¶€ë¥¼ successê°€ falseì¸ í•­ëª©ë§Œ ë‚¨ë„ë¡ í•„í„°ë§\\\\n                                    if \\\\\\\"metricsData\\\\\\\" in tc_to_add and isinstance(\\\\n                                        tc_to_add[\\\\\\\"metricsData\\\\\\\"], list\\\\n                                    ):\\\\n                                        filtered_metrics = [\\\\n                                            m\\\\n                                            for m in tc_to_add[\\\\\\\"metricsData\\\\\\\"]\\\\n                                            if isinstance(m, dict)\\\\n                                            and m.get(\\\\\\\"success\\\\\\\") is False\\\\n                                        ]\\\\n                                        # metricsDataê°€ ë¹„ì–´ìˆì§€ ì•Šê±°ë‚˜, ì›ë˜ metricsDataê°€ ìˆì—ˆë˜ ê²½ìš°ì—ë§Œ í• ë‹¹\\\\n                                        # (í•­ìƒ metricsData í‚¤ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¡°ê±´ë¬¸ ì œê±° ê°€ëŠ¥)\\\\n                                        if (\\\\n                                            filtered_metrics\\\\n                                            or tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics\\\\n                                        elif (\\\\n                                            not filtered_metrics\\\\n                                            and tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            # ëª¨ë“  ë©”íŠ¸ë¦­ì´ trueì—¬ì„œ filtered_metricsê°€ ë¹„ì—ˆì§€ë§Œ, ì›ë˜ metricsDataê°€ ìˆì—ˆë‹¤ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì„¤ì •\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = []\\\\n\\\\n                                    surviving_test_cases.append(tc_to_add)\\\\n\\\\n                            display_data[\\\\\\\"testCases\\\\\\\"] = surviving_test_cases\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\\\n                        # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n                    # í•„í„°ë§ë˜ì—ˆê±°ë‚˜ ì „ì²´ testCasesì— ëŒ€í•´ ë‚´ë¶€ í•„ë“œ íŒŒì‹± ì ìš©\\\\n                    if (\\\\n                        isinstance(display_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                        and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        for test_case in display_data[\\\\\\\"testCases\\\\\\\"]:\\\\n                            if isinstance(test_case, dict):\\\\n                                # input í•„ë“œ ì²˜ë¦¬: í”„ë¡¬í”„íŠ¸ì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ íŒŒì‹±\\\\n                                if \\\\\\\"input\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"input\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                                        if isinstance(parsed_input, list):\\\\n                                            for item in parsed_input:\\\\n                                                if (\\\\n                                                    isinstance(item, dict)\\\\n                                                    and \\\\\\\"content\\\\\\\" in item\\\\n                                                    and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                                                ):\\\\n                                                    try:\\\\n                                                        item[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                            item[\\\\\\\"content\\\\\\\"]\\\\n                                                        )\\\\n                                                    except json.JSONDecodeError:\\\\n                                                        pass\\\\n                                        test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n\\\\n                                # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n                                if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"actualOutput\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(\\\\n                                            test_case[\\\\\\\"actualOutput\\\\\\\"]\\\\n                                        )\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n                    st.json(display_data)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n        elif format == \\\\\\\"html\\\\\\\":\\\\n            # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\\\n            # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\\\n            # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\\\n            html_content_with_style = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            <div style=\\\\\\\"height: 600px; overflow-y: scroll;\\\\\\\">\\\\n                {content}\\\\n            </div>\\\\n            \\\\\\\"\\\\\\\"\\\\\\\"\\\\n            # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\\\n            st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n        else:\\\\n            # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\\\n            st.markdown(content, unsafe_allow_html=True)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    # í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œ\\\\n    file_path = os.path.abspath(__file__)\\\\n\\\\n    # í¬íŠ¸ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    # Streamlit ì‹¤í–‰\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í†µí•© JSON ì €ì¥ ìœ„ì¹˜**: {get_default_merged_data_dir()}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"line_number\\\": 276}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"í†µí•© JSON\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"line_number\\\": 288}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n        files = get_merged_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í†µí•© JSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 325}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"date\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n```\\\", \\\"line_number\\\": 349}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## í†µí•© JSON ë‚´ìš©\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"line_number\\\": 438}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 512, \"file\": \"reviewer/cli.py\", \"description\": \"ì½”ë“œ ìˆœì„œê°€ ë…¼ë¦¬ì  íë¦„ì— ë§ì§€ ì•ŠìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ì™€ ì‘ë‹µ ì§ë ¬í™” ì½”ë“œê°€ ë¡œê·¸ ID ìƒì„± ì½”ë“œë³´ë‹¤ ë¨¼ì € ìœ„ì¹˜í•˜ê³  ìˆì–´ ê°€ë…ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤. ê´€ë ¨ ì½”ë“œ ë¸”ë¡ì€ í•¨ê»˜ ê·¸ë£¹í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê´€ë ¨ ì½”ë“œ ë¸”ë¡ì„ í•¨ê»˜ ê·¸ë£¹í™”í•˜ì—¬ ë…¼ë¦¬ì  íë¦„ì„ ê°œì„ í•˜ì„¸ìš”. ëª¨ë¸ ì •ë³´ì™€ ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • í›„, ì‹œê°„ ì •ë³´ì™€ ID ìƒì„±, ê·¸ ë‹¤ìŒ ì§ë ¬í™” ì‘ì—… ìˆœìœ¼ë¡œ ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"    \\\"\\\"\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    model_info = get_model_info(review_request.model)\\n    log_dir = get_default_review_log_dir()\\n    log_dir.mkdir(parents=True, exist_ok=True)\\n\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\n    prompt_data = None\\n    if prompt:\\n        prompt_data = prompt.to_messages()\\n\\n    # ì‘ë‹µ ì§ë ¬í™”\\n    response_data = None\\n    if review_response:\\n        response_data = review_response.model_dump(mode=\\\"json\\\")\\n\\n    now = datetime.now()\\n    provider = model_info.get(\\\"provider\\\", \\\"unknown\\\")\\n    model_name = model_info.get(\\\"full_name\\\", review_request.model)\\n    log_id = f\\\"{provider}-{model_name}-{int(now.timestamp())}\\\"\", \"improved_code\": \"    \\\"\\\"\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    model_info = get_model_info(review_request.model)\\n    log_dir = get_default_review_log_dir()\\n    log_dir.mkdir(parents=True, exist_ok=True)\\n\\n    # ì‹œê°„ ì •ë³´ì™€ ID ìƒì„±\\n    now = datetime.now()\\n    provider = model_info.get(\\\"provider\\\", \\\"unknown\\\")\\n    model_name = model_info.get(\\\"full_name\\\", review_request.model)\\n    log_id = f\\\"{provider}-{model_name}-{int(now.timestamp())}\\\"\\n    \\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\n    prompt_data = None\\n    if prompt:\\n        prompt_data = prompt.to_messages()\\n\\n    # ì‘ë‹µ ì§ë ¬í™”\\n    response_data = None\\n    if review_response:\\n        response_data = review_response.model_dump(mode=\\\"json\\\")\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 540, \"file\": \"reviewer/cli.py\", \"description\": \"íŒŒì¼ ì´ë¦„ ìƒì„± ë°©ì‹ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” log_idë¥¼ íŒŒì¼ëª…ìœ¼ë¡œ ì‚¬ìš©í–ˆìœ¼ë‚˜, ìƒˆë¡œìš´ ì½”ë“œì—ì„œëŠ” ë‚ ì§œì™€ ëª¨ë¸ëª…ì„ ì¡°í•©í•œ í˜•ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì¢‹ì€ ê°œì„ ì´ì§€ë§Œ, ê¸°ì¡´ log_id ë³€ìˆ˜ê°€ ì—¬ì „íˆ ìƒì„±ë˜ê³  ìˆì–´ ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"log_id ë³€ìˆ˜ê°€ íŒŒì¼ëª… ìƒì„±ì— ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, íŒŒì¼ëª… ìƒì„± ë¡œì§ì„ ëª…í™•íˆ í•˜ê³  ë¶ˆí•„ìš”í•œ ë³€ìˆ˜ ìƒì„±ì„ ì œê±°í•˜ê±°ë‚˜ ì£¼ì„ì„ ì¶”ê°€í•˜ì—¬ log_idì˜ ìš©ë„ë¥¼ ëª…í™•íˆ í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"    # íŒŒì¼ ì €ì¥\\n    formatted = now.strftime(\\\"%Y%m%d_%H%M%S\\\")\\n    file_name = f\\\"{formatted}_{model_name}_review_log\\\"\\n    file_path = log_dir / f\\\"{file_name}.json\\\"\\n    with open(file_path, \\\"w\\\", encoding=\\\"utf-8\\\") as f:\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\", \"improved_code\": \"    # log_idëŠ” ë¡œê·¸ ë‚´ìš©ì˜ ê³ ìœ  ì‹ë³„ìë¡œë§Œ ì‚¬ìš©í•˜ê³ , íŒŒì¼ëª…ì€ ë‚ ì§œ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±\\n    formatted = now.strftime(\\\"%Y%m%d_%H%M%S\\\")\\n    file_name = f\\\"{formatted}_{model_name}_review_log\\\"\\n    file_path = log_dir / f\\\"{file_name}.json\\\"\\n    with open(file_path, \\\"w\\\", encoding=\\\"utf-8\\\") as f:\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 276, \"file\": \"reviewer/src/ui.py\", \"description\": \"UI ì‚¬ì´ë“œë°”ì—ì„œ 'í†µí•© JSON ì €ì¥ ìœ„ì¹˜' í•­ëª©ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê´€ë ¨ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆê±°ë‚˜ ë³€ê²½ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ get_default_merged_data_dir() í•¨ìˆ˜ëŠ” ì—¬ì „íˆ ì½”ë“œì— ë‚¨ì•„ìˆì–´ ì¼ê´€ì„±ì´ ì—†ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê´€ë ¨ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆë‹¤ë©´ get_default_merged_data_dir() í•¨ìˆ˜ì™€ get_merged_data_files() í•¨ìˆ˜ë„ í•¨ê»˜ ì œê±°í•˜ê±°ë‚˜, í•´ë‹¹ ê¸°ëŠ¥ì´ ì—¬ì „íˆ í•„ìš”í•˜ë‹¤ë©´ UIì— ë‹¤ì‹œ ì¶”ê°€í•˜ì„¸ìš”. ì½”ë“œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"    st.sidebar.markdown(f\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\")\\n    st.sidebar.markdown(f\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\")\\n    st.sidebar.markdown(f\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\")\\n    st.sidebar.markdown(f\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\")\\n    st.sidebar.markdown(f\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\")\\n    st.sidebar.markdown(\\n        f\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\"\\n    )\", \"improved_code\": \"    st.sidebar.markdown(f\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\")\\n    st.sidebar.markdown(f\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\")\\n    st.sidebar.markdown(f\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\")\\n    st.sidebar.markdown(f\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\")\\n    st.sidebar.markdown(f\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\")\\n    st.sidebar.markdown(f\\\"**í†µí•© JSON ì €ì¥ ìœ„ì¹˜**: {get_default_merged_data_dir()}\\\")\\n    st.sidebar.markdown(\\n        f\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\"\\n    )\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 288, \"file\": \"reviewer/src/ui.py\", \"description\": \"UIì˜ ë³´ê¸° ìœ í˜• ì„ íƒ ì˜µì…˜ì—ì„œ 'í†µí•© JSON'ì´ 'ë¦¬ë·° ë¡œê·¸(review log)'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê¸°ëŠ¥ ë³€ê²½ì„ ì˜ë¯¸í•˜ì§€ë§Œ, ê´€ë ¨ í•¨ìˆ˜ ì´ë¦„(get_merged_data_files)ê³¼ ì¼ì¹˜í•˜ì§€ ì•Šì•„ í˜¼ë€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ëŠ¥ ì´ë¦„ê³¼ í•¨ìˆ˜ ì´ë¦„ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ì„¸ìš”. 'í†µí•© JSON'ì—ì„œ 'ë¦¬ë·° ë¡œê·¸'ë¡œ ë³€ê²½í–ˆë‹¤ë©´, ê´€ë ¨ í•¨ìˆ˜ëª…ë„ get_merged_data_files()ì—ì„œ get_review_log_files()ë¡œ ë³€ê²½í•˜ê±°ë‚˜, ì•„ë‹ˆë©´ UI ë ˆì´ë¸”ì„ í•¨ìˆ˜ëª…ê³¼ ì¼ì¹˜í•˜ë„ë¡ ì¡°ì •í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"        [\\n            \\\"ë¦¬ë·° ê²°ê³¼\\\",\\n            \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n            \\\"reviewRequest\\\",\\n            \\\"í”„ë¡¬í”„íŠ¸\\\",\\n            \\\"review log\\\",\\n            \\\"llm_eval ê²°ê³¼\\\",\\n        ],\\n        index=0,\", \"improved_code\": \"        [\\n            \\\"ë¦¬ë·° ê²°ê³¼\\\",\\n            \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n            \\\"reviewRequest\\\",\\n            \\\"í”„ë¡¬í”„íŠ¸\\\",\\n            \\\"í†µí•© JSON\\\",\\n            \\\"llm_eval ê²°ê³¼\\\",\\n        ],\\n        index=0,\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 325, \"file\": \"reviewer/src/ui.py\", \"description\": \"UIì˜ ë³´ê¸° ìœ í˜• ì²˜ë¦¬ ë¡œì§ì—ì„œ 'í†µí•© JSON'ì´ 'ë¦¬ë·° ë¡œê·¸(review log)'ë¡œ ë³€ê²½ë˜ì—ˆì§€ë§Œ, ì‹¤ì œë¡œëŠ” get_review_log_files() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” 'ë¦¬ë·° ê²°ê³¼'ì™€ 'ë¦¬ë·° ë¡œê·¸'ê°€ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ ì¤‘ë³µì´ ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ëŠ¥ ì¤‘ë³µì„ í”¼í•˜ê³  ëª…í™•í•œ êµ¬ë¶„ì„ ìœ„í•´, 'ë¦¬ë·° ê²°ê³¼'ì™€ 'ë¦¬ë·° ë¡œê·¸'ê°€ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ í‘œì‹œí•œë‹¤ë©´ ê°ê° ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•˜ì„¸ìš”. ë§Œì•½ ë™ì¼í•œ ë°ì´í„°ë¥¼ í‘œì‹œí•œë‹¤ë©´ UI ì˜µì…˜ì„ í†µí•©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"    elif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n        files = get_review_prompt_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"review log\\\":\\n        files = get_review_log_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    else:  # llm_eval ê²°ê³¼\\n        files = get_llm_eval_data_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\", \"improved_code\": \"    elif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n        files = get_review_prompt_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"í†µí•© JSON\\\":\\n        files = get_merged_data_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ í†µí•© JSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    else:  # llm_eval ê²°ê³¼\\n        files = get_llm_eval_data_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 349, \"file\": \"reviewer/src/ui.py\", \"description\": \"íŒŒì¼ ì •ë ¬ ë¡œì§ì´ mtime(ìˆ˜ì • ì‹œê°„)ì—ì„œ date(íŒŒì¼ ì •ë³´ì—ì„œ ì¶”ì¶œí•œ ë‚ ì§œ)ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” íŒŒì¼ëª…ì—ì„œ ì¶”ì¶œí•œ ë‚ ì§œë¥¼ ìš°ì„ ì‹œí•˜ëŠ” ì¢‹ì€ ë³€ê²½ì´ì§€ë§Œ, ì¼ë¶€ íŒŒì¼ì—ì„œ ë‚ ì§œ ì¶”ì¶œì— ì‹¤íŒ¨í•  ê²½ìš° ì¼ê´€ì„± ì—†ëŠ” ì •ë ¬ ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"date í•„ë“œê°€ ì—†ê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° mtimeì„ ëŒ€ì²´ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì•ˆì „ì¥ì¹˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. ì´ë ‡ê²Œ í•˜ë©´ ëª¨ë“  íŒŒì¼ì´ ì¼ê´€ë˜ê²Œ ì •ë ¬ë©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"    # ì •ë ¬ ì ìš©\\n    if sort_option == \\\"ìµœì‹ ìˆœ\\\":\\n        file_infos.sort(key=lambda x: x[\\\"date\\\"], reverse=True)\\n    elif sort_option == \\\"ì˜¤ë˜ëœìˆœ\\\":\\n        file_infos.sort(key=lambda x: x[\\\"date\\\"])\\n    elif sort_option == \\\"íŒŒì¼ëª…\\\":\\n        file_infos.sort(key=lambda x: x[\\\"name\\\"])\\n    elif sort_option == \\\"ëª¨ë¸ëª…\\\":\\n        file_infos.sort(key=lambda x: x[\\\"model\\\"])\", \"improved_code\": \"    # ì •ë ¬ ì ìš©\\n    if sort_option == \\\"ìµœì‹ ìˆœ\\\":\\n        file_infos.sort(key=lambda x: x.get(\\\"date\\\", x.get(\\\"mtime\\\")), reverse=True)\\n    elif sort_option == \\\"ì˜¤ë˜ëœìˆœ\\\":\\n        file_infos.sort(key=lambda x: x.get(\\\"date\\\", x.get(\\\"mtime\\\")))\\n    elif sort_option == \\\"íŒŒì¼ëª…\\\":\\n        file_infos.sort(key=lambda x: x[\\\"name\\\"])\\n    elif sort_option == \\\"ëª¨ë¸ëª…\\\":\\n        file_infos.sort(key=lambda x: x[\\\"model\\\"])\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 438, \"file\": \"reviewer/src/ui.py\", \"description\": \"UIì˜ JSON ë°ì´í„° í‘œì‹œ ë¡œì§ì—ì„œ 'í†µí•© JSON'ì´ 'ë¦¬ë·° ë¡œê·¸(review log)'ë¡œ ë³€ê²½ë˜ì—ˆì§€ë§Œ, ì²˜ë¦¬ ë¡œì§ì€ ë™ì¼í•©ë‹ˆë‹¤. ì´ëŠ” ê¸°ëŠ¥ ì´ë¦„ë§Œ ë³€ê²½ë˜ê³  ì‹¤ì œ ê¸°ëŠ¥ì€ ë™ì¼í•˜ê²Œ ìœ ì§€ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ëŠ¥ ì´ë¦„ ë³€ê²½ì´ ì˜ë„ì ì´ë¼ë©´ ê´€ë ¨ í•¨ìˆ˜ëª…ê³¼ ë³€ìˆ˜ëª…ë„ ì¼ê´€ë˜ê²Œ ë³€ê²½í•˜ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´ get_merged_data_files()ë¥¼ get_review_log_files()ë¡œ ë³€ê²½í•˜ê³ , ê´€ë ¨ ë””ë ‰í† ë¦¬ í•¨ìˆ˜ë„ ì¼ê´€ë˜ê²Œ ìˆ˜ì •í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"                elif view_type == \\\"review log\\\":\\n                    st.markdown(\\\"## review log\\\")\\n                    if \\\"prompt\\\" in json_data and isinstance(json_data[\\\"prompt\\\"], list):\\n                        for i, item in enumerate(json_data[\\\"prompt\\\"]):\\n                            if \\\"content\\\" in item and isinstance(item[\\\"content\\\"], str):\\n                                try:\\n                                    item[\\\"content\\\"] = json.loads(item[\\\"content\\\"])\", \"improved_code\": \"                elif view_type == \\\"í†µí•© JSON\\\":\\n                    st.markdown(\\\"## í†µí•© JSON ë‚´ìš©\\\")\\n                    if \\\"prompt\\\" in json_data and isinstance(json_data[\\\"prompt\\\"], list):\\n                        for i, item in enumerate(json_data[\\\"prompt\\\"]):\\n                            if \\\"content\\\" in item and isinstance(item[\\\"content\\\"], str):\\n                                try:\\n                                    item[\\\"content\\\"] = json.loads(item[\\\"content\\\"])\"}], \"summary\": \"ì´ ì½”ë“œ ë³€ê²½ì€ ì£¼ë¡œ ë¦¬ë·° ë¡œê·¸ ì €ì¥ ë°©ì‹ê³¼ UI í‘œì‹œ ë°©ì‹ì— ê´€ë ¨ëœ ìˆ˜ì •ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. \\n\\nreviewer/cli.py íŒŒì¼ì—ì„œëŠ” ë¦¬ë·° ë¡œê·¸ ì €ì¥ í•¨ìˆ˜ì˜ ì½”ë“œ êµ¬ì¡°ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ì™€ ì‘ë‹µ ì§ë ¬í™” ì½”ë“œì˜ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ì—ˆê³ , íŒŒì¼ ì €ì¥ ë°©ì‹ì´ log_id ê¸°ë°˜ì—ì„œ ë‚ ì§œì™€ ëª¨ë¸ëª…ì„ ì¡°í•©í•œ í˜•ì‹ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” íŒŒì¼ëª…ì„ ë” ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ê¸° ì‰½ê²Œ í•˜ëŠ” ê°œì„ ì…ë‹ˆë‹¤.\\n\\nreviewer/src/ui.py íŒŒì¼ì—ì„œëŠ” UI ê´€ë ¨ ë³€ê²½ì´ ìˆì—ˆìŠµë‹ˆë‹¤. 'í†µí•© JSON' ì˜µì…˜ì´ 'ë¦¬ë·° ë¡œê·¸(review log)'ë¡œ ì´ë¦„ì´ ë³€ê²½ë˜ì—ˆê³ , íŒŒì¼ ì •ë ¬ ë¡œì§ì´ mtimeì—ì„œ date ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ë³€ê²½ ê³¼ì •ì—ì„œ ì¼ë¶€ ì¼ê´€ì„± ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. íŠ¹íˆ í•¨ìˆ˜ëª…ê³¼ UI ë ˆì´ë¸” ê°„ì˜ ë¶ˆì¼ì¹˜, ê·¸ë¦¬ê³  'ë¦¬ë·° ê²°ê³¼'ì™€ 'ë¦¬ë·° ë¡œê·¸' ì˜µì…˜ì´ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¤‘ë³µ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.\\n\\nì „ë°˜ì ìœ¼ë¡œ ì½”ë“œ ë³€ê²½ì€ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê³  íŒŒì¼ ê´€ë¦¬ë¥¼ ë” ì§ê´€ì ìœ¼ë¡œ ë§Œë“œëŠ” ë°©í–¥ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œì§€ë§Œ, ì¼ë¶€ ì„¤ê³„ ì¼ê´€ì„± ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"ì½”ë“œ êµ¬ì¡°ë¥¼ ë…¼ë¦¬ì  íë¦„ì— ë§ê²Œ ì¬ë°°ì¹˜í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”. íŠ¹íˆ reviewer/cli.pyì˜ save_review_log í•¨ìˆ˜ì—ì„œ ê´€ë ¨ ì½”ë“œ ë¸”ë¡ì„ í•¨ê»˜ ê·¸ë£¹í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"ë³€ìˆ˜ì™€ í•¨ìˆ˜ì˜ ìš©ë„ë¥¼ ëª…í™•íˆ í•˜ëŠ” ì£¼ì„ì„ ì¶”ê°€í•˜ì„¸ìš”. íŠ¹íˆ log_idì™€ ê°™ì´ ìƒì„±ë˜ì§€ë§Œ ì´ì „ê³¼ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ” ë³€ìˆ˜ì— ëŒ€í•œ ì„¤ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"UI ë ˆì´ë¸”ê³¼ í•¨ìˆ˜ëª… ê°„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì„¸ìš”. 'í†µí•© JSON'ì—ì„œ 'ë¦¬ë·° ë¡œê·¸'ë¡œ ë³€ê²½í–ˆë‹¤ë©´ ê´€ë ¨ í•¨ìˆ˜ëª…ë„ ì¼ê´€ë˜ê²Œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.\", \"ì¤‘ë³µ ê¸°ëŠ¥ì„ ì œê±°í•˜ê±°ë‚˜ ëª…í™•íˆ êµ¬ë¶„í•˜ì„¸ìš”. 'ë¦¬ë·° ê²°ê³¼'ì™€ 'ë¦¬ë·° ë¡œê·¸'ê°€ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ UI ì˜µì…˜ì„ í†µí•©í•˜ê±°ë‚˜, ë‹¤ë¥¸ ë°ì´í„°ë¥¼ í‘œì‹œí•œë‹¤ë©´ ê°ê° ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\", \"ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œëŠ” ì œê±°í•˜ì„¸ìš”. get_default_merged_data_dir()ì™€ ê°™ì´ UIì—ì„œ ì œê±°ëœ ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ í•¨ìˆ˜ëŠ” í•¨ê»˜ ì œê±°í•˜ê±°ë‚˜ ë‹¤ì‹œ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.\", \"íŒŒì¼ ì •ë ¬ ë¡œì§ì— ì•ˆì „ì¥ì¹˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. date í•„ë“œê°€ ì—†ê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° mtimeì„ ëŒ€ì²´ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì¼ê´€ëœ ì •ë ¬ì„ ë³´ì¥í•´ì•¼ í•©ë‹ˆë‹¤.\", \"ì½”ë“œ ë³€ê²½ ì‹œ ê´€ë ¨ëœ ëª¨ë“  ë¶€ë¶„ì„ ì¼ê´€ë˜ê²Œ ìˆ˜ì •í•˜ì„¸ìš”. í•œ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ê³  ë‹¤ë¥¸ ë¶€ë¶„ì€ ê·¸ëŒ€ë¡œ ë‘ë©´ í˜¼ë€ê³¼ ë²„ê·¸ì˜ ì›ì¸ì´ ë©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom enum import Enum\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_model_info, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.models.review_prompt import ReviewPrompt\\\\nfrom reviewer.src.utils.prompts.models.review_prompt_with_file_content import (\\\\n    ReviewPromptWithFileContent,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest, ReviewResponse\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ, í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ë¨)\\\\\\\",\\\\n        deprecated=True,\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\nclass ReviewStatus(Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—´ê±°í˜• í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    SUCCESS = \\\\\\\"SUCCESS\\\\\\\"\\\\n    FAILED = \\\\\\\"FAILED\\\\\\\"\\\\n\\\\n\\\\ndef save_review_log(\\\\n    prompt: ReviewPrompt | ReviewPromptWithFileContent | None,\\\\n    review_request: ReviewRequest,\\\\n    review_response: ReviewResponse | None,\\\\n    status: ReviewStatus,\\\\n    error: Exception | None = None,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    now = datetime.now()\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n        \\\\\\\"prompt\\\\\\\": prompt_data,\\\\n        \\\\\\\"review_request\\\\\\\": review_request.model_dump(mode=\\\\\\\"json\\\\\\\"),\\\\n        \\\\\\\"review_response\\\\\\\": response_data,\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    formatted = now.strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    file_name = f\\\\\\\"{formatted}-{model_name}_review_log\\\\\\\"\\\\n    file_path = log_dir / f\\\\\\\"{file_name}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    try:\\\\n        # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n        review_request = ReviewRequest(\\\\n            diff_content=diff_content,\\\\n            processed_diff=diff_result,\\\\n            file_paths=[file.filename for file in diff_result.files],\\\\n            use_full_context=use_full_context,\\\\n            model=args.model,\\\\n            repo_path=repo_path,\\\\n        )\\\\n\\\\n        # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n        save_review_request(review_request)\\\\n\\\\n        # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n        llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n        # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n        logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n        review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n        review_response = llm_gateway.review_code(review_prompt)\\\\n        save_review_log(\\\\n            review_prompt, review_request, review_response, ReviewStatus.SUCCESS\\\\n        )\\\\n\\\\n        logger.info(\\\\\\\"ì½”ë“œ ë¦¬ë·°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        save_review_log(\\\\n            review_prompt,\\\\n            review_request,\\\\n            None,\\\\n            ReviewStatus.FAILED,\\\\n            error=e,\\\\n        )\\\\n        return\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í˜„ì¬ ì‹œê°„\\\\n    now = datetime.now()\\\\n\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    now = datetime.now()\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n```\\\", \\\"line_number\\\": 512}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    file_path = log_dir / f\\\\\\\"{log_id}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    formatted = now.strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    file_name = f\\\\\\\"{formatted}-{model_name}_review_log\\\\\\\"\\\\n    file_path = log_dir / f\\\\\\\"{file_name}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n```\\\", \\\"line_number\\\": 540}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import (\\\\n    get_default_raw_log_dir,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_prompt_dir,\\\\n    get_default_review_request_dir,\\\\n)\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ui.py íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ê³ , ê·¸ ì•„ë˜ data í´ë”ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_merged_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":  # macOS\\\\n        return (\\\\n            Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n        )\\\\n    elif sys.platform == \\\\\\\"win32\\\\\\\":  # Windows\\\\n        return Path(os.getenv(\\\\\\\"APPDATA\\\\\\\", \\\\\\\"\\\\\\\")) / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n    else:  # Linux ë“± ê¸°íƒ€\\\\n        return Path.home() / \\\\\\\".config\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n\\\\n\\\\ndef get_result_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\n    logger.warning(\\\\n        \\\\\\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n    )\\\\n    return []\\\\n\\\\n\\\\ndef get_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_raw_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_review_request_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    request_dir = get_default_review_request_dir()\\\\n    if not request_dir.exists():\\\\n        return []\\\\n\\\\n    request_files = list(request_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return request_files\\\\n\\\\n\\\\ndef get_review_prompt_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    if not prompt_dir.exists():\\\\n        return []\\\\n\\\\n    prompt_files = list(prompt_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return prompt_files\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    # data í´ë” ë‚´ ëª¨ë“  íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ (í™•ì¥ì ë¬´ê´€)\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_merged_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    merged_data_dir = get_default_merged_data_dir()\\\\n    if not merged_data_dir.exists():\\\\n        return []\\\\n\\\\n    merged_files = list(merged_data_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return merged_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\\\n    model_name_candidate = \\\\\\\"\\\\\\\"\\\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\\\n\\\\n    try:\\\\n        parts = file.stem.split(\\\\\\\"_\\\\\\\")\\\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\\\n        if len(parts) >= 3:\\\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\\\n            if (\\\\n                parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\\\n            elif (\\\\n                parts[-2].isdigit()\\\\n                and len(parts[-2]) == 8\\\\n                and parts[-1].isdigit()\\\\n                and len(parts[-1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[:-2])\\\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n                model_name_candidate = parts[-1]\\\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\\\n                if (\\\\n                    len(parts) >= 3\\\\n                    and parts[-2].isdigit()\\\\n                    and len(parts[-2]) == 6\\\\n                    and parts[-3].isdigit()\\\\n                    and len(parts[-3]) == 8\\\\n                ):\\\\n                    date_str = f\\\\\\\"{parts[-3]}_{parts[-2]}\\\\\\\"\\\\n                    try:\\\\n                        date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                    except ValueError:\\\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\\\n        elif (\\\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = file.stem\\\\n        elif (\\\\n            len(parts) == 1 and not parts[0].isdigit()\\\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = parts[0]\\\\n\\\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\\\n        pass  # model_name_candidate = \\\\\\\"\\\\\\\", date_candidate = mtime ìœ ì§€\\\\n\\\\n    file_suffix = file.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\\\n    if not file_suffix:\\\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\\\n        try:\\\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\\\n\\\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\\\n            file_parent_resolved = file.parent.resolve()\\\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\\\n\\\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\\\n            file_parent_str = str(file_parent_resolved)\\\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\\\n\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\\\n\\\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            if is_in_llm_eval_dir:\\\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            elif has_date_format:\\\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            else:\\\\n                file_format = \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\\\n            file_format = \\\\\\\"txt\\\\\\\"\\\\n    elif file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"]:\\\\n        file_format = file_suffix\\\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\\\n        file_format = \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    log_dir = get_default_raw_log_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    request_dir = get_default_review_request_dir()\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n        files = get_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n        files = get_review_request_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ì„ ì •ë³´ì™€ í•¨ê»˜ ì €ì¥\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    selected_file_path = selected_file_info[\\\\\\\"path\\\\\\\"]\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n    try:\\\\n        with open(selected_file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        # íŒŒì¼ ì •ë³´ í‘œì‹œ\\\\n        col1, col2, col3 = st.columns(3)\\\\n        with col1:\\\\n            st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {selected_file_info['name']}\\\\\\\")\\\\n        with col2:\\\\n            st.markdown(\\\\n                f\\\\\\\"**ë‚ ì§œ**: {selected_file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\"\\\\n            )\\\\n        with col3:\\\\n            st.markdown(f\\\\\\\"**í¬ê¸°**: {selected_file_info['size_str']}\\\\\\\")\\\\n\\\\n        # íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ\\\\n        format = selected_file_info[\\\\\\\"format\\\\\\\"]\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    # ë¦¬ë·° ë¡œê·¸ì—ì„œ review_response ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\\\\n                    if \\\\\\\"review_response\\\\\\\" in json_data and json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n                        # ë”•ì…”ë„ˆë¦¬ë¥¼ ReviewResponse ê°ì²´ë¡œ ë³€í™˜\\\\n                        review_response = ReviewResponse.model_validate(\\\\n                            json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                        )\\\\n\\\\n                        # ReviewFormatterë¥¼ ì‚¬ìš©í•˜ì—¬ HTMLë¡œ ë³€í™˜\\\\n                        formatter = ReviewFormatter()\\\\n                        html_content = formatter.to_html(review_response)\\\\n\\\\n                        # HTML ë‚´ìš©ì„ Streamlitì— í‘œì‹œ\\\\n                        html_content_with_style = html_content\\\\n                        st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n                    else:\\\\n                        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        st.json(json_data)\\\\n                elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n                    # ë¡œê·¸ ë°ì´í„°ë¥¼ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n                    # ë¦¬ë·° ìš”ì²­ ë°ì´í„°ë¥¼ raw JSONìœ¼ë¡œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## reviewRequest ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n                    # í”„ë¡¬í”„íŠ¸ ë°ì´í„° (ìµœìƒìœ„ê°€ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°) ì²˜ë¦¬\\\\n                    # ê° í•­ëª©ì˜ 'content'ê°€ ë¬¸ìì—´í™”ëœ JSONì´ë©´ íŒŒì‹±\\\\n                    st.markdown(\\\\\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\\\\\")\\\\n                    if isinstance(json_data, list):\\\\n                        for item in json_data:\\\\n                            if (\\\\n                                isinstance(item, dict)\\\\n                                and \\\\\\\"content\\\\\\\" in item\\\\n                                and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                            ):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n\\\\n                    num_total_cases = 0\\\\n                    if (\\\\n                        isinstance(json_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in json_data\\\\n                        and isinstance(json_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        num_total_cases = len(json_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n                    col_checkbox, col_count = st.columns(\\\\n                        [0.8, 0.2]\\\\n                    )  # ì²´í¬ë°•ìŠ¤ì™€ ì¹´ìš´íŠ¸ ì»¬ëŸ¼ ë¹„ìœ¨ ì¡°ì •\\\\n\\\\n                    with col_checkbox:\\\\n                        filter_failed_tests = st.checkbox(\\\\n                            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n                            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n                        )\\\\n\\\\n                    surviving_test_cases = []\\\\n                    if filter_failed_tests:\\\\n                        if (\\\\n                            isinstance(display_data, dict)\\\\n                            and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                            and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                        ):\\\\n                            surviving_test_cases = []\\\\n                            for tc_original in display_data[\\\\n                                \\\\\\\"testCases\\\\\\\"\\\\n                            ]:  # ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ\\\\n                                if (\\\\n                                    isinstance(tc_original, dict)\\\\n                                    and tc_original.get(\\\\\\\"success\\\\\\\") is False\\\\n                                ):\\\\n                                    # testCase.successê°€ falseì¸ ê²½ìš°ì—ë§Œ tc_to_add ë¡œì§ ìˆ˜í–‰\\\\n                                    tc_to_add = copy.deepcopy(\\\\n                                        tc_original\\\\n                                    )  # ë³µì‚¬ë³¸ ì‚¬ìš©\\\\n\\\\n                                    # metricsData ë‚´ë¶€ë¥¼ successê°€ falseì¸ í•­ëª©ë§Œ ë‚¨ë„ë¡ í•„í„°ë§\\\\n                                    if \\\\\\\"metricsData\\\\\\\" in tc_to_add and isinstance(\\\\n                                        tc_to_add[\\\\\\\"metricsData\\\\\\\"], list\\\\n                                    ):\\\\n                                        filtered_metrics = [\\\\n                                            m\\\\n                                            for m in tc_to_add[\\\\\\\"metricsData\\\\\\\"]\\\\n                                            if isinstance(m, dict)\\\\n                                            and m.get(\\\\\\\"success\\\\\\\") is False\\\\n                                        ]\\\\n                                        # metricsDataê°€ ë¹„ì–´ìˆì§€ ì•Šê±°ë‚˜, ì›ë˜ metricsDataê°€ ìˆì—ˆë˜ ê²½ìš°ì—ë§Œ í• ë‹¹\\\\n                                        # (í•­ìƒ metricsData í‚¤ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¡°ê±´ë¬¸ ì œê±° ê°€ëŠ¥)\\\\n                                        if (\\\\n                                            filtered_metrics\\\\n                                            or tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics\\\\n                                        elif (\\\\n                                            not filtered_metrics\\\\n                                            and tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            # ëª¨ë“  ë©”íŠ¸ë¦­ì´ trueì—¬ì„œ filtered_metricsê°€ ë¹„ì—ˆì§€ë§Œ, ì›ë˜ metricsDataê°€ ìˆì—ˆë‹¤ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì„¤ì •\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = []\\\\n\\\\n                                    surviving_test_cases.append(tc_to_add)\\\\n\\\\n                            display_data[\\\\\\\"testCases\\\\\\\"] = surviving_test_cases\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\\\n                        # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n                    # í•„í„°ë§ë˜ì—ˆê±°ë‚˜ ì „ì²´ testCasesì— ëŒ€í•´ ë‚´ë¶€ í•„ë“œ íŒŒì‹± ì ìš©\\\\n                    if (\\\\n                        isinstance(display_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                        and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        for test_case in display_data[\\\\\\\"testCases\\\\\\\"]:\\\\n                            if isinstance(test_case, dict):\\\\n                                # input í•„ë“œ ì²˜ë¦¬: í”„ë¡¬í”„íŠ¸ì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ íŒŒì‹±\\\\n                                if \\\\\\\"input\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"input\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                                        if isinstance(parsed_input, list):\\\\n                                            for item in parsed_input:\\\\n                                                if (\\\\n                                                    isinstance(item, dict)\\\\n                                                    and \\\\\\\"content\\\\\\\" in item\\\\n                                                    and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                                                ):\\\\n                                                    try:\\\\n                                                        item[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                            item[\\\\\\\"content\\\\\\\"]\\\\n                                                        )\\\\n                                                    except json.JSONDecodeError:\\\\n                                                        pass\\\\n                                        test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n\\\\n                                # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n                                if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"actualOutput\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(\\\\n                                            test_case[\\\\\\\"actualOutput\\\\\\\"]\\\\n                                        )\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n                    st.json(display_data)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n        elif format == \\\\\\\"html\\\\\\\":\\\\n            # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\\\n            # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\\\n            # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\\\n            html_content_with_style = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            <div style=\\\\\\\"height: 600px; overflow-y: scroll;\\\\\\\">\\\\n                {content}\\\\n            </div>\\\\n            \\\\\\\"\\\\\\\"\\\\\\\"\\\\n            # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\\\n            st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n        else:\\\\n            # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\\\n            st.markdown(content, unsafe_allow_html=True)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    # í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œ\\\\n    file_path = os.path.abspath(__file__)\\\\n\\\\n    # í¬íŠ¸ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    # Streamlit ì‹¤í–‰\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í†µí•© JSON ì €ì¥ ìœ„ì¹˜**: {get_default_merged_data_dir()}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"line_number\\\": 276}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"í†µí•© JSON\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"line_number\\\": 288}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n        files = get_merged_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í†µí•© JSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 325}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## í†µí•© JSON ë‚´ìš©\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"line_number\\\": 438}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 288, \"file\": \"reviewer/src/ui.py\", \"description\": \"Streamlit UIì—ì„œ 'ë¦¬ë·° ê²°ê³¼'ì™€ 'review log' ë‘ ê°€ì§€ ë³´ê¸° ìœ í˜•ì´ ë™ì¼í•œ `get_review_log_files()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì„ ê°€ì ¸ì˜¤ê³ , ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ë‚´ìš©ì„ í‘œì‹œí•©ë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ìì—ê²Œ í˜¼ë€ì„ ì¤„ ìˆ˜ ìˆìœ¼ë©° ì½”ë“œ ì¤‘ë³µì„ ì•¼ê¸°í•©ë‹ˆë‹¤.\", \"suggestion\": \"'ë¦¬ë·° ê²°ê³¼'ì™€ 'review log' ë³´ê¸° ìœ í˜•ì„ 'ë¦¬ë·° ë¡œê·¸' ë˜ëŠ” 'ì½”ë“œ ë¦¬ë·° ê²°ê³¼'ì™€ ê°™ì´ í•˜ë‚˜ì˜ ëª…í™•í•œ ì´ë¦„ìœ¼ë¡œ í†µí•©í•˜ê³ , í•´ë‹¹ ë¡œì§ì„ ë‹¨ì¼ ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ ê´€ë¦¬í•˜ì—¬ ì¤‘ë³µì„ ì œê±°í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    view_type = st.sidebar.selectbox(\\n        \\\"ë³´ê¸° ìœ í˜•:\\\",\\n        [\\n            \\\"ë¦¬ë·° ê²°ê³¼\\\",\\n            \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n            \\\"reviewRequest\\\",\\n            \\\"í”„ë¡¬í”„íŠ¸\\\",\\n            \\\"í†µí•© JSON\\\",\\n            \\\"llm_eval ê²°ê³¼\\\",\\n        ],\\n        index=0,\\n    )\\n\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\n    if view_type == \\\"ë¦¬ë·° ê²°ê³¼\\\":\\n        files = get_review_log_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            st.markdown(\\\"\\\"\\\"\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\n            \\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\n            ```bash\\n            reviewer review\\n            ```\\n            \\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\n            \\\"\\\"\\\")\\n            return\\n    elif view_type == \\\"ì‘ë‹µ ë¡œê·¸\\\":\\n        files = get_log_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"reviewRequest\\\":\\n        files = get_review_request_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n        files = get_review_prompt_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"í†µí•© JSON\\\":\\n        files = get_merged_data_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ í†µí•© JSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    else:  # llm_eval ê²°ê³¼\\n        files = get_llm_eval_data_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n```\", \"improved_code\": \"```python\\n    view_type = st.sidebar.selectbox(\\n        \\\"ë³´ê¸° ìœ í˜•:\\\",\\n        [\\n            \\\"ë¦¬ë·° ë¡œê·¸\\\", # 'ë¦¬ë·° ê²°ê³¼'ì™€ 'review log' í†µí•©\\n            \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n            \\\"reviewRequest\\\",\\n            \\\"í”„ë¡¬í”„íŠ¸\\\",\\n            \\\"llm_eval ê²°ê³¼\\\",\\n        ],\\n        index=0,\\n    )\\n\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\n    if view_type == \\\"ë¦¬ë·° ë¡œê·¸\\\":\\n        files = get_review_log_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            st.markdown(\\\"\\\"\\\"\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\n            \\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\n            ```bash\\n            reviewer review\\n            ```\\n            \\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\n            \\\"\\\"\\\")\\n            return\\n    elif view_type == \\\"ì‘ë‹µ ë¡œê·¸\\\":\\n        files = get_log_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"reviewRequest\\\":\\n        files = get_review_request_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    elif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n        files = get_review_prompt_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n            return\\n    else:  # llm_eval ê²°ê³¼\\n        files = get_llm_eval_data_files()\\n        if not files:\\n            st.info(\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\")\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 40, \"file\": \"reviewer/src/ui.py\", \"description\": \"UIì—ì„œ 'í†µí•© JSON' ë³´ê¸° ìœ í˜•ì´ ì œê±°ë˜ì—ˆì§€ë§Œ, `get_default_merged_data_dir` ë° `get_merged_data_files` í•¨ìˆ˜ëŠ” ì½”ë“œì— ë‚¨ì•„ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë°ë“œ ì½”ë“œì…ë‹ˆë‹¤.\", \"suggestion\": \"ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” `get_default_merged_data_dir` ë° `get_merged_data_files` í•¨ìˆ˜ë¥¼ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ì •ë¦¬í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"```python\\ndef get_default_merged_data_dir() -> Path:\\n    \\\"\\\"\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n    if sys.platform == \\\"darwin\\\":  # macOS\\n        return (\\n            Path.home() / \\\"Library\\\" / \\\"Application Support\\\" / \\\"reviewer\\\" / \\\"merged_data\\\"\\n        )\\n    elif sys.platform == \\\"win32\\\":  # Windows\\n        return Path(os.getenv(\\\"APPDATA\\\", \\\"\\\")) / \\\"reviewer\\\" / \\\"merged_data\\\"\\n    else:  # Linux ë“± ê¸°íƒ€\\n        return Path.home() / \\\".config\\\" / \\\"reviewer\\\" / \\\"merged_data\\\"\\n\\n\\ndef get_result_files() -> list[Path]:\\n    \\\"\\\"\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\"\\\"\\\"\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\n    logger.warning(\\n        \\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\"\\n    )\\n    return []\\n\\n\\ndef get_log_files() -> list[Path]:\\n```\", \"improved_code\": \"```python\\n# get_default_merged_data_dir í•¨ìˆ˜ ì œê±°\\n# get_merged_data_files í•¨ìˆ˜ ì œê±°\\n\\ndef get_result_files() -> list[Path]:\\n    \\\"\\\"\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\"\\\"\\\"\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\n    logger.warning(\\n        \\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\"\\n    )\\n    return []\\n\\n\\ndef get_log_files() -> list[Path]:\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 116, \"file\": \"reviewer/src/ui.py\", \"description\": \"`get_file_info` í•¨ìˆ˜ëŠ” íŒŒì¼ëª…ì—ì„œ ë‚ ì§œì™€ ëª¨ë¸ ì´ë¦„ì„ íŒŒì‹±í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ê°€ì§€ í˜•ì‹ì„ ì‹œë„í•˜ëŠ” ë³µì¡í•œ ë¡œì§ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” íŒŒì¼ëª… í˜•ì‹ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ì–´ë µê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ ë¡œê·¸ ë° ê²°ê³¼ íŒŒì¼ì˜ íŒŒì¼ëª… í˜•ì‹ì„ í‘œì¤€í™”í•˜ê³ , `get_file_info` í•¨ìˆ˜ëŠ” í‘œì¤€í™”ëœ í˜•ì‹ë§Œ íŒŒì‹±í•˜ë„ë¡ ë‹¨ìˆœí™”í•˜ê±°ë‚˜, íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ëª…í™•íˆ í•˜ì„¸ìš”. `cli.py`ì—ì„œ ë¡œê·¸ íŒŒì¼ëª… í˜•ì‹ì„ ê°œì„ í•œ ê²ƒì²˜ëŸ¼, ë‹¤ë¥¸ íŒŒì¼ë“¤ë„ ì¼ê´€ëœ ê·œì¹™ì„ ë”°ë¥´ë„ë¡ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\ndef get_file_info(file: Path) -> dict[str, Any]:\\n    \\\"\\\"\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\n    size = file.stat().st_size\\n    size_str = f\\\"{size / 1024:.1f}KB\\\" if size >= 1024 else f\\\"{size}B\\\"\\n\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\n    model_name_candidate = \\\"\\\"\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\n\\n    try:\\n        parts = file.stem.split(\\\"_\\\")\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\n        if len(parts) >= 3:\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\n            if (\\n                parts[0].isdigit()\\n                and len(parts[0]) == 8\\n                and parts[1].isdigit()\\n                and len(parts[1]) == 6\\n            ):\\n                date_str = f\\\"{parts[0]}_{parts[1]}\\\"\\n                date_candidate = datetime.strptime(date_str, \\\"%Y%m%d_%H%M%S\\\")\\n                model_name_candidate = \\\"_\\\".join(parts[2:])\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\n            elif (\\n                parts[-2].isdigit()\\n                and len(parts[-2]) == 8\\n                and parts[-1].isdigit()\\n                and len(parts[-1]) == 6\\n            ):\\n                date_str = f\\\"{parts[-2]}_{parts[-1]}\\\"\\n                date_candidate = datetime.strptime(date_str, \\\"%Y%m%d_%H%M%S\\\")\\n                model_name_candidate = \\\"_\\\".join(parts[:-2])\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\n                model_name_candidate = parts[-1]\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\n                if (\\n                    len(parts) >= 3\\n                    and parts[-2].isdigit()\\n                    and len(parts[-2]) == 6\\n                    and parts[-3].isdigit()\\n                    and len(parts[-3]) == 8\\n                ):\\n                    date_str = f\\\"{parts[-3]}_{parts[-2]}\\\"\\n                    try:\\n                        date_candidate = datetime.strptime(date_str, \\\"%Y%m%d_%H%M%S\\\")\\n                    except ValueError:\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\n        elif (\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\n            model_name_candidate = file.stem\\n        elif (\\n            len(parts) == 1 and not parts[0].isdigit()\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\n            model_name_candidate = parts[0]\\n\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\n        pass  # model_name_candidate = \\\"\\\", date_candidate = mtime ìœ ì§€\\n\\n    file_suffix = file.suffix.lstrip(\\\".\\\").lower()\\n\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\n    if not file_suffix:\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\n        try:\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\n\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\n            file_parent_resolved = file.parent.resolve()\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\n\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\n            file_parent_str = str(file_parent_resolved)\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\n\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\n\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\n            has_date_format = (\\n                len(parts) >= 2\\n                and parts[0].isdigit()\\n                and len(parts[0]) == 8\\n                and parts[1].isdigit()\\n                and len(parts[1]) == 6\\n            )\\n\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\n            if is_in_llm_eval_dir:\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\n                file_format = \\\"json\\\"\\n            elif has_date_format:\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\n                file_format = \\\"json\\\"\\n            else:\\n                file_format = \\\"txt\\\"\\n        except Exception:\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\n            file_format = \\\"txt\\\"\\n    elif file_suffix in [\\\"json\\\", \\\"log\\\", \\\"html\\\", \\\"txt\\\"]:\\n        file_format = file_suffix\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\n        file_format = \\\"txt\\\"\\n\\n    return {\\n        \\\"path\\\": file,\\n        \\\"name\\\": file.name,\\n        \\\"model\\\": model_name_candidate,\\n        \\\"date\\\": date_candidate,\\n        \\\"mtime\\\": mtime,\\n        \\\"size\\\": size,\\n        \\\"size_str\\\": size_str,\\n        \\\"format\\\": file_format,\\n    }\\n```\", \"improved_code\": \"```python\\ndef get_file_info(file: Path) -> dict[str, Any]:\\n    \\\"\\\"\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\n    size = file.stat().st_size\\n    size_str = f\\\"{size / 1024:.1f}KB\\\" if size >= 1024 else f\\\"{size}B\\\"\\n\\n    model_name_candidate = \\\"\\\"\\n    date_candidate = mtime\\n    file_format = file.suffix.lstrip(\\\".\\\").lower() or \\\"txt\\\"\\n\\n    # í‘œì¤€ íŒŒì¼ëª… í˜•ì‹ (ì˜ˆ: YYYYMMDD_HHMMSS-ModelName_review_log.json) íŒŒì‹± ì‹œë„\\n    try:\\n        parts = file.stem.split('-')\\n        if len(parts) >= 2:\\n            date_model_part = parts[0]\\n            other_parts = parts[1:]\\n\\n            date_model_subparts = date_model_part.split('_')\\n            if len(date_model_subparts) >= 2:\\n                 # YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬\\n                if (\\n                    date_model_subparts[0].isdigit()\\n                    and len(date_model_subparts[0]) == 8\\n                    and date_model_subparts[1].isdigit()\\n                    and len(date_model_subparts[1]) == 6\\n                ):\\n                    date_str = f\\\"{date_model_subparts[0]}_{date_model_subparts[1]}\\\"\\n                    date_candidate = datetime.strptime(date_str, \\\"%Y%m%d_%H%M%S\\\")\\n                    model_name_candidate = '-'.join(other_parts).split('_review_log')[0] # ì˜ˆì‹œ íŒŒì‹±\\n\\n    except Exception:\\n        pass # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’ ìœ ì§€\\n\\n    # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\n    try:\\n        llm_eval_dir = get_default_llm_eval_data_dir()\\n        if file.parent.resolve().startswith(llm_eval_dir.resolve()):\\n             file_format = \\\"json\\\"\\n    except Exception:\\n        pass\\n\\n    # ì•Œë ¤ì§„ í™•ì¥ì ì²˜ë¦¬\\n    if file_format not in [\\\"json\\\", \\\"log\\\", \\\"html\\\", \\\"txt\\\"]:\\n         file_format = \\\"txt\\\"\\n\\n    return {\\n        \\\"path\\\": file,\\n        \\\"name\\\": file.name,\\n        \\\"model\\\": model_name_candidate,\\n        \\\"date\\\": date_candidate,\\n        \\\"mtime\\\": mtime,\\n        \\\"size\\\": size,\\n        \\\"size_str\\\": size_str,\\n        \\\"format\\\": file_format,\\n    }\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 428, \"file\": \"reviewer/src/ui.py\", \"description\": \"JSON ë°ì´í„° ë‚´ë¶€ì— ë¬¸ìì—´í™”ëœ JSONì´ í¬í•¨ëœ ê²½ìš° (ì˜ˆ: í”„ë¡¬í”„íŠ¸, llm_eval ê²°ê³¼ì˜ input/actualOutput) ì´ë¥¼ íŒŒì‹±í•˜ëŠ” ë¡œì§ì´ ì—¬ëŸ¬ ê³³ì—ì„œ ë°˜ë³µë˜ê³  ì¤‘ì²©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ì €í•´í•©ë‹ˆë‹¤.\", \"suggestion\": \"ë¬¸ìì—´í™”ëœ JSONì„ ì¬ê·€ì ìœ¼ë¡œ íŒŒì‹±í•˜ëŠ” ë³„ë„ì˜ í—¬í¼ í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê³ , ì´ í•¨ìˆ˜ë¥¼ í•„ìš”í•œ ê³³ì—ì„œ í˜¸ì¶œí•˜ì—¬ ì½”ë“œ ì¤‘ë³µì„ ì œê±°í•˜ê³  ë¡œì§ì„ ë‹¨ìˆœí™”í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"```python\\n                elif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n                    # í”„ë¡¬í”„íŠ¸ ë°ì´í„° (ìµœìƒìœ„ê°€ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°) ì²˜ë¦¬\\n                    # ê° í•­ëª©ì˜ 'content'ê°€ ë¬¸ìì—´í™”ëœ JSONì´ë©´ íŒŒì‹±\\n                    st.markdown(\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\")\\n                    if isinstance(json_data, list):\\n                        for item in json_data:\\n                            if (\\n                                isinstance(item, dict)\\n                                and \\\"content\\\" in item\\n                                and isinstance(item[\\\"content\\\"], str)\\n                            ):\\n                                try:\\n                                    item[\\\"content\\\"] = json.loads(item[\\\"content\\\"])\\n                                except json.JSONDecodeError:\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\n                    st.json(json_data)\\n                elif view_type == \\\"í†µí•© JSON\\\":\\n                    st.markdown(\\\"## í†µí•© JSON ë‚´ìš©\\\")\\n                    if \\\"prompt\\\" in json_data and isinstance(json_data[\\\"prompt\\\"], list):\\n                        for i, item in enumerate(json_data[\\\"prompt\\\"]):\\n                            if \\\"content\\\" in item and isinstance(item[\\\"content\\\"], str):\\n                                try:\\n                                    item[\\\"content\\\"] = json.loads(item[\\\"content\\\"])\\n```\", \"improved_code\": \"```python\\ndef parse_nested_json_strings(data: Any) -> Any:\\n    \\\"\\\"\\\"ë°ì´í„° êµ¬ì¡° ë‚´ì—ì„œ ë¬¸ìì—´í™”ëœ JSONì„ íŒŒì‹±í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    if isinstance(data, dict):\\n        for key, value in data.items():\\n            if isinstance(value, str):\\n                try:\\n                    data[key] = json.loads(value)\\n                    # ì¬ê·€ì ìœ¼ë¡œ íŒŒì‹±ëœ ë‚´ìš© ì•ˆì—ì„œë„ ë‹¤ì‹œ íŒŒì‹± ì‹œë„\\n                    data[key] = parse_nested_json_strings(data[key])\\n                except json.JSONDecodeError:\\n                    pass # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë¬¸ìì—´ ìœ ì§€\\n            else:\\n                data[key] = parse_nested_json_strings(value)\\n    elif isinstance(data, list):\\n        data = [parse_nested_json_strings(item) for item in data]\\n    return data\\n\\n# ... (ì¤‘ëµ) ...\\n\\n                elif view_type == \\\"í”„ë¡¬í”„íŠ¸\\\":\\n                    st.markdown(\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\")\\n                    # í—¬í¼ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì‹±\\n                    parsed_data = parse_nested_json_strings(json_data)\\n                    st.json(parsed_data)\\n                elif view_type == \\\"review log\\\": # í†µí•©ëœ 'ë¦¬ë·° ë¡œê·¸' ë˜ëŠ” ìœ ì‚¬ ì´ë¦„ ì‚¬ìš© ê¶Œì¥\\n                    st.markdown(\\\"## review log\\\")\\n                    # í—¬í¼ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì‹±\\n                    parsed_data = parse_nested_json_strings(json_data)\\n                    st.json(parsed_data)\\n                elif view_type == \\\"llm_eval ê²°ê³¼\\\":\\n                    st.markdown(\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\")\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\n                    display_data = copy.deepcopy(json_data)\\n\\n                    # í—¬í¼ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ input/actualOutput ë“± íŒŒì‹±\\n                    if isinstance(display_data, dict) and \\\"testCases\\\" in display_data:\\n                         if isinstance(display_data[\\\"testCases\\\"], list):\\n                              display_data[\\\"testCases\\\"] = [parse_nested_json_strings(tc) for tc in display_data[\\\"testCases\\\"]]\\n\\n                    # ... (ë‚˜ë¨¸ì§€ llm_eval í•„í„°ë§/í‘œì‹œ ë¡œì§)\\n                    st.json(display_data)\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œ ë¦¬ë·° ë¡œê·¸ íŒŒì¼ëª…ì„ ë” ì½ê¸° ì‰½ê²Œ ë³€ê²½í•˜ê³ (cli.py), Streamlit UIì—ì„œ 'í†µí•© JSON' ë³´ê¸° ì˜µì…˜ì„ ì œê±°í•˜ë©° 'review log' ë³´ê¸° ì˜µì…˜ì„ ì¶”ê°€í•©ë‹ˆë‹¤(ui.py). UI ë³€ê²½ìœ¼ë¡œ ì¸í•´ 'ë¦¬ë·° ê²°ê³¼'ì™€ 'review log' ë³´ê¸° ìœ í˜•ì´ ë™ì¼í•œ íŒŒì¼ì„ ê°€ë¦¬í‚¤ê²Œ ë˜ì–´ ì¤‘ë³µì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” 'í†µí•© JSON' ê´€ë ¨ í•¨ìˆ˜ê°€ ë‚¨ì•„ìˆê³ , UIì˜ íŒŒì¼ëª… íŒŒì‹± ë° ì¤‘ì²© JSON íŒŒì‹± ë¡œì§ì´ ë³µì¡í•©ë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"Streamlit UIì—ì„œ 'ë¦¬ë·° ê²°ê³¼'ì™€ 'review log' ë³´ê¸° ìœ í˜•ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬ ì‚¬ìš©ì í˜¼ë€ì„ ì¤„ì´ê³  ì½”ë“œ ì¤‘ë³µì„ ì œê±°í•˜ì„¸ìš”.\", \"ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” 'í†µí•© JSON' ê´€ë ¨ í•¨ìˆ˜(`get_default_merged_data_dir`, `get_merged_data_files`)ë¥¼ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ì •ë¦¬í•˜ì„¸ìš”.\", \"ë¡œê·¸ ë° ê²°ê³¼ íŒŒì¼ì˜ íŒŒì¼ëª… í˜•ì‹ì„ í‘œì¤€í™”í•˜ê³ , UIì˜ `get_file_info` í•¨ìˆ˜ íŒŒì‹± ë¡œì§ì„ ë‹¨ìˆœí™”í•˜ì—¬ ê²¬ê³ ì„±ì„ ë†’ì´ì„¸ìš”.\", \"UIì—ì„œ JSON ë°ì´í„° ë‚´ ë¬¸ìì—´í™”ëœ JSONì„ íŒŒì‹±í•˜ëŠ” ë¡œì§ì„ í—¬í¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom enum import Enum\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_model_info, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.models.review_prompt import ReviewPrompt\\\\nfrom reviewer.src.utils.prompts.models.review_prompt_with_file_content import (\\\\n    ReviewPromptWithFileContent,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest, ReviewResponse\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ, í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ë¨)\\\\\\\",\\\\n        deprecated=True,\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\nclass ReviewStatus(Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—´ê±°í˜• í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    SUCCESS = \\\\\\\"SUCCESS\\\\\\\"\\\\n    FAILED = \\\\\\\"FAILED\\\\\\\"\\\\n\\\\n\\\\ndef save_review_log(\\\\n    prompt: ReviewPrompt | ReviewPromptWithFileContent | None,\\\\n    review_request: ReviewRequest,\\\\n    review_response: ReviewResponse | None,\\\\n    status: ReviewStatus,\\\\n    error: Exception | None = None,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í˜„ì¬ ì‹œê°„\\\\n    now = datetime.now()\\\\n    formatted = now.strftime(\\\\\\\"%Y-%m-%d %H:%M:%S\\\\\\\")\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{formatted}-{provider}-{model_name}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n        \\\\\\\"prompt\\\\\\\": prompt_data,\\\\n        \\\\\\\"review_request\\\\\\\": review_request.model_dump(mode=\\\\\\\"json\\\\\\\"),\\\\n        \\\\\\\"review_response\\\\\\\": response_data,\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    file_path = log_dir / f\\\\\\\"{log_id}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    try:\\\\n        # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n        review_request = ReviewRequest(\\\\n            diff_content=diff_content,\\\\n            processed_diff=diff_result,\\\\n            file_paths=[file.filename for file in diff_result.files],\\\\n            use_full_context=use_full_context,\\\\n            model=args.model,\\\\n            repo_path=repo_path,\\\\n        )\\\\n\\\\n        # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n        save_review_request(review_request)\\\\n\\\\n        # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n        llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n        # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n        logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n        review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n        review_response = llm_gateway.review_code(review_prompt)\\\\n        save_review_log(\\\\n            review_prompt, review_request, review_response, ReviewStatus.SUCCESS\\\\n        )\\\\n\\\\n        logger.info(\\\\\\\"ì½”ë“œ ë¦¬ë·°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        save_review_log(\\\\n            review_prompt,\\\\n            review_request,\\\\n            None,\\\\n            ReviewStatus.FAILED,\\\\n            error=e,\\\\n        )\\\\n        return\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í˜„ì¬ ì‹œê°„\\\\n    now = datetime.now()\\\\n\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í˜„ì¬ ì‹œê°„\\\\n    now = datetime.now()\\\\n    formatted = now.strftime(\\\\\\\"%Y-%m-%d %H:%M:%S\\\\\\\")\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{formatted}-{provider}-{model_name}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n```\\\", \\\"line_number\\\": 514}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import (\\\\n    get_default_raw_log_dir,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_prompt_dir,\\\\n    get_default_review_request_dir,\\\\n)\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ui.py íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ê³ , ê·¸ ì•„ë˜ data í´ë”ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_merged_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":  # macOS\\\\n        return (\\\\n            Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n        )\\\\n    elif sys.platform == \\\\\\\"win32\\\\\\\":  # Windows\\\\n        return Path(os.getenv(\\\\\\\"APPDATA\\\\\\\", \\\\\\\"\\\\\\\")) / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n    else:  # Linux ë“± ê¸°íƒ€\\\\n        return Path.home() / \\\\\\\".config\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n\\\\n\\\\ndef get_result_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\n    logger.warning(\\\\n        \\\\\\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n    )\\\\n    return []\\\\n\\\\n\\\\ndef get_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_raw_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_review_request_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    request_dir = get_default_review_request_dir()\\\\n    if not request_dir.exists():\\\\n        return []\\\\n\\\\n    request_files = list(request_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return request_files\\\\n\\\\n\\\\ndef get_review_prompt_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    if not prompt_dir.exists():\\\\n        return []\\\\n\\\\n    prompt_files = list(prompt_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return prompt_files\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    # data í´ë” ë‚´ ëª¨ë“  íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ (í™•ì¥ì ë¬´ê´€)\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_merged_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    merged_data_dir = get_default_merged_data_dir()\\\\n    if not merged_data_dir.exists():\\\\n        return []\\\\n\\\\n    merged_files = list(merged_data_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return merged_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\\\n    model_name_candidate = \\\\\\\"\\\\\\\"\\\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\\\n\\\\n    try:\\\\n        parts = file.stem.split(\\\\\\\"_\\\\\\\")\\\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\\\n        if len(parts) >= 3:\\\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\\\n            if (\\\\n                parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\\\n            elif (\\\\n                parts[-2].isdigit()\\\\n                and len(parts[-2]) == 8\\\\n                and parts[-1].isdigit()\\\\n                and len(parts[-1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[:-2])\\\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n                model_name_candidate = parts[-1]\\\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\\\n                if (\\\\n                    len(parts) >= 3\\\\n                    and parts[-2].isdigit()\\\\n                    and len(parts[-2]) == 6\\\\n                    and parts[-3].isdigit()\\\\n                    and len(parts[-3]) == 8\\\\n                ):\\\\n                    date_str = f\\\\\\\"{parts[-3]}_{parts[-2]}\\\\\\\"\\\\n                    try:\\\\n                        date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                    except ValueError:\\\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\\\n        elif (\\\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = file.stem\\\\n        elif (\\\\n            len(parts) == 1 and not parts[0].isdigit()\\\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = parts[0]\\\\n\\\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\\\n        pass  # model_name_candidate = \\\\\\\"\\\\\\\", date_candidate = mtime ìœ ì§€\\\\n\\\\n    file_suffix = file.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\\\n    if not file_suffix:\\\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\\\n        try:\\\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\\\n\\\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\\\n            file_parent_resolved = file.parent.resolve()\\\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\\\n\\\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\\\n            file_parent_str = str(file_parent_resolved)\\\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\\\n\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\\\n\\\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            if is_in_llm_eval_dir:\\\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            elif has_date_format:\\\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            else:\\\\n                file_format = \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\\\n            file_format = \\\\\\\"txt\\\\\\\"\\\\n    elif file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"]:\\\\n        file_format = file_suffix\\\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\\\n        file_format = \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    log_dir = get_default_raw_log_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    request_dir = get_default_review_request_dir()\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n        files = get_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n        files = get_review_request_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ì„ ì •ë³´ì™€ í•¨ê»˜ ì €ì¥\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    selected_file_path = selected_file_info[\\\\\\\"path\\\\\\\"]\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n    try:\\\\n        with open(selected_file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        # íŒŒì¼ ì •ë³´ í‘œì‹œ\\\\n        col1, col2, col3 = st.columns(3)\\\\n        with col1:\\\\n            st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {selected_file_info['name']}\\\\\\\")\\\\n        with col2:\\\\n            st.markdown(\\\\n                f\\\\\\\"**ë‚ ì§œ**: {selected_file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\"\\\\n            )\\\\n        with col3:\\\\n            st.markdown(f\\\\\\\"**í¬ê¸°**: {selected_file_info['size_str']}\\\\\\\")\\\\n\\\\n        # íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ\\\\n        format = selected_file_info[\\\\\\\"format\\\\\\\"]\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    # ë¦¬ë·° ë¡œê·¸ì—ì„œ review_response ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\\\\n                    if \\\\\\\"review_response\\\\\\\" in json_data and json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n                        # ë”•ì…”ë„ˆë¦¬ë¥¼ ReviewResponse ê°ì²´ë¡œ ë³€í™˜\\\\n                        review_response = ReviewResponse.model_validate(\\\\n                            json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                        )\\\\n\\\\n                        # ReviewFormatterë¥¼ ì‚¬ìš©í•˜ì—¬ HTMLë¡œ ë³€í™˜\\\\n                        formatter = ReviewFormatter()\\\\n                        html_content = formatter.to_html(review_response)\\\\n\\\\n                        # HTML ë‚´ìš©ì„ Streamlitì— í‘œì‹œ\\\\n                        html_content_with_style = html_content\\\\n                        st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n                    else:\\\\n                        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        st.json(json_data)\\\\n                elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n                    # ë¡œê·¸ ë°ì´í„°ë¥¼ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n                    # ë¦¬ë·° ìš”ì²­ ë°ì´í„°ë¥¼ raw JSONìœ¼ë¡œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## reviewRequest ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n                    # í”„ë¡¬í”„íŠ¸ ë°ì´í„° (ìµœìƒìœ„ê°€ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°) ì²˜ë¦¬\\\\n                    # ê° í•­ëª©ì˜ 'content'ê°€ ë¬¸ìì—´í™”ëœ JSONì´ë©´ íŒŒì‹±\\\\n                    st.markdown(\\\\\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\\\\\")\\\\n                    if isinstance(json_data, list):\\\\n                        for item in json_data:\\\\n                            if (\\\\n                                isinstance(item, dict)\\\\n                                and \\\\\\\"content\\\\\\\" in item\\\\n                                and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                            ):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n\\\\n                    num_total_cases = 0\\\\n                    if (\\\\n                        isinstance(json_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in json_data\\\\n                        and isinstance(json_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        num_total_cases = len(json_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n                    col_checkbox, col_count = st.columns(\\\\n                        [0.8, 0.2]\\\\n                    )  # ì²´í¬ë°•ìŠ¤ì™€ ì¹´ìš´íŠ¸ ì»¬ëŸ¼ ë¹„ìœ¨ ì¡°ì •\\\\n\\\\n                    with col_checkbox:\\\\n                        filter_failed_tests = st.checkbox(\\\\n                            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n                            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n                        )\\\\n\\\\n                    surviving_test_cases = []\\\\n                    if filter_failed_tests:\\\\n                        if (\\\\n                            isinstance(display_data, dict)\\\\n                            and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                            and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                        ):\\\\n                            surviving_test_cases = []\\\\n                            for tc_original in display_data[\\\\n                                \\\\\\\"testCases\\\\\\\"\\\\n                            ]:  # ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ\\\\n                                if (\\\\n                                    isinstance(tc_original, dict)\\\\n                                    and tc_original.get(\\\\\\\"success\\\\\\\") is False\\\\n                                ):\\\\n                                    # testCase.successê°€ falseì¸ ê²½ìš°ì—ë§Œ tc_to_add ë¡œì§ ìˆ˜í–‰\\\\n                                    tc_to_add = copy.deepcopy(\\\\n                                        tc_original\\\\n                                    )  # ë³µì‚¬ë³¸ ì‚¬ìš©\\\\n\\\\n                                    # metricsData ë‚´ë¶€ë¥¼ successê°€ falseì¸ í•­ëª©ë§Œ ë‚¨ë„ë¡ í•„í„°ë§\\\\n                                    if \\\\\\\"metricsData\\\\\\\" in tc_to_add and isinstance(\\\\n                                        tc_to_add[\\\\\\\"metricsData\\\\\\\"], list\\\\n                                    ):\\\\n                                        filtered_metrics = [\\\\n                                            m\\\\n                                            for m in tc_to_add[\\\\\\\"metricsData\\\\\\\"]\\\\n                                            if isinstance(m, dict)\\\\n                                            and m.get(\\\\\\\"success\\\\\\\") is False\\\\n                                        ]\\\\n                                        # metricsDataê°€ ë¹„ì–´ìˆì§€ ì•Šê±°ë‚˜, ì›ë˜ metricsDataê°€ ìˆì—ˆë˜ ê²½ìš°ì—ë§Œ í• ë‹¹\\\\n                                        # (í•­ìƒ metricsData í‚¤ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¡°ê±´ë¬¸ ì œê±° ê°€ëŠ¥)\\\\n                                        if (\\\\n                                            filtered_metrics\\\\n                                            or tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics\\\\n                                        elif (\\\\n                                            not filtered_metrics\\\\n                                            and tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            # ëª¨ë“  ë©”íŠ¸ë¦­ì´ trueì—¬ì„œ filtered_metricsê°€ ë¹„ì—ˆì§€ë§Œ, ì›ë˜ metricsDataê°€ ìˆì—ˆë‹¤ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì„¤ì •\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = []\\\\n\\\\n                                    surviving_test_cases.append(tc_to_add)\\\\n\\\\n                            display_data[\\\\\\\"testCases\\\\\\\"] = surviving_test_cases\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\\\n                        # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n                    # í•„í„°ë§ë˜ì—ˆê±°ë‚˜ ì „ì²´ testCasesì— ëŒ€í•´ ë‚´ë¶€ í•„ë“œ íŒŒì‹± ì ìš©\\\\n                    if (\\\\n                        isinstance(display_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                        and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        for test_case in display_data[\\\\\\\"testCases\\\\\\\"]:\\\\n                            if isinstance(test_case, dict):\\\\n                                # input í•„ë“œ ì²˜ë¦¬: í”„ë¡¬í”„íŠ¸ì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ íŒŒì‹±\\\\n                                if \\\\\\\"input\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"input\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                                        if isinstance(parsed_input, list):\\\\n                                            for item in parsed_input:\\\\n                                                if (\\\\n                                                    isinstance(item, dict)\\\\n                                                    and \\\\\\\"content\\\\\\\" in item\\\\n                                                    and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                                                ):\\\\n                                                    try:\\\\n                                                        item[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                            item[\\\\\\\"content\\\\\\\"]\\\\n                                                        )\\\\n                                                    except json.JSONDecodeError:\\\\n                                                        pass\\\\n                                        test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n\\\\n                                # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n                                if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"actualOutput\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(\\\\n                                            test_case[\\\\\\\"actualOutput\\\\\\\"]\\\\n                                        )\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n                    st.json(display_data)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n        elif format == \\\\\\\"html\\\\\\\":\\\\n            # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\\\n            # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\\\n            # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\\\n            html_content_with_style = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            <div style=\\\\\\\"height: 600px; overflow-y: scroll;\\\\\\\">\\\\n                {content}\\\\n            </div>\\\\n            \\\\\\\"\\\\\\\"\\\\\\\"\\\\n            # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\\\n            st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n        else:\\\\n            # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\\\n            st.markdown(content, unsafe_allow_html=True)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    # í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œ\\\\n    file_path = os.path.abspath(__file__)\\\\n\\\\n    # í¬íŠ¸ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    # Streamlit ì‹¤í–‰\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í†µí•© JSON ì €ì¥ ìœ„ì¹˜**: {get_default_merged_data_dir()}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"line_number\\\": 276}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"í†µí•© JSON\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"line_number\\\": 288}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n        files = get_merged_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í†µí•© JSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 325}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## í†µí•© JSON ë‚´ìš©\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"line_number\\\": 438}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 288, \"file\": \"reviewer/src/ui.py\", \"description\": \"UI ì‚¬ì´ë“œë°”ì˜ 'ë³´ê¸° ìœ í˜•' ì„ íƒì§€ì— 'ë¦¬ë·° ê²°ê³¼'ì™€ 'review log'ê°€ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‘ ì˜µì…˜ ëª¨ë‘ ë‚´ë¶€ì ìœ¼ë¡œ `get_review_log_files()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ ë¡œê·¸ íŒŒì¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. 'ë¦¬ë·° ê²°ê³¼'ëŠ” ë¡œê·¸ íŒŒì¼ì˜ `review_response` ë¶€ë¶„ì„ í¬ë§·í•˜ì—¬ ë³´ì—¬ì£¼ëŠ” ë°˜ë©´, 'review log'ëŠ” ë¡œê·¸ íŒŒì¼ ì „ì²´ì˜ ì›ë³¸ JSON ë‚´ìš©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ë™ì¼í•œ íŒŒì¼ ì†ŒìŠ¤ë¥¼ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê²ƒì´ ì‚¬ìš©ìì—ê²Œ í˜¼ë™ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"'review log' ì˜µì…˜ì˜ ì´ë¦„ì„ 'Raw ë¦¬ë·° ë¡œê·¸ JSON' ë˜ëŠ” ì´ì™€ ìœ ì‚¬í•˜ê²Œ ë³€ê²½í•˜ì—¬ ì›ë³¸ JSON ë°ì´í„°ë¥¼ ë³´ì—¬ì¤€ë‹¤ëŠ” ê²ƒì„ ëª…í™•íˆ í•˜ê±°ë‚˜, 'ë¦¬ë·° ê²°ê³¼' ë³´ê¸° ë‚´ì—ì„œ í¬ë§·ëœ ê²°ê³¼ì™€ ì›ë³¸ JSONì„ ì „í™˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    view_type = st.sidebar.selectbox(\\n        \\\"ë³´ê¸° ìœ í˜•:\\\",\\n        [\\n            \\\"ë¦¬ë·° ê²°ê³¼\\\",\\n            \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n            \\\"reviewRequest\\\",\\n            \\\"í”„ë¡¬í”„íŠ¸\\\",\\n            \\\"review log\\\",\\n            \\\"llm_eval ê²°ê³¼\\\",\\n        ],\\n        index=0,\\n    )\\n```\", \"improved_code\": \"```python\\n    view_type = st.sidebar.selectbox(\\n        \\\"ë³´ê¸° ìœ í˜•:\\\",\\n        [\\n            \\\"ë¦¬ë·° ê²°ê³¼ (í¬ë§·ë¨)\\\", # ë˜ëŠ” \\\"í¬ë§·ëœ ë¦¬ë·° ê²°ê³¼\\\"\\n            \\\"ì‘ë‹µ ë¡œê·¸\\\",\\n            \\\"reviewRequest\\\",\\n            \\\"í”„ë¡¬í”„íŠ¸\\\",\\n            \\\"ë¦¬ë·° ë¡œê·¸ (ì›ë³¸ JSON)\\\", # ë˜ëŠ” \\\"Raw ë¦¬ë·° ë¡œê·¸\\\"\\n            \\\"llm_eval ê²°ê³¼\\\",\\n        ],\\n        index=0,\\n    )\\n```\"}], \"summary\": \"reviewer/cli.py íŒŒì¼ì—ì„œ ë¦¬ë·° ë¡œê·¸ íŒŒì¼ëª… í˜•ì‹ì„ íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ì—ì„œ ë‚ ì§œ/ì‹œê°„ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. reviewer/src/ui.py íŒŒì¼ì—ì„œëŠ” UI ì‚¬ì´ë“œë°”ì˜ ë³´ê¸° ìœ í˜•ì—ì„œ 'í†µí•© JSON' ì˜µì…˜ì„ ì œê±°í•˜ê³  'review log' ì˜µì…˜ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. 'review log' ì˜µì…˜ì€ 'ë¦¬ë·° ê²°ê³¼' ì˜µì…˜ê³¼ ë™ì¼í•œ ë¡œê·¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì›ë³¸ JSON ë‚´ìš©ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"UIì˜ 'ë³´ê¸° ìœ í˜•' ì˜µì…˜ ì´ë¦„ì„ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì—¬ ì‚¬ìš©ìê°€ ê° ì˜µì…˜ì˜ ëª©ì ì„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\", \"ê°€ëŠ¥í•˜ë‹¤ë©´ 'ë¦¬ë·° ê²°ê³¼' ë³´ê¸° ë‚´ì—ì„œ í¬ë§·ëœ ê²°ê³¼ì™€ ì›ë³¸ JSON ë³´ê¸°ë¥¼ ì „í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ í†µí•©í•˜ì—¬ UI ë³µì¡ì„±ì„ ì¤„ì´ëŠ” ê²ƒì„ ê³ ë ¤í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom enum import Enum\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_model_info, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.models.review_prompt import ReviewPrompt\\\\nfrom reviewer.src.utils.prompts.models.review_prompt_with_file_content import (\\\\n    ReviewPromptWithFileContent,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest, ReviewResponse\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ, í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ë¨)\\\\\\\",\\\\n        deprecated=True,\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\nclass ReviewStatus(Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—´ê±°í˜• í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    SUCCESS = \\\\\\\"SUCCESS\\\\\\\"\\\\n    FAILED = \\\\\\\"FAILED\\\\\\\"\\\\n\\\\n\\\\ndef save_review_log(\\\\n    prompt: ReviewPrompt | ReviewPromptWithFileContent | None,\\\\n    review_request: ReviewRequest,\\\\n    review_response: ReviewResponse | None,\\\\n    status: ReviewStatus,\\\\n    error: Exception | None = None,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    model_info = get_model_info(review_request.model)\\\\n    log_dir = get_default_review_log_dir()\\\\n    log_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # í˜„ì¬ ì‹œê°„\\\\n    now = datetime.now()\\\\n\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{now.isoformat()}-{provider}-{model_name}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n\\\\n    # ì‘ë‹µ ì§ë ¬í™”\\\\n    response_data = None\\\\n    if review_response:\\\\n        response_data = review_response.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # JSON ë¡œê·¸ ë°ì´í„° êµ¬ì„±\\\\n    review_log = {\\\\n        \\\\\\\"id\\\\\\\": log_id,\\\\n        \\\\\\\"model\\\\\\\": {\\\\\\\"provider\\\\\\\": provider, \\\\\\\"name\\\\\\\": model_name},\\\\n        \\\\\\\"created_at\\\\\\\": now.isoformat(),\\\\n        \\\\\\\"prompt\\\\\\\": prompt_data,\\\\n        \\\\\\\"review_request\\\\\\\": review_request.model_dump(mode=\\\\\\\"json\\\\\\\"),\\\\n        \\\\\\\"review_response\\\\\\\": response_data,\\\\n        \\\\\\\"status\\\\\\\": status.value,\\\\n        \\\\\\\"error\\\\\\\": str(error) if error else None,\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì €ì¥\\\\n    file_path = log_dir / f\\\\\\\"{log_id}.json\\\\\\\"\\\\n    with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(review_log, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    try:\\\\n        # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n        review_request = ReviewRequest(\\\\n            diff_content=diff_content,\\\\n            processed_diff=diff_result,\\\\n            file_paths=[file.filename for file in diff_result.files],\\\\n            use_full_context=use_full_context,\\\\n            model=args.model,\\\\n            repo_path=repo_path,\\\\n        )\\\\n\\\\n        # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n        save_review_request(review_request)\\\\n\\\\n        # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n        llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n        # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n        logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n        review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n        review_response = llm_gateway.review_code(review_prompt)\\\\n        save_review_log(\\\\n            review_prompt, review_request, review_response, ReviewStatus.SUCCESS\\\\n        )\\\\n\\\\n        logger.info(\\\\\\\"ì½”ë“œ ë¦¬ë·°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¦¬ë·° ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        save_review_log(\\\\n            review_prompt,\\\\n            review_request,\\\\n            None,\\\\n            ReviewStatus.FAILED,\\\\n            error=e,\\\\n        )\\\\n        return\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    now = datetime.now()\\\\n\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{provider}-{model_name}-{int(now.timestamp())}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    now = datetime.now()\\\\n\\\\n    # ë¡œê·¸ ID ìƒì„±\\\\n    provider = model_info.get(\\\\\\\"provider\\\\\\\", \\\\\\\"unknown\\\\\\\")\\\\n    model_name = model_info.get(\\\\\\\"full_name\\\\\\\", review_request.model)\\\\n    log_id = f\\\\\\\"{now.isoformat()}-{provider}-{model_name}\\\\\\\"\\\\n\\\\n    # í”„ë¡¬í”„íŠ¸ ì§ë ¬í™”\\\\n    prompt_data = None\\\\n    if prompt:\\\\n        prompt_data = prompt.to_messages()\\\\n```\\\", \\\"line_number\\\": 518}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/ui.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\në¦¬ë·° ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” Streamlit ì›¹ ì¸í„°í˜ì´ìŠ¤ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ Streamlitì„ ì‚¬ìš©í•˜ì—¬ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport copy\\\\nimport json\\\\nimport logging\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport streamlit as st\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n# ë¡œê±° ì„¤ì •\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n# ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ë¥¼ ìœ„í•œ ê²½ë¡œ ì„¤ì •\\\\nsys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), \\\\\\\"..\\\\\\\")))\\\\nfrom reviewer.src.config import (\\\\n    get_default_raw_log_dir,\\\\n    get_default_results_dir,\\\\n    get_default_review_log_dir,\\\\n    get_default_review_prompt_dir,\\\\n    get_default_review_request_dir,\\\\n)\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\n\\\\n\\\\ndef get_default_llm_eval_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„°ê°€ ì €ì¥ëœ data ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ui.py íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ê³ , ê·¸ ì•„ë˜ data í´ë”ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.\\\\n    # reviewer/src/ui.py -> reviewer/ -> project_root\\\\n    project_root = Path(__file__).resolve().parent.parent.parent\\\\n    return project_root / \\\\\\\"llm_eval\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_merged_data_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì‚¬ìš©ìë³„ Application Support ë””ë ‰í† ë¦¬ ì•„ë˜ì— reviewer/merged_data ê²½ë¡œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n    # macOS ê¸°ì¤€ ê²½ë¡œì…ë‹ˆë‹¤. ë‹¤ë¥¸ OSì—ì„œëŠ” ì ì ˆíˆ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":  # macOS\\\\n        return (\\\\n            Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n        )\\\\n    elif sys.platform == \\\\\\\"win32\\\\\\\":  # Windows\\\\n        return Path(os.getenv(\\\\\\\"APPDATA\\\\\\\", \\\\\\\"\\\\\\\")) / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n    else:  # Linux ë“± ê¸°íƒ€\\\\n        return Path.home() / \\\\\\\".config\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"merged_data\\\\\\\"\\\\n\\\\n\\\\ndef get_result_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ê²°ê³¼ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ)\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì´ í•¨ìˆ˜ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\n    logger.warning(\\\\n        \\\\\\\"get_result_files()ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. get_review_log_files()ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n    )\\\\n    return []\\\\n\\\\n\\\\ndef get_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_raw_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_review_request_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ìš”ì²­ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    request_dir = get_default_review_request_dir()\\\\n    if not request_dir.exists():\\\\n        return []\\\\n\\\\n    request_files = list(request_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    request_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return request_files\\\\n\\\\n\\\\ndef get_review_prompt_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    if not prompt_dir.exists():\\\\n        return []\\\\n\\\\n    prompt_files = list(prompt_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    prompt_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return prompt_files\\\\n\\\\n\\\\ndef get_llm_eval_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"llm_eval ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    llm_eval_data_dir = get_default_llm_eval_data_dir()\\\\n    if not llm_eval_data_dir.exists():\\\\n        return []\\\\n\\\\n    # data í´ë” ë‚´ ëª¨ë“  íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ (í™•ì¥ì ë¬´ê´€)\\\\n    llm_eval_files = list(llm_eval_data_dir.glob(\\\\\\\"*\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    llm_eval_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return llm_eval_files\\\\n\\\\n\\\\ndef get_merged_data_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í†µí•© ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  JSON íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    merged_data_dir = get_default_merged_data_dir()\\\\n    if not merged_data_dir.exists():\\\\n        return []\\\\n\\\\n    merged_files = list(merged_data_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    merged_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return merged_files\\\\n\\\\n\\\\ndef get_review_log_files() -> list[Path]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ë¡œê·¸ ë””ë ‰í† ë¦¬ì—ì„œ ëª¨ë“  ë¦¬ë·° ë¡œê·¸ íŒŒì¼ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    log_dir = get_default_review_log_dir()\\\\n    if not log_dir.exists():\\\\n        return []\\\\n\\\\n    log_files = list(log_dir.glob(\\\\\\\"*.json\\\\\\\"))\\\\n    # ìˆ˜ì • ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)\\\\n    log_files.sort(key=lambda f: f.stat().st_mtime, reverse=True)\\\\n    return log_files\\\\n\\\\n\\\\ndef get_file_info(file: Path) -> dict[str, Any]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mtime = datetime.fromtimestamp(file.stat().st_mtime)\\\\n    size = file.stat().st_size\\\\n    size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n    # íŒŒì¼ëª…ì—ì„œ ëª¨ë¸ ì´ë¦„ê³¼ ë‚ ì§œ ì¶”ì¶œ ì‹œë„\\\\n    model_name_candidate = \\\\\\\"\\\\\\\"\\\\n    date_candidate = mtime  # ê¸°ë³¸ê°’ì€ íŒŒì¼ ìˆ˜ì • ì‹œê°„\\\\n\\\\n    try:\\\\n        parts = file.stem.split(\\\\\\\"_\\\\\\\")\\\\n        # íŒŒì¼ëª… ê·œì¹™: YYYYMMDD_HHMMSS_ModelName ë˜ëŠ” ìœ ì‚¬ í˜•ì‹\\\\n        # ë˜ëŠ” ModelName_YYYYMMDD_HHMMSS\\\\n        if len(parts) >= 3:\\\\n            # YYYYMMDD_HHMMSS_ModelName í˜•ì‹ ì²´í¬\\\\n            if (\\\\n                parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[0]}_{parts[1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[2:])\\\\n            # ModelName_YYYYMMDD_HHMMSS í˜•ì‹ ì²´í¬ (ë§ˆì§€ë§‰ ë‘ íŒŒíŠ¸ê°€ ë‚ ì§œ/ì‹œê°„)\\\\n            elif (\\\\n                parts[-2].isdigit()\\\\n                and len(parts[-2]) == 8\\\\n                and parts[-1].isdigit()\\\\n                and len(parts[-1]) == 6\\\\n            ):\\\\n                date_str = f\\\\\\\"{parts[-2]}_{parts[-1]}\\\\\\\"\\\\n                date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                model_name_candidate = \\\\\\\"_\\\\\\\".join(parts[:-2])\\\\n            # ê¸°íƒ€: ë§ˆì§€ë§‰ íŒŒíŠ¸ë¥¼ ëª¨ë¸ëª…ìœ¼ë¡œ ê°€ì •í•˜ê³ , ë‚ ì§œëŠ” mtime ì‚¬ìš©\\\\n            elif not parts[-1].isdigit():  # ë§ˆì§€ë§‰ íŒŒíŠ¸ê°€ ìˆ«ìê°€ ì•„ë‹ˆë©´ ëª¨ë¸ëª…ìœ¼ë¡œ ê°„ì£¼\\\\n                model_name_candidate = parts[-1]\\\\n                # ë‚ ì§œ/ì‹œê°„ ë¶€ë¶„ (YYYYMMDD_HHMMSS í˜•ì‹) - ì¤‘ê°„ì— ìˆì„ ê²½ìš°\\\\n                if (\\\\n                    len(parts) >= 3\\\\n                    and parts[-2].isdigit()\\\\n                    and len(parts[-2]) == 6\\\\n                    and parts[-3].isdigit()\\\\n                    and len(parts[-3]) == 8\\\\n                ):\\\\n                    date_str = f\\\\\\\"{parts[-3]}_{parts[-2]}\\\\\\\"\\\\n                    try:\\\\n                        date_candidate = datetime.strptime(date_str, \\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n                    except ValueError:\\\\n                        pass  # ë‚ ì§œ í˜•ì‹ ì•ˆë§ìœ¼ë©´ mtime ìœ ì§€\\\\n        elif (\\\\n            len(parts) == 2 and not parts[0].isdigit() and not parts[1].isdigit()\\\\n        ):  # Model_Name í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = file.stem\\\\n        elif (\\\\n            len(parts) == 1 and not parts[0].isdigit()\\\\n        ):  # ModelName í˜•ì‹ì´ê³  ë‚ ì§œ ì •ë³´ ì—†ì„ ë•Œ\\\\n            model_name_candidate = parts[0]\\\\n\\\\n    except Exception:  # ë‚ ì§œ/ëª¨ë¸ëª… íŒŒì‹± ì¤‘ ì˜ˆì™¸ ë°œìƒ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©\\\\n        pass  # model_name_candidate = \\\\\\\"\\\\\\\", date_candidate = mtime ìœ ì§€\\\\n\\\\n    file_suffix = file.suffix.lstrip(\\\\\\\".\\\\\\\").lower()\\\\n\\\\n    # í™•ì¥ìê°€ ì—†ëŠ” íŒŒì¼ ì²˜ë¦¬ ë¡œì§\\\\n    if not file_suffix:\\\\n        # 1. deepeval ê²°ê³¼ íŒŒì¼ì¸ì§€ í™•ì¸ (llm_eval_dir ë‚´ë¶€ì— ìˆëŠ”ì§€)\\\\n        try:\\\\n            llm_eval_dir = get_default_llm_eval_data_dir()\\\\n\\\\n            # ê²½ë¡œ ë¹„êµë¥¼ ìœ„í•´ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜\\\\n            file_parent_resolved = file.parent.resolve()\\\\n            llm_eval_dir_resolved = llm_eval_dir.resolve()\\\\n\\\\n            # íŒŒì¼ì´ llm_eval_dirì˜ í•˜ìœ„ ê²½ë¡œì¸ì§€ í™•ì¸\\\\n            file_parent_str = str(file_parent_resolved)\\\\n            llm_eval_dir_str = str(llm_eval_dir_resolved)\\\\n\\\\n            # llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì€ ëª¨ë‘ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            is_in_llm_eval_dir = file_parent_str.startswith(llm_eval_dir_str)\\\\n\\\\n            # 2. ë‚ ì§œ í˜•ì‹ì˜ íŒŒì¼ëª…ì¸ì§€ í™•ì¸\\\\n            has_date_format = (\\\\n                len(parts) >= 2\\\\n                and parts[0].isdigit()\\\\n                and len(parts[0]) == 8\\\\n                and parts[1].isdigit()\\\\n                and len(parts[1]) == 6\\\\n            )\\\\n\\\\n            # deepeval ê²°ê³¼ íŒŒì¼(llm_eval ë””ë ‰í† ë¦¬)ì´ê±°ë‚˜ ë‚ ì§œ í˜•ì‹ì¸ ê²½ìš° JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n            if is_in_llm_eval_dir:\\\\n                # deepeval íŒŒì¼ì€ ë¬´ì¡°ê±´ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            elif has_date_format:\\\\n                # ë‚ ì§œ í˜•ì‹ì€ JSONìœ¼ë¡œ ì²˜ë¦¬\\\\n                file_format = \\\\\\\"json\\\\\\\"\\\\n            else:\\\\n                file_format = \\\\\\\"txt\\\\\\\"\\\\n        except Exception:\\\\n            # ì˜ˆì™¸ ë°œìƒì‹œ ì•ˆì „í•˜ê²Œ txtë¡œ ì²˜ë¦¬\\\\n            file_format = \\\\\\\"txt\\\\\\\"\\\\n    elif file_suffix in [\\\\\\\"json\\\\\\\", \\\\\\\"log\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"txt\\\\\\\"]:\\\\n        file_format = file_suffix\\\\n    else:  # ê·¸ ì™¸ ëª¨ë¥´ëŠ” í™•ì¥ìëŠ” 'txt'ë¡œ ê°„ì£¼\\\\n        file_format = \\\\\\\"txt\\\\\\\"\\\\n\\\\n    return {\\\\n        \\\\\\\"path\\\\\\\": file,\\\\n        \\\\\\\"name\\\\\\\": file.name,\\\\n        \\\\\\\"model\\\\\\\": model_name_candidate,\\\\n        \\\\\\\"date\\\\\\\": date_candidate,\\\\n        \\\\\\\"mtime\\\\\\\": mtime,\\\\n        \\\\\\\"size\\\\\\\": size,\\\\n        \\\\\\\"size_str\\\\\\\": size_str,\\\\n        \\\\\\\"format\\\\\\\": file_format,\\\\n    }\\\\n\\\\n\\\\ndef app():\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•± ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    st.set_page_config(\\\\n        page_title=\\\\\\\"Reviewer - ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n        page_icon=\\\\\\\"ğŸ“\\\\\\\",\\\\n        layout=\\\\\\\"wide\\\\\\\",\\\\n        initial_sidebar_state=\\\\\\\"expanded\\\\\\\",\\\\n    )\\\\n\\\\n    st.title(\\\\\\\"ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\")\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ë””ë ‰í† ë¦¬ í‘œì‹œ\\\\n    results_dir = get_default_results_dir()\\\\n    log_dir = get_default_raw_log_dir()\\\\n    review_log_dir = get_default_review_log_dir()\\\\n    request_dir = get_default_review_request_dir()\\\\n    prompt_dir = get_default_review_prompt_dir()\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n    view_type = st.sidebar.selectbox(\\\\n        \\\\\\\"ë³´ê¸° ìœ í˜•:\\\\\\\",\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\\\\n    if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            st.markdown(\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            ### ë¦¬ë·° ìƒì„± ë°©ë²•\\\\n            \\\\n            í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìƒì„±í•˜ì„¸ìš”:\\\\n            ```bash\\\\n            reviewer review\\\\n            ```\\\\n            \\\\n            ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.md íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.\\\\n            \\\\\\\"\\\\\\\"\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n        files = get_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ì‘ë‹µ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n        files = get_review_request_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # íŒŒì¼ ëª©ë¡ì„ ì •ë³´ì™€ í•¨ê»˜ ì €ì¥\\\\n    file_infos = [get_file_info(f) for f in files]\\\\n\\\\n    # ì‚¬ì´ë“œë°”ì— íŒŒì¼ ëª©ë¡ í‘œì‹œ\\\\n    st.sidebar.markdown(f\\\\\\\"## {view_type} ëª©ë¡\\\\\\\")\\\\n\\\\n    # ì •ë ¬ ì˜µì…˜\\\\n    sort_option = st.sidebar.selectbox(\\\\n        \\\\\\\"ì •ë ¬ ê¸°ì¤€:\\\\\\\", [\\\\\\\"ìµœì‹ ìˆœ\\\\\\\", \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\", \\\\\\\"íŒŒì¼ëª…\\\\\\\", \\\\\\\"ëª¨ë¸ëª…\\\\\\\"], index=0\\\\n    )\\\\n\\\\n    # ì •ë ¬ ì ìš©\\\\n    if sort_option == \\\\\\\"ìµœì‹ ìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"], reverse=True)\\\\n    elif sort_option == \\\\\\\"ì˜¤ë˜ëœìˆœ\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"mtime\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"íŒŒì¼ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"name\\\\\\\"])\\\\n    elif sort_option == \\\\\\\"ëª¨ë¸ëª…\\\\\\\":\\\\n        file_infos.sort(key=lambda x: x[\\\\\\\"model\\\\\\\"])\\\\n\\\\n    # ì„ íƒ ê°€ëŠ¥í•œ íŒŒì¼ ì˜µì…˜ ìƒì„±\\\\n    file_options = {\\\\n        f\\\\\\\"{info['name']} ({info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\": info\\\\n        for info in file_infos\\\\n    }\\\\n\\\\n    # íŒŒì¼ ì„ íƒ ìœ„ì ¯\\\\n    selected_file_name = st.sidebar.selectbox(\\\\n        \\\\\\\"íŒŒì¼ ì„ íƒ:\\\\\\\", list(file_options.keys()), index=0\\\\n    )\\\\n\\\\n    # ì„ íƒëœ íŒŒì¼ ì •ë³´\\\\n    selected_file_info = file_options[selected_file_name]\\\\n    selected_file_path = selected_file_info[\\\\\\\"path\\\\\\\"]\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n    try:\\\\n        with open(selected_file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            content = f.read()\\\\n\\\\n        # íŒŒì¼ ì •ë³´ í‘œì‹œ\\\\n        col1, col2, col3 = st.columns(3)\\\\n        with col1:\\\\n            st.markdown(f\\\\\\\"**íŒŒì¼ëª…**: {selected_file_info['name']}\\\\\\\")\\\\n        with col2:\\\\n            st.markdown(\\\\n                f\\\\\\\"**ë‚ ì§œ**: {selected_file_info['date'].strftime('%Y-%m-%d %H:%M')}\\\\\\\"\\\\n            )\\\\n        with col3:\\\\n            st.markdown(f\\\\\\\"**í¬ê¸°**: {selected_file_info['size_str']}\\\\\\\")\\\\n\\\\n        # íŒŒì¼ í˜•ì‹ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ\\\\n        format = selected_file_info[\\\\\\\"format\\\\\\\"]\\\\n\\\\n        if format == \\\\\\\"json\\\\\\\":\\\\n            try:\\\\n                # JSON íŒŒì‹±\\\\n                json_data = json.loads(content)\\\\n\\\\n                if view_type == \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\":\\\\n                    # ë¦¬ë·° ë¡œê·¸ì—ì„œ review_response ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\\\\n                    if \\\\\\\"review_response\\\\\\\" in json_data and json_data[\\\\\\\"review_response\\\\\\\"]:\\\\n                        # ë”•ì…”ë„ˆë¦¬ë¥¼ ReviewResponse ê°ì²´ë¡œ ë³€í™˜\\\\n                        review_response = ReviewResponse.model_validate(\\\\n                            json_data[\\\\\\\"review_response\\\\\\\"]\\\\n                        )\\\\n\\\\n                        # ReviewFormatterë¥¼ ì‚¬ìš©í•˜ì—¬ HTMLë¡œ ë³€í™˜\\\\n                        formatter = ReviewFormatter()\\\\n                        html_content = formatter.to_html(review_response)\\\\n\\\\n                        # HTML ë‚´ìš©ì„ Streamlitì— í‘œì‹œ\\\\n                        html_content_with_style = html_content\\\\n                        st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n                    else:\\\\n                        st.warning(\\\\\\\"ë¦¬ë·° ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        st.json(json_data)\\\\n                elif view_type == \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\":\\\\n                    # ë¡œê·¸ ë°ì´í„°ë¥¼ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## ì‘ë‹µ ë¡œê·¸ ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"reviewRequest\\\\\\\":\\\\n                    # ë¦¬ë·° ìš”ì²­ ë°ì´í„°ë¥¼ raw JSONìœ¼ë¡œ í‘œì‹œ\\\\n                    st.markdown(\\\\\\\"## reviewRequest ë‚´ìš©\\\\\\\")\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n                    # í”„ë¡¬í”„íŠ¸ ë°ì´í„° (ìµœìƒìœ„ê°€ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš°) ì²˜ë¦¬\\\\n                    # ê° í•­ëª©ì˜ 'content'ê°€ ë¬¸ìì—´í™”ëœ JSONì´ë©´ íŒŒì‹±\\\\n                    st.markdown(\\\\\\\"## í”„ë¡¬í”„íŠ¸ ë‚´ìš©\\\\\\\")\\\\n                    if isinstance(json_data, list):\\\\n                        for item in json_data:\\\\n                            if (\\\\n                                isinstance(item, dict)\\\\n                                and \\\\\\\"content\\\\\\\" in item\\\\n                                and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                            ):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"llm_eval ê²°ê³¼\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## llm_eval ê²°ê³¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n                    # ì›ë³¸ ë°ì´í„°ì˜ ê¹Šì€ ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ í•„í„°ë§ ë° í‘œì‹œì— ì‚¬ìš©\\\\n                    display_data = copy.deepcopy(json_data)\\\\n\\\\n                    num_total_cases = 0\\\\n                    if (\\\\n                        isinstance(json_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in json_data\\\\n                        and isinstance(json_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        num_total_cases = len(json_data[\\\\\\\"testCases\\\\\\\"])\\\\n\\\\n                    col_checkbox, col_count = st.columns(\\\\n                        [0.8, 0.2]\\\\n                    )  # ì²´í¬ë°•ìŠ¤ì™€ ì¹´ìš´íŠ¸ ì»¬ëŸ¼ ë¹„ìœ¨ ì¡°ì •\\\\n\\\\n                    with col_checkbox:\\\\n                        filter_failed_tests = st.checkbox(\\\\n                            \\\\\\\"ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë§Œ ë³´ê¸° (success=false)\\\\\\\",\\\\n                            key=\\\\\\\"llm_eval_filter_checkbox\\\\\\\",\\\\n                        )\\\\n\\\\n                    surviving_test_cases = []\\\\n                    if filter_failed_tests:\\\\n                        if (\\\\n                            isinstance(display_data, dict)\\\\n                            and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                            and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                        ):\\\\n                            surviving_test_cases = []\\\\n                            for tc_original in display_data[\\\\n                                \\\\\\\"testCases\\\\\\\"\\\\n                            ]:  # ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ\\\\n                                if (\\\\n                                    isinstance(tc_original, dict)\\\\n                                    and tc_original.get(\\\\\\\"success\\\\\\\") is False\\\\n                                ):\\\\n                                    # testCase.successê°€ falseì¸ ê²½ìš°ì—ë§Œ tc_to_add ë¡œì§ ìˆ˜í–‰\\\\n                                    tc_to_add = copy.deepcopy(\\\\n                                        tc_original\\\\n                                    )  # ë³µì‚¬ë³¸ ì‚¬ìš©\\\\n\\\\n                                    # metricsData ë‚´ë¶€ë¥¼ successê°€ falseì¸ í•­ëª©ë§Œ ë‚¨ë„ë¡ í•„í„°ë§\\\\n                                    if \\\\\\\"metricsData\\\\\\\" in tc_to_add and isinstance(\\\\n                                        tc_to_add[\\\\\\\"metricsData\\\\\\\"], list\\\\n                                    ):\\\\n                                        filtered_metrics = [\\\\n                                            m\\\\n                                            for m in tc_to_add[\\\\\\\"metricsData\\\\\\\"]\\\\n                                            if isinstance(m, dict)\\\\n                                            and m.get(\\\\\\\"success\\\\\\\") is False\\\\n                                        ]\\\\n                                        # metricsDataê°€ ë¹„ì–´ìˆì§€ ì•Šê±°ë‚˜, ì›ë˜ metricsDataê°€ ìˆì—ˆë˜ ê²½ìš°ì—ë§Œ í• ë‹¹\\\\n                                        # (í•­ìƒ metricsData í‚¤ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¡°ê±´ë¬¸ ì œê±° ê°€ëŠ¥)\\\\n                                        if (\\\\n                                            filtered_metrics\\\\n                                            or tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = filtered_metrics\\\\n                                        elif (\\\\n                                            not filtered_metrics\\\\n                                            and tc_to_add.get(\\\\\\\"metricsData\\\\\\\") is not None\\\\n                                        ):\\\\n                                            # ëª¨ë“  ë©”íŠ¸ë¦­ì´ trueì—¬ì„œ filtered_metricsê°€ ë¹„ì—ˆì§€ë§Œ, ì›ë˜ metricsDataê°€ ìˆì—ˆë‹¤ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì„¤ì •\\\\n                                            tc_to_add[\\\\\\\"metricsData\\\\\\\"] = []\\\\n\\\\n                                    surviving_test_cases.append(tc_to_add)\\\\n\\\\n                            display_data[\\\\\\\"testCases\\\\\\\"] = surviving_test_cases\\\\n                            num_displayed_cases = len(\\\\n                                display_data[\\\\\\\"testCases\\\\\\\"]\\\\n                            )  # í•„í„°ë§ í›„ ê°œìˆ˜ ì—…ë°ì´íŠ¸\\\\n                        count_caption_text = f\\\\\\\"(í‘œì‹œ: {num_displayed_cases} / ì´: {num_total_cases}ê±´, ì‹¤íŒ¨ë§Œ)\\\\\\\"\\\\n                    else:\\\\n                        # ì²´í¬ë°•ìŠ¤ í•´ì œ ì‹œì—ëŠ” ì›ë³¸ metricsDataë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ display_dataë¥¼ json_dataì˜ ë³µì‚¬ë³¸ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •í•  í•„ìš”ëŠ” ì—†ìŒ\\\\n                        # ì–´ì°¨í”¼ ë§¤ë²ˆ json_dataì˜ deepcopyë¡œ ì‹œì‘í•¨.\\\\n                        count_caption_text = f\\\\\\\"(ì´ {num_total_cases}ê±´)\\\\\\\"\\\\n\\\\n                    with col_count:\\\\n                        st.caption(count_caption_text)\\\\n\\\\n                    # í•„í„°ë§ë˜ì—ˆê±°ë‚˜ ì „ì²´ testCasesì— ëŒ€í•´ ë‚´ë¶€ í•„ë“œ íŒŒì‹± ì ìš©\\\\n                    if (\\\\n                        isinstance(display_data, dict)\\\\n                        and \\\\\\\"testCases\\\\\\\" in display_data\\\\n                        and isinstance(display_data[\\\\\\\"testCases\\\\\\\"], list)\\\\n                    ):\\\\n                        for test_case in display_data[\\\\\\\"testCases\\\\\\\"]:\\\\n                            if isinstance(test_case, dict):\\\\n                                # input í•„ë“œ ì²˜ë¦¬: í”„ë¡¬í”„íŠ¸ì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ íŒŒì‹±\\\\n                                if \\\\\\\"input\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"input\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        parsed_input = json.loads(test_case[\\\\\\\"input\\\\\\\"])\\\\n                                        if isinstance(parsed_input, list):\\\\n                                            for item in parsed_input:\\\\n                                                if (\\\\n                                                    isinstance(item, dict)\\\\n                                                    and \\\\\\\"content\\\\\\\" in item\\\\n                                                    and isinstance(item[\\\\\\\"content\\\\\\\"], str)\\\\n                                                ):\\\\n                                                    try:\\\\n                                                        item[\\\\\\\"content\\\\\\\"] = json.loads(\\\\n                                                            item[\\\\\\\"content\\\\\\\"]\\\\n                                                        )\\\\n                                                    except json.JSONDecodeError:\\\\n                                                        pass\\\\n                                        test_case[\\\\\\\"input\\\\\\\"] = parsed_input\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n\\\\n                                # actualOutput í•„ë“œ ì²˜ë¦¬\\\\n                                if \\\\\\\"actualOutput\\\\\\\" in test_case and isinstance(\\\\n                                    test_case[\\\\\\\"actualOutput\\\\\\\"], str\\\\n                                ):\\\\n                                    try:\\\\n                                        test_case[\\\\\\\"actualOutput\\\\\\\"] = json.loads(\\\\n                                            test_case[\\\\\\\"actualOutput\\\\\\\"]\\\\n                                        )\\\\n                                    except json.JSONDecodeError:\\\\n                                        pass\\\\n                    st.json(display_data)\\\\n            except json.JSONDecodeError:\\\\n                # JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\\\\n                st.text(content)\\\\n        elif format == \\\\\\\"html\\\\\\\":\\\\n            # HTMLì€ iframeìœ¼ë¡œ í‘œì‹œ\\\\n            # st.html(content, height=600, scrolling=True) # ì´ì „ ì½”ë“œ\\\\n            # HTML ë¬¸ìì—´ì— ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì—¬ ë†’ì´ì™€ ìŠ¤í¬ë¡¤ ì œì–´\\\\n            html_content_with_style = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n            <div style=\\\\\\\"height: 600px; overflow-y: scroll;\\\\\\\">\\\\n                {content}\\\\n            </div>\\\\n            \\\\\\\"\\\\\\\"\\\\\\\"\\\\n            # st.html(html_content_with_style, height=610) # ì´ì „ ì½”ë“œ\\\\n            st.markdown(html_content_with_style, unsafe_allow_html=True)\\\\n        else:\\\\n            # ë§ˆí¬ë‹¤ìš´ ë˜ëŠ” ë‹¤ë¥¸ í˜•ì‹ì€ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ í‘œì‹œ\\\\n            st.markdown(content, unsafe_allow_html=True)\\\\n\\\\n    except Exception as e:\\\\n        st.error(f\\\\\\\"íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {str(e)}\\\\\\\")\\\\n\\\\n\\\\ndef run_app() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Streamlit ì•±ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os\\\\n    import subprocess\\\\n    import sys\\\\n\\\\n    # í˜„ì¬ íŒŒì¼ì˜ ê²½ë¡œ\\\\n    file_path = os.path.abspath(__file__)\\\\n\\\\n    # í¬íŠ¸ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°\\\\n    port = os.environ.get(\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\", \\\\\\\"8501\\\\\\\")\\\\n\\\\n    # Streamlit ì‹¤í–‰\\\\n    cmd = [\\\\n        sys.executable,\\\\n        \\\\\\\"-m\\\\\\\",\\\\n        \\\\\\\"streamlit\\\\\\\",\\\\n        \\\\\\\"run\\\\\\\",\\\\n        file_path,\\\\n        \\\\\\\"--server.headless\\\\\\\",\\\\n        \\\\\\\"true\\\\\\\",\\\\n        \\\\\\\"--browser.serverAddress\\\\\\\",\\\\n        \\\\\\\"localhost\\\\\\\",\\\\n        \\\\\\\"--server.port\\\\\\\",\\\\n        port,\\\\n    ]\\\\n\\\\n    subprocess.run(cmd)\\\\n\\\\n\\\\n# Streamlit ì•±ìœ¼ë¡œ ì§ì ‘ ì‹¤í–‰ë  ê²½ìš°\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    app()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í†µí•© JSON ì €ì¥ ìœ„ì¹˜**: {get_default_merged_data_dir()}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    st.sidebar.markdown(f\\\\\\\"**ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {results_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**ë¦¬ë·° ë¡œê·¸ ì €ì¥ ìœ„ì¹˜**: {review_log_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**reviewRequest ìš”ì²­ ì €ì¥ ìœ„ì¹˜**: {request_dir}\\\\\\\")\\\\n    st.sidebar.markdown(f\\\\\\\"**í”„ë¡¬í”„íŠ¸ ì €ì¥ ìœ„ì¹˜**: {prompt_dir}\\\\\\\")\\\\n    st.sidebar.markdown(\\\\n        f\\\\\\\"**llm_eval ê²°ê³¼ ì €ì¥ ìœ„ì¹˜**: {get_default_llm_eval_data_dir()}\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼/ë¡œê·¸/ë¦¬ë·°ìš”ì²­/í”„ë¡¬í”„íŠ¸ ì„ íƒ\\\\n```\\\", \\\"line_number\\\": 276}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"í†µí•© JSON\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        [\\\\n            \\\\\\\"ë¦¬ë·° ê²°ê³¼\\\\\\\",\\\\n            \\\\\\\"ì‘ë‹µ ë¡œê·¸\\\\\\\",\\\\n            \\\\\\\"reviewRequest\\\\\\\",\\\\n            \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\",\\\\n            \\\\\\\"review log\\\\\\\",\\\\n            \\\\\\\"llm_eval ê²°ê³¼\\\\\\\",\\\\n        ],\\\\n        index=0,\\\\n    )\\\\n\\\\n```\\\", \\\"line_number\\\": 288}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n        files = get_merged_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í†µí•© JSON ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    elif view_type == \\\\\\\"í”„ë¡¬í”„íŠ¸\\\\\\\":\\\\n        files = get_review_prompt_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    elif view_type == \\\\\\\"review log\\\\\\\":\\\\n        files = get_review_log_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ review logê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:  # llm_eval ê²°ê³¼\\\\n        files = get_llm_eval_data_files()\\\\n        if not files:\\\\n            st.info(\\\\\\\"ì €ì¥ëœ llm_eval ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 325}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"í†µí•© JSON\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## í†µí•© JSON ë‚´ìš©\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n                                except json.JSONDecodeError:\\\\n                                    pass  # íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë¬¸ìì—´ ìœ ì§€\\\\n                    st.json(json_data)\\\\n                elif view_type == \\\\\\\"review log\\\\\\\":\\\\n                    st.markdown(\\\\\\\"## review log\\\\\\\")\\\\n                    if \\\\\\\"prompt\\\\\\\" in json_data and isinstance(json_data[\\\\\\\"prompt\\\\\\\"], list):\\\\n                        for i, item in enumerate(json_data[\\\\\\\"prompt\\\\\\\"]):\\\\n                            if \\\\\\\"content\\\\\\\" in item and isinstance(item[\\\\\\\"content\\\\\\\"], str):\\\\n                                try:\\\\n                                    item[\\\\\\\"content\\\\\\\"] = json.loads(item[\\\\\\\"content\\\\\\\"])\\\\n```\\\", \\\"line_number\\\": 438}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì œê³µëœ diffëŠ” ì£¼ë¡œ ë‘ ê°€ì§€ ë³€ê²½ ì‚¬í•­ì„ í¬í•¨í•©ë‹ˆë‹¤. ì²«ì§¸, `reviewer/cli.py` íŒŒì¼ì—ì„œ ë¦¬ë·° ë¡œê·¸ ID ìƒì„± í˜•ì‹ì„ íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ì—ì„œ ISO í˜•ì‹ì˜ ë‚ ì§œ/ì‹œê°„, ì œê³µì, ëª¨ë¸ ì´ë¦„ì„ í¬í•¨í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ë‘˜ì§¸, `reviewer/src/ui.py` íŒŒì¼ì—ì„œ Streamlit UIì˜ ë³´ê¸° ìœ í˜• ëª©ë¡ì—ì„œ 'í†µí•© JSON' ì˜µì…˜ì„ ì œê±°í•˜ê³  'review log' ì˜µì…˜ìœ¼ë¡œ ëŒ€ì²´í–ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ UIì—ì„œ í‘œì‹œë˜ëŠ” ë¡œê·¸ ìœ í˜•ì„ ëª…í™•íˆ í•˜ê³ , ë°±ì—”ë“œ ë¡œê·¸ ì €ì¥ ë°©ì‹ê³¼ ì¼ê´€ì„±ì„ ë§ì¶”ê¸° ìœ„í•œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ì½”ë“œ í’ˆì§ˆì€ ì–‘í˜¸í•˜ë©°, ë³€ê²½ ì‚¬í•­ì€ ì˜ë„ëœ ê¸°ëŠ¥ì„ ê°œì„ í•˜ê±°ë‚˜ ëª…í™•íˆ í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì´ë£¨ì–´ì¡ŒìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"ë³€ê²½ ì‚¬í•­ì´ ì˜ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ì˜ ì½”ë“œ í’ˆì§ˆê³¼ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"ë¡œê·¸ íŒŒì¼ëª… ë° UI í‘œì‹œ ìœ í˜• ë³€ê²½ì— ëŒ€í•œ ë¬¸ì„œ ì—…ë°ì´íŠ¸ë¥¼ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"pyproject.toml\\\", \\\"file_content\\\": \\\"[build-system]\\\\nrequires = [\\\\\\\"setuptools>=42\\\\\\\", \\\\\\\"wheel\\\\\\\"]\\\\nbuild-backend = \\\\\\\"setuptools.build_meta\\\\\\\"\\\\n\\\\n[project]\\\\nname = \\\\\\\"reviewer\\\\\\\"\\\\ndynamic = [\\\\\\\"version\\\\\\\", \\\\\\\"scripts\\\\\\\", \\\\\\\"dependencies\\\\\\\"]\\\\ndescription = \\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\"\\\\nreadme = \\\\\\\"README.md\\\\\\\"\\\\nrequires-python = \\\\\\\">=3.6\\\\\\\"\\\\nlicense = {file = \\\\\\\"LICENSE\\\\\\\"}\\\\nauthors = [\\\\n    {name = \\\\\\\"Reviewer íŒ€\\\\\\\", email = \\\\\\\"yourmail@example.com\\\\\\\"}\\\\n]\\\\nclassifiers = [\\\\n    \\\\\\\"Programming Language :: Python :: 3\\\\\\\",\\\\n    \\\\\\\"License :: OSI Approved :: MIT License\\\\\\\",\\\\n    \\\\\\\"Operating System :: OS Independent\\\\\\\",\\\\n] \\\\n\\\\n[tool.ruff]\\\\nline-length = 88\\\\nselect = [\\\\\\\"E\\\\\\\", \\\\\\\"F\\\\\\\", \\\\\\\"I\\\\\\\", \\\\\\\"B\\\\\\\", \\\\\\\"C4\\\\\\\", \\\\\\\"ARG\\\\\\\", \\\\\\\"N\\\\\\\", \\\\\\\"UP\\\\\\\", \\\\\\\"ANN\\\\\\\", \\\\\\\"S\\\\\\\", \\\\\\\"A\\\\\\\", \\\\\\\"ANN401\\\\\\\"]\\\\n\\\\n[tool.ruff.lint.per-file-ignores]\\\\n\\\\\\\"tests/**/*.py\\\\\\\" = [\\\\\\\"S101\\\\\\\", \\\\\\\"ANN201\\\\\\\", \\\\\\\"ANN001\\\\\\\", \\\\\\\"ARG002\\\\\\\"]\\\\n\\\\\\\"llm_eval/**/*.py\\\\\\\" = [\\\\\\\"S101\\\\\\\", \\\\\\\"ANN201\\\\\\\", \\\\\\\"ANN001\\\\\\\", \\\\\\\"ARG002\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\nline-length = 88\\\\nselect = [\\\\\\\"E\\\\\\\", \\\\\\\"F\\\\\\\", \\\\\\\"I\\\\\\\", \\\\\\\"B\\\\\\\", \\\\\\\"C4\\\\\\\", \\\\\\\"ARG\\\\\\\", \\\\\\\"N\\\\\\\", \\\\\\\"UP\\\\\\\", \\\\\\\"ANN\\\\\\\", \\\\\\\"S\\\\\\\", \\\\\\\"A\\\\\\\", \\\\\\\"ANN401\\\\\\\"]\\\\n\\\\n[tool.ruff.lint.per-file-ignores]\\\\n\\\\\\\"tests/**/*.py\\\\\\\" = [\\\\\\\"S101\\\\\\\", \\\\\\\"ANN201\\\\\\\", \\\\\\\"ANN001\\\\\\\", \\\\\\\"ARG002\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\nline-length = 88\\\\nselect = [\\\\\\\"E\\\\\\\", \\\\\\\"F\\\\\\\", \\\\\\\"I\\\\\\\", \\\\\\\"B\\\\\\\", \\\\\\\"C4\\\\\\\", \\\\\\\"ARG\\\\\\\", \\\\\\\"N\\\\\\\", \\\\\\\"UP\\\\\\\", \\\\\\\"ANN\\\\\\\", \\\\\\\"S\\\\\\\", \\\\\\\"A\\\\\\\", \\\\\\\"ANN401\\\\\\\"]\\\\n\\\\n[tool.ruff.lint.per-file-ignores]\\\\n\\\\\\\"tests/**/*.py\\\\\\\" = [\\\\\\\"S101\\\\\\\", \\\\\\\"ANN201\\\\\\\", \\\\\\\"ANN001\\\\\\\", \\\\\\\"ARG002\\\\\\\"]\\\\n\\\\\\\"llm_eval/**/*.py\\\\\\\" = [\\\\\\\"S101\\\\\\\", \\\\\\\"ANN201\\\\\\\", \\\\\\\"ANN001\\\\\\\", \\\\\\\"ARG002\\\\\\\"]\\\\n```\\\", \\\"line_number\\\": 22}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root, is_ignore_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt_v1.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_ignore_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not review_request.use_full_context:\\\\n            raise ValueError(\\\\\\\"full context í”Œë˜ê·¸ê°€ ì¼œì ¸ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_ignore_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                if not request.file_content:\\\\n                    logger.warning(\\\\n                        f\\\\\\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\\\\\"\\\\n                    )\\\\n                    file_content = \\\\\\\"\\\\\\\"\\\\n                else:\\\\n                    file_content = request.file_content\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt_v1.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 32}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 22, \"file\": \"pyproject.toml\", \"description\": \"llm_eval ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ì— ëŒ€í•´ íŠ¹ì • Ruff ë¦°íŠ¸ ê·œì¹™(S101, ANN201, ANN001, ARG002)ì„ ë¬´ì‹œí•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ ë””ë ‰í† ë¦¬ì˜ ì½”ë“œì— ëŒ€í•œ ë¦°íŠ¸ ê²€ì‚¬ë¥¼ ì™„í™”í•©ë‹ˆë‹¤.\", \"suggestion\": \"llm_eval ë””ë ‰í† ë¦¬ì˜ ëª©ì (ì˜ˆ: ì‹¤í—˜ ì½”ë“œ, ìŠ¤í¬ë¦½íŠ¸ ë“±)ì´ ëª…í™•í•˜ë‹¤ë©´ ì´ëŸ¬í•œ ì„¤ì •ì€ í—ˆìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì½”ë“œ í’ˆì§ˆ ì¼ê´€ì„±ì„ ìœ„í•´ ê°€ëŠ¥í•˜ë‹¤ë©´ ë¦°íŠ¸ ê·œì¹™ì„ ì¤€ìˆ˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. í•„ìš”í•˜ë‹¤ë©´ íŠ¹ì • ë¼ì¸ì— `# noqa` ì£¼ì„ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"[tool.ruff.lint.per-file-ignores]\\n\\\"tests/**/*.py\\\" = [\\\"S101\\\", \\\"ANN201\\\", \\\"ANN001\\\", \\\"ARG002\\\"]\\n\", \"improved_code\": \"[tool.ruff.lint.per-file-ignores]\\n\\\"tests/**/*.py\\\" = [\\\"S101\\\", \\\"ANN201\\\", \\\"ANN001\\\", \\\"ARG002\\\"]\\n\\\"llm_eval/**/*.py\\\" = [\\\"S101\\\", \\\"ANN201\\\", \\\"ANN001\\\", \\\"ARG002\\\"]\\n\"}, {\"type\": \"info\", \"line_number\": 32, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ ê²½ë¡œê°€ `code_review_system_prompt.txt`ì—ì„œ `code_review_system_prompt_v1.txt`ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” í”„ë¡¬í”„íŠ¸ ë²„ì „ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë³€ê²½ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.\", \"suggestion\": \"íŠ¹ë³„í•œ ê°œì„  ì‚¬í•­ì€ ì—†ìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ íŒŒì¼ ë²„ì „ ê´€ë¦¬ê°€ ì˜ë„ëœ ê²ƒì´ë¼ë©´ ì´ ë³€ê²½ì€ ì ì ˆí•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"        prompt_path = (\\n            project_root\\n            / \\\"resources\\\"\\n            / \\\"prompt\\\"\\n            / \\\"v1\\\"\\n            / \\\"code_review_system_prompt.txt\\\"\\n        )\\n\", \"improved_code\": \"        prompt_path = (\\n            project_root\\n            / \\\"resources\\\"\\n            / \\\"prompt\\\"\\n            / \\\"v1\\\"\\n            / \\\"code_review_system_prompt_v1.txt\\\"\\n        )\\n\"}], \"summary\": \"pyproject.toml íŒŒì¼ì— llm_eval ë””ë ‰í† ë¦¬ì— ëŒ€í•œ Ruff ë¦°íŠ¸ ê·œì¹™ ë¬´ì‹œ ì„¤ì •ì´ ì¶”ê°€ë˜ì—ˆê³ , í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ ê²½ë¡œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"llm_eval ë””ë ‰í† ë¦¬ì˜ ì½”ë“œ í’ˆì§ˆ ê¸°ì¤€ì— ëŒ€í•´ íŒ€ ë‚´ì—ì„œ ë…¼ì˜í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ ë¦°íŠ¸ ê·œì¹™ ë¬´ì‹œ ë²”ìœ„ë¥¼ ì¡°ì •í•˜ê±°ë‚˜ íŠ¹ì • ë¼ì¸ì— `# noqa` ì£¼ì„ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"í”„ë¡¬í”„íŠ¸ íŒŒì¼ ë²„ì „ ê´€ë¦¬ ì „ëµì„ ë¬¸ì„œí™”í•˜ì—¬ íŒ€ì›ë“¤ì´ ì´í•´í•˜ê³  ë”°ë¥¼ ìˆ˜ ìˆë„ë¡ í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    formatter = ReviewFormatter()\\\\n    output_content = formatter.format(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 18}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_formatter.py\\\", \\\"file_content\\\": \\\"ì‚­ì œëœ íŒŒì¼\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter: ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport html\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” ë¦¬ë·° ì‘ë‹µì„ ë§ˆí¬ë‹¤ìš´, HTML ë“± ë‹¤ì–‘í•œ ì¶œë ¥ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def format(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_review_formatter.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom unittest.mock import patch\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef complex_review_response() -> ReviewResponse:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë³µì¡í•œ í˜•íƒœì˜ ReviewResponse ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í”½ìŠ¤ì²˜ì…ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        ReviewResponse: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return ReviewResponse(\\\\n        issues=[\\\\n            ReviewIssue(\\\\n                type=\\\\\\\"ë²„ê·¸\\\\\\\",\\\\n                line_number=10,\\\\n                file=\\\\\\\"main.py\\\\\\\",\\\\n                description=\\\\\\\"ì ì¬ì ì¸ ë„ ì°¸ì¡° ì˜¤ë¥˜\\\\\\\",\\\\n                suggestion=\\\\\\\"None ì²´í¬ ì¶”ê°€\\\\\\\",\\\\n                severity=\\\\\\\"error\\\\\\\",\\\\n                original_code=\\\\\\\"data = user.get_data()\\\\\\\",\\\\n                improved_code=\\\\\\\"if user is not None:\\\\\\\\n    data = user.get_data()\\\\\\\\nelse:\\\\\\\\n    data = None\\\\\\\",\\\\n            ),\\\\n            ReviewIssue(\\\\n                type=\\\\\\\"ì„±ëŠ¥\\\\\\\",\\\\n                line_number=25,\\\\n                file=\\\\\\\"utils.py\\\\\\\",\\\\n                description=\\\\\\\"ë¹„íš¨ìœ¨ì ì¸ ë£¨í”„ ì‚¬ìš©\\\\\\\",\\\\n                suggestion=\\\\\\\"ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ ì‚¬ìš©\\\\\\\",\\\\n                severity=\\\\\\\"warning\\\\\\\",\\\\n                original_code=\\\\\\\"result = []\\\\\\\\nfor item in items:\\\\\\\\n    result.append(item.value)\\\\\\\",\\\\n                improved_code=\\\\\\\"result = [item.value for item in items]\\\\\\\",\\\\n            ),\\\\n        ],\\\\n        summary=\\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\\\\\\\",\\\\n        score=7.5,\\\\n        recommendations=[\\\\\\\"ë³€ìˆ˜ëª… ëª…í™•íˆ í•˜ê¸°\\\\\\\", \\\\\\\"ì£¼ì„ ì¶”ê°€í•˜ê¸°\\\\\\\"],\\\\n    )\\\\n\\\\n\\\\ndef test_formatter_to_markdown(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterì˜ to_markdown ë©”ì„œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ë³€í™˜ í…ŒìŠ¤íŠ¸\\\\n    formatter = ReviewFormatter()\\\\n    markdown = formatter.to_markdown(complex_review_response)\\\\n\\\\n    # ê¸°ë³¸ êµ¬ì¡° ê²€ì¦\\\\n    assert \\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ìš”ì•½\\\\\\\" in markdown\\\\n    assert \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\\\\\\\" in markdown\\\\n    assert \\\\\\\"**ì ìˆ˜**: 7.5/10\\\\\\\" in markdown\\\\n\\\\n    # ì´ìŠˆ ê²€ì¦\\\\n    assert \\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\" in markdown\\\\n    assert \\\\\\\"### 1. ğŸ›‘ ë²„ê·¸\\\\\\\" in markdown\\\\n    assert \\\\\\\"**íŒŒì¼**: `main.py`, **ë¼ì¸**: 10\\\\\\\" in markdown\\\\n    assert \\\\\\\"ì ì¬ì ì¸ ë„ ì°¸ì¡° ì˜¤ë¥˜\\\\\\\" in markdown\\\\n    assert \\\\\\\"None ì²´í¬ ì¶”ê°€\\\\\\\" in markdown\\\\n\\\\n    # ì½”ë“œ ë¸”ë¡ ê²€ì¦\\\\n    assert \\\\\\\"```\\\\\\\\ndata = user.get_data()\\\\\\\\n```\\\\\\\" in markdown\\\\n    assert \\\\\\\"```\\\\\\\\nif user is not None:\\\\\\\" in markdown\\\\n\\\\n    # ë‘ ë²ˆì§¸ ì´ìŠˆ ê²€ì¦\\\\n    assert \\\\\\\"### 2. âš ï¸ ì„±ëŠ¥\\\\\\\" in markdown\\\\n\\\\n    # ê¶Œì¥ì‚¬í•­ ê²€ì¦\\\\n    assert \\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\" in markdown\\\\n    assert \\\\\\\"1. ë³€ìˆ˜ëª… ëª…í™•íˆ í•˜ê¸°\\\\\\\" in markdown\\\\n    assert \\\\\\\"2. ì£¼ì„ ì¶”ê°€í•˜ê¸°\\\\\\\" in markdown\\\\n\\\\n\\\\ndef test_formatter_to_html(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterì˜ to_html ë©”ì„œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # HTML í˜•ì‹ ë³€í™˜ í…ŒìŠ¤íŠ¸\\\\n    formatter = ReviewFormatter()\\\\n    html = formatter.to_html(complex_review_response)\\\\n\\\\n    # ê¸°ë³¸ êµ¬ì¡° ê²€ì¦\\\\n    assert \\\\\\\"<!DOCTYPE html>\\\\\\\" in html\\\\n    assert \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\" in html\\\\n    assert \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\" in html\\\\n\\\\n    # ìš”ì•½ ë° ì ìˆ˜ ê²€ì¦\\\\n    assert \\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\" in html\\\\n    assert \\\\\\\"<p>ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\\\\\\\" in html\\\\n    assert \\\\\\\"<p><strong>ì ìˆ˜</strong>: 7.5/10</p>\\\\\\\" in html\\\\n\\\\n    # ì´ìŠˆ ë° ì½”ë“œ ë¸”ë¡ ê²€ì¦\\\\n    assert \\\\\\\"<div class='issue error'>\\\\\\\" in html\\\\n    assert \\\\\\\"<pre><code>\\\\\\\" in html\\\\n    assert html.count(\\\\\\\"<pre><code>\\\\\\\") == 4  # 4ê°œì˜ ì½”ë“œ ë¸”ë¡ (2ê°œ ì´ìŠˆ x ì›ë³¸/ê°œì„  ì½”ë“œ)\\\\n\\\\n    # CSS ìŠ¤íƒ€ì¼ í¬í•¨ ê²€ì¦\\\\n    assert \\\\\\\"<style>\\\\\\\" in html\\\\n\\\\n\\\\ndef test_formatter_empty_review() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterê°€ ë¹ˆ ë¦¬ë·° ì‘ë‹µì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¹ˆ ë¦¬ë·° ì‘ë‹µ í…ŒìŠ¤íŠ¸\\\\n    empty_review = ReviewResponse(\\\\n        issues=[], summary=\\\\\\\"No issues found.\\\\\\\", score=10.0, recommendations=[]\\\\n    )\\\\n\\\\n    formatter = ReviewFormatter()\\\\n    markdown = formatter.to_markdown(empty_review)\\\\n\\\\n    assert \\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ìš”ì•½\\\\\\\" in markdown\\\\n    assert \\\\\\\"No issues found.\\\\\\\" in markdown\\\\n    assert \\\\\\\"**ì ìˆ˜**: 10.0/10\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\" not in markdown  # ì´ìŠˆê°€ ì—†ìœ¼ë¯€ë¡œ ì„¹ì…˜ì´ ì—†ì–´ì•¼ í•¨\\\\n    assert \\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\" not in markdown  # ê¶Œì¥ì‚¬í•­ì´ ì—†ìœ¼ë¯€ë¡œ ì„¹ì…˜ì´ ì—†ì–´ì•¼ í•¨\\\\n\\\\n\\\\n# format ë©”ì„œë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¶”ê°€\\\\ndef test_formatter_format_markdown(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # format ë©”ì„œë“œ í˜¸ì¶œ (ê¸°ë³¸ê°’: markdown)\\\\n    markdown_result = formatter.format(complex_review_response)\\\\n\\\\n    # to_markdown ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ë¹„êµ\\\\n    expected_result = formatter.to_markdown(complex_review_response)\\\\n    assert markdown_result == expected_result\\\\n\\\\n\\\\ndef test_formatter_format_html(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ HTML í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # format ë©”ì„œë“œ í˜¸ì¶œ (html í˜•ì‹ ì§€ì •)\\\\n    html_result = formatter.format(complex_review_response, output_format=\\\\\\\"html\\\\\\\")\\\\n\\\\n    # to_html ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ë¹„êµ\\\\n    expected_result = formatter.to_html(complex_review_response)\\\\n    assert html_result == expected_result\\\\n\\\\n\\\\ndef test_formatter_format_invalid() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ì— ëŒ€í•´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n    review = ReviewResponse(issues=[], summary=\\\\\\\"í…ŒìŠ¤íŠ¸ìš© ë¦¬ë·°\\\\\\\", recommendations=[])\\\\n\\\\n    # ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ìœ¼ë¡œ í˜¸ì¶œì‹œ ValueError ë°œìƒ í™•ì¸\\\\n    with pytest.raises(ValueError) as excinfo:\\\\n        formatter.format(review, output_format=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # ì˜ˆì™¸ ë©”ì‹œì§€ ê²€ì¦\\\\n    assert \\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹\\\\\\\" in str(excinfo.value)\\\\n\\\\n\\\\n# ëª¨í‚¹ì„ ì‚¬ìš©í•œ format ë©”ì„œë“œ í…ŒìŠ¤íŠ¸\\\\ndef test_formatter_format_calls_correct_method(\\\\n    complex_review_response: ReviewResponse,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ì¶œë ¥ í˜•ì‹ì— ë”°ë¼ ì˜¬ë°”ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # to_markdown ë©”ì„œë“œ ëª¨í‚¹\\\\n    with patch.object(formatter, \\\\\\\"to_markdown\\\\\\\") as mock_to_markdown:\\\\n        formatter.format(complex_review_response)\\\\n        # to_markdownì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\\\\n        mock_to_markdown.assert_called_once_with(complex_review_response)\\\\n\\\\n    # to_html ë©”ì„œë“œ ëª¨í‚¹\\\\n    with patch.object(formatter, \\\\\\\"to_html\\\\\\\") as mock_to_html:\\\\n        formatter.format(complex_review_response, output_format=\\\\\\\"html\\\\\\\")\\\\n        # to_htmlì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\\\\n        mock_to_html.assert_called_once_with(complex_review_response)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\nfrom unittest.mock import patch\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef complex_review_response() -> ReviewResponse:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\nfrom unittest.mock import patch\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef complex_review_response() -> ReviewResponse:\\\\n```\\\", \\\"line_number\\\": 2}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ReviewFormatter ëª¨ë“ˆì´ `reviewer.src`ì—ì„œ `reviewer.src.utils`ë¡œ ì´ë™ë˜ì—ˆìœ¼ë©°, ê´€ë ¨ import ê²½ë¡œê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œ êµ¬ì¡°ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•œ ë¦¬íŒ©í† ë§ ë³€ê²½ì…ë‹ˆë‹¤.\", \"score\": 10.0, \"recommendations\": [\"ReviewFormatter ëª¨ë“ˆì´ ìƒˆë¡œìš´ ìœ„ì¹˜(`reviewer/src/utils/review_formatter.py`)ì— ì˜¬ë°”ë¥´ê²Œ ì´ë™ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤ (ì´ diffì—ëŠ” ìƒˆ íŒŒì¼ ìƒì„±ì´ í¬í•¨ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ í™•ì¸ í•„ìš”).\", \"`utils` ë””ë ‰í† ë¦¬ê°€ ReviewFormatterì™€ ê°™ì€ ìœ í‹¸ë¦¬í‹°ì„± í´ë˜ìŠ¤ë¥¼ í¬í•¨í•˜ê¸°ì— ì ì ˆí•œ ìœ„ì¹˜ì¸ì§€ í”„ë¡œì íŠ¸ êµ¬ì¡° ê´€ì ì—ì„œ ê²€í† í•˜ì‹­ì‹œì˜¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_review_formatter.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom unittest.mock import patch\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef complex_review_response() -> ReviewResponse:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë³µì¡í•œ í˜•íƒœì˜ ReviewResponse ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í”½ìŠ¤ì²˜ì…ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        ReviewResponse: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return ReviewResponse(\\\\n        issues=[\\\\n            ReviewIssue(\\\\n                type=\\\\\\\"ë²„ê·¸\\\\\\\",\\\\n                line_number=10,\\\\n                file=\\\\\\\"main.py\\\\\\\",\\\\n                description=\\\\\\\"ì ì¬ì ì¸ ë„ ì°¸ì¡° ì˜¤ë¥˜\\\\\\\",\\\\n                suggestion=\\\\\\\"None ì²´í¬ ì¶”ê°€\\\\\\\",\\\\n                severity=\\\\\\\"error\\\\\\\",\\\\n                original_code=\\\\\\\"data = user.get_data()\\\\\\\",\\\\n                improved_code=\\\\\\\"if user is not None:\\\\\\\\n    data = user.get_data()\\\\\\\\nelse:\\\\\\\\n    data = None\\\\\\\",\\\\n            ),\\\\n            ReviewIssue(\\\\n                type=\\\\\\\"ì„±ëŠ¥\\\\\\\",\\\\n                line_number=25,\\\\n                file=\\\\\\\"utils.py\\\\\\\",\\\\n                description=\\\\\\\"ë¹„íš¨ìœ¨ì ì¸ ë£¨í”„ ì‚¬ìš©\\\\\\\",\\\\n                suggestion=\\\\\\\"ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ ì‚¬ìš©\\\\\\\",\\\\n                severity=\\\\\\\"warning\\\\\\\",\\\\n                original_code=\\\\\\\"result = []\\\\\\\\nfor item in items:\\\\\\\\n    result.append(item.value)\\\\\\\",\\\\n                improved_code=\\\\\\\"result = [item.value for item in items]\\\\\\\",\\\\n            ),\\\\n        ],\\\\n        summary=\\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\\\\\\\",\\\\n        score=7.5,\\\\n        recommendations=[\\\\\\\"ë³€ìˆ˜ëª… ëª…í™•íˆ í•˜ê¸°\\\\\\\", \\\\\\\"ì£¼ì„ ì¶”ê°€í•˜ê¸°\\\\\\\"],\\\\n    )\\\\n\\\\n\\\\ndef test_formatter_to_markdown(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterì˜ to_markdown ë©”ì„œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ë³€í™˜ í…ŒìŠ¤íŠ¸\\\\n    formatter = ReviewFormatter()\\\\n    markdown = formatter.to_markdown(complex_review_response)\\\\n\\\\n    # ê¸°ë³¸ êµ¬ì¡° ê²€ì¦\\\\n    assert \\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ìš”ì•½\\\\\\\" in markdown\\\\n    assert \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\\\\\\\" in markdown\\\\n    assert \\\\\\\"**ì ìˆ˜**: 7.5/10\\\\\\\" in markdown\\\\n\\\\n    # ì´ìŠˆ ê²€ì¦\\\\n    assert \\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\" in markdown\\\\n    assert \\\\\\\"### 1. ğŸ›‘ ë²„ê·¸\\\\\\\" in markdown\\\\n    assert \\\\\\\"**íŒŒì¼**: `main.py`, **ë¼ì¸**: 10\\\\\\\" in markdown\\\\n    assert \\\\\\\"ì ì¬ì ì¸ ë„ ì°¸ì¡° ì˜¤ë¥˜\\\\\\\" in markdown\\\\n    assert \\\\\\\"None ì²´í¬ ì¶”ê°€\\\\\\\" in markdown\\\\n\\\\n    # ì½”ë“œ ë¸”ë¡ ê²€ì¦\\\\n    assert \\\\\\\"```\\\\\\\\ndata = user.get_data()\\\\\\\\n```\\\\\\\" in markdown\\\\n    assert \\\\\\\"```\\\\\\\\nif user is not None:\\\\\\\" in markdown\\\\n\\\\n    # ë‘ ë²ˆì§¸ ì´ìŠˆ ê²€ì¦\\\\n    assert \\\\\\\"### 2. âš ï¸ ì„±ëŠ¥\\\\\\\" in markdown\\\\n\\\\n    # ê¶Œì¥ì‚¬í•­ ê²€ì¦\\\\n    assert \\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\" in markdown\\\\n    assert \\\\\\\"1. ë³€ìˆ˜ëª… ëª…í™•íˆ í•˜ê¸°\\\\\\\" in markdown\\\\n    assert \\\\\\\"2. ì£¼ì„ ì¶”ê°€í•˜ê¸°\\\\\\\" in markdown\\\\n\\\\n\\\\ndef test_formatter_to_html(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterì˜ to_html ë©”ì„œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # HTML í˜•ì‹ ë³€í™˜ í…ŒìŠ¤íŠ¸\\\\n    formatter = ReviewFormatter()\\\\n    html = formatter.to_html(complex_review_response)\\\\n\\\\n    # ê¸°ë³¸ êµ¬ì¡° ê²€ì¦\\\\n    assert \\\\\\\"<!DOCTYPE html>\\\\\\\" in html\\\\n    assert \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\" in html\\\\n    assert \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\" in html\\\\n\\\\n    # ìš”ì•½ ë° ì ìˆ˜ ê²€ì¦\\\\n    assert \\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\" in html\\\\n    assert \\\\\\\"<p>ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\\\\\\\" in html\\\\n    assert \\\\\\\"<p><strong>ì ìˆ˜</strong>: 7.5/10</p>\\\\\\\" in html\\\\n\\\\n    # ì´ìŠˆ ë° ì½”ë“œ ë¸”ë¡ ê²€ì¦\\\\n    assert \\\\\\\"<div class='issue error'>\\\\\\\" in html\\\\n    assert \\\\\\\"<pre><code>\\\\\\\" in html\\\\n    assert html.count(\\\\\\\"<pre><code>\\\\\\\") == 4  # 4ê°œì˜ ì½”ë“œ ë¸”ë¡ (2ê°œ ì´ìŠˆ x ì›ë³¸/ê°œì„  ì½”ë“œ)\\\\n\\\\n    # CSS ìŠ¤íƒ€ì¼ í¬í•¨ ê²€ì¦\\\\n    assert \\\\\\\"<style>\\\\\\\" in html\\\\n\\\\n\\\\ndef test_formatter_empty_review() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterê°€ ë¹ˆ ë¦¬ë·° ì‘ë‹µì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¹ˆ ë¦¬ë·° ì‘ë‹µ í…ŒìŠ¤íŠ¸\\\\n    empty_review = ReviewResponse(\\\\n        issues=[], summary=\\\\\\\"No issues found.\\\\\\\", score=10.0, recommendations=[]\\\\n    )\\\\n\\\\n    formatter = ReviewFormatter()\\\\n    markdown = formatter.to_markdown(empty_review)\\\\n\\\\n    assert \\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ìš”ì•½\\\\\\\" in markdown\\\\n    assert \\\\\\\"No issues found.\\\\\\\" in markdown\\\\n    assert \\\\\\\"**ì ìˆ˜**: 10.0/10\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\" not in markdown  # ì´ìŠˆê°€ ì—†ìœ¼ë¯€ë¡œ ì„¹ì…˜ì´ ì—†ì–´ì•¼ í•¨\\\\n    assert \\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\" not in markdown  # ê¶Œì¥ì‚¬í•­ì´ ì—†ìœ¼ë¯€ë¡œ ì„¹ì…˜ì´ ì—†ì–´ì•¼ í•¨\\\\n\\\\n\\\\n# format ë©”ì„œë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¶”ê°€\\\\ndef test_formatter_format_markdown(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # format ë©”ì„œë“œ í˜¸ì¶œ (ê¸°ë³¸ê°’: markdown)\\\\n    markdown_result = formatter.format(complex_review_response)\\\\n\\\\n    # to_markdown ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ë¹„êµ\\\\n    expected_result = formatter.to_markdown(complex_review_response)\\\\n    assert markdown_result == expected_result\\\\n\\\\n\\\\ndef test_formatter_format_html(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ HTML í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # format ë©”ì„œë“œ í˜¸ì¶œ (html í˜•ì‹ ì§€ì •)\\\\n    html_result = formatter.format(complex_review_response, output_format=\\\\\\\"html\\\\\\\")\\\\n\\\\n    # to_html ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ë¹„êµ\\\\n    expected_result = formatter.to_html(complex_review_response)\\\\n    assert html_result == expected_result\\\\n\\\\n\\\\ndef test_formatter_format_invalid() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ì— ëŒ€í•´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n    review = ReviewResponse(issues=[], summary=\\\\\\\"í…ŒìŠ¤íŠ¸ìš© ë¦¬ë·°\\\\\\\", recommendations=[])\\\\n\\\\n    # ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ìœ¼ë¡œ í˜¸ì¶œì‹œ ValueError ë°œìƒ í™•ì¸\\\\n    with pytest.raises(ValueError) as excinfo:\\\\n        formatter.format(review, output_format=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # ì˜ˆì™¸ ë©”ì‹œì§€ ê²€ì¦\\\\n    assert \\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹\\\\\\\" in str(excinfo.value)\\\\n\\\\n\\\\n# ëª¨í‚¹ì„ ì‚¬ìš©í•œ format ë©”ì„œë“œ í…ŒìŠ¤íŠ¸\\\\ndef test_formatter_format_calls_correct_method(\\\\n    complex_review_response: ReviewResponse,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ì¶œë ¥ í˜•ì‹ì— ë”°ë¼ ì˜¬ë°”ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # to_markdown ë©”ì„œë“œ ëª¨í‚¹\\\\n    with patch.object(formatter, \\\\\\\"to_markdown\\\\\\\") as mock_to_markdown:\\\\n        formatter.format(complex_review_response)\\\\n        # to_markdownì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\\\\n        mock_to_markdown.assert_called_once_with(complex_review_response)\\\\n\\\\n    # to_html ë©”ì„œë“œ ëª¨í‚¹\\\\n    with patch.object(formatter, \\\\\\\"to_html\\\\\\\") as mock_to_html:\\\\n        formatter.format(complex_review_response, output_format=\\\\\\\"html\\\\\\\")\\\\n        # to_htmlì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\\\\n        mock_to_html.assert_called_once_with(complex_review_response)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom unittest.mock import patch\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef complex_review_response() -> ReviewResponse:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë³µì¡í•œ í˜•íƒœì˜ ReviewResponse ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í”½ìŠ¤ì²˜ì…ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        ReviewResponse: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return ReviewResponse(\\\\n        issues=[\\\\n            ReviewIssue(\\\\n                type=\\\\\\\"ë²„ê·¸\\\\\\\",\\\\n                line_number=10,\\\\n                file=\\\\\\\"main.py\\\\\\\",\\\\n                description=\\\\\\\"ì ì¬ì ì¸ ë„ ì°¸ì¡° ì˜¤ë¥˜\\\\\\\",\\\\n                suggestion=\\\\\\\"None ì²´í¬ ì¶”ê°€\\\\\\\",\\\\n                severity=\\\\\\\"error\\\\\\\",\\\\n                original_code=\\\\\\\"data = user.get_data()\\\\\\\",\\\\n                improved_code=\\\\\\\"if user is not None:\\\\\\\\n    data = user.get_data()\\\\\\\\nelse:\\\\\\\\n    data = None\\\\\\\",\\\\n            ),\\\\n            ReviewIssue(\\\\n                type=\\\\\\\"ì„±ëŠ¥\\\\\\\",\\\\n                line_number=25,\\\\n                file=\\\\\\\"utils.py\\\\\\\",\\\\n                description=\\\\\\\"ë¹„íš¨ìœ¨ì ì¸ ë£¨í”„ ì‚¬ìš©\\\\\\\",\\\\n                suggestion=\\\\\\\"ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ ì‚¬ìš©\\\\\\\",\\\\n                severity=\\\\\\\"warning\\\\\\\",\\\\n                original_code=\\\\\\\"result = []\\\\\\\\nfor item in items:\\\\\\\\n    result.append(item.value)\\\\\\\",\\\\n                improved_code=\\\\\\\"result = [item.value for item in items]\\\\\\\",\\\\n            ),\\\\n        ],\\\\n        summary=\\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\\\\\\\",\\\\n        score=7.5,\\\\n        recommendations=[\\\\\\\"ë³€ìˆ˜ëª… ëª…í™•íˆ í•˜ê¸°\\\\\\\", \\\\\\\"ì£¼ì„ ì¶”ê°€í•˜ê¸°\\\\\\\"],\\\\n    )\\\\n\\\\n\\\\ndef test_formatter_to_markdown(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterì˜ to_markdown ë©”ì„œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ë³€í™˜ í…ŒìŠ¤íŠ¸\\\\n    formatter = ReviewFormatter()\\\\n    markdown = formatter.to_markdown(complex_review_response)\\\\n\\\\n    # ê¸°ë³¸ êµ¬ì¡° ê²€ì¦\\\\n    assert \\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ìš”ì•½\\\\\\\" in markdown\\\\n    assert \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\\\\\\\" in markdown\\\\n    assert \\\\\\\"**ì ìˆ˜**: 7.5/10\\\\\\\" in markdown\\\\n\\\\n    # ì´ìŠˆ ê²€ì¦\\\\n    assert \\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\" in markdown\\\\n    assert \\\\\\\"### 1. ğŸ›‘ ë²„ê·¸\\\\\\\" in markdown\\\\n    assert \\\\\\\"**íŒŒì¼**: `main.py`, **ë¼ì¸**: 10\\\\\\\" in markdown\\\\n    assert \\\\\\\"ì ì¬ì ì¸ ë„ ì°¸ì¡° ì˜¤ë¥˜\\\\\\\" in markdown\\\\n    assert \\\\\\\"None ì²´í¬ ì¶”ê°€\\\\\\\" in markdown\\\\n\\\\n    # ì½”ë“œ ë¸”ë¡ ê²€ì¦\\\\n    assert \\\\\\\"`â€‹``\\\\\\\\ndata = user.get_data()\\\\\\\\n`â€‹``\\\\\\\" in markdown\\\\n    assert \\\\\\\"`â€‹``\\\\\\\\nif user is not None:\\\\\\\" in markdown\\\\n\\\\n    # ë‘ ë²ˆì§¸ ì´ìŠˆ ê²€ì¦\\\\n    assert \\\\\\\"### 2. âš ï¸ ì„±ëŠ¥\\\\\\\" in markdown\\\\n\\\\n    # ê¶Œì¥ì‚¬í•­ ê²€ì¦\\\\n    assert \\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\" in markdown\\\\n    assert \\\\\\\"1. ë³€ìˆ˜ëª… ëª…í™•íˆ í•˜ê¸°\\\\\\\" in markdown\\\\n    assert \\\\\\\"2. ì£¼ì„ ì¶”ê°€í•˜ê¸°\\\\\\\" in markdown\\\\n\\\\n\\\\ndef test_formatter_to_html(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterì˜ to_html ë©”ì„œë“œë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # HTML í˜•ì‹ ë³€í™˜ í…ŒìŠ¤íŠ¸\\\\n    formatter = ReviewFormatter()\\\\n    html = formatter.to_html(complex_review_response)\\\\n\\\\n    # ê¸°ë³¸ êµ¬ì¡° ê²€ì¦\\\\n    assert \\\\\\\"<!DOCTYPE html>\\\\\\\" in html\\\\n    assert \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\" in html\\\\n    assert \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\" in html\\\\n\\\\n    # ìš”ì•½ ë° ì ìˆ˜ ê²€ì¦\\\\n    assert \\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\" in html\\\\n    assert \\\\\\\"<p>ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\\\\\\\" in html\\\\n    assert \\\\\\\"<p><strong>ì ìˆ˜</strong>: 7.5/10</p>\\\\\\\" in html\\\\n\\\\n    # ì´ìŠˆ ë° ì½”ë“œ ë¸”ë¡ ê²€ì¦\\\\n    assert \\\\\\\"<div class='issue error'>\\\\\\\" in html\\\\n    assert \\\\\\\"<pre><code>\\\\\\\" in html\\\\n    assert html.count(\\\\\\\"<pre><code>\\\\\\\") == 4  # 4ê°œì˜ ì½”ë“œ ë¸”ë¡ (2ê°œ ì´ìŠˆ x ì›ë³¸/ê°œì„  ì½”ë“œ)\\\\n\\\\n    # CSS ìŠ¤íƒ€ì¼ í¬í•¨ ê²€ì¦\\\\n    assert \\\\\\\"<style>\\\\\\\" in html\\\\n\\\\n\\\\ndef test_formatter_empty_review() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatterê°€ ë¹ˆ ë¦¬ë·° ì‘ë‹µì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¹ˆ ë¦¬ë·° ì‘ë‹µ í…ŒìŠ¤íŠ¸\\\\n    empty_review = ReviewResponse(\\\\n        issues=[], summary=\\\\\\\"No issues found.\\\\\\\", score=10.0, recommendations=[]\\\\n    )\\\\n\\\\n    formatter = ReviewFormatter()\\\\n    markdown = formatter.to_markdown(empty_review)\\\\n\\\\n    assert \\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ìš”ì•½\\\\\\\" in markdown\\\\n    assert \\\\\\\"No issues found.\\\\\\\" in markdown\\\\n    assert \\\\\\\"**ì ìˆ˜**: 10.0/10\\\\\\\" in markdown\\\\n    assert \\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\" not in markdown  # ì´ìŠˆê°€ ì—†ìœ¼ë¯€ë¡œ ì„¹ì…˜ì´ ì—†ì–´ì•¼ í•¨\\\\n    assert \\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\" not in markdown  # ê¶Œì¥ì‚¬í•­ì´ ì—†ìœ¼ë¯€ë¡œ ì„¹ì…˜ì´ ì—†ì–´ì•¼ í•¨\\\\n\\\\n\\\\n# format ë©”ì„œë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¶”ê°€\\\\ndef test_formatter_format_markdown(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # format ë©”ì„œë“œ í˜¸ì¶œ (ê¸°ë³¸ê°’: markdown)\\\\n    markdown_result = formatter.format(complex_review_response)\\\\n\\\\n    # to_markdown ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ë¹„êµ\\\\n    expected_result = formatter.to_markdown(complex_review_response)\\\\n    assert markdown_result == expected_result\\\\n\\\\n\\\\ndef test_formatter_format_html(complex_review_response: ReviewResponse) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ HTML í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # format ë©”ì„œë“œ í˜¸ì¶œ (html í˜•ì‹ ì§€ì •)\\\\n    html_result = formatter.format(complex_review_response, output_format=\\\\\\\"html\\\\\\\")\\\\n\\\\n    # to_html ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ë¹„êµ\\\\n    expected_result = formatter.to_html(complex_review_response)\\\\n    assert html_result == expected_result\\\\n\\\\n\\\\ndef test_formatter_format_invalid() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ì— ëŒ€í•´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n    review = ReviewResponse(issues=[], summary=\\\\\\\"í…ŒìŠ¤íŠ¸ìš© ë¦¬ë·°\\\\\\\", recommendations=[])\\\\n\\\\n    # ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜•ì‹ìœ¼ë¡œ í˜¸ì¶œì‹œ ValueError ë°œìƒ í™•ì¸\\\\n    with pytest.raises(ValueError) as excinfo:\\\\n        formatter.format(review, output_format=\\\\\\\"json\\\\\\\")\\\\n\\\\n    # ì˜ˆì™¸ ë©”ì‹œì§€ ê²€ì¦\\\\n    assert \\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹\\\\\\\" in str(excinfo.value)\\\\n\\\\n\\\\n# ëª¨í‚¹ì„ ì‚¬ìš©í•œ format ë©”ì„œë“œ í…ŒìŠ¤íŠ¸\\\\ndef test_formatter_format_calls_correct_method(\\\\n    complex_review_response: ReviewResponse,\\\\n) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"format ë©”ì„œë“œê°€ ì¶œë ¥ í˜•ì‹ì— ë”°ë¼ ì˜¬ë°”ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        complex_review_response: í…ŒìŠ¤íŠ¸ìš© ë³µì¡í•œ ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    formatter = ReviewFormatter()\\\\n\\\\n    # to_markdown ë©”ì„œë“œ ëª¨í‚¹\\\\n    with patch.object(formatter, \\\\\\\"to_markdown\\\\\\\") as mock_to_markdown:\\\\n        formatter.format(complex_review_response)\\\\n        # to_markdownì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\\\\n        mock_to_markdown.assert_called_once_with(complex_review_response)\\\\n\\\\n    # to_html ë©”ì„œë“œ ëª¨í‚¹\\\\n    with patch.object(formatter, \\\\\\\"to_html\\\\\\\") as mock_to_html:\\\\n        formatter.format(complex_review_response, output_format=\\\\\\\"html\\\\\\\")\\\\n        # to_htmlì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\\\\n        mock_to_html.assert_called_once_with(complex_review_response)\\\\n```\\\", \\\"line_number\\\": 1}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 60, \"file\": \"tests/test_review_formatter.py\", \"description\": \"ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ì„ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ë¹„í‘œì¤€ ë¬¸ìì—´(`â€‹`)ì´ í¬í•¨ëœ ë°±í‹±(` ``` `)ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‹¤ì œ ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ê²°ê³¼ì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©°, í…ŒìŠ¤íŠ¸ì˜ ì •í™•ì„±ì„ ì €í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"í‘œì¤€ ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ í‘œí˜„ì¸ ì„¸ ê°œì˜ ë°±í‹±(` ``` `)ì„ ì‚¬ìš©í•˜ì—¬ ê²€ì¦ ë¬¸ìì—´ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"assert \\\"`â€‹``\\\\ndata = user.get_data()\\\\n`â€‹``\\\" in markdown\\nassert \\\"`â€‹``\\\\nif user is not None:\\\" in markdown\", \"improved_code\": \"assert \\\"```\\\\ndata = user.get_data()\\\\n```\\\" in markdown\\nassert \\\"```\\\\nif user is not None:\\\" in markdown\"}], \"summary\": \"ReviewFormatter í…ŒìŠ¤íŠ¸ ì½”ë“œì— ëŒ€í•œ ë¦¬ë·°ì…ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ì˜ ì‘ì„±ë˜ì—ˆìœ¼ë©° ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ë¥¼ ì»¤ë²„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ê²€ì¦ ë¬¸ìì—´ì— ëŒ€í•œ ì‚¬ì†Œí•œ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ê²€ì¦ ì‹œ í‘œì¤€ ë¬¸ìì—´ ì‚¬ìš©\", \"í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë³´ê³ ì„œ ìƒì„± ë° í™•ì¸\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    formatter = ReviewFormatter()\\\\n    output_content = formatter.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_converter import ReviewConverter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewConverter()\\\\n    output_content = processor.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    formatter = ReviewFormatter()\\\\n    output_content = formatter.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"line_number\\\": 584}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_converter.py\\\", \\\"file_content\\\": \\\"ì‚­ì œëœ íŒŒì¼\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewConverter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_formatter.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter: ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport html\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n```\\\", \\\"line_number\\\": 6}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/file_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n    # ì‹¤í–‰ íŒŒì¼ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬\\\\n    \\\\\\\".exe\\\\\\\",\\\\n    \\\\\\\".dll\\\\\\\",\\\\n    \\\\\\\".so\\\\\\\",\\\\n    \\\\\\\".dylib\\\\\\\",\\\\n    \\\\\\\".bin\\\\\\\",\\\\n    \\\\\\\".o\\\\\\\",\\\\n    \\\\\\\".obj\\\\\\\",\\\\n    \\\\\\\".a\\\\\\\",\\\\n    \\\\\\\".lib\\\\\\\",\\\\n    # ì••ì¶• íŒŒì¼\\\\n    \\\\\\\".zip\\\\\\\",\\\\n    \\\\\\\".tar\\\\\\\",\\\\n    \\\\\\\".gz\\\\\\\",\\\\n    \\\\\\\".bz2\\\\\\\",\\\\n    \\\\\\\".xz\\\\\\\",\\\\n    \\\\\\\".jar\\\\\\\",\\\\n    \\\\\\\".war\\\\\\\",\\\\n    \\\\\\\".ear\\\\\\\",\\\\n    \\\\\\\".aar\\\\\\\",\\\\n    # ì´ë¯¸ì§€ íŒŒì¼\\\\n    \\\\\\\".jpg\\\\\\\",\\\\n    \\\\\\\".jpeg\\\\\\\",\\\\n    \\\\\\\".png\\\\\\\",\\\\n    \\\\\\\".gif\\\\\\\",\\\\n    \\\\\\\".bmp\\\\\\\",\\\\n    \\\\\\\".tiff\\\\\\\",\\\\n    \\\\\\\".ico\\\\\\\",\\\\n    \\\\\\\".webp\\\\\\\",\\\\n    # ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ íŒŒì¼\\\\n    \\\\\\\".mp3\\\\\\\",\\\\n    \\\\\\\".mp4\\\\\\\",\\\\n    \\\\\\\".wav\\\\\\\",\\\\n    \\\\\\\".avi\\\\\\\",\\\\n    \\\\\\\".mov\\\\\\\",\\\\n    \\\\\\\".mkv\\\\\\\",\\\\n    \\\\\\\".flac\\\\\\\",\\\\n    \\\\\\\".ogg\\\\\\\",\\\\n    # ë¬¸ì„œ íŒŒì¼\\\\n    \\\\\\\".pdf\\\\\\\",\\\\n    \\\\\\\".doc\\\\\\\",\\\\n    \\\\\\\".docx\\\\\\\",\\\\n    \\\\\\\".ppt\\\\\\\",\\\\n    \\\\\\\".pptx\\\\\\\",\\\\n    \\\\\\\".xls\\\\\\\",\\\\n    \\\\\\\".xlsx\\\\\\\",\\\\n    # ê¸°íƒ€ ë°”ì´ë„ˆë¦¬ íŒŒì¼\\\\n    \\\\\\\".class\\\\\\\",\\\\n    \\\\\\\".pyc\\\\\\\",\\\\n    \\\\\\\".pyo\\\\\\\",\\\\n    \\\\\\\".db\\\\\\\",\\\\n    \\\\\\\".sqlite\\\\\\\",\\\\n    \\\\\\\".dat\\\\\\\",\\\\n}\\\\n\\\\n# ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nBINARY_FILENAMES = {\\\\n    \\\\\\\"gradlew\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.jar\\\\\\\",\\\\n    \\\\\\\"mvnw\\\\\\\",\\\\n    \\\\\\\"mvnw.cmd\\\\\\\",\\\\n    \\\\\\\".DS_Store\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.properties\\\\\\\",\\\\n    \\\\\\\"gradlew.bat\\\\\\\",\\\\n}\\\\n\\\\n# ë¬´ì‹œí•  í…ìŠ¤íŠ¸ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nIGNORE_FILENAMES = {\\\\n    \\\\\\\".gitignore\\\\\\\",\\\\n    \\\\\\\".gitmodules\\\\\\\",\\\\n    \\\\\\\".gitconfig\\\\\\\",\\\\n    \\\\\\\".git\\\\\\\",\\\\n    \\\\\\\".env\\\\\\\",\\\\n    \\\\\\\".env.local\\\\\\\",\\\\n    \\\\\\\".env.development\\\\\\\",\\\\n    \\\\\\\".env.production\\\\\\\",\\\\n    \\\\\\\".env.test\\\\\\\",\\\\n    \\\\\\\".env.development.local\\\\\\\",\\\\n    \\\\\\\".env.production.local\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef is_ignore_file(filename: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): í™•ì¸í•  íŒŒì¼ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        bool: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì´ë©´ True, ì•„ë‹ˆë©´ False\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os.path\\\\n\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return (\\\\n        ext in BINARY_EXTENSIONS\\\\n        or base_name in BINARY_FILENAMES\\\\n        or base_name in IGNORE_FILENAMES\\\\n    )\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            # ì‚­ì œëœ íŒŒì¼ì€ ë¹ˆ ë¬¸ìì—´ë¡œ ë°˜í™˜, ì˜¤ë¥˜ ë°œìƒ ë°©ì§€\\\\n            # ê²½ë¡œë¡œ ê²€ìƒ‰í–ˆì„ ë•Œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ì‚­ì œëœ ê²ƒìœ¼ë¡œ ì•”ë¬µì ìœ¼ë¡œ ê°„ì£¼\\\\n            # TODO: ëª…ì‹œì ìœ¼ë¡œ ì‚­ì œëœ íŒŒì¼ ì²˜ë¦¬ ë¡œì§ ì¶”ê°€\\\\n            return \\\\\\\"ì‚­ì œëœ íŒŒì¼\\\\\\\"\\\\n\\\\n        # ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_ignore_file(\\\\n            filename\\\\n        ):  # is_ignore_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ì œì™¸ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(\\\\n        f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íƒìƒ‰ ì™„ë£Œ ê²½ë¡œ: {current_dir}\\\\\\\"\\\\n    )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_ignore_file(\\\\n            filename\\\\n        ):  # is_ignore_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            # ì‚­ì œëœ íŒŒì¼ì€ ë¹ˆ ë¬¸ìì—´ë¡œ ë°˜í™˜, ì˜¤ë¥˜ ë°œìƒ ë°©ì§€\\\\n            # ê²½ë¡œë¡œ ê²€ìƒ‰í–ˆì„ ë•Œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ì‚­ì œëœ ê²ƒìœ¼ë¡œ ì•”ë¬µì ìœ¼ë¡œ ê°„ì£¼\\\\n            # TODO: ëª…ì‹œì ìœ¼ë¡œ ì‚­ì œëœ íŒŒì¼ ì²˜ë¦¬ ë¡œì§ ì¶”ê°€\\\\n            return \\\\\\\"ì‚­ì œëœ íŒŒì¼\\\\\\\"\\\\n\\\\n        # ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_ignore_file(\\\\n            filename\\\\n        ):  # is_ignore_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n```\\\", \\\"line_number\\\": 144}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 18, \"file\": \"reviewer/cli.py\", \"description\": \"ReviewConverter í´ë˜ìŠ¤ê°€ ReviewFormatterë¡œ ë³€ê²½ë˜ì—ˆìœ¼ë‚˜, import ë¬¸ë§Œ ë³€ê²½ë˜ê³  ì‹¤ì œ ì‚¬ìš© ì½”ë“œì—ì„œëŠ” ë³€ìˆ˜ëª…ì´ ì¼ê´€ë˜ê²Œ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ì¼ê´€ì„±ì„ í•´ì¹˜ê³  í˜¼ë€ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë³€ìˆ˜ëª…ì„ í´ë˜ìŠ¤ëª…ê³¼ ì¼ì¹˜í•˜ë„ë¡ 'formatter'ë¡œ í†µì¼í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”. ì´ë¯¸ 584ë²ˆ ë¼ì¸ì—ì„œëŠ” 'formatter'ë¡œ ë³€ê²½ë˜ì—ˆì§€ë§Œ, ë‹¤ë¥¸ ê³³ì—ì„œë„ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"from reviewer.src.review_converter import ReviewConverter\", \"improved_code\": \"from reviewer.src.review_formatter import ReviewFormatter\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 584, \"file\": \"reviewer/cli.py\", \"description\": \"ReviewConverter í´ë˜ìŠ¤ê°€ ReviewFormatterë¡œ ë³€ê²½ë˜ë©´ì„œ ë³€ìˆ˜ëª…ë„ processorì—ì„œ formatterë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¢‹ì€ ë³€ê²½ì´ì§€ë§Œ, ì´ëŸ¬í•œ ë³€ê²½ì´ ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì— ì¼ê´€ë˜ê²Œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\", \"suggestion\": \"ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì—ì„œ ReviewConverterì™€ ê´€ë ¨ëœ ëª¨ë“  ì°¸ì¡°ë¥¼ ReviewFormatterë¡œ ë³€ê²½í•˜ê³ , ë³€ìˆ˜ëª…ë„ ì¼ê´€ë˜ê²Œ 'formatter'ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\n    processor = ReviewConverter()\\n    output_content = processor.convert(review_response, args.output_format)\", \"improved_code\": \"    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\n    formatter = ReviewFormatter()\\n    output_content = formatter.convert(review_response, args.output_format)\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 6, \"file\": \"reviewer/src/review_formatter.py\", \"description\": \"ReviewFormatter í´ë˜ìŠ¤ì— convert ë©”ì„œë“œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” ReviewConverter í´ë˜ìŠ¤ê°€ ì´ ê¸°ëŠ¥ì„ ë‹´ë‹¹í–ˆìœ¼ë‚˜, ì´ì œ ReviewFormatter í´ë˜ìŠ¤ê°€ ì§ì ‘ ë³€í™˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ëŠ” í´ë˜ìŠ¤ ì±…ì„ì˜ ë³€í™”ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\", \"suggestion\": \"í´ë˜ìŠ¤ ì±…ì„ì´ ë³€ê²½ë˜ì—ˆìœ¼ë¯€ë¡œ í´ë˜ìŠ¤ ë¬¸ì„œí™” ì£¼ì„ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ ì´ í´ë˜ìŠ¤ê°€ ì´ì œ ë³€í™˜ ê¸°ëŠ¥ë„ ë‹´ë‹¹í•œë‹¤ëŠ” ê²ƒì„ ëª…í™•íˆ í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"class ReviewFormatter:\\n    \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\"\\\"\\\"\", \"improved_code\": \"class ReviewFormatter:\\n    \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\n    \\n    ì´ í´ë˜ìŠ¤ëŠ” ë¦¬ë·° ì‘ë‹µì„ ë§ˆí¬ë‹¤ìš´, HTML ë“± ë‹¤ì–‘í•œ ì¶œë ¥ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\\n    ì´ì „ì—ëŠ” ReviewConverter í´ë˜ìŠ¤ê°€ ë‹´ë‹¹í–ˆë˜ ë³€í™˜ ê¸°ëŠ¥ì´ ì´ í´ë˜ìŠ¤ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤.\\n    \\\"\\\"\\\"\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 144, \"file\": \"reviewer/src/utils/file_utils.py\", \"description\": \"íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ëŒ€ì‹  \\\"ì‚­ì œëœ íŒŒì¼\\\"ì´ë¼ëŠ” ë¬¸ìì—´ì„ ë°˜í™˜í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì‹ì˜ ë³€ê²½ìœ¼ë¡œ, í•¨ìˆ˜ì˜ ê³„ì•½(contract)ì´ ë³€ê²½ëœ ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€ê²½ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ì½”ë“œì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"í•¨ìˆ˜ ë¬¸ì„œí™” ì£¼ì„ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œì˜ ìƒˆë¡œìš´ ë™ì‘ì„ ëª…í™•íˆ ì„¤ëª…í•˜ì„¸ìš”. ë˜í•œ TODO ì£¼ì„ì€ êµ¬ì²´ì ì¸ ì‘ì—… í•­ëª©ê³¼ ì´ìœ ë¥¼ í¬í•¨í•˜ë„ë¡ ê°œì„ í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"        if not os.path.exists(file_path):\\n            raise FileNotFoundError(f\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\")\", \"improved_code\": \"        if not os.path.exists(file_path):\\n            # ì‚­ì œëœ íŒŒì¼ì€ ì˜¤ë¥˜ ëŒ€ì‹  íŠ¹ìˆ˜ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ì—¬ ì²˜ë¦¬ íë¦„ ìœ ì§€\\n            # ì´ëŠ” git diffì—ì„œ ì‚­ì œëœ íŒŒì¼ì„ ì²˜ë¦¬í•  ë•Œ ì˜ˆì™¸ ë°œìƒì„ ë°©ì§€í•©ë‹ˆë‹¤\\n            # TODO: ì‚­ì œëœ íŒŒì¼ì„ ëª…ì‹œì ìœ¼ë¡œ ì‹ë³„í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„ (ì´ìŠˆ #123)\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 144, \"file\": \"reviewer/src/utils/file_utils.py\", \"description\": \"íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ \\\"ì‚­ì œëœ íŒŒì¼\\\"ì´ë¼ëŠ” ë¬¸ìì—´ì„ ë°˜í™˜í•˜ëŠ” ë°©ì‹ì€ ì‹¤ì œ íŒŒì¼ ë‚´ìš©ê³¼ êµ¬ë¶„í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒì¼ ë‚´ìš©ì´ ì •í™•íˆ \\\"ì‚­ì œëœ íŒŒì¼\\\"ì´ë¼ëŠ” í…ìŠ¤íŠ¸ì¸ ê²½ìš°ì™€ êµ¬ë¶„í•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤.\", \"suggestion\": \"íŠ¹ìˆ˜ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ ë¬¸ìì—´ ëŒ€ì‹  Noneì„ ë°˜í™˜í•˜ê±°ë‚˜, ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ë˜ í˜¸ì¶œìê°€ ì ì ˆíˆ ì²˜ë¦¬í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ë” ëª…í™•í•©ë‹ˆë‹¤. ë˜ëŠ” ì‚­ì œëœ íŒŒì¼ì„ì„ ëª…í™•íˆ ë‚˜íƒ€ë‚´ëŠ” íŠ¹ìˆ˜ í´ë˜ìŠ¤ë‚˜ ë°ì´í„° êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\", \"severity\": \"error\", \"original_code\": \"        if not os.path.exists(file_path):\\n            # ì‚­ì œëœ íŒŒì¼ì€ ë¹ˆ ë¬¸ìì—´ë¡œ ë°˜í™˜, ì˜¤ë¥˜ ë°œìƒ ë°©ì§€\\n            # ê²½ë¡œë¡œ ê²€ìƒ‰í–ˆì„ ë•Œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ì‚­ì œëœ ê²ƒìœ¼ë¡œ ì•”ë¬µì ìœ¼ë¡œ ê°„ì£¼\\n            # TODO: ëª…ì‹œì ìœ¼ë¡œ ì‚­ì œëœ íŒŒì¼ ì²˜ë¦¬ ë¡œì§ ì¶”ê°€\\n            return \\\"ì‚­ì œëœ íŒŒì¼\\\"\", \"improved_code\": \"        if not os.path.exists(file_path):\\n            # ì‚­ì œëœ íŒŒì¼ì€ Noneì„ ë°˜í™˜í•˜ì—¬ ì‹¤ì œ íŒŒì¼ ë‚´ìš©ê³¼ ëª…í™•íˆ êµ¬ë¶„\\n            # í˜¸ì¶œìëŠ” None ì²´í¬ë¥¼ í†µí•´ ì‚­ì œëœ íŒŒì¼ì„ ì‹ë³„í•  ìˆ˜ ìˆìŒ\\n            # TODO: ì‚­ì œëœ íŒŒì¼ì„ ìœ„í•œ FileStatus ì—´ê±°í˜• ë˜ëŠ” í´ë˜ìŠ¤ ë„ì… ê²€í† \\n            return None\"}], \"summary\": \"ì´ë²ˆ ì½”ë“œ ë³€ê²½ì€ ì£¼ë¡œ ì½”ë“œ ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬ ë¡œì§ì˜ êµ¬ì¡° ê°œì„ ì— ì´ˆì ì„ ë§ì¶”ê³  ìˆìŠµë‹ˆë‹¤. ì£¼ìš” ë³€ê²½ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\\n\\n1. `ReviewConverter` í´ë˜ìŠ¤ê°€ ì‚­ì œë˜ê³  í•´ë‹¹ ê¸°ëŠ¥ì´ `ReviewFormatter` í´ë˜ìŠ¤ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œ ì¤‘ë³µì„ ì¤„ì´ê³  ì±…ì„ì„ ëª…í™•íˆ í•˜ëŠ” ê¸ì •ì ì¸ ë³€í™”ì…ë‹ˆë‹¤.\\n\\n2. `ReviewFormatter` í´ë˜ìŠ¤ì— `convert` ë©”ì„œë“œê°€ ì¶”ê°€ë˜ì–´ ì¶œë ¥ í˜•ì‹ì— ë”°ë¼ ì ì ˆí•œ ë³€í™˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.\\n\\n3. `load_file_content` í•¨ìˆ˜ì˜ ë™ì‘ì´ ë³€ê²½ë˜ì–´ íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ëŒ€ì‹  \\\"ì‚­ì œëœ íŒŒì¼\\\"ì´ë¼ëŠ” ë¬¸ìì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ëŠ” ì˜ˆì™¸ ì²˜ë¦¬ ë°©ì‹ì˜ ë³€í™”ë¡œ, í•¨ìˆ˜ì˜ ê³„ì•½ì´ ë³€ê²½ëœ ê²ƒì…ë‹ˆë‹¤.\\n\\nì „ë°˜ì ìœ¼ë¡œ ì½”ë“œ êµ¬ì¡°ê°€ ê°œì„ ë˜ì—ˆì§€ë§Œ, ì¼ë¶€ ì¼ê´€ì„± ë¬¸ì œì™€ í•¨ìˆ˜ ë™ì‘ ë³€ê²½ì— ë”°ë¥¸ ë¬¸ì„œí™” ë¶€ì¡± ë“±ì˜ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ëŠ” ë°©ì‹ì€ ì‹¤ì œ íŒŒì¼ ë‚´ìš©ê³¼ êµ¬ë¶„í•˜ê¸° ì–´ë ¤ìš´ ì ì¬ì  ë²„ê·¸ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"í´ë˜ìŠ¤ ì´ë¦„ ë³€ê²½ ì‹œ ê´€ë ¨ëœ ëª¨ë“  ì°¸ì¡°ì™€ ë³€ìˆ˜ëª…ì„ ì¼ê´€ë˜ê²Œ ë³€ê²½í•˜ì„¸ìš”. íŠ¹íˆ ReviewConverterì—ì„œ ReviewFormatterë¡œì˜ ë³€ê²½ì´ ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì— ì¼ê´€ë˜ê²Œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ì˜ ë™ì‘ì´ ë³€ê²½ë  ë•ŒëŠ” ë¬¸ì„œí™” ì£¼ì„(docstring)ì„ ë°˜ë“œì‹œ ì—…ë°ì´íŠ¸í•˜ì—¬ ìƒˆë¡œìš´ ë™ì‘ì„ ëª…í™•íˆ ì„¤ëª…í•˜ì„¸ìš”.\", \"íŠ¹ìˆ˜ ìƒíƒœ(ì˜ˆ: íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ)ë¥¼ ë‚˜íƒ€ë‚¼ ë•ŒëŠ” ì¼ë°˜ ë¬¸ìì—´ë³´ë‹¤ Noneì´ë‚˜ ì „ìš© ì—´ê±°í˜•, ì˜ˆì™¸ ì²˜ë¦¬ ë“± ë” ëª…í™•í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ì„¸ìš”.\", \"TODO ì£¼ì„ì€ êµ¬ì²´ì ì¸ ì‘ì—… í•­ëª©, ì´ìœ , ê°€ëŠ¥í•˜ë©´ ê´€ë ¨ ì´ìŠˆ ë²ˆí˜¸ë¥¼ í¬í•¨í•˜ë„ë¡ ì‘ì„±í•˜ì„¸ìš”.\", \"í•¨ìˆ˜ì˜ ê³„ì•½(ë°˜í™˜ ê°’, ì˜ˆì™¸ ì²˜ë¦¬ ë“±)ì„ ë³€ê²½í•  ë•ŒëŠ” í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ëª¨ë“  ì½”ë“œë¥¼ ê²€í† í•˜ì—¬ í˜¸í™˜ì„± ë¬¸ì œê°€ ì—†ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_converter import ReviewConverter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"line_number\\\": 18, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewConverter()\\\\n    output_content = processor.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    formatter = ReviewFormatter()\\\\n    output_content = formatter.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"line_number\\\": 584, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/review_converter.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewConverter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/review_formatter.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n```\\\", \\\"line_number\\\": 6, \\\"language\\\": \\\"python\\\"}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 6, \"file\": \"reviewer/src/review_formatter.py\", \"description\": \"ReviewConverter í´ë˜ìŠ¤ê°€ ì œê±°ë˜ê³  ê·¸ ê¸°ëŠ¥ì´ ReviewFormatter í´ë˜ìŠ¤ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¤‘ê°„ ë ˆì´ì–´ë¥¼ ì œê±°í•˜ì—¬ ì½”ë“œ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í•˜ëŠ” ë¦¬íŒ©í† ë§ì…ë‹ˆë‹¤. ì´ ë³€ê²½ì€ ì ì ˆí•˜ì§€ë§Œ, í´ë˜ìŠ¤ ì´ë¦„ê³¼ ë©”ì„œë“œ ì´ë¦„ì´ ë” ëª…í™•í•˜ê²Œ ì„¤ê³„ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ReviewFormatter í´ë˜ìŠ¤ì˜ convert ë©”ì„œë“œ ì´ë¦„ì´ formatìœ¼ë¡œ ë³€ê²½ë˜ë©´ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ë” ì¼ê´€ì„±ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ ë©”ì„œë“œ ì´ë¦„ì´ ì‹¤ì œ ë™ì‘ì„ ë” ì •í™•íˆ ë°˜ì˜í•  ê²ƒì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"def convert(self, review: ReviewResponse, output_format: str = \\\"markdown\\\") -> str:\\n    \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n    Args:\\n        review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n        output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\n\\n    Returns:\\n        str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\n\\n    Raises:\\n        ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\n    \\\"\\\"\\\"\", \"improved_code\": \"def format(self, review: ReviewResponse, output_format: str = \\\"markdown\\\") -> str:\\n    \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n    Args:\\n        review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n        output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\n\\n    Returns:\\n        str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\n\\n    Raises:\\n        ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹ì¸ ê²½ìš°\\n    \\\"\\\"\\\"\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 584, \"file\": \"reviewer/cli.py\", \"description\": \"ReviewConverter í´ë˜ìŠ¤ê°€ ReviewFormatterë¡œ ë³€ê²½ë˜ì—ˆì§€ë§Œ, ë³€ìˆ˜ëª…ì€ ì—¬ì „íˆ 'processor'ë¡œ ë˜ì–´ ìˆì–´ ì¼ê´€ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤. ë³€ìˆ˜ëª…ì´ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ë„ë¡ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë³€ìˆ˜ëª…ì„ 'processor'ì—ì„œ 'formatter'ë¡œ ë³€ê²½í•˜ì—¬ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ì¼ì¹˜ì‹œí‚¤ì„¸ìš”. ì´ë ‡ê²Œ í•˜ë©´ ì½”ë“œì˜ ì¼ê´€ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"# ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\nprocessor = ReviewConverter()\\noutput_content = processor.convert(review_response, args.output_format)\", \"improved_code\": \"# ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\nformatter = ReviewFormatter()\\noutput_content = formatter.convert(review_response, args.output_format)\"}], \"summary\": \"ì´ ì½”ë“œ ë³€ê²½ì€ ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬ ë¡œì§ì„ ë‹¨ìˆœí™”í•˜ëŠ” ë¦¬íŒ©í† ë§ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤. ì£¼ìš” ë³€ê²½ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\\n\\n1. `ReviewConverter` í´ë˜ìŠ¤ê°€ ì™„ì „íˆ ì œê±°ë˜ê³ , ê·¸ ê¸°ëŠ¥ì´ `ReviewFormatter` í´ë˜ìŠ¤ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤.\\n2. `ReviewFormatter` í´ë˜ìŠ¤ì— `convert` ë©”ì„œë“œê°€ ì¶”ê°€ë˜ì–´ ì´ì „ì— `ReviewConverter`ê°€ ìˆ˜í–‰í•˜ë˜ ì—­í• ì„ ëŒ€ì‹ í•©ë‹ˆë‹¤.\\n3. ê´€ë ¨ import ë¬¸ê³¼ í´ë˜ìŠ¤ ì‚¬ìš© ë¶€ë¶„ì´ ëª¨ë‘ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\\n\\nì´ ë¦¬íŒ©í† ë§ì€ ì¤‘ê°„ ë ˆì´ì–´ë¥¼ ì œê±°í•˜ì—¬ ì½”ë“œ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í•˜ê³ , ë¶ˆí•„ìš”í•œ ìœ„ì„(delegation)ì„ ì œê±°í•˜ëŠ” ê¸ì •ì ì¸ ë³€í™”ì…ë‹ˆë‹¤. ì½”ë“œì˜ ì±…ì„ ë¶„ë¦¬ê°€ ë” ëª…í™•í•´ì¡Œìœ¼ë©°, ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"ë©”ì„œë“œ ì´ë¦„ì„ ê¸°ëŠ¥ì— ë§ê²Œ ëª…í™•í•˜ê²Œ ì§€ì •í•˜ì„¸ìš”. 'convert' ëŒ€ì‹  'format'ì´ ë” ì ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"ë³€ìˆ˜ëª…ì„ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ì¼ì¹˜ì‹œì¼œ ì½”ë“œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì„¸ìš”.\", \"ë¦¬íŒ©í† ë§ í›„ì—ëŠ” ê´€ë ¨ëœ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ì—…ë°ì´íŠ¸í•˜ì—¬ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"ì½”ë“œ ë³€ê²½ ì‹œ ë¬¸ì„œí™”(ì£¼ì„, ë…ìŠ¤íŠ¸ë§)ë„ í•¨ê»˜ ì—…ë°ì´íŠ¸í•˜ì—¬ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_converter import ReviewConverter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewConverter()\\\\n    output_content = processor.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewConverter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewConverter()\\\\n    output_content = processor.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"line_number\\\": 584}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_converter.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewConverter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewConverter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_formatter.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter: ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport html\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport html\\\\nimport json\\\\nfrom typing import Any\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewFormatter: ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport html\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_json(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: JSON í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return json.dumps(review.model_dump(), indent=2, ensure_ascii=False)\\\\n\\\\n\\\\nclass ReviewAnalyzer:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def get_severity_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {\\\\\\\"info\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 0, \\\\\\\"error\\\\\\\": 0}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_type_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_file_issues(review: ReviewResponse) -> dict[str, list[ReviewIssue]]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, list[ReviewIssue]]: íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        file_issues = {}\\\\n\\\\n        for issue in review.issues:\\\\n            if issue.file:\\\\n                if issue.file not in file_issues:\\\\n                    file_issues[issue.file] = []\\\\n                file_issues[issue.file].append(issue)\\\\n\\\\n        return file_issues\\\\n\\\\n    @staticmethod\\\\n    def get_most_critical_issues(\\\\n        review: ReviewResponse, limit: int = 3\\\\n    ) -> list[ReviewIssue]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            limit: ë°˜í™˜í•  ì´ìŠˆ ìˆ˜\\\\n\\\\n        Returns:\\\\n            list[ReviewIssue]: ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\\\n        severity_order = {\\\\\\\"error\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 1, \\\\\\\"info\\\\\\\": 2}\\\\n        sorted_issues = sorted(\\\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\\\n        )\\\\n\\\\n        return sorted_issues[:limit]\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n        self.analyzer = ReviewAnalyzer()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html, json)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    def get_review_summary(self, review: ReviewResponse) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        severity_counts = self.analyzer.get_severity_counts(review)\\\\n        type_counts = self.analyzer.get_type_counts(review)\\\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\\\n\\\\n        return {\\\\n            \\\\\\\"summary\\\\\\\": review.summary,\\\\n            \\\\\\\"score\\\\\\\": review.score,\\\\n            \\\\\\\"total_issues\\\\\\\": len(review.issues),\\\\n            \\\\\\\"severity_counts\\\\\\\": severity_counts,\\\\n            \\\\\\\"type_counts\\\\\\\": type_counts,\\\\n            \\\\\\\"most_critical_issues\\\\\\\": [\\\\n                {\\\\n                    \\\\\\\"type\\\\\\\": issue.type,\\\\n                    \\\\\\\"severity\\\\\\\": issue.severity,\\\\n                    \\\\\\\"description\\\\\\\": issue.description,\\\\n                }\\\\n                for issue in most_critical\\\\n            ],\\\\n            \\\\\\\"recommendations\\\\\\\": review.recommendations,\\\\n        }\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n```\\\", \\\"line_number\\\": 165}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 10, \"file\": \"reviewer/src/review_converter.py\", \"description\": \"ìƒˆë¡œ ì¶”ê°€ëœ `ReviewConverter` í´ë˜ìŠ¤ëŠ” `ReviewFormatter` í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•˜ê³  `convert` ë©”ì„œë“œë§Œ í˜¸ì¶œí•˜ëŠ” ë‹¨ìˆœ ë˜í¼ ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ëŠ” ë¶ˆí•„ìš”í•œ ì¶”ìƒí™” ê³„ì¸µì„ ì¶”ê°€í•˜ë©°, `cli.py`ì—ì„œ `ReviewFormatter`ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê±°ë‚˜ ë‘ í´ë˜ìŠ¤ë¥¼ í†µí•©í•˜ëŠ” ê²ƒì´ ì½”ë“œ êµ¬ì¡°ë¥¼ ë” ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`ReviewConverter` í´ë˜ìŠ¤ë¥¼ ì œê±°í•˜ê³  `cli.py`ì—ì„œ `ReviewFormatter`ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, `ReviewConverter`ì— `ReviewFormatter` ì´ìƒì˜ ì˜ë¯¸ ìˆëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ì—­í• ì„ ëª…í™•íˆ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"class ReviewConverter:\\n    \\\"\\\"\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\"\\\"\\\"\\n\\n    def __init__(self) -> None:\\n        self.formatter = ReviewFormatter()\\n\\n    def convert(self, review: ReviewResponse, output_format: str = \\\"markdown\\\") -> str:\\n        \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\n\\n        Returns:\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\n        \\\"\\\"\\\"\\n        if output_format == \\\"markdown\\\":\\n            return self.formatter.to_markdown(review)\\n        elif output_format == \\\"html\\\":\\n            return self.formatter.to_html(review)\\n        else:\\n            raise ValueError(f\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\")\", \"improved_code\": \"# ReviewConverter í´ë˜ìŠ¤ë¥¼ ì œê±°í•˜ê³  ReviewFormatterë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê±°ë‚˜ í†µí•©í•©ë‹ˆë‹¤.\"}, {\"type\": \"ê¸°ëŠ¥ ë³€ê²½\", \"line_number\": 165, \"file\": \"reviewer/src/review_formatter.py\", \"description\": \"ì´ì „ `ReviewPostProcessor`ì— í¬í•¨ë˜ì–´ ìˆë˜ `ReviewAnalyzer` í´ë˜ìŠ¤ì™€ ê·¸ ê¸°ëŠ¥(ì‹¬ê°ë„/ìœ í˜•ë³„ ì´ìŠˆ ì§‘ê³„, ì¤‘ìš” ì´ìŠˆ ì¶”ì¶œ ë“±)ì´ ì½”ë“œì—ì„œ ì™„ì „íˆ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë¶„ì„ ê¸°ëŠ¥ì´ ë” ì´ìƒ í•„ìš” ì—†ëŠ” ê²ƒì¸ì§€, ì•„ë‹ˆë©´ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ë™ëœ ê²ƒì¸ì§€ ëª…í™•í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§Œì•½ ì´ ê¸°ëŠ¥ì´ ì‚¬ìš©ìì—ê²Œ ìœ ìš©í–ˆë‹¤ë©´, ì œê±°ëŠ” ê¸°ëŠ¥ í‡´ë³´ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`ReviewAnalyzer` ê¸°ëŠ¥ ì œê±°ì˜ í•„ìš”ì„±ì„ ê²€í† í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ í•´ë‹¹ ê¸°ëŠ¥ì„ ë³µì›í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì ì ˆí•œ ìœ„ì¹˜ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤. ê¸°ëŠ¥ ì œê±°ê°€ ì˜ë„ëœ ê²ƒì´ë¼ë©´, ë³€ê²½ ì‚¬í•­ì„ ëª…í™•íˆ ë¬¸ì„œí™”í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"class ReviewAnalyzer:\\n    \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\"\\\"\\\"\\n\\n    @staticmethod\\n    def get_severity_counts(review: ReviewResponse) -> dict[str, int]:\\n        \\\"\\\"\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n        counts = {\\\"info\\\": 0, \\\"warning\\\": 0, \\\"error\\\": 0}\\n\\n        for issue in review.issues:\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\n\\n        return counts\\n\\n    @staticmethod\\n    def get_type_counts(review: ReviewResponse) -> dict[str, int]:\\n        \\\"\\\"\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n        counts = {}\\n\\n        for issue in review.issues:\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\n\\n        return counts\\n\\n    @staticmethod\\n    def get_file_issues(review: ReviewResponse) -> dict[str, list[ReviewIssue]]:\\n        \\\"\\\"\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n        file_issues = {}\\n\\n        for issue in review.issues:\\n            if issue.file:\\n                if issue.file not in file_issues:\\n                    file_issues[issue.file] = []\\n                file_issues[issue.file].append(issue)\\n\\n        return file_issues\\n\\n    @staticmethod\\n    def get_most_critical_issues(\\n        review: ReviewResponse, limit: int = 3\\n    ) -> list[ReviewIssue]:\\n        \\\"\\\"\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\n        severity_order = {\\\"error\\\": 0, \\\"warning\\\": 1, \\\"info\\\": 2}\\n        sorted_issues = sorted(\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\n        )\\n\\n        return sorted_issues[:limit]\\n\\n\\nclass ReviewPostProcessor:\\n    \\\"\\\"\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\"\\\"\\\"\\n\\n    def __init__(self) -> None:\\n        self.formatter = ReviewFormatter()\\n        self.analyzer = ReviewAnalyzer()\\n\\n    def process_review(\\n        self, review: ReviewResponse, output_format: str = \\\"markdown\\\"\\n    ) -> str:\\n        \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html, json)\\n\\n        Returns:\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\n        \\\"\\\"\\\"\\n        if output_format == \\\"markdown\\\":\\n            return self.formatter.to_markdown(review)\\n        elif output_format == \\\"html\\\":\\n            return self.formatter.to_html(review)\\n        else:\\n            raise ValueError(f\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\")\\n\\n    def get_review_summary(self, review: ReviewResponse) -> dict[str, Any]:\\n        \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n\\n        Returns:\\n            dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\n        \\\"\\\"\\\"\\n        severity_counts = self.analyzer.get_severity_counts(review)\\n        type_counts = self.analyzer.get_type_counts(review)\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\n\\n        return {\\n            \\\"summary\\\": review.summary,\\n            \\\"score\\\": review.score,\\n            \\\"total_issues\\\": len(review.issues),\\n            \\\"severity_counts\\\": severity_counts,\\n            \\\"type_counts\\\": type_counts,\\n            \\\"most_critical_issues\\\": [\\n                {\\n                    \\\"type\\\": issue.type,\\n                    \\\"severity\\\": issue.severity,\\n                    \\\"description\\\": issue.description,\\n                }\\n                for issue in most_critical\\n            ],\\n            \\\"recommendations\\\": review.recommendations,\\n        }\", \"improved_code\": \"# ReviewAnalyzer í´ë˜ìŠ¤ ë° ê´€ë ¨ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\\n# í•„ìš”ì— ë”°ë¼ ë³µì›í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì´ì „í•´ì•¼ í•©ë‹ˆë‹¤.\"}, {\"type\": \"ê¸°ëŠ¥ ë³€ê²½\", \"line_number\": 165, \"file\": \"reviewer/src/review_formatter.py\", \"description\": \"`ReviewFormatter` í´ë˜ìŠ¤ì—ì„œ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” `to_json` ì •ì  ë©”ì„œë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. CLIì˜ `--output-format` ì˜µì…˜ì—ëŠ” JSONì´ í¬í•¨ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ CLI ì‚¬ìš©ì„± ì¸¡ë©´ì—ì„œëŠ” ë¬¸ì œê°€ ì—†ì§€ë§Œ, ë‚´ë¶€ì ìœ¼ë¡œ JSON ì¶œë ¥ì´ í•„ìš”í•œ ë‹¤ë¥¸ ë¶€ë¶„ì´ ìˆì—ˆë‹¤ë©´ í•´ë‹¹ ê¸°ëŠ¥ì´ ëˆ„ë½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"JSON ì¶œë ¥ í˜•ì‹ì´ ë” ì´ìƒ í•„ìš” ì—†ëŠ”ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ `ReviewConverter` ë˜ëŠ” ë‹¤ë¥¸ ì ì ˆí•œ ìœ„ì¹˜ì— JSON ë³€í™˜ ë¡œì§ì„ ë‹¤ì‹œ ì¶”ê°€í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"@staticmethod\\n    def to_json(review: ReviewResponse) -> str:\\n        \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n\\n        Returns:\\n            str: JSON í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\n        \\\"\\\"\\\"\\n        return json.dumps(review.model_dump(), indent=2, ensure_ascii=False)\", \"improved_code\": \"# JSON ì¶œë ¥ì´ í•„ìš”í•˜ë‹¤ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ ë³µì›í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê³³ì— êµ¬í˜„í•©ë‹ˆë‹¤.\"}], \"summary\": \"`ReviewPostProcessor` í´ë˜ìŠ¤ê°€ `ReviewConverter`ë¡œ ì´ë¦„ì´ ë³€ê²½ë˜ê³ , ë¦¬ë·° ê²°ê³¼ ë¶„ì„ì„ ë‹´ë‹¹í•˜ë˜ `ReviewAnalyzer` í´ë˜ìŠ¤ì™€ JSON ì¶œë ¥ ê¸°ëŠ¥(`to_json` ë©”ì„œë“œ)ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. `cli.py` íŒŒì¼ì€ ë³€ê²½ëœ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ë©”ì„œë“œ í˜¸ì¶œì— ë§ì¶° ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ë¦¬ë·° í›„ì²˜ë¦¬ ë¡œì§ì´ ë‹¨ìˆœí™”ë˜ì—ˆìœ¼ë‚˜, ë¶„ì„ ê¸°ëŠ¥ì˜ ì œê±°ëŠ” ì˜ë„ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 6.5, \"recommendations\": [\"ë¦¬ë·° ê²°ê³¼ ë¶„ì„ ê¸°ëŠ¥(`ReviewAnalyzer`) ì œê±°ì˜ ì˜ë„ë¥¼ ëª…í™•íˆ í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ í•´ë‹¹ ê¸°ëŠ¥ì„ ë³µì›í•˜ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë“ˆë¡œ ì´ì „í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.\", \"`ReviewConverter` í´ë˜ìŠ¤ê°€ `ReviewFormatter`ë¥¼ ë‹¨ìˆœíˆ ê°ì‹¸ëŠ” êµ¬ì¡°ì˜ í•„ìš”ì„±ì„ ì¬ê²€í† í•˜ê³ , ì½”ë“œ êµ¬ì¡°ë¥¼ ë” ê°„ê²°í•˜ê²Œ ê°œì„ í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.\", \"JSON ì¶œë ¥ í˜•ì‹ ì œê±°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”êµ¬ì‚¬í•­ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ í•´ë‹¹ ê¸°ëŠ¥ì„ ë³µì›í•˜ì‹­ì‹œì˜¤.\", \"ì£¼ìš” ê¸°ëŠ¥(ë¶„ì„ ê¸°ëŠ¥)ì´ ì œê±°ëœ ê²½ìš°, ë³€ê²½ ì‚¬í•­ì„ ë¬¸ì„œí™”í•˜ì—¬ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì´í•´í•  ìˆ˜ ìˆë„ë¡ í•˜ì‹­ì‹œì˜¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewConverter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewConverter()\\\\n    output_content = processor.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewConverter\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewConverter()\\\\n    output_content = processor.convert(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n```\\\", \\\"line_number\\\": 584}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_processor.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewConverter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewConverter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def convert(self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\") -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n```\\\", \\\"line_number\\\": 2}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `ReviewPostProcessor` í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ `ReviewConverter`ë¡œ ë³€ê²½í•˜ê³ , í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì£¼ìš” ë©”ì„œë“œì¸ `process_review`ë¥¼ `convert`ë¡œ ë³€ê²½í•˜ëŠ” ë¦¬íŒ©í† ë§ì…ë‹ˆë‹¤. ì´ëŠ” í´ë˜ìŠ¤ì˜ ì—­í• (ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ë¥¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜)ì„ ë” ëª…í™•í•˜ê²Œ ë°˜ì˜í•˜ê¸° ìœ„í•œ ë„¤ì´ë° ê°œì„ ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ê´€ë ¨ íŒŒì¼(`cli.py`ì™€ `review_processor.py`)ì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ì™€ ë©”ì„œë“œì— ëŒ€í•œ ëª¨ë“  ì°¸ì¡°ê°€ ì˜¬ë°”ë¥´ê²Œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì½”ë“œì˜ ëª©ì ì„ ë” ì˜ ë‚˜íƒ€ë‚´ëŠ” ì´ë¦„ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ê°œì„ ì„ ê³„ì† ì§„í–‰í•˜ì„¸ìš”.\", \"ë¦¬íŒ©í† ë§ í›„ì—ëŠ” ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ì—¬ì „íˆ í†µê³¼í•˜ëŠ”ì§€ í™•ì¸í•˜ì—¬ ë³€ê²½ì‚¬í•­ì´ ì˜ˆìƒëŒ€ë¡œ ì‘ë™í•¨ì„ ë³´ì¦í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_processor.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport html\\\\nimport json\\\\nfrom typing import Any\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n`â€‹``\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_json(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: JSON í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return json.dumps(review.model_dump(), indent=2, ensure_ascii=False)\\\\n\\\\n\\\\nclass ReviewAnalyzer:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def get_severity_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {\\\\\\\"info\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 0, \\\\\\\"error\\\\\\\": 0}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_type_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_file_issues(review: ReviewResponse) -> dict[str, list[ReviewIssue]]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, list[ReviewIssue]]: íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        file_issues = {}\\\\n\\\\n        for issue in review.issues:\\\\n            if issue.file:\\\\n                if issue.file not in file_issues:\\\\n                    file_issues[issue.file] = []\\\\n                file_issues[issue.file].append(issue)\\\\n\\\\n        return file_issues\\\\n\\\\n    @staticmethod\\\\n    def get_most_critical_issues(\\\\n        review: ReviewResponse, limit: int = 3\\\\n    ) -> list[ReviewIssue]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            limit: ë°˜í™˜í•  ì´ìŠˆ ìˆ˜\\\\n\\\\n        Returns:\\\\n            list[ReviewIssue]: ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\\\n        severity_order = {\\\\\\\"error\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 1, \\\\\\\"info\\\\\\\": 2}\\\\n        sorted_issues = sorted(\\\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\\\n        )\\\\n\\\\n        return sorted_issues[:limit]\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n        self.analyzer = ReviewAnalyzer()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html, json)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    def get_review_summary(self, review: ReviewResponse) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        severity_counts = self.analyzer.get_severity_counts(review)\\\\n        type_counts = self.analyzer.get_type_counts(review)\\\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\\\n\\\\n        return {\\\\n            \\\\\\\"summary\\\\\\\": review.summary,\\\\n            \\\\\\\"score\\\\\\\": review.score,\\\\n            \\\\\\\"total_issues\\\\\\\": len(review.issues),\\\\n            \\\\\\\"severity_counts\\\\\\\": severity_counts,\\\\n            \\\\\\\"type_counts\\\\\\\": type_counts,\\\\n            \\\\\\\"most_critical_issues\\\\\\\": [\\\\n                {\\\\n                    \\\\\\\"type\\\\\\\": issue.type,\\\\n                    \\\\\\\"severity\\\\\\\": issue.severity,\\\\n                    \\\\\\\"description\\\\\\\": issue.description,\\\\n                }\\\\n                for issue in most_critical\\\\n            ],\\\\n            \\\\\\\"recommendations\\\\\\\": review.recommendations,\\\\n        }\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ReviewPostProcessor: ë¦¬ë·° ê²°ê³¼ë¥¼ í›„ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì„ í¬í•¨í•œ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.review_formatter import ReviewFormatter\\\\nfrom reviewer.src.utils.token.models import ReviewResponse\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 1}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 11, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"ReviewAnalyzer í´ë˜ìŠ¤ì™€ get_review_summary ë©”ì„œë“œê°€ ReviewPostProcessorì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” ê¸°ëŠ¥(ì˜ˆ: ì‹¬ê°ë„/ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ ê³„ì‚°, ì¤‘ìš” ì´ìŠˆ ì°¾ê¸°)ì´ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ë§Œì•½ ì´ ë¶„ì„ ê¸°ëŠ¥ì´ ì—¬ì „íˆ í•„ìš”í•˜ë‹¤ë©´, ë‹¤ë¥¸ ê³³ì—ì„œ ì¬êµ¬í˜„í•˜ê±°ë‚˜ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ë³€ê²½ì€ ReviewPostProcessorì˜ ëª©ì ê³¼ ê¸°ëŠ¥ì„ í¬ê²Œ ë³€í™”ì‹œí‚µë‹ˆë‹¤.\", \"suggestion\": \"ë¶„ì„ ê¸°ëŠ¥ì´ ì—¬ì „íˆ í•„ìš”í•˜ë‹¤ë©´ ReviewAnalyzerì™€ get_review_summary ë©”ì„œë“œë¥¼ ìœ ì§€í•˜ê±°ë‚˜, ë¶„ì„ ë¡œì§ì„ ReviewResponseë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆ/í´ë˜ìŠ¤ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”. ê¸°ëŠ¥ì´ ì˜ë„ì ìœ¼ë¡œ ì œê±°ëœ ê²ƒì´ë¼ë©´, ì»¤ë°‹ ë©”ì‹œì§€ì™€ ë¬¸ì„œë¥¼ í†µí•´ ì´ ë³€ê²½ ì‚¬í•­ì„ ëª…í™•íˆ ì•Œë¦¬ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"class ReviewPostProcessor:\\n    \\\"\\\"\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\"\\\"\\\"\\n\\n    def __init__(self) -> None:\\n        self.formatter = ReviewFormatter()\\n        self.analyzer = ReviewAnalyzer()\", \"improved_code\": \"class ReviewPostProcessor:\\n    \\\"\\\"\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\"\\\"\\\"\\n\\n    def __init__(self) -> None:\\n        self.formatter = ReviewFormatter()\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 25, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"process_review ë©”ì„œë“œì—ì„œ 'json' ì¶œë ¥ í˜•ì‹ ì§€ì›ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œê°€ JSON ì¶œë ¥ì„ ê¸°ëŒ€í•˜ê³  ìˆì—ˆë‹¤ë©´ í˜¸í™˜ì„±ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"'json' ì¶œë ¥ì´ ì—¬ì „íˆ í•„ìš”í•œ ê¸°ëŠ¥ì´ë¼ë©´ process_review ë©”ì„œë“œì— 'json' ì¼€ì´ìŠ¤ë¥¼ ë³µì›í•˜ê³  docstringì„ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”. ì˜ë„ì ìœ¼ë¡œ ì œê±°ëœ ê²ƒì´ë¼ë©´, ì´ ë³€ê²½ ì‚¬í•­ì„ ë¬¸ì„œí™”í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"    def process_review(\\n        self, review: ReviewResponse, output_format: str = \\\"markdown\\\"\\n    ) -> str:\\n        \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html, json)\\n\\n        Returns:\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\n        \\\"\\\"\\\"\\n        if output_format == \\\"markdown\\\":\\n            return self.formatter.to_markdown(review)\\n        elif output_format == \\\"html\\\":\\n            return self.formatter.to_html(review)\\n        elif output_format == \\\"json\\\":\\n            return self.formatter.to_json(review)\\n        else:\\n            raise ValueError(f\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\")\", \"improved_code\": \"    def process_review(\\n        self, review: ReviewResponse, output_format: str = \\\"markdown\\\"\\n    ) -> str:\\n        \\\"\\\"\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html)\\n\\n        Returns:\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\n        \\\"\\\"\\\"\\n        if output_format == \\\"markdown\\\":\\n            return self.formatter.to_markdown(review)\\n        elif output_format == \\\"html\\\":\\n            return self.formatter.to_html(review)\\n        else:\\n            raise ValueError(f\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\")\"}], \"summary\": \"ReviewPostProcessor í´ë˜ìŠ¤ì—ì„œ ReviewAnalyzer ì˜ì¡´ì„± ë° ê´€ë ¨ ë¶„ì„ ê¸°ëŠ¥(get_review_summary ë©”ì„œë“œ)ê³¼ JSON ì¶œë ¥ í˜•ì‹ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ë‹¨ìˆœí™”í•˜ì§€ë§Œ, ê¸°ì¡´ì— í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë˜ ì½”ë“œì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ì£¼ìš” ë³€ê²½ ì‚¬í•­ì…ë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"ì œê±°ëœ ë¶„ì„ ê¸°ëŠ¥ê³¼ JSON ì¶œë ¥ í˜•ì‹ì´ ë” ì´ìƒ í•„ìš” ì—†ëŠ”ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ ë‹¤ë¥¸ ê³³ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"ì´ ë³€ê²½ ì‚¬í•­ì´ í•˜ìœ„ í˜¸í™˜ì„±ì„ ê¹¨ëœ¨ë¦´ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ê´€ë ¨ ë¬¸ì„œì™€ ì»¤ë°‹ ë©”ì‹œì§€ì— ëª…í™•íˆ ê¸°ë¡í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_processor.py\\\", \\\"file_content\\\": \\\"import html\\\\nimport json\\\\nfrom typing import Any\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_json(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: JSON í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return json.dumps(review.model_dump(), indent=2, ensure_ascii=False)\\\\n\\\\n\\\\nclass ReviewAnalyzer:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def get_severity_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {\\\\\\\"info\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 0, \\\\\\\"error\\\\\\\": 0}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_type_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_file_issues(review: ReviewResponse) -> dict[str, list[ReviewIssue]]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, list[ReviewIssue]]: íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        file_issues = {}\\\\n\\\\n        for issue in review.issues:\\\\n            if issue.file:\\\\n                if issue.file not in file_issues:\\\\n                    file_issues[issue.file] = []\\\\n                file_issues[issue.file].append(issue)\\\\n\\\\n        return file_issues\\\\n\\\\n    @staticmethod\\\\n    def get_most_critical_issues(\\\\n        review: ReviewResponse, limit: int = 3\\\\n    ) -> list[ReviewIssue]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            limit: ë°˜í™˜í•  ì´ìŠˆ ìˆ˜\\\\n\\\\n        Returns:\\\\n            list[ReviewIssue]: ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\\\n        severity_order = {\\\\\\\"error\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 1, \\\\\\\"info\\\\\\\": 2}\\\\n        sorted_issues = sorted(\\\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\\\n        )\\\\n\\\\n        return sorted_issues[:limit]\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n        self.analyzer = ReviewAnalyzer()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html, json)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    def get_review_summary(self, review: ReviewResponse) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        severity_counts = self.analyzer.get_severity_counts(review)\\\\n        type_counts = self.analyzer.get_type_counts(review)\\\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\\\n\\\\n        return {\\\\n            \\\\\\\"summary\\\\\\\": review.summary,\\\\n            \\\\\\\"score\\\\\\\": review.score,\\\\n            \\\\\\\"total_issues\\\\\\\": len(review.issues),\\\\n            \\\\\\\"severity_counts\\\\\\\": severity_counts,\\\\n            \\\\\\\"type_counts\\\\\\\": type_counts,\\\\n            \\\\\\\"most_critical_issues\\\\\\\": [\\\\n                {\\\\n                    \\\\\\\"type\\\\\\\": issue.type,\\\\n                    \\\\\\\"severity\\\\\\\": issue.severity,\\\\n                    \\\\\\\"description\\\\\\\": issue.description,\\\\n                }\\\\n                for issue in most_critical\\\\n            ],\\\\n            \\\\\\\"recommendations\\\\\\\": review.recommendations,\\\\n        }\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport html\\\\nimport json\\\\nfrom typing import Any, Dict, List\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport html\\\\nimport json\\\\nfrom typing import Any\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\nclass ReviewAnalyzer:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def get_severity_counts(review: ReviewResponse) -> Dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, int]: ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {\\\\\\\"info\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 0, \\\\\\\"error\\\\\\\": 0}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_type_counts(review: ReviewResponse) -> Dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, int]: ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_file_issues(review: ReviewResponse) -> Dict[str, List[ReviewIssue]]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, List[ReviewIssue]]: íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        file_issues = {}\\\\n\\\\n        for issue in review.issues:\\\\n            if issue.file:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\nclass ReviewAnalyzer:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def get_severity_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {\\\\\\\"info\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 0, \\\\\\\"error\\\\\\\": 0}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_type_counts(review: ReviewResponse) -> dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, int]: ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_file_issues(review: ReviewResponse) -> dict[str, list[ReviewIssue]]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, list[ReviewIssue]]: íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        file_issues = {}\\\\n\\\\n        for issue in review.issues:\\\\n            if issue.file:\\\\n```\\\", \\\"line_number\\\": 183}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        return file_issues\\\\n\\\\n    @staticmethod\\\\n    def get_most_critical_issues(\\\\n        review: ReviewResponse, limit: int = 3\\\\n    ) -> List[ReviewIssue]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            limit: ë°˜í™˜í•  ì´ìŠˆ ìˆ˜\\\\n\\\\n        Returns:\\\\n            List[ReviewIssue]: ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\\\n        severity_order = {\\\\\\\"error\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 1, \\\\\\\"info\\\\\\\": 2}\\\\n        sorted_issues = sorted(\\\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        return file_issues\\\\n\\\\n    @staticmethod\\\\n    def get_most_critical_issues(\\\\n        review: ReviewResponse, limit: int = 3\\\\n    ) -> list[ReviewIssue]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            limit: ë°˜í™˜í•  ì´ìŠˆ ìˆ˜\\\\n\\\\n        Returns:\\\\n            list[ReviewIssue]: ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\\\n        severity_order = {\\\\\\\"error\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 1, \\\\\\\"info\\\\\\\": 2}\\\\n        sorted_issues = sorted(\\\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\\\n```\\\", \\\"line_number\\\": 239}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self):\\\\n        self.formatter = ReviewFormatter()\\\\n        self.analyzer = ReviewAnalyzer()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self) -> None:\\\\n        self.formatter = ReviewFormatter()\\\\n        self.analyzer = ReviewAnalyzer()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 261}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    def get_review_summary(self, review: ReviewResponse) -> Dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        severity_counts = self.analyzer.get_severity_counts(review)\\\\n        type_counts = self.analyzer.get_type_counts(review)\\\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    def get_review_summary(self, review: ReviewResponse) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        severity_counts = self.analyzer.get_severity_counts(review)\\\\n        type_counts = self.analyzer.get_type_counts(review)\\\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\\\n\\\\n```\\\", \\\"line_number\\\": 284}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 187, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"Python 3.9+ì—ì„œëŠ” `typing.Dict` ëŒ€ì‹  ë‚´ì¥ íƒ€ì…ì¸ `dict`ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… íŒíŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤ (PEP 585).\", \"suggestion\": \"ë‚´ì¥ `dict` íƒ€ì…ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    def get_severity_counts(review: ReviewResponse) -> Dict[str, int]:\", \"improved_code\": \"    def get_severity_counts(review: ReviewResponse) -> dict[str, int]:\"}, {\"type\": \"style\", \"line_number\": 203, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"Python 3.9+ì—ì„œëŠ” `typing.Dict` ëŒ€ì‹  ë‚´ì¥ íƒ€ì…ì¸ `dict`ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… íŒíŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤ (PEP 585).\", \"suggestion\": \"ë‚´ì¥ `dict` íƒ€ì…ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    def get_type_counts(review: ReviewResponse) -> Dict[str, int]:\", \"improved_code\": \"    def get_type_counts(review: ReviewResponse) -> dict[str, int]:\"}, {\"type\": \"style\", \"line_number\": 219, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"Python 3.9+ì—ì„œëŠ” `typing.Dict` ë° `typing.List` ëŒ€ì‹  ë‚´ì¥ íƒ€ì…ì¸ `dict`ì™€ `list`ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… íŒíŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤ (PEP 585).\", \"suggestion\": \"ë‚´ì¥ `dict` ë° `list` íƒ€ì…ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    def get_file_issues(review: ReviewResponse) -> Dict[str, List[ReviewIssue]]:\", \"improved_code\": \"    def get_file_issues(review: ReviewResponse) -> dict[str, list[ReviewIssue]]:\"}, {\"type\": \"style\", \"line_number\": 242, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"Python 3.9+ì—ì„œëŠ” `typing.List` ëŒ€ì‹  ë‚´ì¥ íƒ€ì…ì¸ `list`ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… íŒíŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤ (PEP 585).\", \"suggestion\": \"ë‚´ì¥ `list` íƒ€ì…ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    ) -> List[ReviewIssue]:\", \"improved_code\": \"    ) -> list[ReviewIssue]:\"}, {\"type\": \"style\", \"line_number\": 264, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"ìƒì„±ì(`__init__`)ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ê°’ì„ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜ íƒ€ì… íŒíŠ¸ `-> None`ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ì— `-> None`ì„ ì¶”ê°€í•˜ì—¬ ë°˜í™˜ íƒ€ì…ì´ ì—†ìŒì„ ëª…ì‹œí•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    def __init__(self):\", \"improved_code\": \"    def __init__(self) -> None:\"}, {\"type\": \"style\", \"line_number\": 287, \"file\": \"reviewer/src/review_processor.py\", \"description\": \"Python 3.9+ì—ì„œëŠ” `typing.Dict` ëŒ€ì‹  ë‚´ì¥ íƒ€ì…ì¸ `dict`ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì… íŒíŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤ (PEP 585).\", \"suggestion\": \"ë‚´ì¥ `dict` íƒ€ì…ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"    def get_review_summary(self, review: ReviewResponse) -> Dict[str, Any]:\", \"improved_code\": \"    def get_review_summary(self, review: ReviewResponse) -> dict[str, Any]:\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œì˜ íƒ€ì… íŒíŠ¸ë¥¼ Python 3.9+ì—ì„œ ê¶Œì¥ë˜ëŠ” PEP 585 ìŠ¤íƒ€ì¼(ë‚´ì¥ íƒ€ì… ì‚¬ìš©)ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. `typing.Dict`ì™€ `typing.List` ëŒ€ì‹  `dict`ì™€ `list`ë¥¼ ì‚¬ìš©í•˜ê³ , `__init__` ë©”ì„œë“œì— `-> None` ë°˜í™˜ íƒ€ì… íŒíŠ¸ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ê°€ë…ì„±ê³¼ í˜„ëŒ€ì ì¸ Python í‘œì¤€ ì¤€ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"PEP 585 ìŠ¤íƒ€ì¼ì˜ íƒ€ì… íŒíŠ¸ë¥¼ í”„ë¡œì íŠ¸ ì „ë°˜ì— ê±¸ì³ ì¼ê´€ë˜ê²Œ ì ìš©í•˜ì„¸ìš”.\", \"ëª¨ë“  ë©”ì„œë“œì— ëª…í™•í•œ ë°˜í™˜ íƒ€ì… íŒíŠ¸ë¥¼ ì¶”ê°€í•˜ì—¬ ì½”ë“œì˜ ëª…í™•ì„±ì„ ë†’ì´ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.git_utils import GitDiffUtility\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n```\\\", \\\"line_number\\\": 20}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        git_diff = GitDiffUtility.from_args(args)\\\\n        return git_diff.get_diff()\\\\n    except ValueError as e:\\\\n        logger.error(str(e))\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"line_number\\\": 185}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_ignore_file, load_file_content\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_ignore_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_ignore_file, load_file_content\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_ignore_file, load_file_content\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_ignore_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_ignore_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 17}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\nfrom enum import Enum\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass GitDiffMode(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"git diff ë™ì‘ ëª¨ë“œ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    STAGED = \\\\\\\"staged\\\\\\\"\\\\n    TARGET_COMMIT = \\\\\\\"target_commit\\\\\\\"\\\\n    TARGET_BRANCH = \\\\\\\"target_branch\\\\\\\"\\\\n    UNSTAGED = \\\\\\\"unstaged\\\\\\\"\\\\n\\\\n\\\\nclass GitDiffUtility:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ê´€ë ¨ ì‘ì—…ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(\\\\n        self,\\\\n        repo_path: str,\\\\n        mode: GitDiffMode = GitDiffMode.UNSTAGED,\\\\n        target: str | None = None,\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"GitDiffUtility ì´ˆê¸°í™”\\\\n\\\\n        Args:\\\\n            repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n            mode (GitDiffMode): diff ë™ì‘ ëª¨ë“œ\\\\n            target (str | None): modeì— ë”°ë¥¸ ëŒ€ìƒ (commit hash ë˜ëŠ” branch ì´ë¦„)\\\\n\\\\n        Raises:\\\\n            ValueError: ì €ì¥ì†Œ ê²½ë¡œê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.repo_path = repo_path\\\\n        self.mode = mode\\\\n        self.target = target\\\\n\\\\n        # ê²½ë¡œ ìœ íš¨ì„± ê²€ì¦\\\\n        path = Path(repo_path)\\\\n        if not path.exists() or not (path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n\\\\n    @classmethod\\\\n    def from_args(cls, args) -> \\\\\\\"GitDiffUtility\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ì—ì„œ GitDiffUtility ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            args: ëª…ë ¹ì¤„ ì¸ìˆ˜ ê°ì²´ (repo_path, staged, target_commit, target_branch ì†ì„± í¬í•¨)\\\\n\\\\n        Returns:\\\\n            GitDiffUtility: ì´ˆê¸°í™”ëœ ìœ í‹¸ë¦¬í‹° ì¸ìŠ¤í„´ìŠ¤\\\\n\\\\n        Raises:\\\\n            ValueError: ì €ì¥ì†Œ ê²½ë¡œê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        mode = GitDiffMode.UNSTAGED\\\\n        target = None\\\\n\\\\n        if getattr(args, \\\\\\\"staged\\\\\\\", False):\\\\n            mode = GitDiffMode.STAGED\\\\n        elif getattr(args, \\\\\\\"target_commit\\\\\\\", None):\\\\n            mode = GitDiffMode.TARGET_COMMIT\\\\n            target = args.target_commit\\\\n        elif getattr(args, \\\\\\\"target_branch\\\\\\\", None):\\\\n            mode = GitDiffMode.TARGET_BRANCH\\\\n            target = args.target_branch\\\\n\\\\n        return cls(repo_path=str(Path(args.repo_path)), mode=mode, target=target)\\\\n\\\\n    def get_diff(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Git diff ëª…ë ¹ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", self.repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n        if self.mode == GitDiffMode.STAGED:\\\\n            cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n        elif self.mode == GitDiffMode.TARGET_COMMIT:\\\\n            if not self.target or not self.target.strip():\\\\n                logger.error(\\\\\\\"ì˜¤ë¥˜: commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return \\\\\\\"\\\\\\\"\\\\n            cmd.append(f\\\\\\\"{self.target}..HEAD\\\\\\\")\\\\n        elif self.mode == GitDiffMode.TARGET_BRANCH:\\\\n            if not self.target or not self.target.strip():\\\\n                logger.error(\\\\\\\"ì˜¤ë¥˜: branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return \\\\\\\"\\\\\\\"\\\\n            cmd.append(f\\\\\\\"{self.target}..HEAD\\\\\\\")\\\\n\\\\n        try:\\\\n            process_result = subprocess.run(\\\\n                cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n            )\\\\n            return process_result.stdout\\\\n        except subprocess.CalledProcessError as e:\\\\n            logger.error(\\\\n                f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n            return \\\\\\\"\\\\\\\"\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n            return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport subprocess\\\\nfrom enum import Enum\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass GitDiffMode(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"git diff ë™ì‘ ëª¨ë“œ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    STAGED = \\\\\\\"staged\\\\\\\"\\\\n    TARGET_COMMIT = \\\\\\\"target_commit\\\\\\\"\\\\n    TARGET_BRANCH = \\\\\\\"target_branch\\\\\\\"\\\\n    UNSTAGED = \\\\\\\"unstaged\\\\\\\"\\\\n\\\\n\\\\nclass GitDiffUtility:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ê´€ë ¨ ì‘ì—…ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(\\\\n        self,\\\\n        repo_path: str,\\\\n        mode: GitDiffMode = GitDiffMode.UNSTAGED,\\\\n        target: str | None = None,\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"GitDiffUtility ì´ˆê¸°í™”\\\\n\\\\n        Args:\\\\n            repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n            mode (GitDiffMode): diff ë™ì‘ ëª¨ë“œ\\\\n            target (str | None): modeì— ë”°ë¥¸ ëŒ€ìƒ (commit hash ë˜ëŠ” branch ì´ë¦„)\\\\n\\\\n        Raises:\\\\n            ValueError: ì €ì¥ì†Œ ê²½ë¡œê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.repo_path = repo_path\\\\n        self.mode = mode\\\\n        self.target = target\\\\n\\\\n        # ê²½ë¡œ ìœ íš¨ì„± ê²€ì¦\\\\n        path = Path(repo_path)\\\\n        if not path.exists() or not (path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n\\\\n    @classmethod\\\\n    def from_args(cls, args) -> \\\\\\\"GitDiffUtility\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ì—ì„œ GitDiffUtility ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            args: ëª…ë ¹ì¤„ ì¸ìˆ˜ ê°ì²´ (repo_path, staged, target_commit, target_branch ì†ì„± í¬í•¨)\\\\n\\\\n        Returns:\\\\n            GitDiffUtility: ì´ˆê¸°í™”ëœ ìœ í‹¸ë¦¬í‹° ì¸ìŠ¤í„´ìŠ¤\\\\n\\\\n        Raises:\\\\n            ValueError: ì €ì¥ì†Œ ê²½ë¡œê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        mode = GitDiffMode.UNSTAGED\\\\n        target = None\\\\n\\\\n        if getattr(args, \\\\\\\"staged\\\\\\\", False):\\\\n            mode = GitDiffMode.STAGED\\\\n        elif getattr(args, \\\\\\\"target_commit\\\\\\\", None):\\\\n            mode = GitDiffMode.TARGET_COMMIT\\\\n            target = args.target_commit\\\\n        elif getattr(args, \\\\\\\"target_branch\\\\\\\", None):\\\\n            mode = GitDiffMode.TARGET_BRANCH\\\\n            target = args.target_branch\\\\n\\\\n        return cls(repo_path=str(Path(args.repo_path)), mode=mode, target=target)\\\\n\\\\n    def get_diff(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Git diff ëª…ë ¹ì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", self.repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n        if self.mode == GitDiffMode.STAGED:\\\\n            cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n        elif self.mode == GitDiffMode.TARGET_COMMIT:\\\\n            if not self.target or not self.target.strip():\\\\n                logger.error(\\\\\\\"ì˜¤ë¥˜: commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return \\\\\\\"\\\\\\\"\\\\n            cmd.append(f\\\\\\\"{self.target}..HEAD\\\\\\\")\\\\n        elif self.mode == GitDiffMode.TARGET_BRANCH:\\\\n            if not self.target or not self.target.strip():\\\\n                logger.error(\\\\\\\"ì˜¤ë¥˜: branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return \\\\\\\"\\\\\\\"\\\\n            cmd.append(f\\\\\\\"{self.target}..HEAD\\\\\\\")\\\\n\\\\n        try:\\\\n            process_result = subprocess.run(\\\\n                cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n            )\\\\n            return process_result.stdout\\\\n        except subprocess.CalledProcessError as e:\\\\n            logger.error(\\\\n                f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n            return \\\\\\\"\\\\\\\"\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n            return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_git_utils.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"run_git_diff í•¨ìˆ˜ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nimport subprocess\\\\nfrom dataclasses import dataclass\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.git_utils import GitDiffMode, GitDiffUtility\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef git_repo(tmp_path):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„ì‹œ Git ì €ì¥ì†Œë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸° ì»¤ë°‹ì„ ë§Œë“­ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        tmp_path: pytestì˜ ì„ì‹œ ë””ë ‰í„°ë¦¬ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: ìƒì„±ëœ git ì €ì¥ì†Œì˜ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    repo_dir = tmp_path / \\\\\\\"git-repo\\\\\\\"\\\\n    repo_dir.mkdir()\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"init\\\\\\\"], cwd=str(repo_dir), check=True)\\\\n    subprocess.run(\\\\n        [\\\\\\\"git\\\\\\\", \\\\\\\"config\\\\\\\", \\\\\\\"user.email\\\\\\\", \\\\\\\"test@example.com\\\\\\\"], cwd=str(repo_dir)\\\\n    )\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"config\\\\\\\", \\\\\\\"user.name\\\\\\\", \\\\\\\"Test User\\\\\\\"], cwd=str(repo_dir))\\\\n\\\\n    file_path = repo_dir / \\\\\\\"file.txt\\\\\\\"\\\\n    file_path.write_text(\\\\\\\"Initial content\\\\\\\")\\\\n\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\".\\\\\\\"], cwd=str(repo_dir), check=True)\\\\n    subprocess.run(\\\\n        [\\\\\\\"git\\\\\\\", \\\\\\\"commit\\\\\\\", \\\\\\\"-m\\\\\\\", \\\\\\\"Initial commit\\\\\\\"], cwd=str(repo_dir), check=True\\\\n    )\\\\n\\\\n    return str(repo_dir)\\\\n\\\\n\\\\ndef test_git_diff_utility_with_unstaged_changes(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"Modified content\\\\\\\")\\\\n\\\\n    git_diff = GitDiffUtility(git_repo, mode=GitDiffMode.UNSTAGED)\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+Modified content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_git_diff_utility_with_staged_changes(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"Staged content\\\\\\\")\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\"file.txt\\\\\\\"], cwd=git_repo, check=True)\\\\n\\\\n    git_diff = GitDiffUtility(git_repo, mode=GitDiffMode.STAGED)\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+Staged content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_git_diff_utility_with_target_commit(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ì»¤ë°‹ê³¼ì˜ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    result = subprocess.run(\\\\n        [\\\\\\\"git\\\\\\\", \\\\\\\"rev-parse\\\\\\\", \\\\\\\"HEAD\\\\\\\"],\\\\n        cwd=git_repo,\\\\n        capture_output=True,\\\\n        text=True,\\\\n        check=True,\\\\n    )\\\\n    initial_commit = result.stdout.strip()\\\\n\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"New commit content\\\\\\\")\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\"file.txt\\\\\\\"], cwd=git_repo, check=True)\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"commit\\\\\\\", \\\\\\\"-m\\\\\\\", \\\\\\\"Second commit\\\\\\\"], cwd=git_repo, check=True)\\\\n\\\\n    git_diff = GitDiffUtility(\\\\n        git_repo, mode=GitDiffMode.TARGET_COMMIT, target=initial_commit\\\\n    )\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+New commit content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_git_diff_utility_with_empty_target_commit(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ target_commit ì¸ìì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    git_diff = GitDiffUtility(git_repo, mode=GitDiffMode.TARGET_COMMIT, target=\\\\\\\"\\\\\\\")\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert diff == \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef test_git_diff_utility_from_args(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"from_args ë©”ì„œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ìš© Args í´ë˜ìŠ¤ ì •ì˜\\\\n    @dataclass\\\\n    class MockArgs:\\\\n        repo_path: str\\\\n        staged: bool = False\\\\n        target_commit: str | None = None\\\\n        target_branch: str | None = None\\\\n\\\\n    args = MockArgs(repo_path=git_repo, staged=True)\\\\n\\\\n    git_diff = GitDiffUtility.from_args(args)\\\\n    assert git_diff.mode == GitDiffMode.STAGED\\\\n    assert git_diff.repo_path == git_repo\\\\n    assert git_diff.target is None\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"run_git_diff í•¨ìˆ˜ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nimport subprocess\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.git_utils import run_git_diff\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef git_repo(tmp_path):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„ì‹œ Git ì €ì¥ì†Œë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸° ì»¤ë°‹ì„ ë§Œë“­ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"run_git_diff í•¨ìˆ˜ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nimport subprocess\\\\nfrom dataclasses import dataclass\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.git_utils import GitDiffMode, GitDiffUtility\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef git_repo(tmp_path):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„ì‹œ Git ì €ì¥ì†Œë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸° ì»¤ë°‹ì„ ë§Œë“­ë‹ˆë‹¤.\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    )\\\\n\\\\n    return str(repo_dir)\\\\n\\\\n\\\\ndef test_run_git_diff_with_unstaged_changes(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"Modified content\\\\\\\")\\\\n\\\\n    diff = run_git_diff(git_repo)\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+Modified content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_run_git_diff_with_staged_changes(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"Staged content\\\\\\\")\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\"file.txt\\\\\\\"], cwd=git_repo, check=True)\\\\n\\\\n    diff = run_git_diff(git_repo, staged=True)\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+Staged content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_run_git_diff_with_target_commit(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ì»¤ë°‹ê³¼ì˜ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    result = subprocess.run(\\\\n        [\\\\\\\"git\\\\\\\", \\\\\\\"rev-parse\\\\\\\", \\\\\\\"HEAD\\\\\\\"],\\\\n        cwd=git_repo,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    )\\\\n\\\\n    return str(repo_dir)\\\\n\\\\n\\\\ndef test_git_diff_utility_with_unstaged_changes(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"Modified content\\\\\\\")\\\\n\\\\n    git_diff = GitDiffUtility(git_repo, mode=GitDiffMode.UNSTAGED)\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+Modified content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_git_diff_utility_with_staged_changes(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"Staged content\\\\\\\")\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\"file.txt\\\\\\\"], cwd=git_repo, check=True)\\\\n\\\\n    git_diff = GitDiffUtility(git_repo, mode=GitDiffMode.STAGED)\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+Staged content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_git_diff_utility_with_target_commit(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ì»¤ë°‹ê³¼ì˜ diff ê²°ê³¼ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    file_path = os.path.join(git_repo, \\\\\\\"file.txt\\\\\\\")\\\\n    result = subprocess.run(\\\\n        [\\\\\\\"git\\\\\\\", \\\\\\\"rev-parse\\\\\\\", \\\\\\\"HEAD\\\\\\\"],\\\\n        cwd=git_repo,\\\\n```\\\", \\\"line_number\\\": 36}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"New commit content\\\\\\\")\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\"file.txt\\\\\\\"], cwd=git_repo, check=True)\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"commit\\\\\\\", \\\\\\\"-m\\\\\\\", \\\\\\\"Second commit\\\\\\\"], cwd=git_repo, check=True)\\\\n\\\\n    diff = run_git_diff(git_repo, target_commit=initial_commit)\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+New commit content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_run_git_diff_with_empty_target_commit(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ target_commit ì¸ìì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    diff = run_git_diff(git_repo, target_commit=\\\\\\\"\\\\\\\")\\\\n    assert diff == \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    with open(file_path, \\\\\\\"w\\\\\\\") as f:\\\\n        f.write(\\\\\\\"New commit content\\\\\\\")\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"add\\\\\\\", \\\\\\\"file.txt\\\\\\\"], cwd=git_repo, check=True)\\\\n    subprocess.run([\\\\\\\"git\\\\\\\", \\\\\\\"commit\\\\\\\", \\\\\\\"-m\\\\\\\", \\\\\\\"Second commit\\\\\\\"], cwd=git_repo, check=True)\\\\n\\\\n    git_diff = GitDiffUtility(\\\\n        git_repo, mode=GitDiffMode.TARGET_COMMIT, target=initial_commit\\\\n    )\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert \\\\\\\"-Initial content\\\\\\\" in diff\\\\n    assert \\\\\\\"+New commit content\\\\\\\" in diff\\\\n\\\\n\\\\ndef test_git_diff_utility_with_empty_target_commit(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ target_commit ì¸ìì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    git_diff = GitDiffUtility(git_repo, mode=GitDiffMode.TARGET_COMMIT, target=\\\\\\\"\\\\\\\")\\\\n    diff = git_diff.get_diff()\\\\n\\\\n    assert diff == \\\\\\\"\\\\\\\"\\\\n\\\\n\\\\ndef test_git_diff_utility_from_args(git_repo):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"from_args ë©”ì„œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ìš© Args í´ë˜ìŠ¤ ì •ì˜\\\\n    @dataclass\\\\n    class MockArgs:\\\\n        repo_path: str\\\\n        staged: bool = False\\\\n        target_commit: str | None = None\\\\n        target_branch: str | None = None\\\\n\\\\n    args = MockArgs(repo_path=git_repo, staged=True)\\\\n\\\\n    git_diff = GitDiffUtility.from_args(args)\\\\n    assert git_diff.mode == GitDiffMode.STAGED\\\\n    assert git_diff.repo_path == git_repo\\\\n    assert git_diff.target is None\\\\n```\\\", \\\"line_number\\\": 80}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 191, \"file\": \"reviewer/cli.py\", \"description\": \"get_diff_content í•¨ìˆ˜ì—ì„œ GitDiffUtility ì‚¬ìš© ì¤‘ ValueError ë°œìƒ ì‹œ, ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë§Œ ë¡œê¹…í•˜ê³  ë¹ˆ ë¬¸ìì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì‚¬ìš©ìëŠ” ì˜¤ë¥˜ì˜ êµ¬ì²´ì ì¸ ì›ì¸(ì˜ˆ: ì˜ëª»ëœ ì €ì¥ì†Œ ê²½ë¡œ)ì„ íŒŒì•…í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë¡œê¹… ë©”ì‹œì§€ì— ì‚¬ìš©ìì—ê²Œ ì–´ë–¤ ì¡°ì¹˜ë¥¼ ì·¨í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì•ˆë‚´ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜, ì˜¤ë¥˜ ìœ í˜•ì— ë”°ë¼ ë‹¤ë¥¸ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´, 'Git diff ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {ì˜¤ë¥˜ ë‚´ìš©}. ì €ì¥ì†Œ ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€, Gitì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.' ì™€ ê°™ì´ ì•ˆë‚´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    except ValueError as e:\\n        logger.error(str(e))\\n        return \\\"\\\"\\n```\", \"improved_code\": \"```python\\n    except ValueError as e:\\n        logger.error(f\\\"Git diff ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}. ì €ì¥ì†Œ ê²½ë¡œê°€ ì˜¬ë°”ë¥¸ì§€, Gitì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\\\")\\n        return \\\"\\\"\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 56, \"file\": \"reviewer/src/utils/git_utils.py\", \"description\": \"GitDiffUtility.from_args ë©”ì„œë“œì—ì„œ repo_pathë¥¼ ìƒì„±ìì— ì „ë‹¬í•  ë•Œ str(Path(args.repo_path))ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. args.repo_pathê°€ ìƒëŒ€ ê²½ë¡œì¼ ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” í”„ë¡œê·¸ë¨ ì‹¤í–‰ ìœ„ì¹˜ì— ë”°ë¼ ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ì„ ìœ ë°œí•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. __init__ì—ì„œ ê²½ë¡œ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ì§€ë§Œ, ì ˆëŒ€ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë©´ ì¢€ ë” ëª…í™•í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘ì„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"repo_pathë¥¼ ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´, repo_path=str(Path(args.repo_path).resolve())ì™€ ê°™ì´ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹íˆ ë‹¤ë¥¸ ëª¨ë“ˆì´ë‚˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì´ ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•  ë•Œ ê²½ë¡œ í•´ì„ì˜ ëª¨í˜¸ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        return cls(repo_path=str(Path(args.repo_path)), mode=mode, target=target)\\n```\", \"improved_code\": \"```python\\n        return cls(repo_path=str(Path(args.repo_path).resolve()), mode=mode, target=target)\\n```\"}], \"summary\": \"git diff ê´€ë ¨ ë¡œì§ì„ ê¸°ì¡´ í•¨ìˆ˜ ë°©ì‹ì—ì„œ GitDiffUtility í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í† ë§í–ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ìœ¼ë¡œ ì½”ë“œì˜ êµ¬ì¡°, ê°€ë…ì„±, ìœ ì§€ë³´ìˆ˜ì„±ì´ í–¥ìƒë˜ì—ˆìœ¼ë©°, ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ìƒˆë¡œìš´ í´ë˜ìŠ¤ êµ¬ì¡°ì— ë§ê²Œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ì½”ë“œ í’ˆì§ˆì´ ê°œì„ ëœ ê¸ì •ì ì¸ ë³€ê²½ì…ë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©ìì—ê²Œ ì œê³µë˜ëŠ” í”¼ë“œë°± ë©”ì‹œì§€ë¥¼ ì¢€ ë” êµ¬ì²´ì ìœ¼ë¡œ ê°œì„ í•˜ì—¬ ì‚¬ìš©ìê°€ ë¬¸ì œ ì›ì¸ì„ ì‰½ê²Œ íŒŒì•…í•˜ê³  ì¡°ì¹˜í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”.\", \"íŒŒì¼ ê²½ë¡œ ì²˜ë¦¬ ì‹œ, íŠ¹íˆ ë‹¤ì–‘í•œ ì‹¤í–‰ í™˜ê²½ì´ë‚˜ ëª¨ë“ˆ ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ê³ ë ¤í•´ì•¼ í•  ë•Œ, ì ˆëŒ€ ê²½ë¡œë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œ í•´ì„ì˜ ëª¨í˜¸ì„±ì„ ì¤„ì´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤ (í˜„ì¬ ì½”ë“œì—ì„œëŠ” í° ë¬¸ì œê°€ ì—†ì„ ìˆ˜ ìˆìœ¼ë‚˜ ì¼ë°˜ì ì¸ ê¶Œì¥ ì‚¬í•­ì…ë‹ˆë‹¤).\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\".cursor/rules/linting-setup.mdc\\\", \\\"file_content\\\": \\\"---\\\\ndescription: Reviewer í”„ë¡œì íŠ¸ ë¦°íŒ… ì„¤ì •\\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer í”„ë¡œì íŠ¸ ë¦°íŒ… ì„¤ì •\\\\n\\\\n## Ruff ì„¤ì •\\\\n\\\\nReviewer í”„ë¡œì íŠ¸ëŠ” Python ë¦°í„°ë¡œ Ruffë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ìŒ ì„¤ì •ì„ í†µí•´ ì½”ë“œ í’ˆì§ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤:\\\\nã…Œã…ˆ\\\\n### VSCode ì„¤ì •\\\\n[.vscode/settings.json](mdc:.vscode/settings.json) íŒŒì¼ì— ì •ì˜ëœ Ruff ì„¤ì •:\\\\n\\\\n- ë¼ì¸ ê¸¸ì´: 88ì (Black ìŠ¤íƒ€ì¼)\\\\n- í™œì„±í™”ëœ ë¦°íŠ¸ ê·œì¹™:\\\\n  - `E`: pycodestyle ì˜¤ë¥˜\\\\n  - `F`: Pyflakes ê·œì¹™\\\\n  - `I`: isort ê·œì¹™\\\\n  - `B`: flake8-bugbear ê·œì¹™\\\\n  - `C4`: flake8-comprehensions\\\\n  - `ARG`: flake8-unused-arguments\\\\n  - `N`: PEP8 ë„¤ì´ë° ê·œì¹™\\\\n  - `UP`: pyupgrade ê·œì¹™\\\\n  - `ANN`: flake8-annotations (íƒ€ì… íŒíŒ…)\\\\n  - `S`: flake8-bandit (ë³´ì•ˆ)\\\\n  - `A`: flake8-builtins\\\\n\\\\n### ìë™í™”ëœ ì½”ë“œ ì •ë¦¬\\\\n- íŒŒì¼ ì €ì¥ ì‹œ ìë™ í¬ë§·íŒ… ì ìš©\\\\n- ìë™ import ì •ë¦¬\\\\n- ì½”ë“œ ìˆ˜ì • ì œì•ˆ(Code Actions)ì„ í†µí•œ ë¬¸ì œ í•´ê²°\\\\n\\\\n## íƒ€ì… ì²´í‚¹\\\\nPython íƒ€ì… ê²€ì‚¬ ëª¨ë“œëŠ” `basic`ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íƒ€ì… íŒíŒ…ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ê²€ì‚¬ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\\\\n\\\\n## í…ŒìŠ¤íŠ¸ ì„¤ì •\\\\n[pytest.ini](mdc:pytest.ini) íŒŒì¼ì—ì„œ pytest ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤:\\\\n- í…ŒìŠ¤íŠ¸ ê²½ë¡œ: `tests/`\\\\n- í…ŒìŠ¤íŠ¸ íŒŒì¼ íŒ¨í„´: `test_*.py`\\\\n- í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ íŒ¨í„´: `Test*`\\\\n- í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ íŒ¨í„´: `test_*`\\\\n- legacy_tests ë””ë ‰í† ë¦¬ ë¬´ì‹œ\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n---\\\\ndescription: \\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer í”„ë¡œì íŠ¸ ë¦°íŒ… ì„¤ì •\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n---\\\\ndescription: Reviewer í”„ë¡œì íŠ¸ ë¦°íŒ… ì„¤ì •\\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer í”„ë¡œì íŠ¸ ë¦°íŒ… ì„¤ì •\\\\n\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\".cursor/rules/models-and-gateways.mdc\\\", \\\"file_content\\\": \\\"---\\\\ndescription: LLM ëª¨ë¸ ë° ê²Œì´íŠ¸ì›¨ì´ êµ¬ì¡°\\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer LLM ëª¨ë¸ ë° ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n## ì§€ì› ëª¨ë¸\\\\n\\\\nReviewerëŠ” ë‹¤ìŒ LLM ëª¨ë¸ ì œê³µìë¥¼ ì§€ì›í•©ë‹ˆë‹¤:\\\\n\\\\n### OpenAI ëª¨ë¸\\\\n- `gpt-4o`: GPT-4 Omni ëª¨ë¸\\\\n- `gpt-4.1`: GPT-4.1 ëª¨ë¸\\\\n- `o3-mini`: OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™” (ë³„ì¹­: `o3-mini-high`)\\\\n- `o4-mini`: OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™” (ë³„ì¹­: `o4-mini-high`)\\\\n\\\\n### Anthropic ëª¨ë¸\\\\n- `claude-3-7-sonnet-20250219`: Claude 3.7 Sonnet ëª¨ë¸ (ë³„ì¹­: `claude-3-7-sonnet`, `claude-3.7-sonnet`)\\\\n\\\\n### Google ëª¨ë¸\\\\n- `gemini-2.5-pro-exp-03-25`: Googleì˜ Gemini 2.5 Pro ëª¨ë¸ (ë³„ì¹­: `gemini-2.5-pro`)\\\\n- `gemini-2.5-flash-preview-04-17`: Googleì˜ Gemini 2.5 Flash ëª¨ë¸ (ë³„ì¹­: `gemini-2.5-flash`)\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ ì•„í‚¤í…ì²˜\\\\n\\\\nReviewerëŠ” ê° LLM ì œê³µì—…ì²´ì˜ APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´ í´ë˜ìŠ¤ë“¤ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ ê²Œì´íŠ¸ì›¨ì´ ì‹œìŠ¤í…œì€ íŒ©í† ë¦¬ íŒ¨í„´ì„ í†µí•´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\n\\\\n### ê²Œì´íŠ¸ì›¨ì´ í´ë˜ìŠ¤ êµ¬ì¡°\\\\n\\\\n```\\\\nBaseGateway (ì¶”ìƒ í´ë˜ìŠ¤)\\\\nâ”œâ”€â”€ OpenAIGateway\\\\nâ”œâ”€â”€ ClaudeGateway\\\\nâ””â”€â”€ GoogleGateway\\\\n```\\\\n\\\\n- [BaseGateway](mdc:reviewer/src/llm_gateway/base_gateway.py): ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì •ì˜í•œ ì¶”ìƒ í´ë˜ìŠ¤\\\\n- [OpenAIGateway](mdc:reviewer/src/llm_gateway/openai_gateway.py): OpenAI APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n- [ClaudeGateway](mdc:reviewer/src/llm_gateway/claude_gateway.py): Anthropic Claude APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n- [GoogleGateway](mdc:reviewer/src/llm_gateway/google_gateway.py): Google AI Studio APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n### íŒ©í† ë¦¬ íŒ¨í„´\\\\n\\\\n[GatewayFactory](mdc:reviewer/src/llm_gateway/gateway_factory.py) í´ë˜ìŠ¤ëŠ” ëª¨ë¸ ì´ë¦„ì— ë”°ë¼ ì ì ˆí•œ ê²Œì´íŠ¸ì›¨ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:\\\\n\\\\n```python\\\\n# ê²Œì´íŠ¸ì›¨ì´ ìƒì„± ì˜ˆì‹œ\\\\nfactory = GatewayFactory()\\\\ngateway = factory.create(\\\\\\\"gpt-4o\\\\\\\")  # OpenAIGateway ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜\\\\ngateway = factory.create(\\\\\\\"claude-3.7-sonnet\\\\\\\")  # ClaudeGateway ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜\\\\ngateway = factory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")  # GoogleGateway ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜\\\\n```\\\\n\\\\n## ëª¨ë¸ ì •ë³´ ê´€ë¦¬\\\\n\\\\n[available_models.py](mdc:reviewer/src/available_models.py) ëª¨ë“ˆì€ ì§€ì›ë˜ëŠ” ëª¨ë“  ëª¨ë¸ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤:\\\\n\\\\n```python\\\\n# ëª¨ë¸ ì •ë³´ ì˜ˆì‹œ\\\\nAVAILABLE_MODELS: dict[str, ModelInfoDict] = {\\\\n    \\\\\\\"gpt-4o\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4 Omni ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    # ê¸°íƒ€ ëª¨ë¸ ì •ë³´...\\\\n}\\\\n```\\\\n\\\\n- `full_name`: ëª¨ë¸ì˜ ì •ì‹ ì´ë¦„\\\\n- `aliases`: ëª¨ë¸ì˜ ë³„ì¹­ ëª©ë¡\\\\n- `description`: ëª¨ë¸ ì„¤ëª…\\\\n- `provider`: ëª¨ë¸ ì œê³µì (\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\" ì¤‘ í•˜ë‚˜)\\\\n- `params`: ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° (temperature, reasoning_effort ë“±)\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ í•µì‹¬ ê¸°ëŠ¥\\\\n\\\\nê° ê²Œì´íŠ¸ì›¨ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê³µí†µ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:\\\\n\\\\n1. **ëª¨ë¸ ì„¤ì •**: ëª¨ë¸ ì´ë¦„, íŒŒë¼ë¯¸í„° ì„¤ì •\\\\n2. **API í‚¤ ê´€ë¦¬**: ê° ì œê³µìë³„ API í‚¤ ê²€ì¦ ë° ê´€ë¦¬\\\\n3. **í”„ë¡¬í”„íŠ¸ ìƒì„±**: ì½”ë“œ ë¦¬ë·°ë¥¼ ìœ„í•œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n4. **API ìš”ì²­**: ê° ì œê³µìì˜ APIì— ë§ëŠ” ìš”ì²­ ìƒì„± ë° ì „ì†¡\\\\n5. **ì‘ë‹µ ì²˜ë¦¬**: API ì‘ë‹µì„ íŒŒì‹±í•˜ê³  êµ¬ì¡°í™”ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜\\\\n6. **ì—ëŸ¬ ì²˜ë¦¬**: API ì˜¤ë¥˜, íƒ€ì„ì•„ì›ƒ ë“±ì˜ ì˜ˆì™¸ ì²˜ë¦¬\\\\n\\\\n## ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤\\\\n\\\\nê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‚¬ìš©í•œ ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\\\\n\\\\n1. ì‚¬ìš©ìê°€ íŠ¹ì • ëª¨ë¸ì„ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·° ìš”ì²­\\\\n2. `GatewayFactory`ë¥¼ í†µí•´ ì ì ˆí•œ ê²Œì´íŠ¸ì›¨ì´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\n3. ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ê°€ ì½”ë“œ diffì™€ ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n4. í•´ë‹¹ ëª¨ë¸ì˜ APIì— ìš”ì²­ ì „ì†¡\\\\n5. API ì‘ë‹µì„ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ ë¦¬ë·° ê²°ê³¼ ìƒì„±\\\\n6. ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜\\\\n\\\\n## ì‚¬ìš© ì˜ˆì‹œ\\\\n\\\\n```python\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.utils.models import ReviewRequest\\\\n\\\\n# ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\nrequest = ReviewRequest(\\\\n    diff_content=\\\\\\\"...\\\\\\\",\\\\n    file_paths=[\\\\\\\"main.py\\\\\\\", \\\\\\\"utils.py\\\\\\\"],\\\\n    language=\\\\\\\"python\\\\\\\"\\\\n)\\\\n\\\\n# íŒ©í† ë¦¬ë¥¼ í†µí•œ ê²Œì´íŠ¸ì›¨ì´ ìƒì„±\\\\nfactory = GatewayFactory()\\\\ngateway = factory.create(\\\\\\\"gpt-4o\\\\\\\")  # OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n\\\\n# ì½”ë“œ ë¦¬ë·° ì‹¤í–‰\\\\nreview_result = gateway.review_code(request)\\\\n\\\\n# ê²°ê³¼ ì¶œë ¥\\\\nprint(review_result.suggestions)\\\\n```\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n---\\\\ndescription: \\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer LLM ëª¨ë¸ ë° ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n## ì§€ì› ëª¨ë¸\\\\n\\\\nReviewerëŠ” ë‹¤ìŒ LLM ëª¨ë¸ ì œê³µìë¥¼ ì§€ì›í•©ë‹ˆë‹¤:\\\\n\\\\n### OpenAI ëª¨ë¸\\\\n- GPT-4o\\\\n- GPT-4o-mini\\\\n- GPT-4-turbo\\\\n- GPT-3.5-turbo\\\\n\\\\n### Anthropic ëª¨ë¸\\\\n- Claude 3.7 Sonnet\\\\n- Claude 3.5 Sonnet\\\\n- Claude 3 Opus\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ êµ¬ì¡°\\\\n\\\\n[reviewer/src/llm_gateway.py](mdc:reviewer/src/llm_gateway.py)ì—ì„œ ì •ì˜ëœ LLM ê²Œì´íŠ¸ì›¨ì´ëŠ” ë‹¤ìŒ í´ë˜ìŠ¤ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:\\\\n\\\\n1. `OpenAIGateway`: OpenAI APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n2. `ClaudeGateway`: Anthropic Claude APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\nê° ê²Œì´íŠ¸ì›¨ì´ëŠ” ë‹¤ìŒ ì£¼ìš” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:\\\\n\\\\n- ëª¨ë¸ ì„¤ì • ë° ê´€ë¦¬\\\\n- API í‚¤ ê²€ì¦\\\\n- í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n- í† í° ì‚¬ìš©ëŸ‰ ë° ë¹„ìš© ì¶”ì •\\\\n- API ìš”ì²­ ìƒì„± ë° ì²˜ë¦¬\\\\n- ì‘ë‹µ íŒŒì‹± ë° êµ¬ì¡°í™”\\\\n\\\\n## ëª¨ë¸ ì •ë³´ ê´€ë¦¬\\\\n\\\\n[reviewer/src/available_models.py](mdc:reviewer/src/available_models.py)ì—ì„œ ì§€ì›ë˜ëŠ” ëª¨ë¸ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤:\\\\n\\\\n- ëª¨ë¸ ì´ë¦„ ë° ë³„ì¹­\\\\n- ì œê³µì ì •ë³´\\\\n- ëª¨ë¸ ì„¤ëª…\\\\n- ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° (ì˜¨ë„, ìµœëŒ€ í† í° ë“±)\\\\n\\\\n## ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤\\\\n\\\\n1. ì½”ë“œ ë¦¬ë·° ìš”ì²­ì´ ìƒì„±ë¨\\\\n2. ì„ íƒëœ ëª¨ë¸ì— ë”°ë¼ ì ì ˆí•œ ê²Œì´íŠ¸ì›¨ì´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\n3. ì½”ë“œ diff ë‚´ìš©ì„ í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜\\\\n4. APIë¥¼ í†µí•´ LLM ëª¨ë¸ì— ìš”ì²­ ì „ì†¡\\\\n5. ì‘ë‹µì„ êµ¬ì¡°í™”ëœ ë¦¬ë·° í¬ë§·ìœ¼ë¡œ íŒŒì‹±\\\\n6. ì‚¬ìš©ìì—ê²Œ ë¦¬ë·° ê²°ê³¼ ì œê³µ\\\\n\\\\n## ì‚¬ìš© ì˜ˆì‹œ\\\\n\\\\nëª¨ë¸ ì‚¬ìš© ì‹œ ë‹¤ìŒ íŒ¨í„´ì„ ë”°ë¦…ë‹ˆë‹¤:\\\\n\\\\n`â€‹``python\\\\nfrom reviewer.src.llm_gateway import get_llm_gateway\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ê²Œì´íŠ¸ì›¨ì´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\ngateway = get_llm_gateway(\\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n# ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\nrequest = ReviewRequest(\\\\n    diff_content=\\\\\\\"...\\\\\\\",\\\\n    file_paths=[\\\\\\\"file1.py\\\\\\\", \\\\\\\"file2.py\\\\\\\"],\\\\n    language=\\\\\\\"python\\\\\\\"\\\\n)\\\\n\\\\n# ì½”ë“œ ë¦¬ë·° ì‹¤í–‰\\\\nreview_result = gateway.review_code(request)\\\\n`â€‹``\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n---\\\\ndescription: LLM ëª¨ë¸ ë° ê²Œì´íŠ¸ì›¨ì´ êµ¬ì¡°\\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer LLM ëª¨ë¸ ë° ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n## ì§€ì› ëª¨ë¸\\\\n\\\\nReviewerëŠ” ë‹¤ìŒ LLM ëª¨ë¸ ì œê³µìë¥¼ ì§€ì›í•©ë‹ˆë‹¤:\\\\n\\\\n### OpenAI ëª¨ë¸\\\\n- `gpt-4o`: GPT-4 Omni ëª¨ë¸\\\\n- `gpt-4.1`: GPT-4.1 ëª¨ë¸\\\\n- `o3-mini`: OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™” (ë³„ì¹­: `o3-mini-high`)\\\\n- `o4-mini`: OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™” (ë³„ì¹­: `o4-mini-high`)\\\\n\\\\n### Anthropic ëª¨ë¸\\\\n- `claude-3-7-sonnet-20250219`: Claude 3.7 Sonnet ëª¨ë¸ (ë³„ì¹­: `claude-3-7-sonnet`, `claude-3.7-sonnet`)\\\\n\\\\n### Google ëª¨ë¸\\\\n- `gemini-2.5-pro-exp-03-25`: Googleì˜ Gemini 2.5 Pro ëª¨ë¸ (ë³„ì¹­: `gemini-2.5-pro`)\\\\n- `gemini-2.5-flash-preview-04-17`: Googleì˜ Gemini 2.5 Flash ëª¨ë¸ (ë³„ì¹­: `gemini-2.5-flash`)\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ ì•„í‚¤í…ì²˜\\\\n\\\\nReviewerëŠ” ê° LLM ì œê³µì—…ì²´ì˜ APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´ í´ë˜ìŠ¤ë“¤ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì´ ê²Œì´íŠ¸ì›¨ì´ ì‹œìŠ¤í…œì€ íŒ©í† ë¦¬ íŒ¨í„´ì„ í†µí•´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\n\\\\n### ê²Œì´íŠ¸ì›¨ì´ í´ë˜ìŠ¤ êµ¬ì¡°\\\\n\\\\n`â€‹``\\\\nBaseGateway (ì¶”ìƒ í´ë˜ìŠ¤)\\\\nâ”œâ”€â”€ OpenAIGateway\\\\nâ”œâ”€â”€ ClaudeGateway\\\\nâ””â”€â”€ GoogleGateway\\\\n`â€‹``\\\\n\\\\n- [BaseGateway](mdc:reviewer/src/llm_gateway/base_gateway.py): ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì •ì˜í•œ ì¶”ìƒ í´ë˜ìŠ¤\\\\n- [OpenAIGateway](mdc:reviewer/src/llm_gateway/openai_gateway.py): OpenAI APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n- [ClaudeGateway](mdc:reviewer/src/llm_gateway/claude_gateway.py): Anthropic Claude APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n- [GoogleGateway](mdc:reviewer/src/llm_gateway/google_gateway.py): Google AI Studio APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n### íŒ©í† ë¦¬ íŒ¨í„´\\\\n\\\\n[GatewayFactory](mdc:reviewer/src/llm_gateway/gateway_factory.py) í´ë˜ìŠ¤ëŠ” ëª¨ë¸ ì´ë¦„ì— ë”°ë¼ ì ì ˆí•œ ê²Œì´íŠ¸ì›¨ì´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:\\\\n\\\\n`â€‹``python\\\\n# ê²Œì´íŠ¸ì›¨ì´ ìƒì„± ì˜ˆì‹œ\\\\nfactory = GatewayFactory()\\\\ngateway = factory.create(\\\\\\\"gpt-4o\\\\\\\")  # OpenAIGateway ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜\\\\ngateway = factory.create(\\\\\\\"claude-3.7-sonnet\\\\\\\")  # ClaudeGateway ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜\\\\ngateway = factory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")  # GoogleGateway ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜\\\\n`â€‹``\\\\n\\\\n## ëª¨ë¸ ì •ë³´ ê´€ë¦¬\\\\n\\\\n[available_models.py](mdc:reviewer/src/available_models.py) ëª¨ë“ˆì€ ì§€ì›ë˜ëŠ” ëª¨ë“  ëª¨ë¸ì˜ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤:\\\\n\\\\n`â€‹``python\\\\n# ëª¨ë¸ ì •ë³´ ì˜ˆì‹œ\\\\nAVAILABLE_MODELS: dict[str, ModelInfoDict] = {\\\\n    \\\\\\\"gpt-4o\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4 Omni ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    # ê¸°íƒ€ ëª¨ë¸ ì •ë³´...\\\\n}\\\\n`â€‹``\\\\n\\\\n- `full_name`: ëª¨ë¸ì˜ ì •ì‹ ì´ë¦„\\\\n- `aliases`: ëª¨ë¸ì˜ ë³„ì¹­ ëª©ë¡\\\\n- `description`: ëª¨ë¸ ì„¤ëª…\\\\n- `provider`: ëª¨ë¸ ì œê³µì (\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\" ì¤‘ í•˜ë‚˜)\\\\n- `params`: ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° (temperature, reasoning_effort ë“±)\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ í•µì‹¬ ê¸°ëŠ¥\\\\n\\\\nê° ê²Œì´íŠ¸ì›¨ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê³µí†µ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:\\\\n\\\\n1. **ëª¨ë¸ ì„¤ì •**: ëª¨ë¸ ì´ë¦„, íŒŒë¼ë¯¸í„° ì„¤ì •\\\\n2. **API í‚¤ ê´€ë¦¬**: ê° ì œê³µìë³„ API í‚¤ ê²€ì¦ ë° ê´€ë¦¬\\\\n3. **í”„ë¡¬í”„íŠ¸ ìƒì„±**: ì½”ë“œ ë¦¬ë·°ë¥¼ ìœ„í•œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n4. **API ìš”ì²­**: ê° ì œê³µìì˜ APIì— ë§ëŠ” ìš”ì²­ ìƒì„± ë° ì „ì†¡\\\\n5. **ì‘ë‹µ ì²˜ë¦¬**: API ì‘ë‹µì„ íŒŒì‹±í•˜ê³  êµ¬ì¡°í™”ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜\\\\n6. **ì—ëŸ¬ ì²˜ë¦¬**: API ì˜¤ë¥˜, íƒ€ì„ì•„ì›ƒ ë“±ì˜ ì˜ˆì™¸ ì²˜ë¦¬\\\\n\\\\n## ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤\\\\n\\\\nê²Œì´íŠ¸ì›¨ì´ë¥¼ ì‚¬ìš©í•œ ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\\\\n\\\\n1. ì‚¬ìš©ìê°€ íŠ¹ì • ëª¨ë¸ì„ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·° ìš”ì²­\\\\n2. `GatewayFactory`ë¥¼ í†µí•´ ì ì ˆí•œ ê²Œì´íŠ¸ì›¨ì´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\n3. ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ê°€ ì½”ë“œ diffì™€ ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n4. í•´ë‹¹ ëª¨ë¸ì˜ APIì— ìš”ì²­ ì „ì†¡\\\\n5. API ì‘ë‹µì„ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ ë¦¬ë·° ê²°ê³¼ ìƒì„±\\\\n6. ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ë°˜í™˜\\\\n\\\\n## ì‚¬ìš© ì˜ˆì‹œ\\\\n\\\\n`â€‹``python\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.utils.models import ReviewRequest\\\\n\\\\n# ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\nrequest = ReviewRequest(\\\\n    diff_content=\\\\\\\"...\\\\\\\",\\\\n    file_paths=[\\\\\\\"main.py\\\\\\\", \\\\\\\"utils.py\\\\\\\"],\\\\n    language=\\\\\\\"python\\\\\\\"\\\\n)\\\\n\\\\n# íŒ©í† ë¦¬ë¥¼ í†µí•œ ê²Œì´íŠ¸ì›¨ì´ ìƒì„±\\\\nfactory = GatewayFactory()\\\\ngateway = factory.create(\\\\\\\"gpt-4o\\\\\\\")  # OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n\\\\n# ì½”ë“œ ë¦¬ë·° ì‹¤í–‰\\\\nreview_result = gateway.review_code(request)\\\\n\\\\n# ê²°ê³¼ ì¶œë ¥\\\\nprint(review_result.suggestions)\\\\n`â€‹``\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\".cursor/rules/project-structure.mdc\\\", \\\"file_content\\\": \\\"---\\\\ndescription: í”„ë¡œì íŠ¸ ê°œìš” ë° í”„ë¡œì íŠ¸ êµ¬ì¡°\\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer - AI ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬ êµ¬ì¡°\\\\n\\\\n## í”„ë¡œì íŠ¸ ê°œìš”\\\\nReviewerëŠ” AIë¥¼ í™œìš©í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìë™í™”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. OpenAI, Anthropic, Googleì˜ LLM ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ê°œì„ ì , ë²„ê·¸, ë³´ì•ˆ ì·¨ì•½ì  ë“±ì„ ì°¾ì•„ ì œê³µí•©ë‹ˆë‹¤.\\\\n\\\\n## ë””ë ‰í† ë¦¬ êµ¬ì¡°\\\\n- `reviewer/`: ë©”ì¸ íŒ¨í‚¤ì§€\\\\n  - `src/`: í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ\\\\n    - `llm_gateway/`: LLM ê²Œì´íŠ¸ì›¨ì´ ëª¨ë“ˆ\\\\n    - `diff_parser/`: ì½”ë“œ diff íŒŒì‹± ë¡œì§\\\\n    - `exceptions/`: ì˜ˆì™¸ í´ë˜ìŠ¤ ëª¨ìŒ\\\\n    - `utils/`: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° í´ë˜ìŠ¤\\\\n      - `token/`: í† í° ê´€ë ¨ ìœ í‹¸ë¦¬í‹° ë° ëª¨ë¸\\\\n      - `prompts/`: í”„ë¡¬í”„íŠ¸ ìƒì„± ë° ê´€ë¦¬\\\\n      - `logging/`: ë¡œê¹… ì„¤ì • ë° ê´€ë¦¬\\\\n  - `cli.py`: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤\\\\n- `tests/`: í…ŒìŠ¤íŠ¸ ì½”ë“œ\\\\n- `sample_data/`: ìƒ˜í”Œ ë°ì´í„°\\\\n- `logs/`: ë¡œê·¸ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n- `resources/`: ë¦¬ì†ŒìŠ¤ íŒŒì¼\\\\n\\\\n## ì£¼ìš” íŒŒì¼\\\\n- [setup.py](mdc:setup.py): íŒ¨í‚¤ì§€ ì„¤ì • ë° ì˜ì¡´ì„± ê´€ë¦¬\\\\n- [requirements.txt](mdc:requirements.txt): í”„ë¡œë•ì…˜ ì˜ì¡´ì„±\\\\n- [requirements-dev.txt](mdc:requirements-dev.txt): ê°œë°œ ì˜ì¡´ì„±\\\\n- [pyproject.toml](mdc:pyproject.toml): í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„°\\\\n- [pytest.ini](mdc:pytest.ini): pytest ì„¤ì •\\\\n\\\\n## í•µì‹¬ ëª¨ë“ˆ\\\\n- [reviewer/cli.py](mdc:reviewer/cli.py): ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ ë° ì§„ì…ì \\\\n- [reviewer/src/llm_gateway/base_gateway.py](mdc:reviewer/src/llm_gateway/base_gateway.py): LLM ê²Œì´íŠ¸ì›¨ì´ ê¸°ë³¸ í´ë˜ìŠ¤\\\\n- [reviewer/src/llm_gateway/gateway_factory.py](mdc:reviewer/src/llm_gateway/gateway_factory.py): ê²Œì´íŠ¸ì›¨ì´ íŒ©í† ë¦¬ íŒ¨í„´ êµ¬í˜„\\\\n- [reviewer/src/available_models.py](mdc:reviewer/src/available_models.py): ì§€ì›ë˜ëŠ” AI ëª¨ë¸ ì •ì˜\\\\n- [reviewer/src/config.py](mdc:reviewer/src/config.py): ì„¤ì • ê´€ë¦¬\\\\n- [reviewer/src/review_processor.py](mdc:reviewer/src/review_processor.py): ì½”ë“œ ë¦¬ë·° ì²˜ë¦¬ ë¡œì§\\\\n- [reviewer/src/ui.py](mdc:reviewer/src/ui.py): ë¦¬ë·° ê²°ê³¼ UI ì¸í„°í˜ì´ìŠ¤\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ ëª¨ë“ˆ\\\\n- [reviewer/src/llm_gateway/openai_gateway.py](mdc:reviewer/src/llm_gateway/openai_gateway.py): OpenAI API ê²Œì´íŠ¸ì›¨ì´\\\\n- [reviewer/src/llm_gateway/claude_gateway.py](mdc:reviewer/src/llm_gateway/claude_gateway.py): Anthropic Claude API ê²Œì´íŠ¸ì›¨ì´\\\\n- [reviewer/src/llm_gateway/google_gateway.py](mdc:reviewer/src/llm_gateway/google_gateway.py): Google AI API ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n## ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ\\\\n- [reviewer/src/utils/file_utils.py](mdc:reviewer/src/utils/file_utils.py): íŒŒì¼ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\n- [reviewer/src/utils/git_utils.py](mdc:reviewer/src/utils/git_utils.py): Git ê´€ë ¨ ì‘ì—… ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/prompt_utils.py](mdc:reviewer/src/utils/prompt_utils.py): í”„ë¡¬í”„íŠ¸ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/llm_factory.py](mdc:reviewer/src/utils/llm_factory.py): LLM íŒ©í† ë¦¬ ìœ í‹¸ë¦¬í‹°\\\\n\\\\n### í† í° ê´€ë ¨ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/token/token_utils.py](mdc:reviewer/src/utils/token/token_utils.py): í† í° ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/token/models.py](mdc:reviewer/src/utils/token/models.py): í† í° ê´€ë ¨ ë°ì´í„° ëª¨ë¸\\\\n\\\\n### í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/prompts/prompt_generator.py](mdc:reviewer/src/utils/prompts/prompt_generator.py): í”„ë¡¬í”„íŠ¸ ìƒì„± ë¡œì§\\\\n- [reviewer/src/utils/prompts/models/system_prompt.py](mdc:reviewer/src/utils/prompts/models/system_prompt.py): ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ëª¨ë¸\\\\n- [reviewer/src/utils/prompts/models/user_prompt.py](mdc:reviewer/src/utils/prompts/models/user_prompt.py): ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ ëª¨ë¸\\\\n- [reviewer/src/utils/prompts/models/review_prompt.py](mdc:reviewer/src/utils/prompts/models/review_prompt.py): ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ëª¨ë¸\\\\n\\\\n### ë¡œê¹… ê´€ë ¨ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/logging/config.py](mdc:reviewer/src/utils/logging/config.py): ë¡œê¹… ì„¤ì • ë° êµ¬ì„±\\\\n\\\\n## í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway.py](mdc:tests/test_llm_gateway.py): LLM ê²Œì´íŠ¸ì›¨ì´ ê¸°ë³¸ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway_request.py](mdc:tests/test_llm_gateway_request.py): ê²Œì´íŠ¸ì›¨ì´ ìš”ì²­ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway_review_code.py](mdc:tests/test_llm_gateway_review_code.py): ì½”ë“œ ë¦¬ë·° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_diff_parser.py](mdc:tests/test_diff_parser.py): ë””í”„ íŒŒì„œ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_prompt_generator.py](mdc:tests/test_prompt_generator.py): í”„ë¡¬í”„íŠ¸ ìƒì„± í…ŒìŠ¤íŠ¸\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n---\\\\ndescription: \\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer - AI ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬ êµ¬ì¡°\\\\n\\\\n## í”„ë¡œì íŠ¸ ê°œìš”\\\\nReviewerëŠ” AIë¥¼ í™œìš©í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìë™í™”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. OpenAIì™€ Anthropicì˜ LLM ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ê°œì„ ì , ë²„ê·¸, ë³´ì•ˆ ì·¨ì•½ì  ë“±ì„ ì°¾ì•„ ì œê³µí•©ë‹ˆë‹¤.\\\\n\\\\n## ë””ë ‰í† ë¦¬ êµ¬ì¡°\\\\n- `reviewer/`: ë©”ì¸ íŒ¨í‚¤ì§€\\\\n  - `src/`: í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ\\\\n  - `cli.py`: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ã…Œã…ˆ\\\\n- `tests/`: í…ŒìŠ¤íŠ¸ ì½”ë“œ\\\\n- `sample_data/`: ìƒ˜í”Œ ë°ì´í„°ã…Œã…ˆ\\\\n- `logs/`: ë¡œê·¸ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n\\\\n## ì£¼ìš” íŒŒì¼\\\\n- [setup.py](mdc:setup.py): íŒ¨í‚¤ì§€ ì„¤ì • ë° ì˜ì¡´ì„± ê´€ë¦¬\\\\n- [requirements.txt](mdc:requirements.txt): í”„ë¡œë•ì…˜ ì˜ì¡´ì„±\\\\n- [requirements-dev.txt](mdc:requirements-dev.txt): ê°œë°œ ì˜ì¡´ì„±\\\\n- [pyproject.toml](mdc:pyproject.toml): í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„°\\\\n- [pytest.ini](mdc:pytest.ini): pytest ì„¤ì •\\\\n\\\\n## í•µì‹¬ ëª¨ë“ˆ\\\\n- [reviewer/src/llm_gateway.py](mdc:reviewer/src/llm_gateway.py): LLM APIì™€ì˜ í†µì‹  ê´€ë¦¬\\\\n- [reviewer/src/available_models.py](mdc:reviewer/src/available_models.py): ì§€ì›ë˜ëŠ” AI ëª¨ë¸ ì •ì˜\\\\n- [reviewer/src/config.py](mdc:reviewer/src/config.py): ì„¤ì • ê´€ë¦¬\\\\n- [reviewer/src/review_processor.py](mdc:reviewer/src/review_processor.py): ì½”ë“œ ë¦¬ë·° ì²˜ë¦¬ ë¡œì§\\\\n- [reviewer/src/ui.py](mdc:reviewer/src/ui.py): ë¦¬ë·° ê²°ê³¼ UI ì¸í„°í˜ì´ìŠ¤\\\\n\\\\n## í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway.py](mdc:tests/test_llm_gateway.py): LLM ê²Œì´íŠ¸ì›¨ì´ í…ŒìŠ¤íŠ¸\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n---\\\\ndescription: í”„ë¡œì íŠ¸ ê°œìš” ë° í”„ë¡œì íŠ¸ êµ¬ì¡°\\\\nglobs: \\\\nalwaysApply: false\\\\n---\\\\n# Reviewer - AI ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬ êµ¬ì¡°\\\\n\\\\n## í”„ë¡œì íŠ¸ ê°œìš”\\\\nReviewerëŠ” AIë¥¼ í™œìš©í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìë™í™”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. OpenAI, Anthropic, Googleì˜ LLM ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ê°œì„ ì , ë²„ê·¸, ë³´ì•ˆ ì·¨ì•½ì  ë“±ì„ ì°¾ì•„ ì œê³µí•©ë‹ˆë‹¤.\\\\n\\\\n## ë””ë ‰í† ë¦¬ êµ¬ì¡°\\\\n- `reviewer/`: ë©”ì¸ íŒ¨í‚¤ì§€\\\\n  - `src/`: í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ\\\\n    - `llm_gateway/`: LLM ê²Œì´íŠ¸ì›¨ì´ ëª¨ë“ˆ\\\\n    - `diff_parser/`: ì½”ë“œ diff íŒŒì‹± ë¡œì§\\\\n    - `exceptions/`: ì˜ˆì™¸ í´ë˜ìŠ¤ ëª¨ìŒ\\\\n    - `utils/`: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° í´ë˜ìŠ¤\\\\n      - `token/`: í† í° ê´€ë ¨ ìœ í‹¸ë¦¬í‹° ë° ëª¨ë¸\\\\n      - `prompts/`: í”„ë¡¬í”„íŠ¸ ìƒì„± ë° ê´€ë¦¬\\\\n      - `logging/`: ë¡œê¹… ì„¤ì • ë° ê´€ë¦¬\\\\n  - `cli.py`: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤\\\\n- `tests/`: í…ŒìŠ¤íŠ¸ ì½”ë“œ\\\\n- `sample_data/`: ìƒ˜í”Œ ë°ì´í„°\\\\n- `logs/`: ë¡œê·¸ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n- `resources/`: ë¦¬ì†ŒìŠ¤ íŒŒì¼\\\\n\\\\n## ì£¼ìš” íŒŒì¼\\\\n- [setup.py](mdc:setup.py): íŒ¨í‚¤ì§€ ì„¤ì • ë° ì˜ì¡´ì„± ê´€ë¦¬\\\\n- [requirements.txt](mdc:requirements.txt): í”„ë¡œë•ì…˜ ì˜ì¡´ì„±\\\\n- [requirements-dev.txt](mdc:requirements-dev.txt): ê°œë°œ ì˜ì¡´ì„±\\\\n- [pyproject.toml](mdc:pyproject.toml): í”„ë¡œì íŠ¸ ë©”íƒ€ë°ì´í„°\\\\n- [pytest.ini](mdc:pytest.ini): pytest ì„¤ì •\\\\n\\\\n## í•µì‹¬ ëª¨ë“ˆ\\\\n- [reviewer/cli.py](mdc:reviewer/cli.py): ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ ë° ì§„ì…ì \\\\n- [reviewer/src/llm_gateway/base_gateway.py](mdc:reviewer/src/llm_gateway/base_gateway.py): LLM ê²Œì´íŠ¸ì›¨ì´ ê¸°ë³¸ í´ë˜ìŠ¤\\\\n- [reviewer/src/llm_gateway/gateway_factory.py](mdc:reviewer/src/llm_gateway/gateway_factory.py): ê²Œì´íŠ¸ì›¨ì´ íŒ©í† ë¦¬ íŒ¨í„´ êµ¬í˜„\\\\n- [reviewer/src/available_models.py](mdc:reviewer/src/available_models.py): ì§€ì›ë˜ëŠ” AI ëª¨ë¸ ì •ì˜\\\\n- [reviewer/src/config.py](mdc:reviewer/src/config.py): ì„¤ì • ê´€ë¦¬\\\\n- [reviewer/src/review_processor.py](mdc:reviewer/src/review_processor.py): ì½”ë“œ ë¦¬ë·° ì²˜ë¦¬ ë¡œì§\\\\n- [reviewer/src/ui.py](mdc:reviewer/src/ui.py): ë¦¬ë·° ê²°ê³¼ UI ì¸í„°í˜ì´ìŠ¤\\\\n\\\\n## ê²Œì´íŠ¸ì›¨ì´ ëª¨ë“ˆ\\\\n- [reviewer/src/llm_gateway/openai_gateway.py](mdc:reviewer/src/llm_gateway/openai_gateway.py): OpenAI API ê²Œì´íŠ¸ì›¨ì´\\\\n- [reviewer/src/llm_gateway/claude_gateway.py](mdc:reviewer/src/llm_gateway/claude_gateway.py): Anthropic Claude API ê²Œì´íŠ¸ì›¨ì´\\\\n- [reviewer/src/llm_gateway/google_gateway.py](mdc:reviewer/src/llm_gateway/google_gateway.py): Google AI API ê²Œì´íŠ¸ì›¨ì´\\\\n\\\\n## ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ\\\\n- [reviewer/src/utils/file_utils.py](mdc:reviewer/src/utils/file_utils.py): íŒŒì¼ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\n- [reviewer/src/utils/git_utils.py](mdc:reviewer/src/utils/git_utils.py): Git ê´€ë ¨ ì‘ì—… ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/prompt_utils.py](mdc:reviewer/src/utils/prompt_utils.py): í”„ë¡¬í”„íŠ¸ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/llm_factory.py](mdc:reviewer/src/utils/llm_factory.py): LLM íŒ©í† ë¦¬ ìœ í‹¸ë¦¬í‹°\\\\n\\\\n### í† í° ê´€ë ¨ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/token/token_utils.py](mdc:reviewer/src/utils/token/token_utils.py): í† í° ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/token/models.py](mdc:reviewer/src/utils/token/models.py): í† í° ê´€ë ¨ ë°ì´í„° ëª¨ë¸\\\\n\\\\n### í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/prompts/prompt_generator.py](mdc:reviewer/src/utils/prompts/prompt_generator.py): í”„ë¡¬í”„íŠ¸ ìƒì„± ë¡œì§\\\\n- [reviewer/src/utils/prompts/models/system_prompt.py](mdc:reviewer/src/utils/prompts/models/system_prompt.py): ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ëª¨ë¸\\\\n- [reviewer/src/utils/prompts/models/user_prompt.py](mdc:reviewer/src/utils/prompts/models/user_prompt.py): ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ ëª¨ë¸\\\\n- [reviewer/src/utils/prompts/models/review_prompt.py](mdc:reviewer/src/utils/prompts/models/review_prompt.py): ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ëª¨ë¸\\\\n\\\\n### ë¡œê¹… ê´€ë ¨ ìœ í‹¸ë¦¬í‹°\\\\n- [reviewer/src/utils/logging/config.py](mdc:reviewer/src/utils/logging/config.py): ë¡œê¹… ì„¤ì • ë° êµ¬ì„±\\\\n\\\\n## í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway.py](mdc:tests/test_llm_gateway.py): LLM ê²Œì´íŠ¸ì›¨ì´ ê¸°ë³¸ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway_request.py](mdc:tests/test_llm_gateway_request.py): ê²Œì´íŠ¸ì›¨ì´ ìš”ì²­ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_llm_gateway_review_code.py](mdc:tests/test_llm_gateway_review_code.py): ì½”ë“œ ë¦¬ë·° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_diff_parser.py](mdc:tests/test_diff_parser.py): ë””í”„ íŒŒì„œ í…ŒìŠ¤íŠ¸\\\\n- [tests/test_prompt_generator.py](mdc:tests/test_prompt_generator.py): í”„ë¡¬í”„íŠ¸ ìƒì„± í…ŒìŠ¤íŠ¸\\\\n```\\\", \\\"line_number\\\": 1}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 9, \"file\": \".cursor/rules/linting-setup.mdc\", \"description\": \"ë¬¸ì„œ ë‚´ìš©ì— ë¶ˆí•„ìš”í•œ í•œê¸€ ììŒ/ëª¨ìŒ(ã…Œã…ˆ)ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜¤íƒ€ë¡œ ë³´ì´ë©°, ë¬¸ì„œì˜ ê°€ë…ì„±ì„ í•´ì¹©ë‹ˆë‹¤.\", \"suggestion\": \"ë¶ˆí•„ìš”í•œ ë¬¸ìë¥¼ ì œê±°í•˜ì—¬ ë¬¸ì„œ ë‚´ìš©ì„ ì •ë¦¬í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"-\\n+ã…Œã…ˆ\", \"improved_code\": \"\"}, {\"type\": \"style\", \"line_number\": 12, \"file\": \".cursor/rules/project-structure.mdc\", \"description\": \"ë¬¸ì„œ ë‚´ìš©ì— ë¶ˆí•„ìš”í•œ í•œê¸€ ììŒ/ëª¨ìŒ(ã…Œã…ˆ)ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜¤íƒ€ë¡œ ë³´ì´ë©°, ë¬¸ì„œì˜ ê°€ë…ì„±ì„ í•´ì¹©ë‹ˆë‹¤.\", \"suggestion\": \"ë¶ˆí•„ìš”í•œ ë¬¸ìë¥¼ ì œê±°í•˜ì—¬ ë¬¸ì„œ ë‚´ìš©ì„ ì •ë¦¬í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"-  - `cli.py`: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤ã…Œã…ˆ\", \"improved_code\": \"-  - `cli.py`: ëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤\"}, {\"type\": \"style\", \"line_number\": 14, \"file\": \".cursor/rules/project-structure.mdc\", \"description\": \"ë¬¸ì„œ ë‚´ìš©ì— ë¶ˆí•„ìš”í•œ í•œê¸€ ììŒ/ëª¨ìŒ(ã…Œã…ˆ)ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜¤íƒ€ë¡œ ë³´ì´ë©°, ë¬¸ì„œì˜ ê°€ë…ì„±ì„ í•´ì¹©ë‹ˆë‹¤.\", \"suggestion\": \"ë¶ˆí•„ìš”í•œ ë¬¸ìë¥¼ ì œê±°í•˜ì—¬ ë¬¸ì„œ ë‚´ìš©ì„ ì •ë¦¬í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"-`tests/`: í…ŒìŠ¤íŠ¸ ì½”ë“œ\\n-`sample_data/`: ìƒ˜í”Œ ë°ì´í„°ã…Œã…ˆ\", \"improved_code\": \"-`tests/`: í…ŒìŠ¤íŠ¸ ì½”ë“œ\\n-`sample_data/`: ìƒ˜í”Œ ë°ì´í„°\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `.cursor/rules` ë””ë ‰í† ë¦¬ì˜ Markdown ë¬¸ì„œë“¤ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ë¦°íŒ… ì„¤ì •, LLM ëª¨ë¸ ë° ê²Œì´íŠ¸ì›¨ì´ êµ¬ì¡°, í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ëŒ€í•œ ì„¤ëª…ì´ ì¶”ê°€ ë° ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ LLM ê²Œì´íŠ¸ì›¨ì´ ë¬¸ì„œì—ì„œëŠ” ì§€ì› ëª¨ë¸ ëª©ë¡ì´ êµ¬ì²´í™”ë˜ê³ , ê²Œì´íŠ¸ì›¨ì´ ì•„í‚¤í…ì²˜(íŒ©í† ë¦¬ íŒ¨í„´ í¬í•¨) ë° í•µì‹¬ ê¸°ëŠ¥ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ êµ¬ì¡° ë¬¸ì„œì—ì„œëŠ” ë””ë ‰í† ë¦¬ ë° íŒŒì¼ êµ¬ì¡°ê°€ ë” ìƒì„¸í•˜ê²Œ ê¸°ìˆ ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ë¬¸ì„œ ë‚´ì— í¬í•¨ëœ ë¶ˆí•„ìš”í•œ ì˜¤íƒ€(ã…Œã…ˆ)ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì½”ë“œ ë³€ê²½ ì‚¬í•­ì— ë§ì¶° ë¬¸ì„œë¥¼ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ ìµœì‹  ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš”.\", \"ë¬¸ì„œ ë‚´ ì½”ë“œ ë¸”ë¡ì˜ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš” (ì˜ˆ: ```python).\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_ignore_file, load_file_content\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_ignore_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_binary_file, load_file_content\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_ignore_file, load_file_content\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_ignore_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 20}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/file_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n    # ì‹¤í–‰ íŒŒì¼ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬\\\\n    \\\\\\\".exe\\\\\\\",\\\\n    \\\\\\\".dll\\\\\\\",\\\\n    \\\\\\\".so\\\\\\\",\\\\n    \\\\\\\".dylib\\\\\\\",\\\\n    \\\\\\\".bin\\\\\\\",\\\\n    \\\\\\\".o\\\\\\\",\\\\n    \\\\\\\".obj\\\\\\\",\\\\n    \\\\\\\".a\\\\\\\",\\\\n    \\\\\\\".lib\\\\\\\",\\\\n    # ì••ì¶• íŒŒì¼\\\\n    \\\\\\\".zip\\\\\\\",\\\\n    \\\\\\\".tar\\\\\\\",\\\\n    \\\\\\\".gz\\\\\\\",\\\\n    \\\\\\\".bz2\\\\\\\",\\\\n    \\\\\\\".xz\\\\\\\",\\\\n    \\\\\\\".jar\\\\\\\",\\\\n    \\\\\\\".war\\\\\\\",\\\\n    \\\\\\\".ear\\\\\\\",\\\\n    \\\\\\\".aar\\\\\\\",\\\\n    # ì´ë¯¸ì§€ íŒŒì¼\\\\n    \\\\\\\".jpg\\\\\\\",\\\\n    \\\\\\\".jpeg\\\\\\\",\\\\n    \\\\\\\".png\\\\\\\",\\\\n    \\\\\\\".gif\\\\\\\",\\\\n    \\\\\\\".bmp\\\\\\\",\\\\n    \\\\\\\".tiff\\\\\\\",\\\\n    \\\\\\\".ico\\\\\\\",\\\\n    \\\\\\\".webp\\\\\\\",\\\\n    # ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ íŒŒì¼\\\\n    \\\\\\\".mp3\\\\\\\",\\\\n    \\\\\\\".mp4\\\\\\\",\\\\n    \\\\\\\".wav\\\\\\\",\\\\n    \\\\\\\".avi\\\\\\\",\\\\n    \\\\\\\".mov\\\\\\\",\\\\n    \\\\\\\".mkv\\\\\\\",\\\\n    \\\\\\\".flac\\\\\\\",\\\\n    \\\\\\\".ogg\\\\\\\",\\\\n    # ë¬¸ì„œ íŒŒì¼\\\\n    \\\\\\\".pdf\\\\\\\",\\\\n    \\\\\\\".doc\\\\\\\",\\\\n    \\\\\\\".docx\\\\\\\",\\\\n    \\\\\\\".ppt\\\\\\\",\\\\n    \\\\\\\".pptx\\\\\\\",\\\\n    \\\\\\\".xls\\\\\\\",\\\\n    \\\\\\\".xlsx\\\\\\\",\\\\n    # ê¸°íƒ€ ë°”ì´ë„ˆë¦¬ íŒŒì¼\\\\n    \\\\\\\".class\\\\\\\",\\\\n    \\\\\\\".pyc\\\\\\\",\\\\n    \\\\\\\".pyo\\\\\\\",\\\\n    \\\\\\\".db\\\\\\\",\\\\n    \\\\\\\".sqlite\\\\\\\",\\\\n    \\\\\\\".dat\\\\\\\",\\\\n}\\\\n\\\\n# ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nBINARY_FILENAMES = {\\\\n    \\\\\\\"gradlew\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.jar\\\\\\\",\\\\n    \\\\\\\"mvnw\\\\\\\",\\\\n    \\\\\\\"mvnw.cmd\\\\\\\",\\\\n    \\\\\\\".DS_Store\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.properties\\\\\\\",\\\\n    \\\\\\\"gradlew.bat\\\\\\\",\\\\n}\\\\n\\\\n# ë¬´ì‹œí•  í…ìŠ¤íŠ¸ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nIGNORE_FILENAMES = {\\\\n    \\\\\\\".gitignore\\\\\\\",\\\\n    \\\\\\\".gitmodules\\\\\\\",\\\\n    \\\\\\\".gitconfig\\\\\\\",\\\\n    \\\\\\\".git\\\\\\\",\\\\n    \\\\\\\".env\\\\\\\",\\\\n    \\\\\\\".env.local\\\\\\\",\\\\n    \\\\\\\".env.development\\\\\\\",\\\\n    \\\\\\\".env.production\\\\\\\",\\\\n    \\\\\\\".env.test\\\\\\\",\\\\n    \\\\\\\".env.development.local\\\\\\\",\\\\n    \\\\\\\".env.production.local\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef is_ignore_file(filename: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): í™•ì¸í•  íŒŒì¼ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        bool: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì´ë©´ True, ì•„ë‹ˆë©´ False\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os.path\\\\n\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return (\\\\n        ext in BINARY_EXTENSIONS\\\\n        or base_name in BINARY_FILENAMES\\\\n        or base_name in IGNORE_FILENAMES\\\\n    )\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_ignore_file(\\\\n            filename\\\\n        ):  # is_ignore_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ì œì™¸ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(\\\\n        f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íƒìƒ‰ ì™„ë£Œ ê²½ë¡œ: {current_dir}\\\\\\\"\\\\n    )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\".db\\\\\\\",\\\\n    \\\\\\\".sqlite\\\\\\\",\\\\n    \\\\\\\".dat\\\\\\\",\\\\n}\\\\n\\\\n# íŠ¹ìˆ˜ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nBINARY_FILENAMES = {\\\\n    \\\\\\\"gradlew\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.jar\\\\\\\",\\\\n    \\\\\\\"mvnw\\\\\\\",\\\\n    \\\\\\\"mvnw.cmd\\\\\\\",\\\\n    \\\\\\\".DS_Store\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.properties\\\\\\\",\\\\n    \\\\\\\"gradlew.bat\\\\\\\",\\\\n    \\\\\\\".gitignore\\\\\\\",\\\\n    \\\\\\\".gitmodules\\\\\\\",\\\\n    \\\\\\\".gitconfig\\\\\\\",\\\\n    \\\\\\\".git\\\\\\\",\\\\n    \\\\\\\".env\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\".db\\\\\\\",\\\\n    \\\\\\\".sqlite\\\\\\\",\\\\n    \\\\\\\".dat\\\\\\\",\\\\n}\\\\n\\\\n# ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nBINARY_FILENAMES = {\\\\n    \\\\\\\"gradlew\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.jar\\\\\\\",\\\\n    \\\\\\\"mvnw\\\\\\\",\\\\n    \\\\\\\"mvnw.cmd\\\\\\\",\\\\n    \\\\\\\".DS_Store\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.properties\\\\\\\",\\\\n    \\\\\\\"gradlew.bat\\\\\\\",\\\\n}\\\\n\\\\n# ë¬´ì‹œí•  í…ìŠ¤íŠ¸ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nIGNORE_FILENAMES = {\\\\n    \\\\\\\".gitignore\\\\\\\",\\\\n    \\\\\\\".gitmodules\\\\\\\",\\\\n    \\\\\\\".gitconfig\\\\\\\",\\\\n    \\\\\\\".git\\\\\\\",\\\\n    \\\\\\\".env\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 59}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\".env.development.local\\\\\\\",\\\\n    \\\\\\\".env.production.local\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef is_binary_file(filename: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): í™•ì¸í•  íŒŒì¼ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        bool: ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë©´ True, ì•„ë‹ˆë©´ False\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os.path\\\\n\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return ext in BINARY_EXTENSIONS or base_name in BINARY_FILENAMES\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\".env.development.local\\\\\\\",\\\\n    \\\\\\\".env.production.local\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef is_ignore_file(filename: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): í™•ì¸í•  íŒŒì¼ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        bool: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì´ë©´ True, ì•„ë‹ˆë©´ False\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os.path\\\\n\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return (\\\\n        ext in BINARY_EXTENSIONS\\\\n        or base_name in BINARY_FILENAMES\\\\n        or base_name in IGNORE_FILENAMES\\\\n    )\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n```\\\", \\\"line_number\\\": 86}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(\\\\n            filename\\\\n        ):  # is_binary_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_ignore_file(\\\\n            filename\\\\n        ):  # is_ignore_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ì œì™¸ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n```\\\", \\\"line_number\\\": 146}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root, is_ignore_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_ignore_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not review_request.use_full_context:\\\\n            raise ValueError(\\\\\\\"full context í”Œë˜ê·¸ê°€ ì¼œì ¸ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_ignore_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                if not request.file_content:\\\\n                    logger.warning(\\\\n                        f\\\\\\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\\\\\"\\\\n                    )\\\\n                    file_content = \\\\\\\"\\\\\\\"\\\\n                else:\\\\n                    file_content = request.file_content\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root, is_binary_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root, is_ignore_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_ignore_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_ignore_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n```\\\", \\\"line_number\\\": 123}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_is_binary_file.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_ignore_file\\\\n\\\\n\\\\nclass TestIsIgnoreFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n            (\\\\\\\"image.png\\\\\\\", True),\\\\n            (\\\\\\\"archive.zip\\\\\\\", True),\\\\n            (\\\\\\\"document.pdf\\\\\\\", True),\\\\n            (\\\\\\\"music.mp3\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n            (\\\\\\\"doc.txt\\\\\\\", False),\\\\n            (\\\\\\\"config.json\\\\\\\", False),\\\\n            (\\\\\\\"index.html\\\\\\\", False),\\\\n            (\\\\\\\"script.js\\\\\\\", False),\\\\n        ],\\\\n    )\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: ë¬´ì‹œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n            (\\\\\\\"gradlew\\\\\\\", True),\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_ignore_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¬´ì‹œí•´ì•¼ í•  íŠ¹ìˆ˜ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n            (\\\\\\\"src/main/resources/config.json\\\\\\\", False),\\\\n            (\\\\\\\"../project/gradlew\\\\\\\", True),\\\\n            (\\\\\\\"C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\user\\\\\\\\\\\\\\\\Documents\\\\\\\\\\\\\\\\file.txt\\\\\\\", False),\\\\n            (\\\\\\\"/var/www/html/.env.local\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_with_path(self, filepath: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê²½ë¡œê°€ í¬í•¨ëœ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filepath) == expected\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"is_binary_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\n\\\\n\\\\nclass TestIsBinaryFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_binary_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_ignore_file\\\\n\\\\n\\\\nclass TestIsIgnoreFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë°”ì´ë„ˆë¦¬ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n```\\\", \\\"line_number\\\": 21}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: í…ìŠ¤íŠ¸ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: ë¬´ì‹œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n```\\\", \\\"line_number\\\": 40}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ìˆ˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë°”ì´ë„ˆë¦¬ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_ignore_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¬´ì‹œí•´ì•¼ í•  íŠ¹ìˆ˜ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n```\\\", \\\"line_number\\\": 54}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filepath) == expected\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filepath) == expected\\\\n```\\\", \\\"line_number\\\": 80}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_is_ignore_file.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_ignore_file\\\\n\\\\n\\\\nclass TestIsIgnoreFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n            (\\\\\\\"image.png\\\\\\\", True),\\\\n            (\\\\\\\"archive.zip\\\\\\\", True),\\\\n            (\\\\\\\"document.pdf\\\\\\\", True),\\\\n            (\\\\\\\"music.mp3\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n            (\\\\\\\"doc.txt\\\\\\\", False),\\\\n            (\\\\\\\"config.json\\\\\\\", False),\\\\n            (\\\\\\\"index.html\\\\\\\", False),\\\\n            (\\\\\\\"script.js\\\\\\\", False),\\\\n        ],\\\\n    )\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: ë¬´ì‹œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n            (\\\\\\\"gradlew\\\\\\\", True),\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_ignore_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¬´ì‹œí•´ì•¼ í•  íŠ¹ìˆ˜ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n            (\\\\\\\"src/main/resources/config.json\\\\\\\", False),\\\\n            (\\\\\\\"../project/gradlew\\\\\\\", True),\\\\n            (\\\\\\\"C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\user\\\\\\\\\\\\\\\\Documents\\\\\\\\\\\\\\\\file.txt\\\\\\\", False),\\\\n            (\\\\\\\"/var/www/html/.env.local\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_with_path(self, filepath: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê²½ë¡œê°€ í¬í•¨ëœ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filepath) == expected\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_ignore_file\\\\n\\\\n\\\\nclass TestIsIgnoreFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_ignore_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n            (\\\\\\\"image.png\\\\\\\", True),\\\\n            (\\\\\\\"archive.zip\\\\\\\", True),\\\\n            (\\\\\\\"document.pdf\\\\\\\", True),\\\\n            (\\\\\\\"music.mp3\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n            (\\\\\\\"doc.txt\\\\\\\", False),\\\\n            (\\\\\\\"config.json\\\\\\\", False),\\\\n            (\\\\\\\"index.html\\\\\\\", False),\\\\n            (\\\\\\\"script.js\\\\\\\", False),\\\\n        ],\\\\n    )\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: ë¬´ì‹œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n            (\\\\\\\"gradlew\\\\\\\", True),\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_ignore_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¬´ì‹œí•´ì•¼ í•  íŠ¹ìˆ˜ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n            (\\\\\\\"src/main/resources/config.json\\\\\\\", False),\\\\n            (\\\\\\\"../project/gradlew\\\\\\\", True),\\\\n            (\\\\\\\"C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\user\\\\\\\\\\\\\\\\Documents\\\\\\\\\\\\\\\\file.txt\\\\\\\", False),\\\\n            (\\\\\\\"/var/www/html/.env.local\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_with_path(self, filepath: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê²½ë¡œê°€ í¬í•¨ëœ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_ignore_file(filepath) == expected\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_load_file_content.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"load_file_content í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import load_file_content\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef temp_repo_with_files(tmpdir) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ì €ì¥ì†Œì™€ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        tmpdir: pytestì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ í”½ìŠ¤ì²˜\\\\n\\\\n    Returns:\\\\n        str: ìƒì„±ëœ ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì„ì‹œ ì €ì¥ì†Œ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    repo_dir = tmpdir.mkdir(\\\\\\\"repo\\\\\\\")\\\\n\\\\n    # í…ìŠ¤íŠ¸ íŒŒì¼ ìƒì„±\\\\n    text_file = repo_dir.join(\\\\\\\"file.txt\\\\\\\")\\\\n    text_file.write(\\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ì¤‘ì²© ë””ë ‰í† ë¦¬ ë° íŒŒì¼ ìƒì„±\\\\n    subdir = repo_dir.mkdir(\\\\\\\"subdir\\\\\\\")\\\\n    subdir_file = subdir.join(\\\\\\\"subfile.py\\\\\\\")\\\\n    subdir_file.write(\\\\n        \\\\\\\"#!/usr/bin/env python\\\\\\\\n# -*- coding: utf-8 -*-\\\\\\\\n\\\\\\\\nprint('í…ŒìŠ¤íŠ¸')\\\\\\\"\\\\n    )\\\\n\\\\n    # ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼ë  íŒŒì¼ ìƒì„±\\\\n    binary_file = repo_dir.join(\\\\\\\"image.png\\\\\\\")\\\\n    binary_file.write(\\\\\\\"ê°€ì§œ ë°”ì´ë„ˆë¦¬ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ì™¸ë¶€ ë””ë ‰í† ë¦¬ (ì €ì¥ì†Œ ì™¸ë¶€ í…ŒìŠ¤íŠ¸ìš©)\\\\n    tmpdir.mkdir(\\\\\\\"outside\\\\\\\")\\\\n    outside_file = tmpdir.join(\\\\\\\"outside/outside.txt\\\\\\\")\\\\n    outside_file.write(\\\\\\\"ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼\\\\\\\")\\\\n\\\\n    return str(repo_dir)\\\\n\\\\n\\\\nclass TestLoadFileContent:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"load_file_content í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def test_text_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë¡œë”©ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\"\\\\n\\\\n    def test_nested_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì¤‘ì²© ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ ë¡œë”©ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"subdir/subfile.py\\\\\\\", temp_repo_with_files)\\\\n        assert \\\\\\\"print('í…ŒìŠ¤íŠ¸')\\\\\\\" in content\\\\n\\\\n    def test_file_not_found(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        with pytest.raises(Exception) as excinfo:\\\\n            load_file_content(\\\\\\\"non_existent.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ FileNotFoundErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, FileNotFoundError)\\\\n\\\\n    def test_permission_error(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼ ì ‘ê·¼ ì‹œë„ ì‹œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        with pytest.raises(Exception) as excinfo:\\\\n            load_file_content(\\\\\\\"../outside/outside.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ PermissionErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, PermissionError)\\\\n\\\\n    def test_binary_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì œì™¸ íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"image.png\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"[ì œì™¸ íŒŒì¼: image.png]\\\\\\\"\\\\n\\\\n    def test_lru_cache(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        # ì²« ë²ˆì§¸ í˜¸ì¶œë¡œ ìºì‹œ ì±„ìš°ê¸°\\\\n        first_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ë³€ê²½\\\\n        file_path = os.path.join(temp_repo_with_files, \\\\\\\"file.txt\\\\\\\")\\\\n        with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            f.write(\\\\\\\"ë³€ê²½ëœ ë‚´ìš©\\\\\\\")\\\\n\\\\n        # ê°™ì€ ë§¤ê°œë³€ìˆ˜ë¡œ ë‹¤ì‹œ í˜¸ì¶œ (ìºì‹œëœ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨)\\\\n        second_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        assert first_content == second_content\\\\n        assert second_content == \\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\"  # ë³€ê²½ ì „ ë‚´ìš©\\\\n\\\\n        # ìºì‹œ ì´ˆê¸°í™” í›„ ë‹¤ì‹œ í˜¸ì¶œ\\\\n        load_file_content.cache_clear()\\\\n        third_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        assert third_content != first_content\\\\n        assert third_content == \\\\\\\"ë³€ê²½ëœ ë‚´ìš©\\\\\\\"  # ë³€ê²½ í›„ ë‚´ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ PermissionErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, PermissionError)\\\\n\\\\n    def test_binary_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"image.png\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: image.png]\\\\\\\"\\\\n\\\\n    def test_lru_cache(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ PermissionErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, PermissionError)\\\\n\\\\n    def test_binary_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì œì™¸ íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"image.png\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"[ì œì™¸ íŒŒì¼: image.png]\\\\\\\"\\\\n\\\\n    def test_lru_cache(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n```\\\", \\\"line_number\\\": 99}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„±ëŠ¥\", \"line_number\": 106, \"file\": \"reviewer/src/utils/file_utils.py\", \"description\": \"`load_file_content` í•¨ìˆ˜ì— `@lru_cache(maxsize=1)`ì´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ê°€ì¥ ë§ˆì§€ë§‰ìœ¼ë¡œ í˜¸ì¶œëœ ë‹¨ì¼ íŒŒì¼ì˜ ë‚´ìš©ë§Œ ìºì‹œí•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë§Œì•½ ì—¬ëŸ¬ ë‹¤ë¥¸ íŒŒì¼ë“¤ì´ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œëœ í›„ ì´ì „ì— ë¡œë“œëœ íŒŒì¼ì´ ë‹¤ì‹œ ìš”ì²­ë  ê²½ìš°, ìºì‹œ ë¯¸ìŠ¤ê°€ ë°œìƒí•˜ì—¬ íŒŒì¼ì„ ë‹¤ì‹œ ì½ê²Œ ë©ë‹ˆë‹¤. ì½”ë“œ ë¦¬ë·°ì™€ ê°™ì´ ì—¬ëŸ¬ íŒŒì¼ì„ ë‹¤ë£° ê°€ëŠ¥ì„±ì´ ìˆëŠ” ê²½ìš°, ë” í° ìºì‹œ í¬ê¸°ê°€ ì„±ëŠ¥ í–¥ìƒì— ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŒŒì¼ ì ‘ê·¼ íŒ¨í„´ì„ ê³ ë ¤í•˜ì—¬ `maxsize`ë¥¼ ì ì ˆíˆ ëŠ˜ë¦¬ëŠ” ê²ƒì„ ê²€í† í•´ ë³´ì„¸ìš” (ì˜ˆ: `maxsize=32` ë˜ëŠ” `maxsize=128`). ì´ë ‡ê²Œ í•˜ë©´ ë” ë§ì€ íŒŒì¼ ë‚´ìš©ì„ ë©”ëª¨ë¦¬ì— ìºì‹œí•˜ì—¬ ë°˜ë³µì ì¸ íŒŒì¼ ì½ê¸° ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"@lru_cache(maxsize=1)\\ndef load_file_content(filename: str, repo_path: str) -> str:\", \"improved_code\": \"@lru_cache(maxsize=32)  # ì˜ˆì‹œë¡œ 32ë¡œ ëŠ˜ë¦¼, ì‹¤ì œ ê°’ì€ ì‚¬ìš© íŒ¨í„´ì— ë”°ë¼ ì¡°ì ˆ\\ndef load_file_content(filename: str, repo_path: str) -> str:\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 97, \"file\": \"reviewer/src/utils/file_utils.py\", \"description\": \"íŒŒì¼ ê²½ë¡œ ì¡°ì‘ì— `os.path`ì™€ `pathlib`ê°€ í˜¼ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `is_ignore_file` í•¨ìˆ˜ ë‚´ì—ì„œëŠ” `os.path.splitext`ì™€ `os.path.basename` (97-98í–‰)ì´ ì‚¬ìš©ë˜ëŠ” ë°˜ë©´, ê°™ì€ íŒŒì¼ì˜ `find_project_root` í•¨ìˆ˜ì—ì„œëŠ” `pathlib.Path` ê°ì²´ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. ì¼ê´€ì„±ì„ ìœ„í•´ í•˜ë‚˜ì˜ ìŠ¤íƒ€ì¼ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. `pathlib`ëŠ” ê°ì²´ ì§€í–¥ì  ì ‘ê·¼ ë°©ì‹ì„ ì œê³µí•˜ë©° í˜„ëŒ€ íŒŒì´ì¬ì—ì„œ ê¶Œì¥ë˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\", \"suggestion\": \"í”„ë¡œì íŠ¸ ì „ì²´ì ìœ¼ë¡œ `pathlib` ì‚¬ìš©ì„ í‘œì¤€í™”í•˜ì—¬ ì½”ë“œì˜ ì¼ê´€ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì´ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´, `os.path.splitext(filename.lower())`ì™€ `os.path.basename(filename)` ëŒ€ì‹  `Path(filename.lower()).suffix` ì™€ `Path(filename).name` ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (íŒŒì¼ ìƒë‹¨ì— `from pathlib import Path` ì¶”ê°€ í•„ìš”)\", \"severity\": \"info\", \"original_code\": \"    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ í™•ì¸\\n    _, ext = os.path.splitext(filename.lower())\\n    base_name = os.path.basename(filename)\", \"improved_code\": \"    from pathlib import Path # íŒŒì¼ ìƒë‹¨ì— import ì¶”ê°€ í•„ìš”\\n\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ í™•ì¸\\n    file_path_obj = Path(filename)\\n    ext = file_path_obj.suffix.lower() # í™•ì¥ìë§Œ ì†Œë¬¸ìë¡œ ë³€ê²½\\n    base_name = file_path_obj.name\"}], \"summary\": \"ì œê³µëœ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì€ ì²˜ë¦¬ ê³¼ì •ì—ì„œ ë¬´ì‹œí•´ì•¼ í•  íŒŒì¼ì„ ë‹¤ë£¨ëŠ” ë°©ì‹ì˜ ëª…í™•ì„±ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ë¦¬íŒ©í† ë§ì…ë‹ˆë‹¤. `is_binary_file` í•¨ìˆ˜ ë° ê´€ë ¨ ë¡œì§ì€ `is_ignore_file`ë¡œ ì´ë¦„ì´ ë³€ê²½ë˜ê³  í™•ì¥ë˜ì–´, ì´ì œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¿ë§Œ ì•„ë‹ˆë¼ `.gitignore`, `.env`ì™€ ê°™ì´ ê±´ë„ˆë›°ì–´ì•¼ í•˜ëŠ” íŠ¹ì • í…ìŠ¤íŠ¸ íŒŒì¼ë„ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€ê²½ ì‚¬í•­ì€ `prompt_generator` ë° ê´€ë ¨ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ì—ë„ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ëŠ” ì´ëŸ¬í•œ ë³€ê²½ ì‚¬í•­ì„ ë°˜ì˜í•˜ê³  ì •í™•ì„±ì„ ë³´ì¥í•˜ë„ë¡ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"ì—¬ëŸ¬ ê³ ìœ í•œ íŒŒì¼ì— ìì£¼ ì ‘ê·¼í•˜ê³  ì¬ì ‘ê·¼í•˜ëŠ” ê²½ìš°, ë””ìŠ¤í¬ I/Oë¥¼ ì¤„ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ `load_file_content` í•¨ìˆ˜ì˜ `lru_cache` maxsizeë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.\", \"ê°€ë…ì„± ë° í”Œë«í¼ ê°„ í˜¸í™˜ì„± í–¥ìƒì„ ìœ„í•´, ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì ìœ¼ë¡œ `os.path` ëŒ€ì‹  `pathlib`ì˜ `Path` ê°ì²´ë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_find_project_root.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"find_project_root í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom pathlib import Path\\\\nfrom unittest import mock\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef project_structure(tmpdir):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TestFindProjectRoot í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        tmpdir: pytestì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ í”½ìŠ¤ì²˜\\\\n\\\\n    Returns:\\\\n        tuple[Path, Path, Path]: (project_dir, src_dir, module_file) íŠœí”Œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì„ì‹œ ë””ë ‰í† ë¦¬ì— í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±\\\\n    project_dir = Path(tmpdir) / \\\\\\\"project\\\\\\\"\\\\n    src_dir = project_dir / \\\\\\\"src\\\\\\\" / \\\\\\\"utils\\\\\\\"\\\\n    src_dir.mkdir(parents=True)\\\\n\\\\n    # ëª¨ë“ˆ íŒŒì¼ ìƒì„±\\\\n    module_file = src_dir / \\\\\\\"file_utils.py\\\\\\\"\\\\n    module_file.touch()\\\\n\\\\n    return project_dir, src_dir, module_file\\\\n\\\\n\\\\nclass TestFindProjectRoot:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"find_project_root í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def test_found_git_root(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Git ì €ì¥ì†Œ ë£¨íŠ¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì°¾ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        project_dir, _, module_file = project_structure\\\\n\\\\n        # .git ë””ë ‰í† ë¦¬ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸ í‘œì‹œ)\\\\n        git_dir = project_dir / \\\\\\\".git\\\\\\\"\\\\n        git_dir.mkdir()\\\\n\\\\n        # __file__ ê°’ì„ ëª¨í‚¹í•˜ì—¬ find_project_root ë‚´ë¶€ì—ì„œ ì˜¬ë°”ë¥¸ ì‹œì‘ì ì„ ê°–ë„ë¡ í•¨\\\\n        with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n            root = find_project_root()\\\\n            # ì •ê·œí™”ëœ ê²½ë¡œë¡œ ë¹„êµ\\\\n            assert str(root.resolve()) == str(project_dir.resolve())\\\\n\\\\n    def test_found_pyproject_root(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"pyproject.tomlì´ ìˆëŠ” ë£¨íŠ¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì°¾ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        project_dir, _, module_file = project_structure\\\\n\\\\n        # pyproject.toml íŒŒì¼ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸ í‘œì‹œ)\\\\n        pyproject_file = project_dir / \\\\\\\"pyproject.toml\\\\\\\"\\\\n        pyproject_file.touch()\\\\n\\\\n        # __file__ ê°’ì„ ëª¨í‚¹í•˜ì—¬ find_project_root ë‚´ë¶€ì—ì„œ ì˜¬ë°”ë¥¸ ì‹œì‘ì ì„ ê°–ë„ë¡ í•¨\\\\n        with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n            root = find_project_root()\\\\n            # ì •ê·œí™”ëœ ê²½ë¡œë¡œ ë¹„êµ\\\\n            assert str(root.resolve()) == str(project_dir.resolve())\\\\n\\\\n    def test_root_not_found(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ì§€ ëª»í•  ë•Œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        _, _, module_file = project_structure\\\\n\\\\n        # exists ë©”ì„œë“œ ëª¨í‚¹í•˜ì—¬ í•­ìƒ False ë°˜í™˜í•˜ë„ë¡ ì„¤ì •\\\\n        with mock.patch(\\\\\\\"pathlib.Path.exists\\\\\\\", return_value=False):\\\\n            # __file__ ê°’ì„ ëª¨í‚¹í•˜ì—¬ find_project_root ë‚´ë¶€ì—ì„œ ì˜¬ë°”ë¥¸ ì‹œì‘ì ì„ ê°–ë„ë¡ í•¨\\\\n            with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n                with pytest.raises(FileNotFoundError):\\\\n                    find_project_root()\\\\n\\\\n    def test_lru_cache(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        project_dir, _, module_file = project_structure\\\\n\\\\n        # .git ë””ë ‰í† ë¦¬ ìƒì„±\\\\n        git_dir = project_dir / \\\\\\\".git\\\\\\\"\\\\n        git_dir.mkdir()\\\\n\\\\n        # __file__ ê°’ ëª¨í‚¹\\\\n        with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n            # ì²« ë²ˆì§¸ í˜¸ì¶œ\\\\n            first_result = find_project_root()\\\\n\\\\n            # .git ë””ë ‰í† ë¦¬ ì‚­ì œ í›„ requirements.txt ìƒì„±\\\\n            git_dir.rmdir()\\\\n            req_file = project_dir / \\\\\\\"requirements.txt\\\\\\\"\\\\n            req_file.touch()\\\\n\\\\n            # ë‘ ë²ˆì§¸ í˜¸ì¶œ (ìºì‹œëœ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨)\\\\n            second_result = find_project_root()\\\\n\\\\n            # ì •ê·œí™”ëœ ê²½ë¡œë¡œ ë¹„êµ\\\\n            assert str(first_result.resolve()) == str(second_result.resolve())\\\\n            assert str(second_result.resolve()) == str(project_dir.resolve())\\\\n\\\\n            # ìºì‹œ ì´ˆê¸°í™” í›„ ë‹¤ì‹œ í˜¸ì¶œ\\\\n            find_project_root.cache_clear()\\\\n\\\\n            # ì„¸ ë²ˆì§¸ í˜¸ì¶œ (ìƒˆ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨, í•˜ì§€ë§Œ ì—¬ì „íˆ ê°™ì€ ë””ë ‰í† ë¦¬)\\\\n            third_result = find_project_root()\\\\n            assert str(third_result.resolve()) == str(project_dir.resolve())\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"find_project_root í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom pathlib import Path\\\\nfrom unittest import mock\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef project_structure(tmpdir):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TestFindProjectRoot í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        tmpdir: pytestì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ í”½ìŠ¤ì²˜\\\\n\\\\n    Returns:\\\\n        tuple[Path, Path, Path]: (project_dir, src_dir, module_file) íŠœí”Œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì„ì‹œ ë””ë ‰í† ë¦¬ì— í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±\\\\n    project_dir = Path(tmpdir) / \\\\\\\"project\\\\\\\"\\\\n    src_dir = project_dir / \\\\\\\"src\\\\\\\" / \\\\\\\"utils\\\\\\\"\\\\n    src_dir.mkdir(parents=True)\\\\n\\\\n    # ëª¨ë“ˆ íŒŒì¼ ìƒì„±\\\\n    module_file = src_dir / \\\\\\\"file_utils.py\\\\\\\"\\\\n    module_file.touch()\\\\n\\\\n    return project_dir, src_dir, module_file\\\\n\\\\n\\\\nclass TestFindProjectRoot:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"find_project_root í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def test_found_git_root(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Git ì €ì¥ì†Œ ë£¨íŠ¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì°¾ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        project_dir, _, module_file = project_structure\\\\n\\\\n        # .git ë””ë ‰í† ë¦¬ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸ í‘œì‹œ)\\\\n        git_dir = project_dir / \\\\\\\".git\\\\\\\"\\\\n        git_dir.mkdir()\\\\n\\\\n        # __file__ ê°’ì„ ëª¨í‚¹í•˜ì—¬ find_project_root ë‚´ë¶€ì—ì„œ ì˜¬ë°”ë¥¸ ì‹œì‘ì ì„ ê°–ë„ë¡ í•¨\\\\n        with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n            root = find_project_root()\\\\n            # ì •ê·œí™”ëœ ê²½ë¡œë¡œ ë¹„êµ\\\\n            assert str(root.resolve()) == str(project_dir.resolve())\\\\n\\\\n    def test_found_pyproject_root(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"pyproject.tomlì´ ìˆëŠ” ë£¨íŠ¸ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì°¾ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        project_dir, _, module_file = project_structure\\\\n\\\\n        # pyproject.toml íŒŒì¼ ìƒì„± (í”„ë¡œì íŠ¸ ë£¨íŠ¸ í‘œì‹œ)\\\\n        pyproject_file = project_dir / \\\\\\\"pyproject.toml\\\\\\\"\\\\n        pyproject_file.touch()\\\\n\\\\n        # __file__ ê°’ì„ ëª¨í‚¹í•˜ì—¬ find_project_root ë‚´ë¶€ì—ì„œ ì˜¬ë°”ë¥¸ ì‹œì‘ì ì„ ê°–ë„ë¡ í•¨\\\\n        with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n            root = find_project_root()\\\\n            # ì •ê·œí™”ëœ ê²½ë¡œë¡œ ë¹„êµ\\\\n            assert str(root.resolve()) == str(project_dir.resolve())\\\\n\\\\n    def test_root_not_found(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ì§€ ëª»í•  ë•Œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        _, _, module_file = project_structure\\\\n\\\\n        # exists ë©”ì„œë“œ ëª¨í‚¹í•˜ì—¬ í•­ìƒ False ë°˜í™˜í•˜ë„ë¡ ì„¤ì •\\\\n        with mock.patch(\\\\\\\"pathlib.Path.exists\\\\\\\", return_value=False):\\\\n            # __file__ ê°’ì„ ëª¨í‚¹í•˜ì—¬ find_project_root ë‚´ë¶€ì—ì„œ ì˜¬ë°”ë¥¸ ì‹œì‘ì ì„ ê°–ë„ë¡ í•¨\\\\n            with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n                with pytest.raises(FileNotFoundError):\\\\n                    find_project_root()\\\\n\\\\n    def test_lru_cache(self, project_structure) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        find_project_root.cache_clear()\\\\n\\\\n        project_dir, _, module_file = project_structure\\\\n\\\\n        # .git ë””ë ‰í† ë¦¬ ìƒì„±\\\\n        git_dir = project_dir / \\\\\\\".git\\\\\\\"\\\\n        git_dir.mkdir()\\\\n\\\\n        # __file__ ê°’ ëª¨í‚¹\\\\n        with mock.patch(\\\\\\\"reviewer.src.utils.file_utils.__file__\\\\\\\", str(module_file)):\\\\n            # ì²« ë²ˆì§¸ í˜¸ì¶œ\\\\n            first_result = find_project_root()\\\\n\\\\n            # .git ë””ë ‰í† ë¦¬ ì‚­ì œ í›„ requirements.txt ìƒì„±\\\\n            git_dir.rmdir()\\\\n            req_file = project_dir / \\\\\\\"requirements.txt\\\\\\\"\\\\n            req_file.touch()\\\\n\\\\n            # ë‘ ë²ˆì§¸ í˜¸ì¶œ (ìºì‹œëœ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨)\\\\n            second_result = find_project_root()\\\\n\\\\n            # ì •ê·œí™”ëœ ê²½ë¡œë¡œ ë¹„êµ\\\\n            assert str(first_result.resolve()) == str(second_result.resolve())\\\\n            assert str(second_result.resolve()) == str(project_dir.resolve())\\\\n\\\\n            # ìºì‹œ ì´ˆê¸°í™” í›„ ë‹¤ì‹œ í˜¸ì¶œ\\\\n            find_project_root.cache_clear()\\\\n\\\\n            # ì„¸ ë²ˆì§¸ í˜¸ì¶œ (ìƒˆ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨, í•˜ì§€ë§Œ ì—¬ì „íˆ ê°™ì€ ë””ë ‰í† ë¦¬)\\\\n            third_result = find_project_root()\\\\n            assert str(third_result.resolve()) == str(project_dir.resolve())\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_is_binary_file.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"is_binary_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\n\\\\n\\\\nclass TestIsBinaryFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_binary_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n            (\\\\\\\"image.png\\\\\\\", True),\\\\n            (\\\\\\\"archive.zip\\\\\\\", True),\\\\n            (\\\\\\\"document.pdf\\\\\\\", True),\\\\n            (\\\\\\\"music.mp3\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë°”ì´ë„ˆë¦¬ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n            (\\\\\\\"doc.txt\\\\\\\", False),\\\\n            (\\\\\\\"config.json\\\\\\\", False),\\\\n            (\\\\\\\"index.html\\\\\\\", False),\\\\n            (\\\\\\\"script.js\\\\\\\", False),\\\\n        ],\\\\n    )\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: í…ìŠ¤íŠ¸ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n            (\\\\\\\"gradlew\\\\\\\", True),\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ìˆ˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë°”ì´ë„ˆë¦¬ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n            (\\\\\\\"src/main/resources/config.json\\\\\\\", False),\\\\n            (\\\\\\\"../project/gradlew\\\\\\\", True),\\\\n            (\\\\\\\"C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\user\\\\\\\\\\\\\\\\Documents\\\\\\\\\\\\\\\\file.txt\\\\\\\", False),\\\\n            (\\\\\\\"/var/www/html/.env.local\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_with_path(self, filepath: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê²½ë¡œê°€ í¬í•¨ëœ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filepath) == expected\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"is_binary_file í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\n\\\\n\\\\nclass TestIsBinaryFile:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"is_binary_file í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"test.exe\\\\\\\", True),\\\\n            (\\\\\\\"image.png\\\\\\\", True),\\\\n            (\\\\\\\"archive.zip\\\\\\\", True),\\\\n            (\\\\\\\"document.pdf\\\\\\\", True),\\\\n            (\\\\\\\"music.mp3\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë°”ì´ë„ˆë¦¬ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"code.py\\\\\\\", False),\\\\n            (\\\\\\\"doc.txt\\\\\\\", False),\\\\n            (\\\\\\\"config.json\\\\\\\", False),\\\\n            (\\\\\\\"index.html\\\\\\\", False),\\\\n            (\\\\\\\"script.js\\\\\\\", False),\\\\n        ],\\\\n    )\\\\n    def test_text_extension(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (False: í…ìŠ¤íŠ¸ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filename,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\".DS_Store\\\\\\\", True),\\\\n            (\\\\\\\"gradlew\\\\\\\", True),\\\\n            (\\\\\\\".env\\\\\\\", True),\\\\n            (\\\\\\\".gitignore\\\\\\\", True),\\\\n            (\\\\\\\"gradle-wrapper.properties\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_binary_filename(self, filename: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ìˆ˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filename: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ëª…\\\\n            expected: ì˜ˆìƒ ê²°ê³¼ (True: ë°”ì´ë„ˆë¦¬ íŒŒì¼)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filename) == expected\\\\n\\\\n    @pytest.mark.parametrize(\\\\n        \\\\\\\"filepath,expected\\\\\\\",\\\\n        [\\\\n            (\\\\\\\"/path/to/image.jpg\\\\\\\", True),\\\\n            (\\\\\\\"src/main/resources/config.json\\\\\\\", False),\\\\n            (\\\\\\\"../project/gradlew\\\\\\\", True),\\\\n            (\\\\\\\"C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\user\\\\\\\\\\\\\\\\Documents\\\\\\\\\\\\\\\\file.txt\\\\\\\", False),\\\\n            (\\\\\\\"/var/www/html/.env.local\\\\\\\", True),\\\\n        ],\\\\n    )\\\\n    def test_with_path(self, filepath: str, expected: bool) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê²½ë¡œê°€ í¬í•¨ëœ íŒŒì¼ëª…ì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            filepath: í…ŒìŠ¤íŠ¸í•  íŒŒì¼ ê²½ë¡œ\\\\n            expected: ì˜ˆìƒ ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        assert is_binary_file(filepath) == expected\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/utils/test_load_file_content.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"load_file_content í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import load_file_content\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef temp_repo_with_files(tmpdir) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ì €ì¥ì†Œì™€ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        tmpdir: pytestì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ í”½ìŠ¤ì²˜\\\\n\\\\n    Returns:\\\\n        str: ìƒì„±ëœ ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì„ì‹œ ì €ì¥ì†Œ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    repo_dir = tmpdir.mkdir(\\\\\\\"repo\\\\\\\")\\\\n\\\\n    # í…ìŠ¤íŠ¸ íŒŒì¼ ìƒì„±\\\\n    text_file = repo_dir.join(\\\\\\\"file.txt\\\\\\\")\\\\n    text_file.write(\\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ì¤‘ì²© ë””ë ‰í† ë¦¬ ë° íŒŒì¼ ìƒì„±\\\\n    subdir = repo_dir.mkdir(\\\\\\\"subdir\\\\\\\")\\\\n    subdir_file = subdir.join(\\\\\\\"subfile.py\\\\\\\")\\\\n    subdir_file.write(\\\\n        \\\\\\\"#!/usr/bin/env python\\\\\\\\n# -*- coding: utf-8 -*-\\\\\\\\n\\\\\\\\nprint('í…ŒìŠ¤íŠ¸')\\\\\\\"\\\\n    )\\\\n\\\\n    # ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼ë  íŒŒì¼ ìƒì„±\\\\n    binary_file = repo_dir.join(\\\\\\\"image.png\\\\\\\")\\\\n    binary_file.write(\\\\\\\"ê°€ì§œ ë°”ì´ë„ˆë¦¬ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ì™¸ë¶€ ë””ë ‰í† ë¦¬ (ì €ì¥ì†Œ ì™¸ë¶€ í…ŒìŠ¤íŠ¸ìš©)\\\\n    tmpdir.mkdir(\\\\\\\"outside\\\\\\\")\\\\n    outside_file = tmpdir.join(\\\\\\\"outside/outside.txt\\\\\\\")\\\\n    outside_file.write(\\\\\\\"ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼\\\\\\\")\\\\n\\\\n    return str(repo_dir)\\\\n\\\\n\\\\nclass TestLoadFileContent:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"load_file_content í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def test_text_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë¡œë”©ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\"\\\\n\\\\n    def test_nested_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì¤‘ì²© ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ ë¡œë”©ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"subdir/subfile.py\\\\\\\", temp_repo_with_files)\\\\n        assert \\\\\\\"print('í…ŒìŠ¤íŠ¸')\\\\\\\" in content\\\\n\\\\n    def test_file_not_found(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        with pytest.raises(Exception) as excinfo:\\\\n            load_file_content(\\\\\\\"non_existent.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ FileNotFoundErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, FileNotFoundError)\\\\n\\\\n    def test_permission_error(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼ ì ‘ê·¼ ì‹œë„ ì‹œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        with pytest.raises(Exception) as excinfo:\\\\n            load_file_content(\\\\\\\"../outside/outside.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ PermissionErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, PermissionError)\\\\n\\\\n    def test_binary_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"image.png\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: image.png]\\\\\\\"\\\\n\\\\n    def test_lru_cache(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        # ì²« ë²ˆì§¸ í˜¸ì¶œë¡œ ìºì‹œ ì±„ìš°ê¸°\\\\n        first_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ë³€ê²½\\\\n        file_path = os.path.join(temp_repo_with_files, \\\\\\\"file.txt\\\\\\\")\\\\n        with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            f.write(\\\\\\\"ë³€ê²½ëœ ë‚´ìš©\\\\\\\")\\\\n\\\\n        # ê°™ì€ ë§¤ê°œë³€ìˆ˜ë¡œ ë‹¤ì‹œ í˜¸ì¶œ (ìºì‹œëœ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨)\\\\n        second_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        assert first_content == second_content\\\\n        assert second_content == \\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\"  # ë³€ê²½ ì „ ë‚´ìš©\\\\n\\\\n        # ìºì‹œ ì´ˆê¸°í™” í›„ ë‹¤ì‹œ í˜¸ì¶œ\\\\n        load_file_content.cache_clear()\\\\n        third_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        assert third_content != first_content\\\\n        assert third_content == \\\\\\\"ë³€ê²½ëœ ë‚´ìš©\\\\\\\"  # ë³€ê²½ í›„ ë‚´ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"load_file_content í•¨ìˆ˜ì— ëŒ€í•œ ìœ ë‹› í…ŒìŠ¤íŠ¸.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\n\\\\nimport pytest\\\\n\\\\nfrom reviewer.src.utils.file_utils import load_file_content\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef temp_repo_with_files(tmpdir) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í…ŒìŠ¤íŠ¸ìš© ì„ì‹œ ì €ì¥ì†Œì™€ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        tmpdir: pytestì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ í”½ìŠ¤ì²˜\\\\n\\\\n    Returns:\\\\n        str: ìƒì„±ëœ ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì„ì‹œ ì €ì¥ì†Œ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    repo_dir = tmpdir.mkdir(\\\\\\\"repo\\\\\\\")\\\\n\\\\n    # í…ìŠ¤íŠ¸ íŒŒì¼ ìƒì„±\\\\n    text_file = repo_dir.join(\\\\\\\"file.txt\\\\\\\")\\\\n    text_file.write(\\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ì¤‘ì²© ë””ë ‰í† ë¦¬ ë° íŒŒì¼ ìƒì„±\\\\n    subdir = repo_dir.mkdir(\\\\\\\"subdir\\\\\\\")\\\\n    subdir_file = subdir.join(\\\\\\\"subfile.py\\\\\\\")\\\\n    subdir_file.write(\\\\n        \\\\\\\"#!/usr/bin/env python\\\\\\\\n# -*- coding: utf-8 -*-\\\\\\\\n\\\\\\\\nprint('í…ŒìŠ¤íŠ¸')\\\\\\\"\\\\n    )\\\\n\\\\n    # ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼ë  íŒŒì¼ ìƒì„±\\\\n    binary_file = repo_dir.join(\\\\\\\"image.png\\\\\\\")\\\\n    binary_file.write(\\\\\\\"ê°€ì§œ ë°”ì´ë„ˆë¦¬ ë‚´ìš©\\\\\\\")\\\\n\\\\n    # ì™¸ë¶€ ë””ë ‰í† ë¦¬ (ì €ì¥ì†Œ ì™¸ë¶€ í…ŒìŠ¤íŠ¸ìš©)\\\\n    tmpdir.mkdir(\\\\\\\"outside\\\\\\\")\\\\n    outside_file = tmpdir.join(\\\\\\\"outside/outside.txt\\\\\\\")\\\\n    outside_file.write(\\\\\\\"ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼\\\\\\\")\\\\n\\\\n    return str(repo_dir)\\\\n\\\\n\\\\nclass TestLoadFileContent:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"load_file_content í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def test_text_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë¡œë”©ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\"\\\\n\\\\n    def test_nested_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì¤‘ì²© ë””ë ‰í† ë¦¬ ë‚´ íŒŒì¼ ë¡œë”©ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"subdir/subfile.py\\\\\\\", temp_repo_with_files)\\\\n        assert \\\\\\\"print('í…ŒìŠ¤íŠ¸')\\\\\\\" in content\\\\n\\\\n    def test_file_not_found(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        with pytest.raises(Exception) as excinfo:\\\\n            load_file_content(\\\\\\\"non_existent.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ FileNotFoundErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, FileNotFoundError)\\\\n\\\\n    def test_permission_error(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼ ì ‘ê·¼ ì‹œë„ ì‹œ ì ì ˆí•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        with pytest.raises(Exception) as excinfo:\\\\n            load_file_content(\\\\\\\"../outside/outside.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # ì›ë˜ ì˜ˆì™¸ê°€ PermissionErrorì¸ì§€ í™•ì¸\\\\n        assert isinstance(excinfo.value.__cause__, PermissionError)\\\\n\\\\n    def test_binary_file(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë¡œë”© ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        content = load_file_content(\\\\\\\"image.png\\\\\\\", temp_repo_with_files)\\\\n        assert content == \\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: image.png]\\\\\\\"\\\\n\\\\n    def test_lru_cache(self, temp_repo_with_files: str) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìºì‹± ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            temp_repo_with_files: ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œ í”½ìŠ¤ì²˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í…ŒìŠ¤íŠ¸ ì „ ìºì‹œ ì´ˆê¸°í™”\\\\n        load_file_content.cache_clear()\\\\n\\\\n        # ì²« ë²ˆì§¸ í˜¸ì¶œë¡œ ìºì‹œ ì±„ìš°ê¸°\\\\n        first_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ë³€ê²½\\\\n        file_path = os.path.join(temp_repo_with_files, \\\\\\\"file.txt\\\\\\\")\\\\n        with open(file_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            f.write(\\\\\\\"ë³€ê²½ëœ ë‚´ìš©\\\\\\\")\\\\n\\\\n        # ê°™ì€ ë§¤ê°œë³€ìˆ˜ë¡œ ë‹¤ì‹œ í˜¸ì¶œ (ìºì‹œëœ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•¨)\\\\n        second_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        assert first_content == second_content\\\\n        assert second_content == \\\\\\\"í…ìŠ¤íŠ¸ íŒŒì¼ ë‚´ìš©\\\\\\\"  # ë³€ê²½ ì „ ë‚´ìš©\\\\n\\\\n        # ìºì‹œ ì´ˆê¸°í™” í›„ ë‹¤ì‹œ í˜¸ì¶œ\\\\n        load_file_content.cache_clear()\\\\n        third_content = load_file_content(\\\\\\\"file.txt\\\\\\\", temp_repo_with_files)\\\\n\\\\n        assert third_content != first_content\\\\n        assert third_content == \\\\\\\"ë³€ê²½ëœ ë‚´ìš©\\\\\\\"  # ë³€ê²½ í›„ ë‚´ìš©\\\\n```\\\", \\\"line_number\\\": 1}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 37, \"file\": \"tests/utils/test_find_project_root.py\", \"description\": \"Path ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµí•˜ëŠ” ê²ƒì€ Path ê°ì²´ë¥¼ ì§ì ‘ ë¹„êµí•˜ëŠ” ê²ƒë³´ë‹¤ ì¥í™©í•˜ë©°, pathlibì˜ ì´ì ì„ ì¶©ë¶„íˆ í™œìš©í•˜ì§€ ëª»í•©ë‹ˆë‹¤. resolve()ë¥¼ í˜¸ì¶œí•œ í›„ Path ê°ì²´ë¥¼ ì§ì ‘ ë¹„êµí•˜ëŠ” ê²ƒì´ ë” Pythonicí•˜ê³  ëª…í™•í•©ë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” 37, 49, 64, 93, 94, 98 ë¼ì¸ ë“± ì—¬ëŸ¬ ê³³ì—ì„œ ë°œê²¬ë©ë‹ˆë‹¤.\", \"suggestion\": \"assert root.resolve() == project_dir.resolve()ì™€ ê°™ì´ Path ê°ì²´ë¥¼ ì§ì ‘ ë¹„êµí•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"assert str(root.resolve()) == str(project_dir.resolve())\", \"improved_code\": \"assert root.resolve() == project_dir.resolve()\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 45, \"file\": \"tests/utils/test_is_binary_file.py\", \"description\": \"test_binary_filename í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì—ì„œ .gitignore (ë¼ì¸ 45), .env (ë¼ì¸ 44), gradle-wrapper.properties (ë¼ì¸ 46) íŒŒì¼ë“¤ì´ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ì˜ˆìƒ(expected=True)ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì´ëŸ¬í•œ íŒŒì¼ë“¤ì€ í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤. ë§Œì•½ is_binary_file í•¨ìˆ˜ê°€ ì‹¤ì œë¡œ ì´ íŒŒì¼ë“¤ì„ ë°”ì´ë„ˆë¦¬ë¡œ íŒë‹¨í•œë‹¤ë©´, í•¨ìˆ˜ì˜ ë¡œì§ ë˜ëŠ” íŒŒì¼ ìœ í˜• ë¶„ë¥˜ ê¸°ì¤€ì— ëŒ€í•œ ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ” í˜„ì¬ í•¨ìˆ˜ì˜ ë™ì‘ì„ ë°˜ì˜í•  ìˆ˜ ìˆì§€ë§Œ, ê·¸ ë™ì‘ ìì²´ê°€ ì˜¬ë°”ë¥¸ì§€ì— ëŒ€í•œ ì˜ë¬¸ì´ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \".env, .gitignore, gradle-wrapper.properties íŒŒì¼ë“¤ì´ ì‹¤ì œë¡œ ë°”ì´ë„ˆë¦¬ë¡œ ì·¨ê¸‰ë˜ì–´ì•¼ í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ is_binary_file í•¨ìˆ˜ì˜ ë¡œì§ì„ ìˆ˜ì •í•˜ê±°ë‚˜ í…ŒìŠ¤íŠ¸ì˜ ì˜ˆìƒ ê²°ê³¼ë¥¼ Falseë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, .gitignoreëŠ” ëª…ë°±í•œ í…ìŠ¤íŠ¸ íŒŒì¼ì…ë‹ˆë‹¤. is_binary_file í•¨ìˆ˜ê°€ ì˜ë„ì ìœ¼ë¡œ ì´ë“¤ì„ ë°”ì´ë„ˆë¦¬ë¡œ íŒë‹¨í•œë‹¤ë©´, ê·¸ ì´ìœ ì— ëŒ€í•œ ì£¼ì„ì´ë‚˜ ë¬¸ì„œí™”ê°€ í•„ìš”í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"            (\\\".DS_Store\\\", True),\\n            (\\\"gradlew\\\", True),\\n            (\\\".env\\\", True),\\n            (\\\".gitignore\\\", True),\\n            (\\\"gradle-wrapper.properties\\\", True),\", \"improved_code\": \"            (\\\".DS_Store\\\", True),  # .DS_StoreëŠ” ë°”ì´ë„ˆë¦¬ì¼ ìˆ˜ ìˆìŒ\\n            (\\\"gradlew\\\", True),    # gradlewëŠ” ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ì´ì§€ë§Œ, ë‚´ìš©ì— ë”°ë¼ ë°”ì´ë„ˆë¦¬ë¡œ ì˜¤ì¸ë  ìˆ˜ ìˆëŠ” ë°”ì´íŠ¸ê°€ ìˆì„ ìˆ˜ ìˆìŒ (í™•ì¸ í•„ìš”)\\n            (\\\".env\\\", False),      # .env íŒŒì¼ì€ ì¼ë°˜ì ìœ¼ë¡œ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤.\\n            (\\\".gitignore\\\", False), # .gitignore íŒŒì¼ì€ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤.\\n            (\\\"gradle-wrapper.properties\\\", False), # .properties íŒŒì¼ì€ í…ìŠ¤íŠ¸ì…ë‹ˆë‹¤.\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 32, \"file\": \"tests/utils/test_load_file_content.py\", \"description\": \"temp_repo_with_files í”½ìŠ¤ì²˜ê°€ ì„ì‹œ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜í•˜ê³  (ë¼ì¸ 32), í…ŒìŠ¤íŠ¸ ë‚´ë¶€(ì˜ˆ: ë¼ì¸ 96)ì—ì„œ os.path.joinì„ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì¡°ì‘í•©ë‹ˆë‹¤. pathlib.Path ê°ì²´ë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ë©´ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. tmpdir ìì²´ê°€ py.path.local ê°ì²´ë¥¼ ì œê³µí•˜ë©°, ì´ë¥¼ Pathë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"í”½ìŠ¤ì²˜ê°€ Path ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •í•˜ê³  (ì˜ˆ: def temp_repo_with_files(tmpdir) -> Path: ... return Path(repo_dir)), í…ŒìŠ¤íŠ¸ ë‚´ì—ì„œë„ Path ê°ì²´ì˜ ì—°ì‚°ì(ì˜ˆ: /)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì¡°ì‘í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš” (ì˜ˆ: file_path = temp_repo_with_files / \\\"file.txt\\\").\", \"severity\": \"info\", \"original_code\": \"@pytest.fixture\\ndef temp_repo_with_files(tmpdir) -> str:\\n    # ...\\n    repo_dir = tmpdir.mkdir(\\\"repo\\\")\\n    # ...\\n    return str(repo_dir)\\n\\n# í…ŒìŠ¤íŠ¸ ë‚´ ì‚¬ìš© ì˜ˆì‹œ (96ë¼ì¸)\\n# file_path = os.path.join(temp_repo_with_files, \\\"file.txt\\\")\", \"improved_code\": \"from pathlib import Path # íŒŒì¼ ìƒë‹¨ì— ì¶”ê°€\\n\\n@pytest.fixture\\ndef temp_repo_with_files(tmpdir) -> Path:\\n    # ...\\n    repo_dir = Path(tmpdir.mkdir(\\\"repo\\\"))\\n    # ...\\n    return repo_dir\\n\\n# í…ŒìŠ¤íŠ¸ ë‚´ ì‚¬ìš© ì˜ˆì‹œ\\n# file_path = temp_repo_with_files / \\\"file.txt\\\"\"}], \"summary\": \"ì œê³µëœ Python í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤ì€ file_utilsì˜ ì„¸ ê°€ì§€ í•¨ìˆ˜(find_project_root, is_binary_file, load_file_content)ì— ëŒ€í•´ ì „ë°˜ì ìœ¼ë¡œ ì–‘í˜¸í•œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ê¸ì •ì  ë° ë¶€ì •ì  ì‹œë‚˜ë¦¬ì˜¤, ìºì‹± ë™ì‘ ë“±ì„ í¬í•¨í•˜ì—¬ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì£¼ìš” ê°œì„  ì˜ì—­ìœ¼ë¡œëŠ” ê²½ë¡œ ê°ì²´ ë¹„êµ í‘œì¤€í™”, is_binary_file í…ŒìŠ¤íŠ¸ì—ì„œ íŠ¹ì • íŒŒì¼ ìœ í˜• ë¶„ë¥˜ ë¡œì§(ë˜ëŠ” í…ŒìŠ¤íŠ¸ ê¸°ëŒ€ì¹˜) ê²€í† , í…ŒìŠ¤íŠ¸ ë‚´ ê²½ë¡œ ì¡°ì‘ ì¼ê´€ì„± í–¥ìƒ ë“±ì´ ìˆìŠµë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"íŒŒì¼ ìœ í˜• ë¶„ë¥˜ ê²€ì¦: is_binary_file í•¨ìˆ˜(ë˜ëŠ” í•´ë‹¹ í•¨ìˆ˜ì˜ í…ŒìŠ¤íŠ¸)ì—ì„œ .gitignore, .env, .propertiesì™€ ê°™ì€ íŒŒì¼ë“¤ì˜ ë¶„ë¥˜ ë¡œì§ì„ ë©´ë°€íˆ ê²€í† í•˜ì‹­ì‹œì˜¤. ì¼ë°˜ì ì¸ ì‚¬ìš© ë° ë‚´ìš©ì— ë”°ë¼ í…ìŠ¤íŠ¸ ë˜ëŠ” ë°”ì´ë„ˆë¦¬ë¡œ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜ë˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\", \"pathlib ì¼ê´€ì„± ìœ ì§€: ê²½ë¡œ ì¡°ì‘ ë° ë¹„êµ ì‹œ ë¬¸ìì—´ ë³€í™˜ì´ë‚˜ os.path ëª¨ë“ˆ ëŒ€ì‹  pathlib.Path ê°ì²´ì™€ ê´€ë ¨ ë©”ì„œë“œ/ì—°ì‚°ìë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•˜ì‹­ì‹œì˜¤. ì´ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ìì²´ ëª¨ë‘ì— ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"í…ŒìŠ¤íŠ¸ ì„¤ì •/í•´ì œ ëª…í™•ì„± ìœ ì§€: ê° í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹œ cache_clear()ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ëª…ì‹œì ì´ì§€ë§Œ, ë” í° í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë‚˜ ë³µì¡í•œ ì„¤ì •/í•´ì œ ë¡œì§ì˜ ê²½ìš° pytestì˜ setup_method, teardown_method ë˜ëŠ” ì‚¬ìš©ì ì •ì˜ í”½ìŠ¤ì²˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ì •ë¦¬ì™€ ê°™ì€ ìƒíƒœ ê´€ë¦¬ë¥¼ í•¨ìœ¼ë¡œì¨ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ë¥¼ ì¤„ì´ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_llm_gateway_request.py\\\", \\\"file_content\\\": \\\"import unittest\\\\nfrom unittest.mock import patch\\\\n\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\n\\\\nclass TestRequestParamsCreation(unittest.TestCase):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ë³„ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± í…ŒìŠ¤íŠ¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_openai_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_claude_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"max_tokens\\\\\\\"], 8192)  # Claude íŠ¹ì • íŒŒë¼ë¯¸í„°\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_google_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\")\\\\n        self.assertIn(\\\\\\\"contents\\\\\\\", params)  # Google API ìš”ì²­ í˜•ì‹ì— ë§ê²Œ ë³€í™˜ë¨\\\\n        self.assertIn(\\\\\\\"config\\\\\\\", params)  # Google API êµ¬ì„± í¬í•¨\\\\n        # configì˜ ì‹œìŠ¤í…œ ì§€ì‹œ ê²€ì¦\\\\n        self.assertEqual(\\\\n            params[\\\\\\\"config\\\\\\\"].system_instruction, \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        # ì˜¨ë„ ì„¤ì • ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].temperature, 0.0)\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_mime_type, \\\\\\\"application/json\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_schema, StructuredReviewResponse)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    unittest.main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport unittest\\\\nfrom unittest.mock import patch\\\\n\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\n\\\\nclass TestRequestParamsCreation(unittest.TestCase):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ë³„ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± í…ŒìŠ¤íŠ¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_openai_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_claude_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"max_tokens\\\\\\\"], 8192)  # Claude íŠ¹ì • íŒŒë¼ë¯¸í„°\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_google_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\")\\\\n        self.assertIn(\\\\\\\"contents\\\\\\\", params)  # Google API ìš”ì²­ í˜•ì‹ì— ë§ê²Œ ë³€í™˜ë¨\\\\n        self.assertIn(\\\\\\\"config\\\\\\\", params)  # Google API êµ¬ì„± í¬í•¨\\\\n        # configì˜ ì‹œìŠ¤í…œ ì§€ì‹œ ê²€ì¦\\\\n        self.assertEqual(\\\\n            params[\\\\\\\"config\\\\\\\"].system_instruction, \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        # ì˜¨ë„ ì„¤ì • ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].temperature, 0.0)\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_mime_type, \\\\\\\"application/json\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_schema, StructuredReviewResponse)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    unittest.main()\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_llm_gateway_review_code.py\\\", \\\"file_content\\\": \\\"import json\\\\nfrom typing import Any\\\\nfrom unittest.mock import MagicMock, patch\\\\n\\\\nimport instructor\\\\nimport pytest\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, ModelParamsDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, SystemPrompt, UserPrompt\\\\nfrom reviewer.src.utils.token.models import (\\\\n    EstimatedCost,\\\\n    IssueSeverityEnum,\\\\n    ReviewResponse,\\\\n    StructuredReviewIssue,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.0}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef google_model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.1}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"google-test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"google-test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ Google í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef review_prompt_fixture() -> ReviewPrompt:\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"def example(): pass\\\\\\\",\\\\n        modified_code=\\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    return ReviewPrompt(system_prompt=system_prompt, user_prompts=[user_prompt])\\\\n\\\\n\\\\nclass MockBaseGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"BaseGateway ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í…ŒìŠ¤íŠ¸ìš© êµ¬í˜„ì²´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(\\\\n        self, model_info: ModelInfoDict, api_key: str | None = \\\\\\\"fake-api-key\\\\\\\"\\\\n    ) -> None:\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = api_key if api_key is not None else self._load_api_key()\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        return \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        return {\\\\\\\"model\\\\\\\": self.get_model_name(), \\\\\\\"messages\\\\\\\": messages}\\\\n\\\\n    def get_model_name(self):\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self):\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request(\\\\n    mock_save_prompt,\\\\n    mock_estimate_cost,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì •ìƒì ì¸ prepare_review_request í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=1500,\\\\n        input_cost_usd=0.0015,\\\\n        estimated_output_tokens=500,\\\\n        estimated_output_cost_usd=0.0025,\\\\n        estimated_total_cost_usd=0.004,\\\\n        within_context_limit=True,\\\\n    )\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    gateway.prepare_review_request(review_prompt_fixture)\\\\n\\\\n    mock_estimate_cost.assert_called_once_with(review_prompt_fixture)\\\\n    mock_save_prompt.assert_called_once()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request_context_limit_exceeded(\\\\n    mock_save_prompt, mock_estimate_cost, model_info_fixture: ModelInfoDict\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì´ˆê³¼ ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=5000,\\\\n        input_cost_usd=0.005,\\\\n        estimated_output_tokens=1000,\\\\n        estimated_output_cost_usd=0.005,\\\\n        estimated_total_cost_usd=0.01,\\\\n        within_context_limit=False,\\\\n    )\\\\n\\\\n    temp_model_info_for_test = model_info_fixture.copy()\\\\n    temp_model_info_for_test: Any = temp_model_info_for_test\\\\n    temp_model_info_for_test[\\\\\\\"context_limit\\\\\\\"] = 4000\\\\n\\\\n    gateway = MockBaseGateway(temp_model_info_for_test)\\\\n\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        modified_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    review_prompt = ReviewPrompt(\\\\n        system_prompt=system_prompt, user_prompts=[user_prompt]\\\\n    )\\\\n\\\\n    with pytest.raises(ContextLimitExceededError) as excinfo:\\\\n        gateway.prepare_review_request(review_prompt)\\\\n\\\\n    assert \\\\\\\"5000\\\\\\\" in str(excinfo.value)\\\\n    assert \\\\\\\"4000\\\\\\\" in str(excinfo.value)\\\\n    mock_save_prompt.assert_not_called()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_instructor(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Instructor í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ìš© ìƒì„¸ ì‘ë‹µ ë°ì´í„°\\\\n    expected_issues_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— êµ¬í˜„ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 1,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"example.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— ì˜ë¯¸ ìˆëŠ” êµ¬í˜„ì„ ì¶”ê°€í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.WARNING,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def example(): pass\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        },\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"suggestion\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"ë³€ìˆ˜ëª…ì„ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 5,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"another_module.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ì˜ˆ: `data_list` -> `user_records`\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.INFO,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"data = get_data()\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"user_records = get_data()\\\\\\\",\\\\n        },\\\\n    ]\\\\n    expected_summary = \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„  ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score = 75.0\\\\n    expected_recommendations = [\\\\\\\"ëª…í™•í•œ ë³€ìˆ˜ëª… ì‚¬ìš©\\\\\\\", \\\\\\\"í•¨ìˆ˜ êµ¬í˜„ ì¶”ê°€\\\\\\\"]\\\\n\\\\n    structured_response_data = StructuredReviewResponse(\\\\n        issues=[StructuredReviewIssue(**data) for data in expected_issues_data],\\\\n        summary=expected_summary,\\\\n        score=expected_score,\\\\n        recommendations=expected_recommendations,\\\\n    )\\\\n    mock_completions.create.return_value = structured_response_data\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"messages\\\\\\\": [],\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        }\\\\n        gateway = MockBaseGateway(model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary\\\\n        assert response.score == expected_score\\\\n        assert response.recommendations == expected_recommendations\\\\n        assert len(response.issues) == len(expected_issues_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"].value\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_genai(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"genai í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n\\\\n    expected_issues_raw_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"genai: í•¨ìˆ˜ êµ¬í˜„ í•„ìš”\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": \\\\\\\"warning\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 10,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"main.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ë¹ ë¥´ê²Œ êµ¬í˜„í•´ì£¼ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def main():\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def main():\\\\\\\\\\\\\\\\n    print('Hello from GenAI')\\\\\\\",\\\\n        }\\\\n    ]\\\\n    expected_summary_genai = \\\\\\\"GenAI ë¦¬ë·°: ìš”ì•½ì…ë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score_genai = 80.0\\\\n    expected_recommendations_genai = [\\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­1\\\\\\\", \\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­2\\\\\\\"]\\\\n\\\\n    # JSON ë¬¸ìì—´ ìƒì„± ì‹œ, ë‚´ë¶€ ë¬¸ìì—´ ê°’ì— í¬í•¨ëœ íŠ¹ìˆ˜ë¬¸ìê°€ ì˜¬ë°”ë¥´ê²Œ ì´ìŠ¤ì¼€ì´í”„ë˜ë„ë¡ ì§ì ‘ êµ¬ì„±\\\\n    # json.dumpsë¥¼ ë¬¸ìì—´ ì „ì²´ê°€ ì•„ë‹Œ, ê°œë³„ ë¬¸ìì—´ ê°’ì—ë§Œ ì ìš©í•˜ê±°ë‚˜, ìˆ˜ë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„\\\\n    issues_list_for_json = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": expected_issues_raw_data[0][\\\\\\\"type\\\\\\\"],\\\\n            \\\\\\\"description\\\\\\\": expected_issues_raw_data[0][\\\\\\\"description\\\\\\\"],\\\\n            \\\\\\\"severity\\\\\\\": expected_issues_raw_data[0][\\\\\\\"severity\\\\\\\"],\\\\n            \\\\\\\"line_number\\\\\\\": expected_issues_raw_data[0][\\\\\\\"line_number\\\\\\\"],\\\\n            \\\\\\\"file\\\\\\\": expected_issues_raw_data[0][\\\\\\\"file\\\\\\\"],\\\\n            \\\\\\\"suggestion\\\\\\\": expected_issues_raw_data[0][\\\\\\\"suggestion\\\\\\\"],\\\\n            \\\\\\\"original_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"original_code\\\\\\\"],\\\\n            \\\\\\\"improved_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"improved_code\\\\\\\"],\\\\n        }\\\\n    ]\\\\n\\\\n    mock_genai_response.text = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    {{\\\\n        \\\\\\\"issues\\\\\\\": {json.dumps(issues_list_for_json)},\\\\n        \\\\\\\"summary\\\\\\\": \\\\\\\"{expected_summary_genai}\\\\\\\", \\\\n        \\\\\\\"score\\\\\\\": {expected_score_genai}, \\\\n        \\\\\\\"recommendations\\\\\\\": {json.dumps(expected_recommendations_genai)}\\\\n    }}\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": google_model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"content\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": MagicMock(),\\\\n        }\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary_genai\\\\n        assert response.score == expected_score_genai\\\\n        assert response.recommendations == expected_recommendations_genai\\\\n        assert len(response.issues) == len(expected_issues_raw_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_raw_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"]\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_empty_response(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ ì‘ë‹µ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n    mock_completions.create.return_value = None\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ë¹„ì–´ìˆ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_error_handling(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_create_client.side_effect = Exception(\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\\\\\\\")\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ì˜¤ë¥˜ ë°œìƒ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_parsing_error(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google API ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n    mock_genai_response.text = \\\\\\\"\\\\\\\"\\\\\\\"{\\\\\\\"issues\\\\\\\": [{\\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\", \\\\\\\"description\\\\\\\": \\\\\\\"desc\\\\\\\", \\\\\\\"line_number\\\\\\\": invalid_value}]}\\\\\\\"\\\\\\\"\\\\\\\"  # ì˜ëª»ëœ JSON\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\"):\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        assert len(response.issues) == 0\\\\n        assert \\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜\\\\\\\" in response.summary\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    pytest.main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport json\\\\nfrom typing import Any\\\\nfrom unittest.mock import MagicMock, patch\\\\n\\\\nimport instructor\\\\nimport pytest\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, ModelParamsDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, SystemPrompt, UserPrompt\\\\nfrom reviewer.src.utils.token.models import (\\\\n    EstimatedCost,\\\\n    IssueSeverityEnum,\\\\n    ReviewResponse,\\\\n    StructuredReviewIssue,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.0}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef google_model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.1}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"google-test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"google-test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ Google í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef review_prompt_fixture() -> ReviewPrompt:\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"def example(): pass\\\\\\\",\\\\n        modified_code=\\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    return ReviewPrompt(system_prompt=system_prompt, user_prompts=[user_prompt])\\\\n\\\\n\\\\nclass MockBaseGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"BaseGateway ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í…ŒìŠ¤íŠ¸ìš© êµ¬í˜„ì²´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(\\\\n        self, model_info: ModelInfoDict, api_key: str | None = \\\\\\\"fake-api-key\\\\\\\"\\\\n    ) -> None:\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = api_key if api_key is not None else self._load_api_key()\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        return \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        return {\\\\\\\"model\\\\\\\": self.get_model_name(), \\\\\\\"messages\\\\\\\": messages}\\\\n\\\\n    def get_model_name(self):\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self):\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request(\\\\n    mock_save_prompt,\\\\n    mock_estimate_cost,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì •ìƒì ì¸ prepare_review_request í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=1500,\\\\n        input_cost_usd=0.0015,\\\\n        estimated_output_tokens=500,\\\\n        estimated_output_cost_usd=0.0025,\\\\n        estimated_total_cost_usd=0.004,\\\\n        within_context_limit=True,\\\\n    )\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    gateway.prepare_review_request(review_prompt_fixture)\\\\n\\\\n    mock_estimate_cost.assert_called_once_with(review_prompt_fixture)\\\\n    mock_save_prompt.assert_called_once()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request_context_limit_exceeded(\\\\n    mock_save_prompt, mock_estimate_cost, model_info_fixture: ModelInfoDict\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì´ˆê³¼ ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=5000,\\\\n        input_cost_usd=0.005,\\\\n        estimated_output_tokens=1000,\\\\n        estimated_output_cost_usd=0.005,\\\\n        estimated_total_cost_usd=0.01,\\\\n        within_context_limit=False,\\\\n    )\\\\n\\\\n    temp_model_info_for_test = model_info_fixture.copy()\\\\n    temp_model_info_for_test: Any = temp_model_info_for_test\\\\n    temp_model_info_for_test[\\\\\\\"context_limit\\\\\\\"] = 4000\\\\n\\\\n    gateway = MockBaseGateway(temp_model_info_for_test)\\\\n\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        modified_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    review_prompt = ReviewPrompt(\\\\n        system_prompt=system_prompt, user_prompts=[user_prompt]\\\\n    )\\\\n\\\\n    with pytest.raises(ContextLimitExceededError) as excinfo:\\\\n        gateway.prepare_review_request(review_prompt)\\\\n\\\\n    assert \\\\\\\"5000\\\\\\\" in str(excinfo.value)\\\\n    assert \\\\\\\"4000\\\\\\\" in str(excinfo.value)\\\\n    mock_save_prompt.assert_not_called()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_instructor(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Instructor í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ìš© ìƒì„¸ ì‘ë‹µ ë°ì´í„°\\\\n    expected_issues_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— êµ¬í˜„ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 1,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"example.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— ì˜ë¯¸ ìˆëŠ” êµ¬í˜„ì„ ì¶”ê°€í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.WARNING,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def example(): pass\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        },\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"suggestion\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"ë³€ìˆ˜ëª…ì„ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 5,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"another_module.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ì˜ˆ: `data_list` -> `user_records`\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.INFO,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"data = get_data()\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"user_records = get_data()\\\\\\\",\\\\n        },\\\\n    ]\\\\n    expected_summary = \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„  ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score = 75.0\\\\n    expected_recommendations = [\\\\\\\"ëª…í™•í•œ ë³€ìˆ˜ëª… ì‚¬ìš©\\\\\\\", \\\\\\\"í•¨ìˆ˜ êµ¬í˜„ ì¶”ê°€\\\\\\\"]\\\\n\\\\n    structured_response_data = StructuredReviewResponse(\\\\n        issues=[StructuredReviewIssue(**data) for data in expected_issues_data],\\\\n        summary=expected_summary,\\\\n        score=expected_score,\\\\n        recommendations=expected_recommendations,\\\\n    )\\\\n    mock_completions.create.return_value = structured_response_data\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"messages\\\\\\\": [],\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        }\\\\n        gateway = MockBaseGateway(model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary\\\\n        assert response.score == expected_score\\\\n        assert response.recommendations == expected_recommendations\\\\n        assert len(response.issues) == len(expected_issues_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"].value\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_genai(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"genai í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n\\\\n    expected_issues_raw_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"genai: í•¨ìˆ˜ êµ¬í˜„ í•„ìš”\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": \\\\\\\"warning\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 10,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"main.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ë¹ ë¥´ê²Œ êµ¬í˜„í•´ì£¼ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def main():\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def main():\\\\\\\\\\\\\\\\n    print('Hello from GenAI')\\\\\\\",\\\\n        }\\\\n    ]\\\\n    expected_summary_genai = \\\\\\\"GenAI ë¦¬ë·°: ìš”ì•½ì…ë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score_genai = 80.0\\\\n    expected_recommendations_genai = [\\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­1\\\\\\\", \\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­2\\\\\\\"]\\\\n\\\\n    # JSON ë¬¸ìì—´ ìƒì„± ì‹œ, ë‚´ë¶€ ë¬¸ìì—´ ê°’ì— í¬í•¨ëœ íŠ¹ìˆ˜ë¬¸ìê°€ ì˜¬ë°”ë¥´ê²Œ ì´ìŠ¤ì¼€ì´í”„ë˜ë„ë¡ ì§ì ‘ êµ¬ì„±\\\\n    # json.dumpsë¥¼ ë¬¸ìì—´ ì „ì²´ê°€ ì•„ë‹Œ, ê°œë³„ ë¬¸ìì—´ ê°’ì—ë§Œ ì ìš©í•˜ê±°ë‚˜, ìˆ˜ë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„\\\\n    issues_list_for_json = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": expected_issues_raw_data[0][\\\\\\\"type\\\\\\\"],\\\\n            \\\\\\\"description\\\\\\\": expected_issues_raw_data[0][\\\\\\\"description\\\\\\\"],\\\\n            \\\\\\\"severity\\\\\\\": expected_issues_raw_data[0][\\\\\\\"severity\\\\\\\"],\\\\n            \\\\\\\"line_number\\\\\\\": expected_issues_raw_data[0][\\\\\\\"line_number\\\\\\\"],\\\\n            \\\\\\\"file\\\\\\\": expected_issues_raw_data[0][\\\\\\\"file\\\\\\\"],\\\\n            \\\\\\\"suggestion\\\\\\\": expected_issues_raw_data[0][\\\\\\\"suggestion\\\\\\\"],\\\\n            \\\\\\\"original_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"original_code\\\\\\\"],\\\\n            \\\\\\\"improved_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"improved_code\\\\\\\"],\\\\n        }\\\\n    ]\\\\n\\\\n    mock_genai_response.text = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    {{\\\\n        \\\\\\\"issues\\\\\\\": {json.dumps(issues_list_for_json)},\\\\n        \\\\\\\"summary\\\\\\\": \\\\\\\"{expected_summary_genai}\\\\\\\", \\\\n        \\\\\\\"score\\\\\\\": {expected_score_genai}, \\\\n        \\\\\\\"recommendations\\\\\\\": {json.dumps(expected_recommendations_genai)}\\\\n    }}\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": google_model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"content\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": MagicMock(),\\\\n        }\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary_genai\\\\n        assert response.score == expected_score_genai\\\\n        assert response.recommendations == expected_recommendations_genai\\\\n        assert len(response.issues) == len(expected_issues_raw_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_raw_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"]\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_empty_response(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ ì‘ë‹µ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n    mock_completions.create.return_value = None\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ë¹„ì–´ìˆ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_error_handling(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_create_client.side_effect = Exception(\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\\\\\\\")\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ì˜¤ë¥˜ ë°œìƒ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_parsing_error(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google API ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n    mock_genai_response.text = \\\\\\\"\\\\\\\"\\\\\\\"{\\\\\\\"issues\\\\\\\": [{\\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\", \\\\\\\"description\\\\\\\": \\\\\\\"desc\\\\\\\", \\\\\\\"line_number\\\\\\\": invalid_value}]}\\\\\\\"\\\\\\\"\\\\\\\"  # ì˜ëª»ëœ JSON\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\"):\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        assert len(response.issues) == 0\\\\n        assert \\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜\\\\\\\" in response.summary\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    pytest.main()\\\\n```\\\", \\\"line_number\\\": 1}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 16, \"file\": \"tests/test_llm_gateway_request.py\", \"description\": \"`messages` ë”•ì…”ë„ˆë¦¬ ë¦¬ìŠ¤íŠ¸ê°€ `test_openai_create_request_params`, `test_claude_create_request_params`, `test_google_create_request_params` ì„¸ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œì— ì¤‘ë³µë˜ì–´ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ë³€ê²½ ì‹œ ì—¬ëŸ¬ ê³³ì„ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆê³ , ì½”ë“œ ê°€ë…ì„±ì„ ì €í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì¤‘ë³µë˜ëŠ” `messages`ë¥¼ í´ë˜ìŠ¤ ë³€ìˆ˜ë‚˜ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì™¸ë¶€ì˜ ìƒìˆ˜ë¡œ ì •ì˜í•˜ì—¬ ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í´ë˜ìŠ¤ ë ˆë²¨ì— `COMMON_TEST_MESSAGES` ìƒìˆ˜ë¥¼ ì •ì˜í•˜ê³  ê° í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œì—ì„œ ì´ë¥¼ ì°¸ì¡°í•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\n        messages = [\\n            {\\\"role\\\": \\\"system\\\", \\\"content\\\": \\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\"},\\n            {\\n                \\\"role\\\": \\\"user\\\",\\n                \\\"content\\\": \\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\",\\n            },\\n        ]\", \"improved_code\": \"# At class level or module level\\nCOMMON_TEST_MESSAGES = [\\n    {\\\"role\\\": \\\"system\\\", \\\"content\\\": \\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\"},\\n    {\\n        \\\"role\\\": \\\"user\\\",\\n        \\\"content\\\": \\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\",\\n    },\\n]\\n\\nclass TestRequestParamsCreation(unittest.TestCase):\\n    # ...\\n    def test_openai_create_request_params(self, mock_get_api_key):\\n        # ì„¤ì •\\n        mock_get_api_key.return_value = \\\"fake-api-key\\\"\\n        gateway = GatewayFactory.create(\\\"gpt-4o\\\")\\n\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\n        messages = COMMON_TEST_MESSAGES\\n\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\n        params = gateway._create_request_params(messages)\\n\\n        # ê²€ì¦\\n        self.assertEqual(params[\\\"model\\\"], \\\"gpt-4o\\\")\\n        self.assertEqual(params[\\\"messages\\\"], messages)\\n        self.assertEqual(params[\\\"temperature\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 250, \"file\": \"tests/test_llm_gateway_review_code.py\", \"description\": \"`test_review_code_success_with_genai` í…ŒìŠ¤íŠ¸ì—ì„œ `mock_genai_response.text`ë¥¼ ìƒì„±í•  ë•Œ f-stringê³¼ `json.dumps()`ë¥¼ í˜¼í•©í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ë°©ì‹ì€ JSON êµ¬ì¡°ê°€ ë³µì¡í•´ì§€ê±°ë‚˜ ë¬¸ìì—´ ë‚´ì— íŠ¹ìˆ˜ ë¬¸ìê°€ í¬í•¨ë  ê²½ìš° ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ê±°ë‚˜ ê°€ë…ì„±ì„ í•´ì¹  ìˆ˜ ìˆì–´ ì ì¬ì ì¸ ë²„ê·¸ ë°œìƒ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì „ì²´ ì‘ë‹µ ë°ì´í„°ë¥¼ íŒŒì´ì¬ ë”•ì…”ë„ˆë¦¬ë¡œ êµ¬ì„±í•œ í›„, `json.dumps()`ë¥¼ í•œ ë²ˆë§Œ í˜¸ì¶œí•˜ì—¬ ì „ì²´ JSON ë¬¸ìì—´ì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ë” ì•ˆì „í•˜ê³  ê°€ë…ì„±ì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ JSON í˜•ì‹ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê³  ì½”ë“œë¥¼ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"    mock_genai_response.text = f\\\"\\\"\\\"\\n    {{\\n        \\\"issues\\\": {json.dumps(issues_list_for_json)},\\n        \\\"summary\\\": \\\"{expected_summary_genai}\\\", \\n        \\\"score\\\": {expected_score_genai}, \\n        \\\"recommendations\\\": {json.dumps(expected_recommendations_genai)}\\n    }}\\n    \\\"\\\"\\\"\", \"improved_code\": \"    response_data_dict = {\\n        \\\"issues\\\": issues_list_for_json,\\n        \\\"summary\\\": expected_summary_genai,\\n        \\\"score\\\": expected_score_genai,\\n        \\\"recommendations\\\": expected_recommendations_genai\\n    }\\n    mock_genai_response.text = json.dumps(response_data_dict)\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 110, \"file\": \"tests/test_llm_gateway_review_code.py\", \"description\": \"`test_prepare_review_request_context_limit_exceeded` í•¨ìˆ˜ ë‚´ì—ì„œ `temp_model_info_for_test`ì˜ íƒ€ì…ì„ `Any`ë¡œ ìºìŠ¤íŒ…í•œ í›„ `context_limit` í‚¤ë¥¼ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” `ModelInfoDict` íƒ€ì… ì •ì˜ì— `context_limit`ì´ ì—†ê¸° ë•Œë¬¸ìœ¼ë¡œ ë³´ì´ë©°, íƒ€ì… ì•ˆì •ì„±ì„ ì €í•´í•˜ê³  ì½”ë“œì˜ ì˜ë„ë¥¼ ë¶ˆëª…í™•í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`ModelInfoDict` ë˜ëŠ” ê·¸ ë‚´ë¶€ì˜ `ModelParamsDict` íƒ€ì… ì •ì˜ì— `context_limit` í•„ë“œë¥¼ ì„ íƒì (Optional)ìœ¼ë¡œ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. ì´ë ‡ê²Œ í•˜ë©´ íƒ€ì… ìºìŠ¤íŒ… ì—†ì´ ì•ˆì „í•˜ê²Œ ê°’ì„ í• ë‹¹í•˜ê³ , ëª¨ë¸ ì •ë³´ êµ¬ì¡°ë¥¼ ë” ëª…í™•í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `ModelInfoDict`ì— `context_limit: NotRequired[int]`ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"    temp_model_info_for_test = model_info_fixture.copy()\\n    temp_model_info_for_test: Any = temp_model_info_for_test\\n    temp_model_info_for_test[\\\"context_limit\\\"] = 4000\", \"improved_code\": \"# In type definition (e.g., reviewer/src/available_models.py):\\n# class ModelInfoDict(TypedDict):\\n#     full_name: str\\n#     aliases: list[str]\\n#     description: str\\n#     provider: str\\n#     params: ModelParamsDict\\n#     context_limit: NotRequired[int]  # Add this line\\n\\n# In the test (tests/test_llm_gateway_review_code.py):\\n    temp_model_info_for_test = model_info_fixture.copy()\\n    temp_model_info_for_test[\\\"context_limit\\\"] = 4000 # No 'Any' cast needed if type definition is updated\\n\\n    gateway = MockBaseGateway(temp_model_info_for_test)\"}], \"summary\": \"ë‘ ê°œì˜ ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ íŒŒì¼ (`test_llm_gateway_request.py`, `test_llm_gateway_review_code.py`)ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. `test_llm_gateway_request.py`ëŠ” ë‹¤ì–‘í•œ LLM í”„ë¡œë°”ì´ë”(OpenAI, Claude, Google)ì— ëŒ€í•œ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ë¡œì§ì„ ê²€ì¦í•©ë‹ˆë‹¤. `test_llm_gateway_review_code.py`ëŠ” `BaseGateway`ì˜ ì½”ë“œ ë¦¬ë·° ì¤€ë¹„ ë° ì‹¤í–‰ ë¡œì§, ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì²˜ë¦¬, ë‹¤ì–‘í•œ ì‘ë‹µ ì‹œë‚˜ë¦¬ì˜¤(ì„±ê³µ, ë¹ˆ ì‘ë‹µ, ì˜¤ë¥˜)ë¥¼ `pytest`ì™€ ëª¨ì˜ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¢…í•©ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ LLM ê²Œì´íŠ¸ì›¨ì´ ê¸°ëŠ¥ì˜ ì•ˆì •ì„± ë° ì»¤ë²„ë¦¬ì§€ê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"í…ŒìŠ¤íŠ¸ ë°ì´í„°ì˜ ì¤‘ë³µì„ ì¤„ì´ê³  ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ê¸° ìœ„í•´ ê³µí†µ ë©”ì‹œì§€ë‚˜ ì„¤ì •ì€ ìƒìˆ˜ë¡œ ì¶”ì¶œí•˜ê±°ë‚˜ pytest í”½ìŠ¤ì²˜ë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ì„¸ìš”.\", \"íƒ€ì… íŒíŠ¸ë¥¼ ëª…í™•íˆ í•˜ê³  `TypedDict`ë¥¼ ì‚¬ìš©í•  ë•Œ `Any` ìºìŠ¤íŒ…ì„ ìµœì†Œí™”í•˜ë„ë¡ íƒ€ì… ì •ì˜ë¥¼ ê°œì„ í•˜ì—¬ ì½”ë“œ ì•ˆì •ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.\", \"ëª¨ì˜ API ì‘ë‹µìœ¼ë¡œ ì‚¬ìš©ë  JSON ë¬¸ìì—´ì„ ìƒì„±í•  ë•ŒëŠ” f-stringê³¼ `json.dumps`ë¥¼ í˜¼ìš©í•˜ê¸°ë³´ë‹¤, íŒŒì´ì¬ ë”•ì…”ë„ˆë¦¬ë¥¼ ë¨¼ì € êµ¬ì„±í•œ í›„ ì „ì²´ë¥¼ `json.dumps`í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.\", \"í”„ë¡œì íŠ¸ ë‚´ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ì‚¬ìš©ì˜ ì¼ê´€ì„±ì„ ê³ ë ¤í•˜ì„¸ìš” (í˜„ì¬ `unittest`ì™€ `pytest` í˜¼ìš© ì¤‘). ë‹¨ì¼ í”„ë ˆì„ì›Œí¬ë¡œ í†µì¼í•˜ë©´ í…ŒìŠ¤íŠ¸ ê´€ë¦¬ ë° ì‹¤í–‰ì´ ìš©ì´í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_llm_gateway_request.py\\\", \\\"file_content\\\": \\\"import unittest\\\\nfrom unittest.mock import patch\\\\n\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\n\\\\nclass TestRequestParamsCreation(unittest.TestCase):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ë³„ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± í…ŒìŠ¤íŠ¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_openai_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_claude_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"max_tokens\\\\\\\"], 8192)  # Claude íŠ¹ì • íŒŒë¼ë¯¸í„°\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_google_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\")\\\\n        self.assertIn(\\\\\\\"contents\\\\\\\", params)  # Google API ìš”ì²­ í˜•ì‹ì— ë§ê²Œ ë³€í™˜ë¨\\\\n        self.assertIn(\\\\\\\"config\\\\\\\", params)  # Google API êµ¬ì„± í¬í•¨\\\\n        # configì˜ ì‹œìŠ¤í…œ ì§€ì‹œ ê²€ì¦\\\\n        self.assertEqual(\\\\n            params[\\\\\\\"config\\\\\\\"].system_instruction, \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        # ì˜¨ë„ ì„¤ì • ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].temperature, 0.0)\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_mime_type, \\\\\\\"application/json\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_schema, StructuredReviewResponse)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    unittest.main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport unittest\\\\nfrom unittest.mock import patch\\\\n\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\n\\\\nclass TestRequestParamsCreation(unittest.TestCase):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ë³„ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± í…ŒìŠ¤íŠ¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_openai_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_claude_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"messages\\\\\\\"], messages)\\\\n        self.assertEqual(params[\\\\\\\"max_tokens\\\\\\\"], 8192)  # Claude íŠ¹ì • íŒŒë¼ë¯¸í„°\\\\n        self.assertEqual(params[\\\\\\\"temperature\\\\\\\"], 0.0)  # ëª¨ë¸ì˜ ê¸°ë³¸ íŒŒë¼ë¯¸í„°\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_google_create_request_params(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google ê²Œì´íŠ¸ì›¨ì´ì˜ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì„¤ì •\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n        gateway = GatewayFactory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€\\\\n        messages = [\\\\n            {\\\\\\\"role\\\\\\\": \\\\\\\"system\\\\\\\", \\\\\\\"content\\\\\\\": \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"},\\\\n            {\\\\n                \\\\\\\"role\\\\\\\": \\\\\\\"user\\\\\\\",\\\\n                \\\\\\\"content\\\\\\\": \\\\\\\"ì´ ì½”ë“œë¥¼ ê²€í† í•´ì£¼ì„¸ìš”: def hello(): print('world')\\\\\\\",\\\\n            },\\\\n        ]\\\\n\\\\n        # í…ŒìŠ¤íŠ¸ ì‹¤í–‰\\\\n        params = gateway._create_request_params(messages)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"model\\\\\\\"], \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\")\\\\n        self.assertIn(\\\\\\\"contents\\\\\\\", params)  # Google API ìš”ì²­ í˜•ì‹ì— ë§ê²Œ ë³€í™˜ë¨\\\\n        self.assertIn(\\\\\\\"config\\\\\\\", params)  # Google API êµ¬ì„± í¬í•¨\\\\n        # configì˜ ì‹œìŠ¤í…œ ì§€ì‹œ ê²€ì¦\\\\n        self.assertEqual(\\\\n            params[\\\\\\\"config\\\\\\\"].system_instruction, \\\\\\\"ì‹œìŠ¤í…œ ì§€ì‹œ: ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        # ì˜¨ë„ ì„¤ì • ê²€ì¦\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].temperature, 0.0)\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_mime_type, \\\\\\\"application/json\\\\\\\")\\\\n        self.assertEqual(params[\\\\\\\"config\\\\\\\"].response_schema, StructuredReviewResponse)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    unittest.main()\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_llm_gateway_review_code.py\\\", \\\"file_content\\\": \\\"import json\\\\nfrom typing import Any\\\\nfrom unittest.mock import MagicMock, patch\\\\n\\\\nimport instructor\\\\nimport pytest\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, ModelParamsDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, SystemPrompt, UserPrompt\\\\nfrom reviewer.src.utils.token.models import (\\\\n    EstimatedCost,\\\\n    IssueSeverityEnum,\\\\n    ReviewResponse,\\\\n    StructuredReviewIssue,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.0}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef google_model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.1}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"google-test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"google-test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ Google í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef review_prompt_fixture() -> ReviewPrompt:\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"def example(): pass\\\\\\\",\\\\n        modified_code=\\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    return ReviewPrompt(system_prompt=system_prompt, user_prompts=[user_prompt])\\\\n\\\\n\\\\nclass MockBaseGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"BaseGateway ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í…ŒìŠ¤íŠ¸ìš© êµ¬í˜„ì²´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(\\\\n        self, model_info: ModelInfoDict, api_key: str | None = \\\\\\\"fake-api-key\\\\\\\"\\\\n    ) -> None:\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = api_key if api_key is not None else self._load_api_key()\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        return \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        return {\\\\\\\"model\\\\\\\": self.get_model_name(), \\\\\\\"messages\\\\\\\": messages}\\\\n\\\\n    def get_model_name(self):\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self):\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request(\\\\n    mock_save_prompt,\\\\n    mock_estimate_cost,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì •ìƒì ì¸ prepare_review_request í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=1500,\\\\n        input_cost_usd=0.0015,\\\\n        estimated_output_tokens=500,\\\\n        estimated_output_cost_usd=0.0025,\\\\n        estimated_total_cost_usd=0.004,\\\\n        within_context_limit=True,\\\\n    )\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    gateway.prepare_review_request(review_prompt_fixture)\\\\n\\\\n    mock_estimate_cost.assert_called_once_with(review_prompt_fixture)\\\\n    mock_save_prompt.assert_called_once()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request_context_limit_exceeded(\\\\n    mock_save_prompt, mock_estimate_cost, model_info_fixture: ModelInfoDict\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì´ˆê³¼ ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=5000,\\\\n        input_cost_usd=0.005,\\\\n        estimated_output_tokens=1000,\\\\n        estimated_output_cost_usd=0.005,\\\\n        estimated_total_cost_usd=0.01,\\\\n        within_context_limit=False,\\\\n    )\\\\n\\\\n    temp_model_info_for_test = model_info_fixture.copy()\\\\n    temp_model_info_for_test: Any = temp_model_info_for_test\\\\n    temp_model_info_for_test[\\\\\\\"context_limit\\\\\\\"] = 4000\\\\n\\\\n    gateway = MockBaseGateway(temp_model_info_for_test)\\\\n\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        modified_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    review_prompt = ReviewPrompt(\\\\n        system_prompt=system_prompt, user_prompts=[user_prompt]\\\\n    )\\\\n\\\\n    with pytest.raises(ContextLimitExceededError) as excinfo:\\\\n        gateway.prepare_review_request(review_prompt)\\\\n\\\\n    assert \\\\\\\"5000\\\\\\\" in str(excinfo.value)\\\\n    assert \\\\\\\"4000\\\\\\\" in str(excinfo.value)\\\\n    mock_save_prompt.assert_not_called()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_instructor(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Instructor í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ìš© ìƒì„¸ ì‘ë‹µ ë°ì´í„°\\\\n    expected_issues_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— êµ¬í˜„ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 1,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"example.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— ì˜ë¯¸ ìˆëŠ” êµ¬í˜„ì„ ì¶”ê°€í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.WARNING,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def example(): pass\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        },\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"suggestion\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"ë³€ìˆ˜ëª…ì„ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 5,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"another_module.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ì˜ˆ: `data_list` -> `user_records`\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.INFO,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"data = get_data()\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"user_records = get_data()\\\\\\\",\\\\n        },\\\\n    ]\\\\n    expected_summary = \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„  ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score = 75.0\\\\n    expected_recommendations = [\\\\\\\"ëª…í™•í•œ ë³€ìˆ˜ëª… ì‚¬ìš©\\\\\\\", \\\\\\\"í•¨ìˆ˜ êµ¬í˜„ ì¶”ê°€\\\\\\\"]\\\\n\\\\n    structured_response_data = StructuredReviewResponse(\\\\n        issues=[StructuredReviewIssue(**data) for data in expected_issues_data],\\\\n        summary=expected_summary,\\\\n        score=expected_score,\\\\n        recommendations=expected_recommendations,\\\\n    )\\\\n    mock_completions.create.return_value = structured_response_data\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"messages\\\\\\\": [],\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        }\\\\n        gateway = MockBaseGateway(model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary\\\\n        assert response.score == expected_score\\\\n        assert response.recommendations == expected_recommendations\\\\n        assert len(response.issues) == len(expected_issues_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"].value\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_genai(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"genai í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n\\\\n    expected_issues_raw_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"genai: í•¨ìˆ˜ êµ¬í˜„ í•„ìš”\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": \\\\\\\"warning\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 10,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"main.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ë¹ ë¥´ê²Œ êµ¬í˜„í•´ì£¼ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def main():\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def main():\\\\\\\\\\\\\\\\n    print('Hello from GenAI')\\\\\\\",\\\\n        }\\\\n    ]\\\\n    expected_summary_genai = \\\\\\\"GenAI ë¦¬ë·°: ìš”ì•½ì…ë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score_genai = 80.0\\\\n    expected_recommendations_genai = [\\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­1\\\\\\\", \\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­2\\\\\\\"]\\\\n\\\\n    # JSON ë¬¸ìì—´ ìƒì„± ì‹œ, ë‚´ë¶€ ë¬¸ìì—´ ê°’ì— í¬í•¨ëœ íŠ¹ìˆ˜ë¬¸ìê°€ ì˜¬ë°”ë¥´ê²Œ ì´ìŠ¤ì¼€ì´í”„ë˜ë„ë¡ ì§ì ‘ êµ¬ì„±\\\\n    # json.dumpsë¥¼ ë¬¸ìì—´ ì „ì²´ê°€ ì•„ë‹Œ, ê°œë³„ ë¬¸ìì—´ ê°’ì—ë§Œ ì ìš©í•˜ê±°ë‚˜, ìˆ˜ë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„\\\\n    issues_list_for_json = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": expected_issues_raw_data[0][\\\\\\\"type\\\\\\\"],\\\\n            \\\\\\\"description\\\\\\\": expected_issues_raw_data[0][\\\\\\\"description\\\\\\\"],\\\\n            \\\\\\\"severity\\\\\\\": expected_issues_raw_data[0][\\\\\\\"severity\\\\\\\"],\\\\n            \\\\\\\"line_number\\\\\\\": expected_issues_raw_data[0][\\\\\\\"line_number\\\\\\\"],\\\\n            \\\\\\\"file\\\\\\\": expected_issues_raw_data[0][\\\\\\\"file\\\\\\\"],\\\\n            \\\\\\\"suggestion\\\\\\\": expected_issues_raw_data[0][\\\\\\\"suggestion\\\\\\\"],\\\\n            \\\\\\\"original_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"original_code\\\\\\\"],\\\\n            \\\\\\\"improved_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"improved_code\\\\\\\"],\\\\n        }\\\\n    ]\\\\n\\\\n    mock_genai_response.text = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    {{\\\\n        \\\\\\\"issues\\\\\\\": {json.dumps(issues_list_for_json)},\\\\n        \\\\\\\"summary\\\\\\\": \\\\\\\"{expected_summary_genai}\\\\\\\", \\\\n        \\\\\\\"score\\\\\\\": {expected_score_genai}, \\\\n        \\\\\\\"recommendations\\\\\\\": {json.dumps(expected_recommendations_genai)}\\\\n    }}\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": google_model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"content\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": MagicMock(),\\\\n        }\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary_genai\\\\n        assert response.score == expected_score_genai\\\\n        assert response.recommendations == expected_recommendations_genai\\\\n        assert len(response.issues) == len(expected_issues_raw_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_raw_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"]\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_empty_response(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ ì‘ë‹µ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n    mock_completions.create.return_value = None\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ë¹„ì–´ìˆ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_error_handling(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_create_client.side_effect = Exception(\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\\\\\\\")\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ì˜¤ë¥˜ ë°œìƒ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_parsing_error(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google API ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n    mock_genai_response.text = \\\\\\\"\\\\\\\"\\\\\\\"{\\\\\\\"issues\\\\\\\": [{\\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\", \\\\\\\"description\\\\\\\": \\\\\\\"desc\\\\\\\", \\\\\\\"line_number\\\\\\\": invalid_value}]}\\\\\\\"\\\\\\\"\\\\\\\"  # ì˜ëª»ëœ JSON\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\"):\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        assert len(response.issues) == 0\\\\n        assert \\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜\\\\\\\" in response.summary\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    pytest.main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport json\\\\nfrom typing import Any\\\\nfrom unittest.mock import MagicMock, patch\\\\n\\\\nimport instructor\\\\nimport pytest\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, ModelParamsDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, SystemPrompt, UserPrompt\\\\nfrom reviewer.src.utils.token.models import (\\\\n    EstimatedCost,\\\\n    IssueSeverityEnum,\\\\n    ReviewResponse,\\\\n    StructuredReviewIssue,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.0}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef google_model_info_fixture() -> ModelInfoDict:\\\\n    params: ModelParamsDict = {\\\\\\\"temperature\\\\\\\": 0.1}\\\\n    model_info: ModelInfoDict = {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"google-test-model-fixture\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"google-test-fixture\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Fixtureë¥¼ ì‚¬ìš©í•œ Google í…ŒìŠ¤íŠ¸ìš© ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": params,\\\\n    }\\\\n    return model_info\\\\n\\\\n\\\\n@pytest.fixture\\\\ndef review_prompt_fixture() -> ReviewPrompt:\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"def example(): pass\\\\\\\",\\\\n        modified_code=\\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    return ReviewPrompt(system_prompt=system_prompt, user_prompts=[user_prompt])\\\\n\\\\n\\\\nclass MockBaseGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"BaseGateway ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ í…ŒìŠ¤íŠ¸ìš© êµ¬í˜„ì²´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(\\\\n        self, model_info: ModelInfoDict, api_key: str | None = \\\\\\\"fake-api-key\\\\\\\"\\\\n    ) -> None:\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = api_key if api_key is not None else self._load_api_key()\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        return \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        return {\\\\\\\"model\\\\\\\": self.get_model_name(), \\\\\\\"messages\\\\\\\": messages}\\\\n\\\\n    def get_model_name(self):\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self):\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request(\\\\n    mock_save_prompt,\\\\n    mock_estimate_cost,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì •ìƒì ì¸ prepare_review_request í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=1500,\\\\n        input_cost_usd=0.0015,\\\\n        estimated_output_tokens=500,\\\\n        estimated_output_cost_usd=0.0025,\\\\n        estimated_total_cost_usd=0.004,\\\\n        within_context_limit=True,\\\\n    )\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    gateway.prepare_review_request(review_prompt_fixture)\\\\n\\\\n    mock_estimate_cost.assert_called_once_with(review_prompt_fixture)\\\\n    mock_save_prompt.assert_called_once()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.estimate_review_cost\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.save_prompt\\\\\\\")\\\\ndef test_prepare_review_request_context_limit_exceeded(\\\\n    mock_save_prompt, mock_estimate_cost, model_info_fixture: ModelInfoDict\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì´ˆê³¼ ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_estimate_cost.return_value = EstimatedCost(\\\\n        model=model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n        input_tokens=5000,\\\\n        input_cost_usd=0.005,\\\\n        estimated_output_tokens=1000,\\\\n        estimated_output_cost_usd=0.005,\\\\n        estimated_total_cost_usd=0.01,\\\\n        within_context_limit=False,\\\\n    )\\\\n\\\\n    temp_model_info_for_test = model_info_fixture.copy()\\\\n    temp_model_info_for_test: Any = temp_model_info_for_test\\\\n    temp_model_info_for_test[\\\\\\\"context_limit\\\\\\\"] = 4000\\\\n\\\\n    gateway = MockBaseGateway(temp_model_info_for_test)\\\\n\\\\n    system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=\\\\\\\"ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ë¦¬ë·°í•˜ì„¸ìš”.\\\\\\\")\\\\n    user_prompt = UserPrompt(\\\\n        hunk_idx=\\\\\\\"1\\\\\\\",\\\\n        file_name=\\\\\\\"example.py\\\\\\\",\\\\n        original_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        modified_code=\\\\\\\"ë§¤ìš° í° ì½”ë“œ ë¸”ë¡ì…ë‹ˆë‹¤...\\\\\\\" * 500,\\\\n        line_number=1,\\\\n        language=\\\\\\\"python\\\\\\\",\\\\n    )\\\\n    review_prompt = ReviewPrompt(\\\\n        system_prompt=system_prompt, user_prompts=[user_prompt]\\\\n    )\\\\n\\\\n    with pytest.raises(ContextLimitExceededError) as excinfo:\\\\n        gateway.prepare_review_request(review_prompt)\\\\n\\\\n    assert \\\\\\\"5000\\\\\\\" in str(excinfo.value)\\\\n    assert \\\\\\\"4000\\\\\\\" in str(excinfo.value)\\\\n    mock_save_prompt.assert_not_called()\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_instructor(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Instructor í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ìš© ìƒì„¸ ì‘ë‹µ ë°ì´í„°\\\\n    expected_issues_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— êµ¬í˜„ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 1,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"example.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"í•¨ìˆ˜ì— ì˜ë¯¸ ìˆëŠ” êµ¬í˜„ì„ ì¶”ê°€í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.WARNING,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def example(): pass\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def example(): return 'Hello'\\\\\\\",\\\\n        },\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"suggestion\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"ë³€ìˆ˜ëª…ì„ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 5,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"another_module.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ì˜ˆ: `data_list` -> `user_records`\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": IssueSeverityEnum.INFO,\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"data = get_data()\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"user_records = get_data()\\\\\\\",\\\\n        },\\\\n    ]\\\\n    expected_summary = \\\\\\\"ì½”ë“œì— ëª‡ ê°€ì§€ ê°œì„  ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score = 75.0\\\\n    expected_recommendations = [\\\\\\\"ëª…í™•í•œ ë³€ìˆ˜ëª… ì‚¬ìš©\\\\\\\", \\\\\\\"í•¨ìˆ˜ êµ¬í˜„ ì¶”ê°€\\\\\\\"]\\\\n\\\\n    structured_response_data = StructuredReviewResponse(\\\\n        issues=[StructuredReviewIssue(**data) for data in expected_issues_data],\\\\n        summary=expected_summary,\\\\n        score=expected_score,\\\\n        recommendations=expected_recommendations,\\\\n    )\\\\n    mock_completions.create.return_value = structured_response_data\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"messages\\\\\\\": [],\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        }\\\\n        gateway = MockBaseGateway(model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary\\\\n        assert response.score == expected_score\\\\n        assert response.recommendations == expected_recommendations\\\\n        assert len(response.issues) == len(expected_issues_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"].value\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.save_raw_response\\\\\\\")\\\\ndef test_review_code_success_with_genai(\\\\n    mock_save_raw_response,\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"genai í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ì„±ê³µì ì¸ ë¦¬ë·° ì½”ë“œ í˜¸ì¶œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n\\\\n    expected_issues_raw_data = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\",\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"genai: í•¨ìˆ˜ êµ¬í˜„ í•„ìš”\\\\\\\",\\\\n            \\\\\\\"severity\\\\\\\": \\\\\\\"warning\\\\\\\",\\\\n            \\\\\\\"line_number\\\\\\\": 10,\\\\n            \\\\\\\"file\\\\\\\": \\\\\\\"main.py\\\\\\\",\\\\n            \\\\\\\"suggestion\\\\\\\": \\\\\\\"ë¹ ë¥´ê²Œ êµ¬í˜„í•´ì£¼ì„¸ìš”.\\\\\\\",\\\\n            \\\\\\\"original_code\\\\\\\": \\\\\\\"def main():\\\\\\\",\\\\n            \\\\\\\"improved_code\\\\\\\": \\\\\\\"def main():\\\\\\\\\\\\\\\\n    print('Hello from GenAI')\\\\\\\",\\\\n        }\\\\n    ]\\\\n    expected_summary_genai = \\\\\\\"GenAI ë¦¬ë·°: ìš”ì•½ì…ë‹ˆë‹¤.\\\\\\\"\\\\n    expected_score_genai = 80.0\\\\n    expected_recommendations_genai = [\\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­1\\\\\\\", \\\\\\\"GenAI ê¶Œì¥ ì‚¬í•­2\\\\\\\"]\\\\n\\\\n    # JSON ë¬¸ìì—´ ìƒì„± ì‹œ, ë‚´ë¶€ ë¬¸ìì—´ ê°’ì— í¬í•¨ëœ íŠ¹ìˆ˜ë¬¸ìê°€ ì˜¬ë°”ë¥´ê²Œ ì´ìŠ¤ì¼€ì´í”„ë˜ë„ë¡ ì§ì ‘ êµ¬ì„±\\\\n    # json.dumpsë¥¼ ë¬¸ìì—´ ì „ì²´ê°€ ì•„ë‹Œ, ê°œë³„ ë¬¸ìì—´ ê°’ì—ë§Œ ì ìš©í•˜ê±°ë‚˜, ìˆ˜ë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„\\\\n    issues_list_for_json = [\\\\n        {\\\\n            \\\\\\\"type\\\\\\\": expected_issues_raw_data[0][\\\\\\\"type\\\\\\\"],\\\\n            \\\\\\\"description\\\\\\\": expected_issues_raw_data[0][\\\\\\\"description\\\\\\\"],\\\\n            \\\\\\\"severity\\\\\\\": expected_issues_raw_data[0][\\\\\\\"severity\\\\\\\"],\\\\n            \\\\\\\"line_number\\\\\\\": expected_issues_raw_data[0][\\\\\\\"line_number\\\\\\\"],\\\\n            \\\\\\\"file\\\\\\\": expected_issues_raw_data[0][\\\\\\\"file\\\\\\\"],\\\\n            \\\\\\\"suggestion\\\\\\\": expected_issues_raw_data[0][\\\\\\\"suggestion\\\\\\\"],\\\\n            \\\\\\\"original_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"original_code\\\\\\\"],\\\\n            \\\\\\\"improved_code\\\\\\\": expected_issues_raw_data[0][\\\\\\\"improved_code\\\\\\\"],\\\\n        }\\\\n    ]\\\\n\\\\n    mock_genai_response.text = f\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    {{\\\\n        \\\\\\\"issues\\\\\\\": {json.dumps(issues_list_for_json)},\\\\n        \\\\\\\"summary\\\\\\\": \\\\\\\"{expected_summary_genai}\\\\\\\", \\\\n        \\\\\\\"score\\\\\\\": {expected_score_genai}, \\\\n        \\\\\\\"recommendations\\\\\\\": {json.dumps(expected_recommendations_genai)}\\\\n    }}\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\") as mock_create_params:\\\\n        mock_create_params.return_value = {\\\\n            \\\\\\\"model\\\\\\\": google_model_info_fixture[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"content\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": MagicMock(),\\\\n        }\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response: ReviewResponse = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        mock_prepare_request.assert_called_once_with(review_prompt_fixture)\\\\n        mock_create_client.assert_called_once()\\\\n        mock_create_params.assert_called_once()\\\\n        mock_save_raw_response.assert_called_once()\\\\n\\\\n        assert response.summary == expected_summary_genai\\\\n        assert response.score == expected_score_genai\\\\n        assert response.recommendations == expected_recommendations_genai\\\\n        assert len(response.issues) == len(expected_issues_raw_data)\\\\n        for i, actual_issue in enumerate(response.issues):\\\\n            expected_issue_data = expected_issues_raw_data[i]\\\\n            assert actual_issue.type == expected_issue_data[\\\\\\\"type\\\\\\\"]\\\\n            assert actual_issue.description == expected_issue_data[\\\\\\\"description\\\\\\\"]\\\\n            assert actual_issue.line_number == expected_issue_data[\\\\\\\"line_number\\\\\\\"]\\\\n            assert actual_issue.file == expected_issue_data[\\\\\\\"file\\\\\\\"]\\\\n            assert actual_issue.suggestion == expected_issue_data[\\\\\\\"suggestion\\\\\\\"]\\\\n            assert actual_issue.severity == expected_issue_data[\\\\\\\"severity\\\\\\\"]\\\\n            assert actual_issue.original_code == expected_issue_data[\\\\\\\"original_code\\\\\\\"]\\\\n            assert actual_issue.improved_code == expected_issue_data[\\\\\\\"improved_code\\\\\\\"]\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_empty_response(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹ˆ ì‘ë‹µ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_instructor = MagicMock(spec=instructor.Instructor)\\\\n    mock_completions = MagicMock()\\\\n    mock_instructor.chat.completions = mock_completions\\\\n    mock_completions.create.return_value = None\\\\n    mock_create_client.return_value = mock_instructor\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ë¹„ì–´ìˆ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_error_handling(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_create_client.side_effect = Exception(\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ\\\\\\\")\\\\n\\\\n    gateway = MockBaseGateway(model_info_fixture)\\\\n    response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n    assert len(response.issues) == 0\\\\n    assert \\\\\\\"ì˜¤ë¥˜ ë°œìƒ\\\\\\\" in response.summary\\\\n\\\\n\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway.prepare_review_request\\\\\\\")\\\\n@patch(\\\\\\\"reviewer.src.llm_gateway.base_gateway.BaseGateway._create_client\\\\\\\")\\\\ndef test_review_code_parsing_error(\\\\n    mock_create_client,\\\\n    mock_prepare_request,\\\\n    google_model_info_fixture: ModelInfoDict,\\\\n    review_prompt_fixture: ReviewPrompt,\\\\n):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google API ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    mock_genai_client = MagicMock(spec=genai.Client)\\\\n    mock_genai_models = MagicMock()\\\\n    mock_genai_client.models = mock_genai_models\\\\n    mock_genai_response = MagicMock()\\\\n    mock_genai_response.text = \\\\\\\"\\\\\\\"\\\\\\\"{\\\\\\\"issues\\\\\\\": [{\\\\\\\"type\\\\\\\": \\\\\\\"issue\\\\\\\", \\\\\\\"description\\\\\\\": \\\\\\\"desc\\\\\\\", \\\\\\\"line_number\\\\\\\": invalid_value}]}\\\\\\\"\\\\\\\"\\\\\\\"  # ì˜ëª»ëœ JSON\\\\n    mock_genai_models.generate_content.return_value = mock_genai_response\\\\n    mock_create_client.return_value = mock_genai_client\\\\n\\\\n    with patch.object(MockBaseGateway, \\\\\\\"_create_request_params\\\\\\\"):\\\\n        gateway = MockBaseGateway(google_model_info_fixture)\\\\n        response = gateway.review_code(review_prompt_fixture)\\\\n\\\\n        assert len(response.issues) == 0\\\\n        assert \\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜\\\\\\\" in response.summary\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    pytest.main()\\\\n```\\\", \\\"line_number\\\": 1}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 170, \"file\": \"tests/test_llm_gateway_review_code.py\", \"description\": \"Google API ì‘ë‹µì„ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•´ JSON ë¬¸ìì—´ì„ ìˆ˜ë™ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ë°©ì‹ì´ ë³µì¡í•˜ê³  ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì ì²˜ë¦¬ê°€ ê¹Œë‹¤ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì˜ˆìƒë˜ëŠ” ì‘ë‹µ êµ¬ì¡°ë¥¼ Python ë”•ì…”ë„ˆë¦¬ë¡œ ë¨¼ì € ì •ì˜í•œ í›„, `json.dumps()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ë”•ì…”ë„ˆë¦¬ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ ë” ëª…í™•í•˜ê³  ì•ˆì „í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"    mock_genai_response.text = f\\\"\\\"\\\"\\n    {{\\n        \\\"issues\\\": {json.dumps(issues_list_for_json)},\\n        \\\"summary\\\": \\\"{expected_summary_genai}\\\", \\n        \\\"score\\\": {expected_score_genai}, \\n        \\\"recommendations\\\": {json.dumps(expected_recommendations_genai)}\\n    }}\\n    \\\"\\\"\\\"\", \"improved_code\": \"    expected_response_dict = {\\n        \\\"issues\\\": issues_list_for_json,\\n        \\\"summary\\\": expected_summary_genai,\\n        \\\"score\\\": expected_score_genai,\\n        \\\"recommendations\\\": expected_recommendations_genai,\\n    }\\n    mock_genai_response.text = json.dumps(expected_response_dict)\"}, {\"type\": \"bug\", \"line_number\": 208, \"file\": \"tests/test_llm_gateway_review_code.py\", \"description\": \"Google GenAI ì‘ë‹µ í…ŒìŠ¤íŠ¸ì—ì„œ ì´ìŠˆ ì‹¬ê°ë„(severity)ë¥¼ ë¬¸ìì—´ë¡œ ì§ì ‘ ë¹„êµí•˜ê³  ìˆìŠµë‹ˆë‹¤. `StructuredReviewIssue` ëª¨ë¸ì´ ì‹¬ê°ë„ë¥¼ `IssueSeverityEnum`ìœ¼ë¡œ íŒŒì‹±í•œë‹¤ë©´, Instructor í…ŒìŠ¤íŠ¸ì™€ ë§ˆì°¬ê°€ì§€ë¡œ Enum ê°’ì˜ `.value`ì™€ ë¹„êµí•˜ëŠ” ê²ƒì´ ë” ì •í™•í•˜ê³  ì¼ê´€ì ì…ë‹ˆë‹¤.\", \"suggestion\": \"íŒŒì‹±ëœ ì‹¬ê°ë„ ê°’ì´ Enumì´ê±°ë‚˜ Enumì˜ ë¬¸ìì—´ í‘œí˜„ì´ë¼ë©´, `IssueSeverityEnum(expected_issue_data[\\\"severity\\\"]).value`ì™€ ê°™ì´ Enum ê°’ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµí•˜ê±°ë‚˜, `actual_issue.severity`ê°€ ì´ë¯¸ Enum ê°’ì´ë¼ë©´ `.value`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„êµí•˜ë„ë¡ ìˆ˜ì •í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"            assert actual_issue.severity == expected_issue_data[\\\"severity\\\"]\", \"improved_code\": \"            assert actual_issue.severity == IssueSeverityEnum(expected_issue_data[\\\"severity\\\"]).value\"}], \"summary\": \"ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ íŒŒì¼ ë‘ ê°œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. `test_llm_gateway_request.py`ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´ë³„ ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±ì„ í…ŒìŠ¤íŠ¸í•˜ê³ , `test_llm_gateway_review_code.py`ëŠ” `BaseGateway`ì˜ `review_code` ë©”ì„œë“œ ë™ì‘ì„ ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤(ì„±ê³µ, ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì´ˆê³¼, ë¹ˆ ì‘ë‹µ, ì˜¤ë¥˜ ì²˜ë¦¬, íŒŒì‹± ì˜¤ë¥˜)ì— ëŒ€í•´ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ë†’ì´ëŠ” ì¢‹ì€ ë³€ê²½ì…ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"í…ŒìŠ¤íŠ¸ ì½”ë“œ ì „ë°˜ì— ê±¸ì³ ì¼ê´€ëœ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬(ì˜ˆ: pytest)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"Google GenAI ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜ ì‹œ JSON ë¬¸ìì—´ ìƒì„± ë°©ì‹ì„ ê°œì„ í•˜ì—¬ ê°€ë…ì„±ê³¼ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"ì´ìŠˆ ì‹¬ê°ë„ ë¹„êµ ë¡œì§ì„ `IssueSeverityEnum`ì„ í™œìš©í•˜ì—¬ ë” ëª…í™•í•˜ê³  ì¼ê´€ë˜ê²Œ ë§Œë“­ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.file_utils import find_project_root\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 21}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/file_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n    # ì‹¤í–‰ íŒŒì¼ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬\\\\n    \\\\\\\".exe\\\\\\\",\\\\n    \\\\\\\".dll\\\\\\\",\\\\n    \\\\\\\".so\\\\\\\",\\\\n    \\\\\\\".dylib\\\\\\\",\\\\n    \\\\\\\".bin\\\\\\\",\\\\n    \\\\\\\".o\\\\\\\",\\\\n    \\\\\\\".obj\\\\\\\",\\\\n    \\\\\\\".a\\\\\\\",\\\\n    \\\\\\\".lib\\\\\\\",\\\\n    # ì••ì¶• íŒŒì¼\\\\n    \\\\\\\".zip\\\\\\\",\\\\n    \\\\\\\".tar\\\\\\\",\\\\n    \\\\\\\".gz\\\\\\\",\\\\n    \\\\\\\".bz2\\\\\\\",\\\\n    \\\\\\\".xz\\\\\\\",\\\\n    \\\\\\\".jar\\\\\\\",\\\\n    \\\\\\\".war\\\\\\\",\\\\n    \\\\\\\".ear\\\\\\\",\\\\n    \\\\\\\".aar\\\\\\\",\\\\n    # ì´ë¯¸ì§€ íŒŒì¼\\\\n    \\\\\\\".jpg\\\\\\\",\\\\n    \\\\\\\".jpeg\\\\\\\",\\\\n    \\\\\\\".png\\\\\\\",\\\\n    \\\\\\\".gif\\\\\\\",\\\\n    \\\\\\\".bmp\\\\\\\",\\\\n    \\\\\\\".tiff\\\\\\\",\\\\n    \\\\\\\".ico\\\\\\\",\\\\n    \\\\\\\".webp\\\\\\\",\\\\n    # ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ íŒŒì¼\\\\n    \\\\\\\".mp3\\\\\\\",\\\\n    \\\\\\\".mp4\\\\\\\",\\\\n    \\\\\\\".wav\\\\\\\",\\\\n    \\\\\\\".avi\\\\\\\",\\\\n    \\\\\\\".mov\\\\\\\",\\\\n    \\\\\\\".mkv\\\\\\\",\\\\n    \\\\\\\".flac\\\\\\\",\\\\n    \\\\\\\".ogg\\\\\\\",\\\\n    # ë¬¸ì„œ íŒŒì¼\\\\n    \\\\\\\".pdf\\\\\\\",\\\\n    \\\\\\\".doc\\\\\\\",\\\\n    \\\\\\\".docx\\\\\\\",\\\\n    \\\\\\\".ppt\\\\\\\",\\\\n    \\\\\\\".pptx\\\\\\\",\\\\n    \\\\\\\".xls\\\\\\\",\\\\n    \\\\\\\".xlsx\\\\\\\",\\\\n    # ê¸°íƒ€ ë°”ì´ë„ˆë¦¬ íŒŒì¼\\\\n    \\\\\\\".class\\\\\\\",\\\\n    \\\\\\\".pyc\\\\\\\",\\\\n    \\\\\\\".pyo\\\\\\\",\\\\n    \\\\\\\".db\\\\\\\",\\\\n    \\\\\\\".sqlite\\\\\\\",\\\\n    \\\\\\\".dat\\\\\\\",\\\\n}\\\\n\\\\n# íŠ¹ìˆ˜ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nBINARY_FILENAMES = {\\\\n    \\\\\\\"gradlew\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.jar\\\\\\\",\\\\n    \\\\\\\"mvnw\\\\\\\",\\\\n    \\\\\\\"mvnw.cmd\\\\\\\",\\\\n    \\\\\\\".DS_Store\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.properties\\\\\\\",\\\\n    \\\\\\\"gradlew.bat\\\\\\\",\\\\n    \\\\\\\".gitignore\\\\\\\",\\\\n    \\\\\\\".gitmodules\\\\\\\",\\\\n    \\\\\\\".gitconfig\\\\\\\",\\\\n    \\\\\\\".git\\\\\\\",\\\\n    \\\\\\\".env\\\\\\\",\\\\n    \\\\\\\".env.local\\\\\\\",\\\\n    \\\\\\\".env.development\\\\\\\",\\\\n    \\\\\\\".env.production\\\\\\\",\\\\n    \\\\\\\".env.test\\\\\\\",\\\\n    \\\\\\\".env.development.local\\\\\\\",\\\\n    \\\\\\\".env.production.local\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef is_binary_file(filename: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): í™•ì¸í•  íŒŒì¼ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        bool: ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë©´ True, ì•„ë‹ˆë©´ False\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os.path\\\\n\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return ext in BINARY_EXTENSIONS or base_name in BINARY_FILENAMES\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(\\\\n            filename\\\\n        ):  # is_binary_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(\\\\n        f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íƒìƒ‰ ì™„ë£Œ ê²½ë¡œ: {current_dir}\\\\\\\"\\\\n    )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport os\\\\nfrom functools import lru_cache\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(\\\\n        f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. íƒìƒ‰ ì™„ë£Œ ê²½ë¡œ: {current_dir}\\\\\\\"\\\\n    )\\\\n```\\\", \\\"line_number\\\": 158}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root, is_binary_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not review_request.use_full_context:\\\\n            raise ValueError(\\\\\\\"full context í”Œë˜ê·¸ê°€ ì¼œì ¸ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                if not request.file_content:\\\\n                    logger.warning(\\\\n                        f\\\\\\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\\\\\"\\\\n                    )\\\\n                    file_content = \\\\\\\"\\\\\\\"\\\\n                else:\\\\n                    file_content = request.file_content\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\n\\\\nfrom reviewer.src.utils.file_utils import find_project_root, is_binary_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n```\\\", \\\"line_number\\\": 15}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `find_project_root` ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ `reviewer/src/utils/prompts/prompt_generator.py`ì—ì„œ `reviewer/src/utils/file_utils.py`ë¡œ ì´ë™ì‹œí‚¤ê³ , ê´€ë ¨ íŒŒì¼ë“¤ì˜ import êµ¬ë¬¸ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ì´ëŠ” íŒŒì¼ ì‹œìŠ¤í…œ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì „ìš© ëª¨ë“ˆì— ë°°ì¹˜í•˜ì—¬ ì½”ë“œ êµ¬ì¡°ì™€ ëª¨ë“ˆì„±ì„ ê°œì„ í•˜ëŠ” ê¸ì •ì ì¸ ë¦¬íŒ©í† ë§ì…ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ê¸°ëŠ¥ë³„ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ì½”ë“œ ì¡°ì§í™” ë°©ë²•ì…ë‹ˆë‹¤. ì•ìœ¼ë¡œë„ ìœ ì‚¬í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ëŠ” ì ì ˆí•œ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆì— ë°°ì¹˜í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"ì´ë™ëœ í•¨ìˆ˜ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ìˆë‹¤ë©´, í•´ë‹¹ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ìƒˆë¡œìš´ ìœ„ì¹˜ì— ë§ê²Œ ì—…ë°ì´íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/diff_parser/parser.py\\\", \\\"file_content\\\": \\\"import re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_FILE_HEADER = re.compile(r\\\\\\\"^diff --git a/(\\\\\\\\S+) b/(\\\\\\\\S+)\\\\\\\", flags=re.MULTILINE)\\\\n\\\\n\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ DiffResult ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        diff_text (str): git diff ëª…ë ¹ì–´ì˜ ì¶œë ¥ í…ìŠ¤íŠ¸\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        DiffResult: Git diff ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´\\\\n\\\\n    Raises:\\\\n        DiffParsingError: diffê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹ì¸ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not diff_text:\\\\n        raise DiffParsingError(\\\\\\\"ë¹ˆ diffê°€ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    file_diffs = _PATTERN_DIFF_SPLIT.split(diff_text)\\\\n    result = DiffResult()\\\\n\\\\n    for raw_diff in file_diffs:\\\\n        if not raw_diff.strip():\\\\n            continue\\\\n        header_match = _PATTERN_FILE_HEADER.search(raw_diff)\\\\n        if header_match:\\\\n            filename = header_match.group(2)\\\\n        else:\\\\n            continue\\\\n\\\\n        hunks = _PATTERN_HUNK_SPLIT.split(raw_diff)\\\\n        hunk_list = [\\\\n            Hunk.from_hunk_text(h) for h in hunks if h.lstrip().startswith(\\\\\\\"@@\\\\\\\")\\\\n        ]\\\\n\\\\n        if use_full_context:\\\\n            file_content = load_file_content(filename, repo_path)\\\\n        else:\\\\n            file_content = None\\\\n\\\\n        parsed_diff = FileDiff(\\\\n            filename=filename, file_content=file_content, hunks=hunk_list\\\\n        )\\\\n        parsed_diff.detect_language()\\\\n        parsed_diff.calculate_changes()\\\\n        result.files.append(parsed_diff)\\\\n\\\\n    if not result.files:\\\\n        raise DiffParsingError(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ diff í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    return result\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils.prompts import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_binary_file, load_file_content\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import is_binary_file, load_file_content\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"load_file_content\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 21}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/file_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nfrom functools import lru_cache\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n    # ì‹¤í–‰ íŒŒì¼ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬\\\\n    \\\\\\\".exe\\\\\\\",\\\\n    \\\\\\\".dll\\\\\\\",\\\\n    \\\\\\\".so\\\\\\\",\\\\n    \\\\\\\".dylib\\\\\\\",\\\\n    \\\\\\\".bin\\\\\\\",\\\\n    \\\\\\\".o\\\\\\\",\\\\n    \\\\\\\".obj\\\\\\\",\\\\n    \\\\\\\".a\\\\\\\",\\\\n    \\\\\\\".lib\\\\\\\",\\\\n    # ì••ì¶• íŒŒì¼\\\\n    \\\\\\\".zip\\\\\\\",\\\\n    \\\\\\\".tar\\\\\\\",\\\\n    \\\\\\\".gz\\\\\\\",\\\\n    \\\\\\\".bz2\\\\\\\",\\\\n    \\\\\\\".xz\\\\\\\",\\\\n    \\\\\\\".jar\\\\\\\",\\\\n    \\\\\\\".war\\\\\\\",\\\\n    \\\\\\\".ear\\\\\\\",\\\\n    \\\\\\\".aar\\\\\\\",\\\\n    # ì´ë¯¸ì§€ íŒŒì¼\\\\n    \\\\\\\".jpg\\\\\\\",\\\\n    \\\\\\\".jpeg\\\\\\\",\\\\n    \\\\\\\".png\\\\\\\",\\\\n    \\\\\\\".gif\\\\\\\",\\\\n    \\\\\\\".bmp\\\\\\\",\\\\n    \\\\\\\".tiff\\\\\\\",\\\\n    \\\\\\\".ico\\\\\\\",\\\\n    \\\\\\\".webp\\\\\\\",\\\\n    # ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ íŒŒì¼\\\\n    \\\\\\\".mp3\\\\\\\",\\\\n    \\\\\\\".mp4\\\\\\\",\\\\n    \\\\\\\".wav\\\\\\\",\\\\n    \\\\\\\".avi\\\\\\\",\\\\n    \\\\\\\".mov\\\\\\\",\\\\n    \\\\\\\".mkv\\\\\\\",\\\\n    \\\\\\\".flac\\\\\\\",\\\\n    \\\\\\\".ogg\\\\\\\",\\\\n    # ë¬¸ì„œ íŒŒì¼\\\\n    \\\\\\\".pdf\\\\\\\",\\\\n    \\\\\\\".doc\\\\\\\",\\\\n    \\\\\\\".docx\\\\\\\",\\\\n    \\\\\\\".ppt\\\\\\\",\\\\n    \\\\\\\".pptx\\\\\\\",\\\\n    \\\\\\\".xls\\\\\\\",\\\\n    \\\\\\\".xlsx\\\\\\\",\\\\n    # ê¸°íƒ€ ë°”ì´ë„ˆë¦¬ íŒŒì¼\\\\n    \\\\\\\".class\\\\\\\",\\\\n    \\\\\\\".pyc\\\\\\\",\\\\n    \\\\\\\".pyo\\\\\\\",\\\\n    \\\\\\\".db\\\\\\\",\\\\n    \\\\\\\".sqlite\\\\\\\",\\\\n    \\\\\\\".dat\\\\\\\",\\\\n}\\\\n\\\\n# íŠ¹ìˆ˜ íŒŒì¼ ì´ë¦„ ëª©ë¡\\\\nBINARY_FILENAMES = {\\\\n    \\\\\\\"gradlew\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.jar\\\\\\\",\\\\n    \\\\\\\"mvnw\\\\\\\",\\\\n    \\\\\\\"mvnw.cmd\\\\\\\",\\\\n    \\\\\\\".DS_Store\\\\\\\",\\\\n    \\\\\\\"gradle-wrapper.properties\\\\\\\",\\\\n    \\\\\\\"gradlew.bat\\\\\\\",\\\\n    \\\\\\\".gitignore\\\\\\\",\\\\n    \\\\\\\".gitmodules\\\\\\\",\\\\n    \\\\\\\".gitconfig\\\\\\\",\\\\n    \\\\\\\".git\\\\\\\",\\\\n    \\\\\\\".env\\\\\\\",\\\\n    \\\\\\\".env.local\\\\\\\",\\\\n    \\\\\\\".env.development\\\\\\\",\\\\n    \\\\\\\".env.production\\\\\\\",\\\\n    \\\\\\\".env.test\\\\\\\",\\\\n    \\\\\\\".env.development.local\\\\\\\",\\\\n    \\\\\\\".env.production.local\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef is_binary_file(filename: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ëª…ì´ë‚˜ í™•ì¥ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): í™•ì¸í•  íŒŒì¼ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        bool: ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë©´ True, ì•„ë‹ˆë©´ False\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    import os.path\\\\n\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return ext in BINARY_EXTENSIONS or base_name in BINARY_FILENAMES\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(\\\\n            filename\\\\n        ):  # is_binary_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n    # ì‹¤í–‰ íŒŒì¼ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport os\\\\nfrom functools import lru_cache\\\\n\\\\n\\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì™€ ìƒìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n# ì œì™¸í•  ë°”ì´ë„ˆë¦¬/ë¹„í…ìŠ¤íŠ¸ íŒŒì¼ í™•ì¥ì ëª©ë¡\\\\nBINARY_EXTENSIONS = {\\\\n    # ì‹¤í–‰ íŒŒì¼ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return ext in BINARY_EXTENSIONS or base_name in BINARY_FILENAMES\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # í™•ì¥ì ë˜ëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ í™•ì¸\\\\n    _, ext = os.path.splitext(filename.lower())\\\\n    base_name = os.path.basename(filename)\\\\n\\\\n    return ext in BINARY_EXTENSIONS or base_name in BINARY_FILENAMES\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(\\\\n            filename\\\\n        ):  # is_binary_fileì€ ê°™ì€ íŒŒì¼ ë‚´ì— ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì‚¬ìš©\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n```\\\", \\\"line_number\\\": 97}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\n\\\\n__all__ = [\\\\\\\"PromptGenerator\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    load_file_content,\\\\n)\\\\n\\\\n__all__ = [\\\\\\\"PromptGenerator\\\\\\\", \\\\\\\"load_file_content\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\n\\\\n__all__ = [\\\\\\\"PromptGenerator\\\\\\\"]\\\\n```\\\", \\\"line_number\\\": 1}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                if not request.file_content:\\\\n                    logger.warning(\\\\n                        f\\\\\\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\\\\\"\\\\n                    )\\\\n                    file_content = \\\\\\\"\\\\\\\"\\\\n                else:\\\\n                    file_content = request.file_content\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.logging.config import get_logger\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n```\\\", \\\"line_number\\\": 46}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                if not request.file_content:\\\\n                    logger.warning(\\\\n                        f\\\\\\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\\\\\"\\\\n                    )\\\\n                    file_content = \\\\\\\"\\\\\\\"\\\\n                else:\\\\n                    file_content = request.file_content\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n```\\\", \\\"line_number\\\": 149}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"tests/test_llm_gateway.py\\\", \\\"file_content\\\": \\\"import unittest\\\\nfrom unittest.mock import patch\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, get_model_info\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.exceptions.unsupported_model_error import UnsupportedModelError\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import (\\\\n    ClaudeGateway,\\\\n    GatewayFactory,\\\\n    GoogleGateway,\\\\n    OpenAIGateway,\\\\n)\\\\n\\\\n\\\\nclass TestOpenAIGateway(unittest.TestCase):\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_init_with_valid_model(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì™€ ìœ íš¨í•œ ëª¨ë¸ë¡œ OpenAIGateway ì´ˆê¸°í™”ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        # í…ŒìŠ¤íŠ¸í•  ëª¨ë¸ ê°€ì ¸ì˜¤ê¸°\\\\n        model_info = get_model_info(\\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertIsNotNone(model_info)\\\\n\\\\n        # ê²Œì´íŠ¸ì›¨ì´ ìƒì„±\\\\n        gateway = OpenAIGateway(model_info)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(gateway.model, model_info)\\\\n        mock_get_api_key.assert_called_once_with(\\\\\\\"openai\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_init_with_invalid_model_provider(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì˜ëª»ëœ ëª¨ë¸ ì œê³µìë¡œ OpenAIGateway ì´ˆê¸°í™” ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        # ì‹¤ì œ ì¡´ì¬í•˜ëŠ” Claude ëª¨ë¸ ì •ë³´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ëª¨í‚¹\\\\n        claude_model_info: ModelInfoDict = {\\\\n            \\\\\\\"full_name\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n            \\\\\\\"aliases\\\\\\\": [\\\\\\\"claude-3-7-sonnet\\\\\\\"],\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"Claude ëª¨ë¸\\\\\\\",\\\\n            \\\\\\\"provider\\\\\\\": \\\\\\\"claude\\\\\\\",  # OpenAIê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì œê³µì\\\\n            \\\\\\\"params\\\\\\\": {\\\\n                \\\\\\\"temperature\\\\\\\": 0.0,\\\\n            },\\\\n        }\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(InvalidModelProviderError) as context:\\\\n            OpenAIGateway(claude_model_info)\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.model_name, \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n        self.assertEqual(context.exception.expected_provider, \\\\\\\"openAI\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_init_without_api_key(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì—†ì´ OpenAIGateway ì´ˆê¸°í™” ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ì—†ìŒ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = None\\\\n\\\\n        # í…ŒìŠ¤íŠ¸í•  ëª¨ë¸ ê°€ì ¸ì˜¤ê¸°\\\\n        model_info = get_model_info(\\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertIsNotNone(model_info)\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(APIKeyNotFoundError) as context:\\\\n            OpenAIGateway(model_info)\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.provider, \\\\\\\"openai\\\\\\\")\\\\n\\\\n\\\\nclass TestClaudeGateway(unittest.TestCase):\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_init_with_valid_model(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì™€ ìœ íš¨í•œ ëª¨ë¸ë¡œ ClaudeGateway ì´ˆê¸°í™”ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        # í…ŒìŠ¤íŠ¸í•  ëª¨ë¸ ê°€ì ¸ì˜¤ê¸°\\\\n        model_info = get_model_info(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n        self.assertIsNotNone(model_info)\\\\n\\\\n        # ê²Œì´íŠ¸ì›¨ì´ ìƒì„±\\\\n        gateway = ClaudeGateway(model_info)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n        self.assertEqual(gateway.model, model_info)\\\\n        mock_get_api_key.assert_called_once_with(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_init_with_invalid_model_provider(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì˜ëª»ëœ ëª¨ë¸ ì œê³µìë¡œ ClaudeGateway ì´ˆê¸°í™” ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        # ì‹¤ì œ ì¡´ì¬í•˜ëŠ” OpenAI ëª¨ë¸ ì •ë³´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ëª¨í‚¹\\\\n        openai_model_info: ModelInfoDict = {\\\\n            \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n            \\\\\\\"aliases\\\\\\\": [],\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"OpenAI ëª¨ë¸\\\\\\\",\\\\n            \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",  # Claudeê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì œê³µì\\\\n            \\\\\\\"params\\\\\\\": {\\\\n                \\\\\\\"temperature\\\\\\\": 0.0,\\\\n            },\\\\n        }\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(InvalidModelProviderError) as context:\\\\n            ClaudeGateway(openai_model_info)\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.model_name, \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(context.exception.expected_provider, \\\\\\\"claude\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_init_without_api_key(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì—†ì´ ClaudeGateway ì´ˆê¸°í™” ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ì—†ìŒ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = None\\\\n\\\\n        # í…ŒìŠ¤íŠ¸í•  ëª¨ë¸ ê°€ì ¸ì˜¤ê¸°\\\\n        model_info = get_model_info(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n        self.assertIsNotNone(model_info)\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(APIKeyNotFoundError) as context:\\\\n            ClaudeGateway(model_info)\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.provider, \\\\\\\"claude\\\\\\\")\\\\n\\\\n\\\\nclass TestGoogleGateway(unittest.TestCase):\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_init_with_valid_model(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì™€ ìœ íš¨í•œ ëª¨ë¸ë¡œ GoogleGateway ì´ˆê¸°í™”ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        model_info = get_model_info(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n        self.assertIsNotNone(model_info)\\\\n\\\\n        # ê²Œì´íŠ¸ì›¨ì´ ìƒì„±\\\\n        gateway = GoogleGateway(model_info)\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(gateway.get_model_name(), model_info[\\\\\\\"full_name\\\\\\\"])\\\\n        self.assertEqual(gateway.model, model_info)\\\\n        mock_get_api_key.assert_called_once_with(\\\\\\\"google\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_init_with_invalid_model_provider(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì˜ëª»ëœ ëª¨ë¸ ì œê³µìë¡œ GoogleGateway ì´ˆê¸°í™” ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        # ì‹¤ì œ ì¡´ì¬í•˜ëŠ” OpenAI ëª¨ë¸ ì •ë³´ë¥¼ ë°˜í™˜í•˜ë„ë¡ ëª¨í‚¹ (Claude í…ŒìŠ¤íŠ¸ì™€ ìœ ì‚¬)\\\\n        openai_model_info: ModelInfoDict = {\\\\n            \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n            \\\\\\\"aliases\\\\\\\": [],\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"OpenAI ëª¨ë¸\\\\\\\",\\\\n            \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",  # Googleì´ ì•„ë‹Œ ë‹¤ë¥¸ ì œê³µì\\\\n            \\\\\\\"params\\\\\\\": {\\\\n                \\\\\\\"temperature\\\\\\\": 0.0,\\\\n            },\\\\n        }\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(InvalidModelProviderError) as context:\\\\n            GoogleGateway(openai_model_info)\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.model_name, \\\\\\\"gpt-4o\\\\\\\")\\\\n        self.assertEqual(context.exception.expected_provider, \\\\\\\"google\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_init_without_api_key(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì—†ì´ GoogleGateway ì´ˆê¸°í™” ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # API í‚¤ ì—†ìŒ ëª¨í‚¹\\\\n        mock_get_api_key.return_value = None\\\\n\\\\n        # í…ŒìŠ¤íŠ¸í•  ëª¨ë¸ ê°€ì ¸ì˜¤ê¸° (test_init_with_valid_modelê³¼ ë™ì¼ ë¡œì§)\\\\n        try:\\\\n            model_info = get_model_info(\\\\\\\"gemini-pro\\\\\\\")\\\\n        except UnsupportedModelError:\\\\n            model_info: ModelInfoDict = {\\\\n                \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro\\\\\\\",\\\\n                \\\\\\\"aliases\\\\\\\": [],\\\\n                \\\\\\\"description\\\\\\\": \\\\\\\"Google ëª¨ë¸\\\\\\\",\\\\n                \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n                \\\\\\\"params\\\\\\\": {\\\\\\\"temperature\\\\\\\": 0.0},\\\\n            }\\\\n            print(\\\\n                \\\\\\\"Warning: 'gemini-2.5-pro' model not found in available_models. Using mock data for TestGoogleGateway.\\\\\\\"\\\\n            )\\\\n        self.assertIsNotNone(model_info)\\\\n        model_info[\\\\\\\"provider\\\\\\\"] = \\\\\\\"google\\\\\\\"\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(APIKeyNotFoundError) as context:\\\\n            GoogleGateway(model_info)\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.provider, \\\\\\\"google\\\\\\\")\\\\n\\\\n\\\\nclass TestCreateLLMGateway(unittest.TestCase):\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.get_api_key\\\\\\\")\\\\n    def test_create_openai_gateway(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI ëª¨ë¸ëª…ìœ¼ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ ì‹¤ì œ OpenAIGateway ë°˜í™˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        gateway = GatewayFactory.create(\\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n        # ê²€ì¦ - ì‹¤ì œ OpenAIGateway ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ í™•ì¸\\\\n        self.assertIsInstance(gateway, OpenAIGateway)\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"gpt-4o\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.claude_gateway.get_api_key\\\\\\\")\\\\n    def test_create_claude_gateway(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude ëª¨ë¸ëª…ìœ¼ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ ClaudeGateway ë°˜í™˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        gateway = GatewayFactory.create(\\\\\\\"claude-3-7-sonnet\\\\\\\")\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertIsInstance(gateway, ClaudeGateway)\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n\\\\n    # create test_create_google_gateway\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_create_google_gateway(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google ëª¨ë¸ëª…ìœ¼ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ GoogleGateway ë°˜í™˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        gateway = GatewayFactory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertIsInstance(gateway, GoogleGateway)\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\")\\\\n\\\\n    # UnsupportedModelError í…ŒìŠ¤íŠ¸\\\\n    @patch(\\\\n        \\\\\\\"reviewer.src.llm_gateway.gateway_factory.get_model_info\\\\\\\",\\\\n        side_effect=UnsupportedModelError(\\\\\\\"unsupported-model\\\\\\\"),\\\\n    )\\\\n    def test_create_gateway_with_unsupported_model(self, mock_get_model_info):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ëª…ìœ¼ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(UnsupportedModelError) as context:\\\\n            GatewayFactory.create(\\\\\\\"unsupported-model\\\\\\\")\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.model_name, \\\\\\\"unsupported-model\\\\\\\")\\\\n        mock_get_model_info.assert_called_once_with(\\\\\\\"unsupported-model\\\\\\\")\\\\n\\\\n    # UnsupportedProviderError í…ŒìŠ¤íŠ¸\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.gateway_factory.get_model_info\\\\\\\")\\\\n    def test_create_gateway_with_unsupported_provider(self, mock_get_model_info):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì œê³µìë¥¼ ê°€ì§„ ëª¨ë¸ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ ì˜ˆì™¸ ë°œìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì§€ì›í•˜ì§€ ì•ŠëŠ” ì œê³µìë¥¼ ê°€ì§„ ëª¨ë¸ ì •ë³´ ë°˜í™˜\\\\n        mock_get_model_info.return_value = {\\\\n            \\\\\\\"full_name\\\\\\\": \\\\\\\"wrong_model_name\\\\\\\",\\\\n            \\\\\\\"aliases\\\\\\\": [],\\\\n            \\\\\\\"description\\\\\\\": \\\\\\\"ì˜ëª»ëœ ëª¨ë¸\\\\\\\",\\\\n            \\\\\\\"provider\\\\\\\": \\\\\\\"unsupported_provider\\\\\\\",  # ì§€ì›í•˜ì§€ ì•ŠëŠ” ì œê³µì\\\\n            \\\\\\\"params\\\\\\\": {},\\\\n        }\\\\n\\\\n        # ì˜ˆì™¸ ë°œìƒ í™•ì¸\\\\n        with self.assertRaises(UnsupportedProviderError) as context:\\\\n            GatewayFactory.create(\\\\\\\"wrong_model_name\\\\\\\")\\\\n\\\\n        # ì˜ˆì™¸ ì†ì„± ê²€ì¦\\\\n        self.assertEqual(context.exception.provider, \\\\\\\"unsupported_provider\\\\\\\")\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    unittest.main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport unittest\\\\nfrom unittest.mock import MagicMock, patch\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, get_model_info\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport unittest\\\\nfrom unittest.mock import patch\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict, get_model_info\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertIsInstance(gateway, ClaudeGateway)\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.openai_gateway.OpenAIGateway\\\\\\\")\\\\n    def test_create_default_gateway(self, mock_openai_gateway):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šì•˜ì„ ë•Œ ê¸°ë³¸ ëª¨ë¸ ì‚¬ìš©ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n        # ëª¨ì˜ ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •\\\\n        mock_instance = MagicMock()\\\\n        mock_openai_gateway.return_value = mock_instance\\\\n\\\\n        # ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šê³  í•¨ìˆ˜ í˜¸ì¶œ\\\\n        gateway = GatewayFactory.create(\\\\\\\"o4-mini\\\\\\\")\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertEqual(gateway, mock_instance)\\\\n        model_info = get_model_info(\\\\\\\"o4-mini\\\\\\\")\\\\n        self.assertIsNotNone(model_info)\\\\n        mock_openai_gateway.assert_called_once_with(model_info=model_info)\\\\n\\\\n    # UnsupportedModelError í…ŒìŠ¤íŠ¸\\\\n    @patch(\\\\n        \\\\\\\"reviewer.src.llm_gateway.gateway_factory.get_model_info\\\\\\\",\\\\n        side_effect=UnsupportedModelError(\\\\\\\"unsupported-model\\\\\\\"),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertIsInstance(gateway, ClaudeGateway)\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\")\\\\n\\\\n    # create test_create_google_gateway\\\\n    @patch(\\\\\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\\\\\")\\\\n    def test_create_google_gateway(self, mock_get_api_key):\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google ëª¨ë¸ëª…ìœ¼ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ GoogleGateway ë°˜í™˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        mock_get_api_key.return_value = \\\\\\\"fake-api-key\\\\\\\"\\\\n\\\\n        gateway = GatewayFactory.create(\\\\\\\"gemini-2.5-pro\\\\\\\")\\\\n\\\\n        # ê²€ì¦\\\\n        self.assertIsInstance(gateway, GoogleGateway)\\\\n        self.assertEqual(gateway.get_model_name(), \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\")\\\\n\\\\n    # UnsupportedModelError í…ŒìŠ¤íŠ¸\\\\n    @patch(\\\\n        \\\\\\\"reviewer.src.llm_gateway.gateway_factory.get_model_info\\\\\\\",\\\\n        side_effect=UnsupportedModelError(\\\\\\\"unsupported-model\\\\\\\"),\\\\n```\\\", \\\"line_number\\\": 235}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 169, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"_create_full_context_code_review_prompt í•¨ìˆ˜ì—ì„œ íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆì„ ë•Œ ë¡œê¹…ë˜ëŠ” ê²½ê³  ë©”ì‹œì§€ê°€ \\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤\\\"ë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‹¤ì œ íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•˜ì§€ë§Œ, ë©”ì‹œì§€ë§Œìœ¼ë¡œëŠ” ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë‚˜ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼ì˜ í”Œë ˆì´ìŠ¤í™€ë”ê°€ ì—†ëŠ” ê²½ìš°ì™€ í˜¼ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `load_file_content` í•¨ìˆ˜ëŠ” ë°”ì´ë„ˆë¦¬/ì¸ì½”ë”© ì˜¤ë¥˜ íŒŒì¼ì— ëŒ€í•´ í”Œë ˆì´ìŠ¤í™€ë” ë¬¸ìì—´ì„ ë°˜í™˜í•˜ë¯€ë¡œ, `request.file_content`ê°€ ì™„ì „íˆ ë¹„ì–´ìˆëŠ” ê²½ìš°ëŠ” ë“œë¬¼ ê²ƒì…ë‹ˆë‹¤.\", \"suggestion\": \"ë©”ì‹œì§€ë¥¼ \\\"íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\" ë˜ëŠ” \\\"íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆì–´ í”„ë¡¬í”„íŠ¸ì— ë¹ˆ ë‚´ìš©ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤\\\" ë“±ìœ¼ë¡œ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ê±°ë‚˜, ê²½ê³  ìˆ˜ì¤€ì„ `info`ë¡œ ë‚®ì¶”ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜ëŠ” í”Œë ˆì´ìŠ¤í™€ë”ë„ ìœ íš¨í•œ ë‚´ìš©ìœ¼ë¡œ ê°„ì£¼í•˜ê³  í•´ë‹¹ ì¡°ê±´ ë° ë¡œê¹…ì„ ì œê±°í•˜ëŠ” ê²ƒë„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"                        if not request.file_content:\\n                            logger.warning(\\n                                f\\\"íŒŒì¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\"\\n                            )\\n                            file_content = \\\"\\\"\\n                        else:\\n                            file_content = request.file_content\", \"improved_code\": \"                        # íŒŒì¼ ë‚´ìš© ì‚¬ìš© (parse_git_diffì—ì„œ ì´ë¯¸ ë¡œë“œë¨)\\n                        # load_file_contentëŠ” ë°”ì´ë„ˆë¦¬/ì¸ì½”ë”© ì˜¤ë¥˜ íŒŒì¼ì— ëŒ€í•´ í”Œë ˆì´ìŠ¤í™€ë” ë¬¸ìì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\n                        # ë”°ë¼ì„œ request.file_contentëŠ” Noneì´ ì•„ë‹ˆë©°, ë¹ˆ ë¬¸ìì—´ì¼ ê°€ëŠ¥ì„±ì€ ë‚®ìŠµë‹ˆë‹¤.\\n                        # í”Œë ˆì´ìŠ¤í™€ë”ë„ í”„ë¡¬í”„íŠ¸ì— í¬í•¨í•˜ëŠ” ê²ƒì´ ì˜ë„ë¼ë©´, ë³„ë„ì˜ ê²€ì‚¬ ì—†ì´ ë°”ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\\n                        file_content = request.file_content\\n\\n                        # ë§Œì•½ ë‚´ìš©ì´ ë¹„ì–´ìˆëŠ” íŒŒì¼(í”Œë ˆì´ìŠ¤í™€ë” ì œì™¸)ì„ ê±´ë„ˆë›°ê³  ì‹¶ë‹¤ë©´ ì—¬ê¸°ì— ì¡°ê±´ì„ ì¶”ê°€í•©ë‹ˆë‹¤.\\n                        # ì˜ˆ: if not file_content or file_content.startswith(\\\"[\\\"): continue\\n                        # ë˜ëŠ” ë¹ˆ íŒŒì¼ì— ëŒ€í•œ ë¡œê¹… ë©”ì‹œì§€ë¥¼ ë” ëª…í™•í•˜ê²Œ ìˆ˜ì •:\\n                        # if not request.file_content:\\n                        #     logger.info(f\\\"íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œ: {request.filename}\\\")\\n                        #     file_content = \\\"\\\"\"}, {\"type\": \"style\", \"line_number\": 235, \"file\": \"tests/test_llm_gateway.py\", \"description\": \"`test_create_default_gateway` í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ëŠ” ëª¨ë¸ ì´ë¦„ì´ ëª…ì‹œë˜ì§€ ì•Šì•˜ì„ ë•Œ `GatewayFactory.create`ê°€ ê¸°ë³¸ ëª¨ë¸ì„ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì—­í• ì„ í–ˆìŠµë‹ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ì˜ ì œê±°ê°€ `GatewayFactory`ì˜ ê¸°ë³¸ ëª¨ë¸ ì„ íƒ ë¡œì§ ë³€ê²½ ë˜ëŠ” ì œê±°ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ê°ì†Œí•œ ê²ƒì…ë‹ˆë‹¤.\", \"suggestion\": \"`GatewayFactory`ì— ê¸°ë³¸ ëª¨ë¸ ì„ íƒ ë¡œì§ì´ ì—¬ì „íˆ ì¡´ì¬í•œë‹¤ë©´, í•´ë‹¹ ë¡œì§ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°ì¡´ í…ŒìŠ¤íŠ¸ë¥¼ ë³µì›í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”. ê¸°ë³¸ ëª¨ë¸ ë¡œì§ì´ ì œê±°ë˜ì—ˆë‹¤ë©´, í•´ë‹¹ ë³€ê²½ ì‚¬í•­ì´ ì˜ë„ëœ ê²ƒì¸ì§€ í™•ì¸í•˜ê³  ê´€ë ¨ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"\\n        # ê²€ì¦\\n        self.assertIsInstance(gateway, ClaudeGateway)\\n        self.assertEqual(gateway.get_model_name(), \\\"claude-3-7-sonnet-20250219\\\")\\n\\n    @patch(\\\"reviewer.src.llm_gateway.openai_gateway.OpenAIGateway\\\")\\n    def test_create_default_gateway(self, mock_openai_gateway):\\n        \\\"\\\"\\\"ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šì•˜ì„ ë•Œ ê¸°ë³¸ ëª¨ë¸ ì‚¬ìš©ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n\\n        # ëª¨ì˜ ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •\\n        mock_instance = MagicMock()\\n        mock_openai_gateway.return_value = mock_instance\\n\\n        # ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šê³  í•¨ìˆ˜ í˜¸ì¶œ\\n        gateway = GatewayFactory.create(\\\"o4-mini\\\")\\n\\n        # ê²€ì¦\\n        self.assertEqual(gateway, mock_instance)\\n        model_info = get_model_info(\\\"o4-mini\\\")\\n        self.assertIsNotNone(model_info)\\n        mock_openai_gateway.assert_called_once_with(model_info=model_info)\\n\\n    # UnsupportedModelError í…ŒìŠ¤íŠ¸\\n    @patch(\\n        \\\"reviewer.src.llm_gateway.gateway_factory.get_model_info\\\",\\n        side_effect=UnsupportedModelError(\\\"unsupported-model\\\"),\\n    )\", \"improved_code\": \"\\n        # ê²€ì¦\\n        self.assertIsInstance(gateway, ClaudeGateway)\\n        self.assertEqual(gateway.get_model_name(), \\\"claude-3-7-sonnet-20250219\\\")\\n\\n    # ê¸°ë³¸ ëª¨ë¸ ì„ íƒ ë¡œì§ í…ŒìŠ¤íŠ¸ (ë³µì› ë˜ëŠ” ëŒ€ì²´ í…ŒìŠ¤íŠ¸ ì¶”ê°€)\\n    # MagicMock import í•„ìš”\\n    from unittest.mock import MagicMock\\n    @patch(\\\"reviewer.src.llm_gateway.openai_gateway.OpenAIGateway\\\") # ë˜ëŠ” ì ì ˆí•œ ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´\\n    def test_create_default_gateway(self, mock_openai_gateway):\\n        \\\"\\\"\\\"ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šì•˜ì„ ë•Œ ê¸°ë³¸ ëª¨ë¸ ì‚¬ìš©ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n\\n        # ëª¨ì˜ ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •\\n        mock_instance = MagicMock()\\n        mock_openai_gateway.return_value = mock_instance\\n\\n        # ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šê³  í•¨ìˆ˜ í˜¸ì¶œ (ê¸°ë³¸ ëª¨ë¸ì´ ì‚¬ìš©ë  ê²ƒìœ¼ë¡œ ì˜ˆìƒ)\\n        # GatewayFactory.create í•¨ìˆ˜ê°€ ê¸°ë³¸ ëª¨ë¸ì„ ì–´ë–»ê²Œ ê²°ì •í•˜ëŠ”ì§€ì— ë”°ë¼ ì¸ì ì¡°ì • í•„ìš”\\n        gateway = GatewayFactory.create() # ê¸°ë³¸ ëª¨ë¸ í…ŒìŠ¤íŠ¸ ì‹œ ì¸ì ì—†ì„ ìˆ˜ ìˆìŒ\\n\\n        # ê²€ì¦\\n        self.assertEqual(gateway, mock_instance)\\n        # ê¸°ë³¸ ëª¨ë¸ ì •ë³´ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì— ë”°ë¼ ê²€ì¦ ì¡°ì • í•„ìš”\\n        # model_info = get_model_info(\\\"o4-mini\\\") # ë˜ëŠ” ì‹¤ì œ ê¸°ë³¸ ëª¨ë¸ëª…\\n        # self.assertIsNotNone(model_info)\\n        # mock_openai_gateway.assert_called_once_with(model_info=model_info)\\n\\n\\n    # create test_create_google_gateway\\n    @patch(\\\"reviewer.src.llm_gateway.google_gateway.get_api_key\\\")\\n    def test_create_google_gateway(self, mock_get_api_key):\\n        \\\"\\\"\\\"Google ëª¨ë¸ëª…ìœ¼ë¡œ get_llm_gateway í˜¸ì¶œ ì‹œ GoogleGateway ë°˜í™˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n        mock_get_api_key.return_value = \\\"fake-api-key\\\"\\n\\n        gateway = GatewayFactory.create(\\\"gemini-2.5-pro\\\")\\n\\n        # ê²€ì¦\\n        self.assertIsInstance(gateway, GoogleGateway)\\n        self.assertEqual(gateway.get_model_name(), \\\"gemini-2.5-pro-exp-03-25\\\")\\n\\n    # UnsupportedModelError í…ŒìŠ¤íŠ¸\\n    @patch(\\n        \\\"reviewer.src.llm_gateway.gateway_factory.get_model_info\\\",\\n        side_effect=UnsupportedModelError(\\\"unsupported-model\\\"),\\n    )\"}], \"summary\": \"íŒŒì¼ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì¸ `load_file_content`ê°€ `reviewer/src/utils/file_utils.py`ë¡œ ì´ë™ë˜ì—ˆê³ , ìºì‹±ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ ìƒì„± ë¡œì§ì€ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš© ì‹œ diff íŒŒì‹± ë‹¨ê³„ì—ì„œ ë¯¸ë¦¬ ë¡œë“œëœ íŒŒì¼ ë‚´ìš©ì„ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë ¨ íŒŒì¼ë“¤ì˜ ì„í¬íŠ¸ ê²½ë¡œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìœ¼ë©°, LLM ê²Œì´íŠ¸ì›¨ì´ í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ ì¼ë¶€ í…ŒìŠ¤íŠ¸ê°€ ìˆ˜ì •/ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"í”„ë¡¬í”„íŠ¸ ìƒì„± ì‹œ íŒŒì¼ ë‚´ìš©ì´ ë¹„ì–´ìˆì„ ë•Œì˜ ë¡œê¹… ë©”ì‹œì§€ë¥¼ ë” ëª…í™•í•˜ê²Œ ìˆ˜ì •í•˜ê±°ë‚˜ ë¡œê¹… ìˆ˜ì¤€ì„ ì¡°ì •í•˜ì—¬ í˜¼ë™ì„ ì¤„ì…ë‹ˆë‹¤.\", \"LLM ê²Œì´íŠ¸ì›¨ì´ íŒ©í† ë¦¬ì˜ ê¸°ë³¸ ëª¨ë¸ ì„ íƒ ë¡œì§ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ìœ ì§€ë˜ëŠ”ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ ì œê±°ëœ í…ŒìŠ¤íŠ¸ë¥¼ ë³µì›í•˜ê±°ë‚˜ ëŒ€ì²´ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 7}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n```\\\", \\\"line_number\\\": 91}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 131}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n```\\\", \\\"line_number\\\": 293}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n```\\\", \\\"line_number\\\": 336}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_api_key_error import InvalidAPIKeyError\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef _validate_api_key(api_key: str, provider: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ê²€ì¦í•  API í‚¤\\\\n        provider: API ì œê³µì ì´ë¦„\\\\n\\\\n    Raises:\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ë¹ˆ ê°’ì´ê±°ë‚˜ ë„ˆë¬´ ì§§ì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not api_key or api_key.strip() == \\\\\\\"\\\\\\\":\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        raise InvalidAPIKeyError(provider, \\\\\\\"API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n\\\\n    if len(api_key) < 8:\\\\n        logger.error(\\\\n            f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        raise InvalidAPIKeyError(\\\\n            provider, \\\\\\\"API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤\\\\n\\\\n    Raises:\\\\n        APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        api_key = config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n        _validate_api_key(api_key, provider)\\\\n        return api_key\\\\n\\\\n    logger.error(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n    raise APIKeyNotFoundError(provider)\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # API í‚¤ ìœ íš¨ì„± ê²€ì¦\\\\n        _validate_api_key(api_key, provider)\\\\n\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except InvalidAPIKeyError:\\\\n        # ì´ë¯¸ ë¡œê·¸ëŠ” _validate_api_keyì—ì„œ ê¸°ë¡ë¨\\\\n        return False\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        return config[\\\\\\\"model\\\\\\\"][\\\\\\\"default_model\\\\\\\"]\\\\n    except KeyError:\\\\n        logger.warning(\\\\n            \\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„ì‹œë¡œ 'o4-mini'ë¡œ ë¦¬ë·°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        logger.info(\\\\n            \\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•´ì£¼ì„¸ìš”: reviewer config model <model_name>\\\\\\\"\\\\n        )\\\\n        return \\\\\\\"o4-mini\\\\\\\"\\\\n\\\\n\\\\ndef set_default_model(model_name: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        if \\\\\\\"model\\\\\\\" not in config:\\\\n            config[\\\\\\\"model\\\\\\\"] = {}\\\\n        config[\\\\\\\"model\\\\\\\"][\\\\\\\"default_model\\\\\\\"] = model_name\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_diff_only() -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ê¸°ë³¸ ì„¤ì •ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        return config[\\\\\\\"review\\\\\\\"].getboolean(\\\\\\\"diff_only\\\\\\\", fallback=False)\\\\n    except KeyError:\\\\n        return False\\\\n\\\\n\\\\ndef set_default_diff_only(diff_only: bool) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ê¸°ë³¸ ì„¤ì •ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        if \\\\\\\"review\\\\\\\" not in config:\\\\n            config[\\\\\\\"review\\\\\\\"] = {}\\\\n        config[\\\\\\\"review\\\\\\\"][\\\\\\\"diff_only\\\\\\\"] = str(diff_only).lower()\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"diff-only ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_diff_only() -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ê¸°ë³¸ ì„¤ì •ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        return config[\\\\\\\"review\\\\\\\"].getboolean(\\\\\\\"diff_only\\\\\\\", fallback=False)\\\\n    except KeyError:\\\\n        return False\\\\n\\\\n\\\\ndef set_default_diff_only(diff_only: bool) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ê¸°ë³¸ ì„¤ì •ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        if \\\\\\\"review\\\\\\\" not in config:\\\\n            config[\\\\\\\"review\\\\\\\"] = {}\\\\n        config[\\\\\\\"review\\\\\\\"][\\\\\\\"diff_only\\\\\\\"] = str(diff_only).lower()\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"diff-only ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n```\\\", \\\"line_number\\\": 245}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 336, \"file\": \"reviewer/cli.py\", \"description\": \"ì„¤ì • íŒŒì¼ ë‚´ ì„¹ì…˜ ì´ë¦„ì˜ ì¼ê´€ì„±ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. API í‚¤ëŠ” `[credentials]`, ê²½ë¡œëŠ” `[paths]`, ê¸°ë³¸ ëª¨ë¸ì€ `[model]` (ë˜ëŠ” `[default]`), ê·¸ë¦¬ê³  `diff_only`ëŠ” `[review]` ì„¹ì…˜ì— ì €ì¥ë©ë‹ˆë‹¤. ëª¨ë“  ê¸°ë³¸ ì„¤ì •ì„ `[default]` ì„¹ì…˜ì— ëª¨ìœ¼ê±°ë‚˜, ê¸°ëŠ¥ë³„ë¡œ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ë³¸ ì„¤ì •ê³¼ ê´€ë ¨ëœ ê°’ë“¤(ì˜ˆ: ê¸°ë³¸ ëª¨ë¸, ê¸°ë³¸ diff-only ê°’)ì„ `[default]` ì„¹ì…˜ ì•„ë˜ì— í†µí•©í•˜ê±°ë‚˜, `[review]` ì„¹ì…˜ì„ ë¦¬ë·° ê´€ë ¨ ê¸°ë³¸ ì„¤ì •(ëª¨ë¸, diff-only ë“±)ì„ ìœ„í•œ ì„¹ì…˜ìœ¼ë¡œ ëª…í™•íˆ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"```python\\n    logger.info(f\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\")\\n\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\n    logger.info(f\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\")\\n\\n\\ndef handle_config_command(args: argparse.Namespace) -> None:\\n```\", \"improved_code\": \"```python\\n    logger.info(f\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\")\\n\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\n    logger.info(f\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\")\\n\\n\\ndef handle_config_command(args: argparse.Namespace) -> None:\\n```\"}], \"summary\": \"`reviewer/cli.py`ì™€ `reviewer/src/config.py` íŒŒì¼ì— `diff-only` ê¸°ë³¸ ì„¤ì • ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ê´€ë ¨ CLI ëª…ë ¹ì–´ë¥¼ êµ¬í˜„í•˜ëŠ” ë³€ê²½ì‚¬í•­ì…ë‹ˆë‹¤. `reviewer/src/config.py`ì— `get_default_diff_only`ì™€ `set_default_diff_only` í•¨ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆê³ , `reviewer/cli.py`ì—ì„œëŠ” `review` ëª…ë ¹ì–´ì— ê¸°ë³¸ ì„¤ì • ì ìš©, `config` ëª…ë ¹ì–´ì— `diff-only` í•˜ìœ„ ëª…ë ¹ì–´ ì¶”ê°€, `config list`ì— í•´ë‹¹ ì„¤ì • í‘œì‹œ ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì˜ í†µí•©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"ì„¤ì • íŒŒì¼ ë‚´ ì„¹ì…˜ ì´ë¦„ ë° êµ¬ì¡°ì˜ ì¼ê´€ì„±ì„ ê²€í† í•˜ì—¬ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í•©ë‹ˆë‹¤.\", \"ì„¤ì • ê°’ì„ ì½ì–´ì˜¬ ë•Œ `.get()` ë©”ì„œë“œì— ê¸°ë³¸ê°’ì„ ì§€ì •í•˜ê±°ë‚˜ ëª…ì‹œì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_diff_only,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_diff_only,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 7, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        default=get_default_diff_only(),\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: ì„¤ì •ì— ë”°ë¦„)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n```\\\", \\\"line_number\\\": 91, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # diff-only ì„¤ì •\\\\n    diff_only_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"diff-only\\\\\\\", help=\\\\\\\"diff-only ì˜µì…˜ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    diff_only_parser.add_argument(\\\\n        \\\\\\\"value\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=[\\\\\\\"true\\\\\\\", \\\\\\\"false\\\\\\\"],\\\\n        help=\\\\\\\"ê¸°ë³¸ diff-only ê°’ (true/false)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 131, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"4\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_diff_only(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if hasattr(args, \\\\\\\"value\\\\\\\") and args.value is not None:\\\\n        diff_only = args.value.lower() == \\\\\\\"true\\\\\\\"\\\\n        if set_default_diff_only(diff_only):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’ì´ {diff_only}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ diff-only ê°’ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_value = get_default_diff_only()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ diff-only ê°’: {current_value}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ê°’ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config diff-only true' ë˜ëŠ” 'reviewer config diff-only false' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n```\\\", \\\"line_number\\\": 293, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"5\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ diff-only ì„¤ì •\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ diff-only ê°’: {get_default_diff_only()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config diff-only [true|false]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"diff-only\\\\\\\":\\\\n        config_diff_only(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n```\\\", \\\"line_number\\\": 336, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"original_code\\\": \\\"```python\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_diff_only() -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ê¸°ë³¸ ì„¤ì •ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        return config[\\\\\\\"review\\\\\\\"].getboolean(\\\\\\\"diff_only\\\\\\\", fallback=False)\\\\n    except KeyError:\\\\n        return False\\\\n\\\\n\\\\ndef set_default_diff_only(diff_only: bool) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"diff-only ê¸°ë³¸ ì„¤ì •ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        if \\\\\\\"review\\\\\\\" not in config:\\\\n            config[\\\\\\\"review\\\\\\\"] = {}\\\\n        config[\\\\\\\"review\\\\\\\"][\\\\\\\"diff_only\\\\\\\"] = str(diff_only).lower()\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"diff-only ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n```\\\", \\\"line_number\\\": 245, \\\"language\\\": \\\"python\\\"}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ CLI ë„êµ¬ì— `diff-only` ì˜µì…˜ì„ ì„¤ì • íŒŒì¼ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤. `reviewer config diff-only [true|false]` ëª…ë ¹ì–´ë¥¼ í†µí•´ ê¸°ë³¸ê°’ì„ ì„¤ì •í•˜ê³ , `reviewer review` ëª…ë ¹ì–´ì—ì„œ ì´ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, `reviewer config list` ëª…ë ¹ì–´ì— `diff-only` ì„¤ì •ê°’ì´ í¬í•¨ë˜ë„ë¡ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ìƒˆë¡œìš´ ì„¤ì • ì˜µì…˜ì„ ê¹”ë”í•˜ê²Œ í†µí•©í•œ ë³€ê²½ì…ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"ìƒˆë¡œìš´ ì„¤ì • ì˜µì…˜(`diff-only`)ì„ CLIì™€ ì„¤ì • íŒŒì¼ì— ì„±ê³µì ìœ¼ë¡œ í†µí•©í–ˆìŠµë‹ˆë‹¤.\", \"ì„¤ì •ê°’ ë¡œë”© ë° ì €ì¥ ë¡œì§ì´ ëª…í™•í•˜ê²Œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"CLI ì¸ì íŒŒì‹± ë° ì„¤ì •ê°’ ì ìš© ë¡œì§ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•©ë‹ˆë‹¤.\", \"í˜„ì¬ ìˆ˜ì¤€ì˜ ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì¶©ë¶„í•˜ì§€ë§Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³µì¡ì„±ì´ ì¦ê°€í•œë‹¤ë©´ ì„¤ì • íŒŒì¼ ê´€ë ¨ ì˜¤ë¥˜ì— ëŒ€í•œ ì¢€ ë” êµ¬ì²´ì ì¸ ì²˜ë¦¬ë¥¼ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_model,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_model,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\n```\\\", \\\"line_number\\\": 4}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ëª¨ë¸ ì„¤ì •\\\\n    model_parser = config_subparsers.add_parser(\\\\\\\"model\\\\\\\", help=\\\\\\\"ëª¨ë¸ ì„¤ì •\\\\\\\")\\\\n    model_parser.add_argument(\\\\n        \\\\\\\"model_name\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        choices=get_supported_models(),\\\\n        help=\\\\\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 119}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_model(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ìƒˆ ëª¨ë¸ ì„¤ì •ì´ ì£¼ì–´ì§„ ê²½ìš°\\\\n    if hasattr(args, \\\\\\\"model_name\\\\\\\") and args.model_name:\\\\n        if set_default_model(args.model_name):\\\\n            logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ {args.model_name}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.error(\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        # ëª¨ë¸ì´ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° í˜„ì¬ ì„¤ì •ì„ í‘œì‹œ\\\\n        current_model = get_default_model()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê¸°ë³¸ ëª¨ë¸: {current_model}\\\\\\\")\\\\n        logger.info(\\\\n            \\\\\\\"ìƒˆë¡œìš´ ëª¨ë¸ì„ ì„¤ì •í•˜ë ¤ë©´ 'reviewer config model <model_name>' ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n```\\\", \\\"line_number\\\": 262}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"model\\\\\\\":\\\\n        config_model(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n```\\\", \\\"line_number\\\": 321}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì§€ì›í•˜ëŠ” LLM ëª¨ë¸ ëª©ë¡ê³¼ ê´€ë ¨ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom typing import Literal, TypedDict\\\\n\\\\nfrom reviewer.src.exceptions.unsupported_model_error import UnsupportedModelError\\\\n\\\\n# ëª¨ë¸ ì œê³µì íƒ€ì…\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n\\\\n\\\\nclass ModelParamsDict(TypedDict, total=False):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    temperature: float\\\\n    reasoning_effort: str\\\\n    max_tokens: int\\\\n\\\\n\\\\nclass ModelInfoDict(TypedDict):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì •ë³´ íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    full_name: str\\\\n    aliases: list[str]\\\\n    description: str\\\\n    provider: ModelProvider\\\\n    params: ModelParamsDict\\\\n\\\\n\\\\n# ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ì •ë³´\\\\nAVAILABLE_MODELS: dict[str, ModelInfoDict] = {\\\\n    \\\\\\\"gpt-4o\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4 Omni ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gpt-4.1\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4.1\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4.1 ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"o3-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o3-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"o4-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o4-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"claude-3-7-sonnet\\\\\\\", \\\\\\\"claude-3.7-sonnet\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Claude 3.7 Sonnet ëª¨ë¸, ê· í˜•ì ì¸ ì„±ëŠ¥ê³¼ ê²½ì œì„±\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"claude\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n}\\\\n\\\\n# ëª¨ë¸ ì´ë¦„ ì¶•ì•½í˜•ì„ ì „ì²´ ì´ë¦„ì— ë§¤í•‘\\\\nMODEL_NAME_ALIASES: dict[str, str] = {\\\\n    \\\\\\\"claude-3-7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"claude-3.7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"o3-mini-high\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n    \\\\\\\"o4-mini-high\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-flash\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef get_model_info(model_name: str) -> ModelInfoDict:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        model_name: ëª¨ë¸ ì´ë¦„ (ì •ì‹ ì´ë¦„ ë˜ëŠ” ì¶•ì•½í˜•)\\\\n\\\\n    Returns:\\\\n        ModelInfoDict: ëª¨ë¸ ì •ë³´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì •ì‹ ì´ë¦„ìœ¼ë¡œ ì‹œë„\\\\n    if model_name in AVAILABLE_MODELS:\\\\n        return AVAILABLE_MODELS[model_name]\\\\n\\\\n    # ì¶•ì•½í˜•ìœ¼ë¡œ ì‹œë„\\\\n    full_name = MODEL_NAME_ALIASES.get(model_name)\\\\n    if full_name:\\\\n        return AVAILABLE_MODELS[full_name]\\\\n\\\\n    raise UnsupportedModelError(model_name)\\\\n\\\\n\\\\ndef get_supported_models() -> list[str]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        List[str]: ì§€ì›í•˜ëŠ” ëª¨ë¸ ì´ë¦„ ëª©ë¡\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return list(AVAILABLE_MODELS.keys()) + list(MODEL_NAME_ALIASES.keys())\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    Returns:\\\\n        List[str]: ì§€ì›í•˜ëŠ” ëª¨ë¸ ì´ë¦„ ëª©ë¡\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return list(AVAILABLE_MODELS.keys()) + list(MODEL_NAME_ALIASES.keys())\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    return \\\\\\\"o4-mini\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    Returns:\\\\n        List[str]: ì§€ì›í•˜ëŠ” ëª¨ë¸ ì´ë¦„ ëª©ë¡\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return list(AVAILABLE_MODELS.keys()) + list(MODEL_NAME_ALIASES.keys())\\\\n```\\\", \\\"line_number\\\": 132}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_api_key_error import InvalidAPIKeyError\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef _validate_api_key(api_key: str, provider: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ê²€ì¦í•  API í‚¤\\\\n        provider: API ì œê³µì ì´ë¦„\\\\n\\\\n    Raises:\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ë¹ˆ ê°’ì´ê±°ë‚˜ ë„ˆë¬´ ì§§ì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not api_key or api_key.strip() == \\\\\\\"\\\\\\\":\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        raise InvalidAPIKeyError(provider, \\\\\\\"API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n\\\\n    if len(api_key) < 8:\\\\n        logger.error(\\\\n            f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        raise InvalidAPIKeyError(\\\\n            provider, \\\\\\\"API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤\\\\n\\\\n    Raises:\\\\n        APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        api_key = config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n        _validate_api_key(api_key, provider)\\\\n        return api_key\\\\n\\\\n    logger.error(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n    raise APIKeyNotFoundError(provider)\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # API í‚¤ ìœ íš¨ì„± ê²€ì¦\\\\n        _validate_api_key(api_key, provider)\\\\n\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except InvalidAPIKeyError:\\\\n        # ì´ë¯¸ ë¡œê·¸ëŠ” _validate_api_keyì—ì„œ ê¸°ë¡ë¨\\\\n        return False\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        return config[\\\\\\\"model\\\\\\\"][\\\\\\\"default_model\\\\\\\"]\\\\n    except KeyError:\\\\n        logger.warning(\\\\n            \\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„ì‹œë¡œ 'o4-mini'ë¡œ ë¦¬ë·°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        logger.info(\\\\n            \\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•´ì£¼ì„¸ìš”: reviewer config model <model_name>\\\\\\\"\\\\n        )\\\\n        return \\\\\\\"o4-mini\\\\\\\"\\\\n\\\\n\\\\ndef set_default_model(model_name: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        if \\\\\\\"model\\\\\\\" not in config:\\\\n            config[\\\\\\\"model\\\\\\\"] = {}\\\\n        config[\\\\\\\"model\\\\\\\"][\\\\\\\"default_model\\\\\\\"] = model_name\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ëª¨ë¸ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        return config[\\\\\\\"model\\\\\\\"][\\\\\\\"default_model\\\\\\\"]\\\\n    except KeyError:\\\\n        logger.warning(\\\\n            \\\\\\\"ê¸°ë³¸ ëª¨ë¸ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„ì‹œë¡œ 'o4-mini'ë¡œ ë¦¬ë·°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        logger.info(\\\\n            \\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•´ì£¼ì„¸ìš”: reviewer config model <model_name>\\\\\\\"\\\\n        )\\\\n        return \\\\\\\"o4-mini\\\\\\\"\\\\n\\\\n\\\\ndef set_default_model(model_name: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        if \\\\\\\"model\\\\\\\" not in config:\\\\n            config[\\\\\\\"model\\\\\\\"] = {}\\\\n        config[\\\\\\\"model\\\\\\\"][\\\\\\\"default_model\\\\\\\"] = model_name\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n```\\\", \\\"line_number\\\": 216}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_model_info\\\\nfrom reviewer.src.config import get_api_key\\\\n\\\\nfrom .base_gateway import BaseGateway\\\\nfrom .claude_gateway import ClaudeGateway\\\\nfrom .gateway_factory import GatewayFactory\\\\nfrom .openai_gateway import OpenAIGateway\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"BaseGateway\\\\\\\",\\\\n    \\\\\\\"ClaudeGateway\\\\\\\",\\\\n    \\\\\\\"OpenAIGateway\\\\\\\",\\\\n    \\\\\\\"GatewayFactory\\\\\\\",\\\\n    \\\\\\\"get_api_key\\\\\\\",\\\\n    \\\\\\\"get_model_info\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_model_info\\\\nfrom reviewer.src.config import get_api_key\\\\n\\\\nfrom .base_gateway import BaseGateway\\\\nfrom .claude_gateway import ClaudeGateway\\\\nfrom .gateway_factory import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_model_info\\\\nfrom reviewer.src.config import get_api_key\\\\n\\\\nfrom .base_gateway import BaseGateway\\\\nfrom .claude_gateway import ClaudeGateway\\\\nfrom .gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"ClaudeGateway\\\\\\\",\\\\n    \\\\\\\"OpenAIGateway\\\\\\\",\\\\n    \\\\\\\"GatewayFactory\\\\\\\",\\\\n    \\\\\\\"get_api_key\\\\\\\",\\\\n    \\\\\\\"get_model_info\\\\\\\",\\\\n    \\\\\\\"get_default_model\\\\\\\",\\\\n]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"ClaudeGateway\\\\\\\",\\\\n    \\\\\\\"OpenAIGateway\\\\\\\",\\\\n    \\\\\\\"GatewayFactory\\\\\\\",\\\\n    \\\\\\\"get_api_key\\\\\\\",\\\\n    \\\\\\\"get_model_info\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 13}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/gateway_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ìƒì„±ì„ ë‹´ë‹¹í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import get_model_info\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\n\\\\nclass GatewayFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create(model: str) -> BaseGateway:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì£¼ì–´ì§„ ëª¨ë¸ ì´ë¦„ì— ë§ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        model_info = get_model_info(model)\\\\n\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"openai\\\\\\\":\\\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\\\n\\\\n            return OpenAIGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"claude\\\\\\\":\\\\n            from reviewer.src.llm_gateway.claude_gateway import ClaudeGateway\\\\n\\\\n            return ClaudeGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n        else:\\\\n            raise UnsupportedProviderError(model_info[\\\\\\\"provider\\\\\\\"])\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ìƒì„±ì„ ë‹´ë‹¹í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_default_model\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import get_model_info\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ìƒì„±ì„ ë‹´ë‹¹í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import get_model_info\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\n\\\\n```\\\", \\\"line_number\\\": 1}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not model:\\\\n            model = get_default_model()\\\\n\\\\n        model_info = get_model_info(model)\\\\n\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"openai\\\\\\\":\\\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        model_info = get_model_info(model)\\\\n\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"openai\\\\\\\":\\\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\\\n\\\\n```\\\", \\\"line_number\\\": 16}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 216, \"file\": \"reviewer/src/config.py\", \"description\": \"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ë° ì¡°íšŒ ë¡œì§ì´ config ëª¨ë“ˆë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì„¤ì • ê´€ë ¨ ë¡œì§ì„ í•œ ê³³ì— ëª¨ì•„ ì½”ë“œì˜ ì‘ì§‘ë„ë¥¼ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í•˜ëŠ” ì¢‹ì€ ì„¤ê³„ ë³€ê²½ì…ë‹ˆë‹¤.\", \"suggestion\": \"ì´ ë³€ê²½ì€ ê¸ì •ì ì…ë‹ˆë‹¤. config ëª¨ë“ˆì˜ ì—­í• ì„ ëª…í™•íˆ í•˜ê³  ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    # ê¸°ë³¸ ìœ„ì¹˜\\n    if sys.platform == \\\"darwin\\\":\\n        return MAC_CONFIG_DIR / \\\"review_prompt\\\"\\n    else:\\n        return Path.home() / \\\".local\\\" / \\\"share\\\" / \\\"reviewer\\\" / \\\"review_prompt\\\"\\n```\", \"improved_code\": \"```python\\n    # ê¸°ë³¸ ìœ„ì¹˜\\n    if sys.platform == \\\"darwin\\\":\\n        return MAC_CONFIG_DIR / \\\"review_request\\\"\\n    else:\\n        return Path.home() / \\\".local\\\" / \\\"share\\\" / \\\"reviewer\\\" / \\\"review_request\\\"\\n\\ndef get_default_model() -> str:\\n    \\\"\\\"\\\"ê¸°ë³¸ ëª¨ë¸ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    try:\\n        config = load_config()\\n        return config[\\\"model\\\"][\\\"default_model\\\"]\\n    except KeyError:\\n        logger.warning(\\n            \\\"ê¸°ë³¸ ëª¨ë¸ì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„ì‹œë¡œ 'o4-mini'ë¡œ ë¦¬ë·°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\"\\n        )\\n        logger.info(\\n            \\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•´ì£¼ì„¸ìš”: reviewer config model <model_name>\\\"\\n        )\\n        return \\\"o4-mini\\\"\\n\\ndef set_default_model(model_name: str) -> bool:\\n    \\\"\\\"\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    try:\\n        config = load_config()\\n        if \\\"model\\\" not in config:\\n            config[\\\"model\\\"] = {}\\n        config[\\\"model\\\"][\\\"default_model\\\"] = model_name\\n        save_config(config)\\n        return True\\n    except Exception as e:\\n        logger.error(f\\\"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\", exc_info=True)\\n        return False\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 16, \"file\": \"reviewer/src/llm_gateway/gateway_factory.py\", \"description\": \"GatewayFactoryì—ì„œ ê¸°ë³¸ ëª¨ë¸ì„ ê²°ì •í•˜ëŠ” ë¡œì§ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. íŒ©í† ë¦¬ëŠ” ì£¼ì–´ì§„ ëª¨ë¸ì— ëŒ€í•œ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ë§Œ ìˆ˜í–‰í•˜ë„ë¡ ì±…ì„ì´ ë¶„ë¦¬ë˜ì–´ ì„¤ê³„ê°€ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ëª¨ë¸ ê²°ì •ì€ CLI ë ˆì´ì–´ì—ì„œ ë‹´ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤.\", \"suggestion\": \"ì´ ë³€ê²½ì€ íŒ©í† ë¦¬ íŒ¨í„´ì˜ ëª©ì ì— ë” ë¶€í•©í•˜ë©° ì½”ë“œì˜ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ ì˜ ë³´ì—¬ì¤ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\n\\n        Returns:\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\n        \\\"\\\"\\\"\\n        if not model:\\n            model = get_default_model()\\n\\n        model_info = get_model_info(model)\\n\\n        if model_info[\\\"provider\\\"] == \\\"openai\\\":\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\n\\n```\", \"improved_code\": \"```python\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\n\\n        Returns:\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\n        \\\"\\\"\\\"\\n        model_info = get_model_info(model)\\n\\n        if model_info[\\\"provider\\\"] == \\\"openai\\\":\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\n\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 119, \"file\": \"reviewer/cli.py\", \"description\": \"CLIì— ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•˜ëŠ” 'config model' í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ëª…ë ¹ì¤„ì„ í†µí•´ ì‰½ê²Œ ê¸°ë³¸ ëª¨ë¸ì„ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ìœ ìš©ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ìƒˆë¡œìš´ CLI ëª…ë ¹ì–´ ì¶”ê°€ëŠ” ì‚¬ìš©ì í¸ì˜ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    )\\n    results_dir_parser.add_argument(\\n        \\\"path\\\", nargs=\\\"?\\\", help=\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\"\\n    )\\n\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\n    config_subparsers.add_parser(\\\"list\\\", help=\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\")\\n\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\n    results_parser = subparsers.add_parser(\\\"results\\\", help=\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\")\\n```\", \"improved_code\": \"```python\\n    )\\n    results_dir_parser.add_argument(\\n        \\\"path\\\", nargs=\\\"?\\\", help=\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\"\\n    )\\n\\n    # ëª¨ë¸ ì„¤ì •\\n    model_parser = config_subparsers.add_parser(\\\"model\\\", help=\\\"ëª¨ë¸ ì„¤ì •\\\")\\n    model_parser.add_argument(\\n        \\\"model_name\\\",\\n        nargs=\\\"?\\\",\\n        choices=get_supported_models(),\\n        help=\\\"ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  AI ëª¨ë¸\\\",\\n    )\\n\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\n    config_subparsers.add_parser(\\\"list\\\", help=\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\")\\n\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\n    results_parser = subparsers.add_parser(\\\"results\\\", help=\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\")\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 321, \"file\": \"reviewer/cli.py\", \"description\": \"config ëª…ë ¹ ì²˜ë¦¬ ë¡œì§ì— 'model' í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ì— ëŒ€í•œ ì ì ˆí•œ í•¸ë“¤ë§ ë¡œì§ ì¶”ê°€ì…ë‹ˆë‹¤.\", \"suggestion\": \"ìƒˆë¡œìš´ ëª…ë ¹ì–´ ì²˜ë¦¬ê°€ ì˜ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n    if args.config_command == \\\"api-key\\\":\\n        config_api_key(args)\\n    elif args.config_command == \\\"results-dir\\\":\\n        config_results_dir(args)\\n    elif args.config_command == \\\"list\\\":\\n        config_list()\\n\\n\\ndef handle_results_command(args: argparse.Namespace) -> None:\\n```\", \"improved_code\": \"```python\\n\\n    if args.config_command == \\\"api-key\\\":\\n        config_api_key(args)\\n    elif args.config_command == \\\"results-dir\\\":\\n        config_results_dir(args)\\n    elif args.config_command == \\\"model\\\":\\n        config_model(args)\\n    elif args.config_command == \\\"list\\\":\\n        config_list()\\n\\n\\ndef handle_results_command(args: argparse.Namespace) -> None:\\n```\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 216, \"file\": \"reviewer/src/config.py\", \"description\": \"`get_default_review_prompt_dir` í•¨ìˆ˜ì˜ ê¸°ë³¸ ê²½ë¡œê°€ `review_request`ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ ì´ë¦„ê³¼ ë°˜í™˜í•˜ëŠ” ê²½ë¡œì˜ ì˜ë¯¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `review_prompt`ë¡œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ë³¸ ê²½ë¡œë¥¼ `review_prompt`ë¡œ ìˆ˜ì •í•˜ì—¬ í•¨ìˆ˜ ì´ë¦„ê³¼ ì¼ì¹˜ì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    # ê¸°ë³¸ ìœ„ì¹˜\\n    if sys.platform == \\\"darwin\\\":\\n        return MAC_CONFIG_DIR / \\\"review_request\\\"\\n    else:\\n        return Path.home() / \\\".local\\\" / \\\"share\\\" / \\\"reviewer\\\" / \\\"review_request\\\"\\n```\", \"improved_code\": \"```python\\n    # ê¸°ë³¸ ìœ„ì¹˜\\n    if sys.platform == \\\"darwin\\\":\\n        return MAC_CONFIG_DIR / \\\"review_prompt\\\"\\n    else:\\n        return Path.home() / \\\".local\\\" / \\\"share\\\" / \\\"reviewer\\\" / \\\"review_prompt\\\"\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ê¸°ë³¸ LLM ëª¨ë¸ ì„¤ì • ë° ê´€ë¦¬ë¥¼ ìœ„í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³ , ì„¤ì • ê´€ë ¨ ë¡œì§ì„ config ëª¨ë“ˆë¡œ ì¤‘ì•™í™”í•˜ëŠ” ë¦¬íŒ©í† ë§ì„ í¬í•¨í•©ë‹ˆë‹¤. `get_default_model` í•¨ìˆ˜ê°€ `available_models.py`ì—ì„œ `config.py`ë¡œ ì´ë™í–ˆìœ¼ë©°, ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•˜ëŠ” `set_default_model` í•¨ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. CLIì—ëŠ” `config model` ëª…ë ¹ì–´ê°€ ìƒˆë¡œ ìƒê²¨ ì‚¬ìš©ìê°€ ê¸°ë³¸ ëª¨ë¸ì„ ì„¤ì •í•˜ê³  í™•ì¸í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. GatewayFactoryì—ì„œëŠ” ê¸°ë³¸ ëª¨ë¸ ê²°ì • ë¡œì§ì´ ì œê±°ë˜ì–´ ì±…ì„ì´ ëª…í™•í•´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ, `get_default_review_prompt_dir` í•¨ìˆ˜ì˜ ê¸°ë³¸ ê²½ë¡œ ì„¤ì •ì— ì ì¬ì ì¸ ë²„ê·¸ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ì½”ë“œ êµ¬ì¡°ì™€ ì„¤ì • ê´€ë¦¬ ê¸°ëŠ¥ì´ ê°œì„ ë˜ì—ˆìœ¼ë‚˜, ê²½ë¡œ ì„¤ì •ì˜ ì¼ê´€ì„± ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"ìƒˆë¡œ ì¶”ê°€ëœ 'config model' ëª…ë ¹ì–´ì— ëŒ€í•œ ì‚¬ìš© ì˜ˆì‹œë¥¼ README ë˜ëŠ” ë„ì›€ë§ì— ëª…í™•íˆ ì¶”ê°€í•©ë‹ˆë‹¤.\", \"ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ì‹œ, ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ ì´ë¦„ì„ ì…ë ¥í–ˆì„ ë•Œì˜ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ ë” ì¹œì ˆí•˜ê²Œ ì•ˆë‚´í•˜ë„ë¡ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (í˜„ì¬ëŠ” argparseì—ì„œ ì²˜ë¦¬ë˜ì§€ë§Œ, config í•¨ìˆ˜ ë‚´ì—ì„œë„ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ê°•í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤).\", \"`get_default_review_prompt_dir` í•¨ìˆ˜ì˜ ê¸°ë³¸ ê²½ë¡œë¥¼ í•¨ìˆ˜ ì´ë¦„ì— ë§ê²Œ `review_prompt`ë¡œ ìˆ˜ì •í•˜ì—¬ ì¼ê´€ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n```\\\", \\\"line_number\\\": 56}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"line_number\\\": 166}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 4}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œ ë¦¬ë·° ë„êµ¬ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ì œ ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­, íŠ¹ì • ì»¤ë°‹ ì´í›„ì˜ ë³€ê²½ì‚¬í•­, ë˜ëŠ” íŠ¹ì • ë¸Œëœì¹˜ì™€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ `reviewer/cli.py` íŒŒì¼ì— ìƒˆë¡œìš´ ëª…ë ¹ì¤„ ì¸ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆê³ , `reviewer/src/utils/git_utils.py` íŒŒì¼ì˜ `run_git_diff` í•¨ìˆ˜ê°€ ë¦¬íŒ©í† ë§ë˜ì–´ ì´ëŸ¬í•œ ë‹¤ì–‘í•œ ë¦¬ë·° ëŒ€ìƒì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. `argparse`ì˜ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ë·° ëŒ€ìƒ ì˜µì…˜ì´ í•˜ë‚˜ë§Œ ì„ íƒë˜ë„ë¡ ì œí•œí•œ ì ê³¼, `run_git_diff` í•¨ìˆ˜ì—ì„œ ê° ì˜µì…˜ì— ë”°ë¼ ì ì ˆí•œ `git diff` ëª…ë ¹ì–´ë¥¼ êµ¬ì„±í•˜ë„ë¡ ë¡œì§ì„ ìˆ˜ì •í•œ ì ì´ ì£¼ìš” ë³€ê²½ ë‚´ìš©ì…ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"CLIì˜ `main` í•¨ìˆ˜ì—ì„œ ì¼ë°˜ `Exception`ì„ catchí•˜ê¸° ì „ì— íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: `ValueError`, `subprocess.CalledProcessError`)ë¥¼ ë¨¼ì € ì²˜ë¦¬í•˜ì—¬ ë” êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"`reviewer results show` ëª…ë ¹ì–´ë¡œ ê²°ê³¼ë¥¼ í‘œì‹œí•  ë•Œ, íŒŒì¼ ë‚´ìš©ì´ ë§¤ìš° í´ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ ì¶œë ¥ í˜•ì‹ì„ ì œì–´í•˜ê±°ë‚˜ í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"`run_git_diff` í•¨ìˆ˜ ë˜ëŠ” `cli.py`ì—ì„œ `git diff` ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì œê³µëœ ì»¤ë°‹ IDë‚˜ ë¸Œëœì¹˜ ì´ë¦„ì´ ìœ íš¨í•œì§€ ë¯¸ë¦¬ í™•ì¸í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ë©´ ì‚¬ìš©ìì—ê²Œ ë” ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n```\\\", \\\"line_number\\\": 56}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"line_number\\\": 166}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 4}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 14, \"file\": \"reviewer/src/utils/git_utils.py\", \"description\": \"git diff ëª…ë ¹ì˜ `--unified` ì˜µì…˜ ê°’ì´ 0ì—ì„œ 5ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” diff ì¶œë ¥ ì‹œ ë³€ê²½ëœ ì½”ë“œ ì£¼ë³€ì— í‘œì‹œë˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ë¼ì¸ ìˆ˜ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. `--unified=5`ëŠ” ê¸°ë³¸ê°’ì´ë©° ê°€ë…ì„±ì´ ì¢‹ì§€ë§Œ, `--unified=0`ì˜ ìµœì†Œí™”ëœ ì¶œë ¥ì„ ê¸°ëŒ€í•˜ëŠ” ë‹¤ë¥¸ ì‹œìŠ¤í…œì´ë‚˜ ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” í˜¸í™˜ì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì´ í•¨ìˆ˜ì˜ ì¶œë ¥ í˜•ì‹ì´ `--unified=5`ë¡œ ê³ ì •ë˜ì–´ë„ ê´œì°®ì€ì§€ í™•ì¸í•˜ê³ , í•„ìš”í•œ ê²½ìš° ë¬¸ì„œí™”í•˜ì„¸ìš”. ë§Œì•½ ì»¨í…ìŠ¤íŠ¸ ë¼ì¸ ìˆ˜ë¥¼ ì œì–´í•´ì•¼ í•œë‹¤ë©´, í•¨ìˆ˜ ì¸ìë¡œ `--unified` ê°’ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"cmd = [\\\"git\\\", \\\"-C\\\", repo_path, \\\"diff\\\", \\\"--unified=0\\\"]\", \"improved_code\": \"cmd = [\\\"git\\\", \\\"-C\\\", repo_path, \\\"diff\\\", \\\"--unified=5\\\"]\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 47, \"file\": \"reviewer/src/utils/git_utils.py\", \"description\": \"`subprocess.CalledProcessError` ë˜ëŠ” ì¼ë°˜ `Exception` ë°œìƒ ì‹œ ë¹ˆ ë¬¸ìì—´ (`\\\"\\\"`)ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ëŠ” git ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€, ì•„ë‹ˆë©´ diff ê²°ê³¼ê°€ ë‹¨ìˆœíˆ ë¹„ì–´ìˆëŠ”ì§€(ë³€ê²½ì‚¬í•­ ì—†ìŒ) í˜¸ì¶œìê°€ êµ¬ë¶„í•  ìˆ˜ ì—†ê²Œ ë§Œë“­ë‹ˆë‹¤.\", \"suggestion\": \"ì˜¤ë¥˜ ë°œìƒ ì‹œ ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œí‚¤ê±°ë‚˜ (`raise e`), ì‹¤íŒ¨ë¥¼ ëª…í™•íˆ ë‚˜íƒ€ë‚´ëŠ” ê°’(ì˜ˆ: `None`)ì„ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •í•˜ì—¬ í˜¸ì¶œìê°€ ì˜¤ë¥˜ ìƒíƒœë¥¼ ì •í™•íˆ ê°ì§€í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"    except subprocess.CalledProcessError as e:\\n        logger.error(\\n            f\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        return \\\"\\\"\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\n        logger.error(\\n            f\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        return \\\"\\\"\", \"improved_code\": \"    except subprocess.CalledProcessError as e:\\n        logger.error(\\n            f\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        raise e\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\n        logger.error(\\n            f\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        raise e\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 37, \"file\": \"reviewer/src/utils/git_utils.py\", \"description\": \"`target_commit` ë˜ëŠ” `target_branch` ì¸ìê°€ ì œê³µë˜ì—ˆìœ¼ë‚˜ ë¹ˆ ë¬¸ìì—´ì´ê±°ë‚˜ ê³µë°±ë§Œ í¬í•¨í•˜ëŠ” ê²½ìš°, ì˜¤ë¥˜ë¥¼ ë¡œê¹…í•˜ê³  ë¹ˆ ë¬¸ìì—´ (`\\\"\\\"`)ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ëŠ” ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ ìƒíƒœë¥¼ ìˆ¨ê¸°ê³ , í˜¸ì¶œìê°€ ì…ë ¥ ì˜¤ë¥˜ë¥¼ íŠ¹ì •í•˜ì—¬ ì²˜ë¦¬í•˜ê¸° ì–´ë µê²Œ ë§Œë“­ë‹ˆë‹¤.\", \"suggestion\": \"ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥(ë¹ˆ ë¬¸ìì—´ ë“±)ì´ ê°ì§€ë˜ë©´ `ValueError`ì™€ ê°™ì€ ì ì ˆí•œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ í˜¸ì¶œìì—ê²Œ ëª…í™•í•˜ê²Œ ì•Œë¦¬ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"        if not target_commit.strip():\\n            logger.error(\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\")\\n            return \\\"\\\"\", \"improved_code\": \"        if not target_commit.strip():\\n            logger.error(\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\")\\n            raise ValueError(\\\"target_commit cannot be empty or whitespace only.\\\")\"}], \"summary\": \"`run_git_diff` í•¨ìˆ˜ì—ì„œ `git diff` ëª…ë ¹ì˜ ì»¨í…ìŠ¤íŠ¸ ë¼ì¸ ìˆ˜ë¥¼ 0ì—ì„œ 5ë¡œ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì½”ë“œ ìì²´ëŠ” git ëª…ë ¹ ì‹¤í–‰ ë° ê¸°ë³¸ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ì˜ ìˆ˜í–‰í•˜ê³  ìˆìœ¼ë‚˜, ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¹ˆ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ëŠ” ë°©ì‹ê³¼ ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥ ì²˜ë¦¬ ë°©ì‹ì€ ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"ì˜¤ë¥˜ ë°œìƒ ì‹œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ê±°ë‚˜ ëª…í™•í•œ ì‹¤íŒ¨ ê°’ì„ ë°˜í™˜í•˜ì—¬ ì˜¤ë¥˜ ìƒíƒœë¥¼ í˜¸ì¶œìì—ê²Œ ì •í™•íˆ ì „ë‹¬í•˜ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.\", \"ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥(ë¹ˆ ë¬¸ìì—´ ë“±)ì— ëŒ€í•´ `ValueError`ì™€ ê°™ì€ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ ì…ë ¥ ê²€ì¦ ì‹¤íŒ¨ë¥¼ ëª…í™•íˆ ì•Œë¦½ë‹ˆë‹¤.\", \"`--unified` ì˜µì…˜ ë³€ê²½ì˜ ì˜ë„ë¥¼ í™•ì¸í•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ ë¬¸ì„œí™”í•˜ê±°ë‚˜ ìœ ì—°ì„±ì„ ìœ„í•´ ì¸ìë¡œ ì œê³µí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=0\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n```\\\", \\\"line_number\\\": 14}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œ ë¦¬ë·° ë„êµ¬ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ì œ ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­, íŠ¹ì • ì»¤ë°‹ ì´í›„ì˜ ë³€ê²½ì‚¬í•­, ë˜ëŠ” íŠ¹ì • ë¸Œëœì¹˜ì™€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ `reviewer/cli.py` íŒŒì¼ì— ìƒˆë¡œìš´ ëª…ë ¹ì¤„ ì¸ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆê³ , `reviewer/src/utils/git_utils.py` íŒŒì¼ì˜ `run_git_diff` í•¨ìˆ˜ê°€ ë¦¬íŒ©í† ë§ë˜ì–´ ì´ëŸ¬í•œ ë‹¤ì–‘í•œ ë¦¬ë·° ëŒ€ìƒì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. `argparse`ì˜ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ë·° ëŒ€ìƒ ì˜µì…˜ì´ í•˜ë‚˜ë§Œ ì„ íƒë˜ë„ë¡ ì œí•œí•œ ì ê³¼, `run_git_diff` í•¨ìˆ˜ì—ì„œ ê° ì˜µì…˜ì— ë”°ë¼ ì ì ˆí•œ `git diff` ëª…ë ¹ì–´ë¥¼ êµ¬ì„±í•˜ë„ë¡ ë¡œì§ì„ ìˆ˜ì •í•œ ì ì´ ì£¼ìš” ë³€ê²½ ë‚´ìš©ì…ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"CLIì˜ `main` í•¨ìˆ˜ì—ì„œ ì¼ë°˜ `Exception`ì„ catchí•˜ê¸° ì „ì— íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: `ValueError`, `subprocess.CalledProcessError`)ë¥¼ ë¨¼ì € ì²˜ë¦¬í•˜ì—¬ ë” êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"`reviewer results show` ëª…ë ¹ì–´ë¡œ ê²°ê³¼ë¥¼ í‘œì‹œí•  ë•Œ, íŒŒì¼ ë‚´ìš©ì´ ë§¤ìš° í´ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ ì¶œë ¥ í˜•ì‹ì„ ì œì–´í•˜ê±°ë‚˜ í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"`run_git_diff` í•¨ìˆ˜ ë˜ëŠ” `cli.py`ì—ì„œ `git diff` ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì œê³µëœ ì»¤ë°‹ IDë‚˜ ë¸Œëœì¹˜ ì´ë¦„ì´ ìœ íš¨í•œì§€ ë¯¸ë¦¬ í™•ì¸í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ë©´ ì‚¬ìš©ìì—ê²Œ ë” ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ëŒ€ìƒ ì§€ì •ì„ ìœ„í•œ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹\\\\n    review_target_group = review_parser.add_mutually_exclusive_group()\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--staged\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"Staged ë³€ê²½ì‚¬í•­ë§Œ ë¦¬ë·°\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-commit\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"íŠ¹ì • ì»¤ë°‹ë¶€í„° HEADê¹Œì§€ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: abc1234)\\\\\\\",\\\\n    )\\\\n    review_target_group.add_argument(\\\\n        \\\\\\\"--target-branch\\\\\\\",\\\\n        type=str,\\\\n        help=\\\\\\\"í˜„ì¬ ë¸Œëœì¹˜ì™€ ì§€ì •ëœ ë¸Œëœì¹˜ ê°„ì˜ ë³€ê²½ì‚¬í•­ì„ ë¦¬ë·° (ì˜ˆ: main)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n```\\\", \\\"line_number\\\": 56}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(\\\\n        repo_path=str(repo_path),\\\\n        staged=args.staged,\\\\n        target_commit=args.target_commit,\\\\n        target_branch=args.target_branch,\\\\n    )\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n```\\\", \\\"line_number\\\": 166}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(\\\\n    repo_path: str,\\\\n    staged: bool = False,\\\\n    target_commit: str | None = None,\\\\n    target_branch: str | None = None,\\\\n) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        staged (bool): ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ë¹„êµ ì—¬ë¶€\\\\n        target_commit (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ì»¤ë°‹ ID (ì˜ˆ: \\\\\\\"abc1234\\\\\\\")\\\\n        target_branch (str | None): HEADì™€ ë¹„êµí•  íŠ¹ì • ë¸Œëœì¹˜ëª… (ì˜ˆ: \\\\\\\"main\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"]\\\\n\\\\n    if staged:\\\\n        cmd.append(\\\\\\\"--cached\\\\\\\")\\\\n    elif target_commit:\\\\n        # ì‚¬ìš©ìê°€ ì œê³µí•œ ì»¤ë°‹ IDê°€ ìœ íš¨í•œì§€ ê°„ë‹¨íˆ í™•ì¸ (ì˜µì…˜)\\\\n        # ì‹¤ì œ git ëª…ë ¹ì–´ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¤ë°‹ì— ëŒ€í•´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•  ê²ƒì„\\\\n        if not target_commit.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_commit ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_commit}..HEAD\\\\\\\")\\\\n    elif target_branch:\\\\n        if not target_branch.strip():\\\\n            logger.error(\\\\\\\"ì˜¤ë¥˜: target_branch ê°’ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return \\\\\\\"\\\\\\\"\\\\n        cmd.append(f\\\\\\\"{target_branch}..HEAD\\\\\\\")\\\\n    # ì•„ë¬´ ì˜µì…˜ë„ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ (staged=False, target_commit=None, target_branch=None),\\\\n    # cmdëŠ” [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=5\\\\\\\"] ê°€ ë˜ì–´\\\\n    # ì›Œí‚¹ ë””ë ‰í† ë¦¬ì˜ ë³€ê²½ì‚¬í•­ (ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­)ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\\\\n\\\\n    try:\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\\\n        logger.error(\\\\n            f\\\\\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\\\\\",\\\\n            exc_info=True,\\\\n        )\\\\n        return \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 4}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"bug\", \"line_number\": 59, \"file\": \"reviewer/src/utils/git_utils.py\", \"description\": \"run_git_diff í•¨ìˆ˜ì—ì„œ broad except Exceptionì„ ì‚¬ìš©í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ë‹¤ì–‘í•œ ì˜¤ë¥˜ë¥¼ í¬ê´„ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ì˜¤ë¥˜ì˜ ì›ì¸ì„ íŒŒì•…í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ê³  ë””ë²„ê¹…ì„ ë°©í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"subprocess.CalledProcessErrorëŠ” ì´ë¯¸ ì²˜ë¦¬í•˜ê³  ìˆìœ¼ë¯€ë¡œ, ê·¸ ì™¸ì— ë°œìƒí•  ìˆ˜ ìˆëŠ” íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: OSError)ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜, ì •ë§ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ëŠ” ë¡œê·¸ë§Œ ë‚¨ê¸°ê³  ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œí‚¤ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë˜ëŠ” ì´ í•¨ìˆ˜ ë ˆë²¨ì—ì„œëŠ” CalledProcessErrorë§Œ ì²˜ë¦¬í•˜ê³  ë‹¤ë¥¸ ì˜ˆì™¸ëŠ” í˜¸ì¶œìì—ê²Œ ìœ„ì„í•˜ëŠ” ê²ƒë„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    except subprocess.CalledProcessError as e:\\n        logger.error(\\n            f\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        return \\\"\\\"\\n    except Exception as e:  # ì¼ë°˜ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€\\n        logger.error(\\n            f\\\"Git diff ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        return \\\"\\\"\\n```\", \"improved_code\": \"```python\\n    except subprocess.CalledProcessError as e:\\n        logger.error(\\n            f\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\",\\n            exc_info=True,\\n        )\\n        return \\\"\\\"\\n    # ì˜ˆìƒì¹˜ ëª»í•œ ë‹¤ë¥¸ ì˜¤ë¥˜ëŠ” í˜¸ì¶œìì—ê²Œ ìœ„ì„í•˜ê±°ë‚˜, í•„ìš”ì‹œ ë” êµ¬ì²´ì ì¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬\\n    # except OSError as e:\\n    #     logger.error(f\\\"Git ì‹¤í–‰ í™˜ê²½ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\nì‹¤í–‰ëœ ëª…ë ¹ì–´: {' '.join(cmd)}\\\", exc_info=True)\\n    #     return \\\"\\\"\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ CLI ë„êµ¬ì— ì½”ë“œ ë¦¬ë·° ëŒ€ìƒì„ ì§€ì •í•˜ëŠ” ìƒˆë¡œìš´ ì˜µì…˜(--staged, --target-commit, --target-branch)ì„ ì¶”ê°€í•˜ê³ , ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ git diff ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ë¦¬íŒ©í† ë§í•©ë‹ˆë‹¤. `argparse`ì˜ ìƒí˜¸ ë°°íƒ€ì  ê·¸ë£¹ì„ ì‚¬ìš©í•˜ì—¬ CLI ì¸ìˆ˜ì˜ ìœ íš¨ì„±ì„ ê°œì„ í–ˆìœ¼ë©°, `run_git_diff` í•¨ìˆ˜ëŠ” ìƒˆë¡œìš´ ì¸ìë¥¼ ë°›ì•„ ì ì ˆí•œ git diff ëª…ë ¹ì„ ìƒì„±í•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"run_git_diff í•¨ìˆ˜ì—ì„œ broad except Exception ëŒ€ì‹  ë” êµ¬ì²´ì ì¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê±°ë‚˜ ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œì¼œ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ê°œì„ í•©ë‹ˆë‹¤.\", \"CLI `--target-commit` ë° `--target-branch` ì˜µì…˜ì— ëŒ€í•´ ì…ë ¥ëœ ê°’ì´ ìœ íš¨í•œ Git ê°ì²´ì¸ì§€ ì‚¬ì „ì— ê°„ë‹¨íˆ ê²€ì¦í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë” ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (í˜„ì¬ëŠ” Git ëª…ë ¹ ìì²´ì˜ ì˜¤ë¥˜ì— ì˜ì¡´).\", \"í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ìƒˆë¡œìš´ CLI ì˜µì…˜ê³¼ `run_git_diff` í•¨ìˆ˜ì˜ ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤(staged, commit, branch, invalid repo ë“±)ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\nobject InMemoryDatabase {\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n\\\\n    val followings: MutableMap<UserId, MutableSet<UserId>> = mutableMapOf()\\\\n    val favorites: MutableMap<ArticleId, MutableSet<UserId>> = mutableMapOf()\\\\n\\\\n    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „í›„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ\\\\n    fun clear() {\\\\n        users.clear()\\\\n        articles.clear()\\\\n        followings.clear()\\\\n        favorites.clear()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.article.model.Slug\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleCountProjection\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleRepository\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\ndata class ArticleCountProjectionImpl(\\\\n    override val articleId: ArticleId,\\\\n    override val count: Int,\\\\n) : ArticleCountProjection\\\\n\\\\nclass MockArticleRepository : ArticleRepository {\\\\n    override fun save(article: Article): Article {\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n        val updatedArticle = if (article is Article.Companion.Model) {\\\\n            article.copy(author = updatedAuthor)\\\\n        } else {\\\\n            article\\\\n        }\\\\n        InMemoryDatabase.articles[updatedArticle.id] = updatedArticle\\\\n        return updatedArticle\\\\n    }\\\\n\\\\n    override fun delete(article: Article) {\\\\n        InMemoryDatabase.articles.remove(article.id)\\\\n        InMemoryDatabase.favorites.remove(article.id)\\\\n    }\\\\n\\\\n    override fun favorite(article: Article, user: User) {\\\\n        val favoritesSet = InMemoryDatabase.favorites.getOrPut(article.id) { mutableSetOf() }\\\\n        favoritesSet.add(user.id)\\\\n    }\\\\n\\\\n    override fun unFavorite(article: Article, user: User) {\\\\n        InMemoryDatabase.favorites[article.id]?.remove(user.id)\\\\n    }\\\\n\\\\n    override fun find(\\\\n        tag: String?,\\\\n        author: String?,\\\\n        favoritedUsername: String?,\\\\n        limit: Int,\\\\n        offset: Int,\\\\n    ): List<Article> {\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n\\\\n        if (tag != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.tags.any { it.name == tag }\\\\n            }\\\\n        }\\\\n\\\\n        if (author != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.author.name == author\\\\n            }\\\\n        }\\\\n\\\\n        if (favoritedUsername != null) {\\\\n            val favoriter = InMemoryDatabase.users.values\\\\n                .map { it }\\\\n                .find { it.name == favoritedUsername }\\\\n            filtered = if (favoriter != null) {\\\\n                filtered.filter { article ->\\\\n                    InMemoryDatabase.favorites[article.id]?.contains(favoriter.id) ?: false\\\\n                }\\\\n            } else {\\\\n                emptyList()\\\\n            }\\\\n        }\\\\n\\\\n        return filtered.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun findFeedArticles(userId: UserId, limit: Int, offset: Int): List<Article> {\\\\n        val followedUserIds = InMemoryDatabase.followings[userId] ?: emptySet()\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n            .filter { article ->\\\\n                followedUserIds.contains(article.author.id)\\\\n            }\\\\n        return feedArticles.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun getCountAllByArticleIds(articleIds: List<ArticleId>): List<ArticleCountProjection> {\\\\n        return articleIds.map { articleId ->\\\\n            val count = InMemoryDatabase.favorites[articleId]?.size ?: 0\\\\n            ArticleCountProjectionImpl(articleId, count)\\\\n        }\\\\n    }\\\\n\\\\n    override fun getFavoritesArticleIds(userId: UserId): List<ArticleId> {\\\\n        return InMemoryDatabase.favorites.filter { (_, userIds) ->\\\\n            userIds.contains(userId)\\\\n        }.keys.toList()\\\\n    }\\\\n\\\\n    override fun findBySlug(slug: Slug): Article? {\\\\n        return InMemoryDatabase.articles.values\\\\n            .map { it }\\\\n            .find { it.slug == slug }\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\nimport io.github.gunkim.realworld.domain.user.repository.UserRepository\\\\n\\\\nclass MockUserRepository : UserRepository {\\\\n    override fun save(user: User): User {\\\\n        val existingUser = InMemoryDatabase.users[user.id]\\\\n        InMemoryDatabase.users[user.id] = user\\\\n\\\\n        if (existingUser != null) {\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n                if (article.author.id == user.id) {\\\\n                    if (article is Article.Companion.Model) {\\\\n                        article.copy(author = user)\\\\n                    } else {\\\\n                        article\\\\n                    }\\\\n                } else {\\\\n                    article\\\\n                }\\\\n            }\\\\n        }\\\\n        return user\\\\n    }\\\\n\\\\n    override fun follow(followerId: UserId, followeeId: UserId) {\\\\n        val followingSet = InMemoryDatabase.followings.getOrPut(followerId) { mutableSetOf() }\\\\n        followingSet.add(followeeId)\\\\n    }\\\\n\\\\n    override fun unfollow(followerId: UserId, followeeId: UserId) {\\\\n        InMemoryDatabase.followings[followerId]?.remove(followeeId)\\\\n    }\\\\n\\\\n    override fun findByEmail(email: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.email == email }\\\\n    }\\\\n\\\\n    override fun findById(userId: UserId): User? {\\\\n        return InMemoryDatabase.users[userId]\\\\n    }\\\\n\\\\n    override fun findByUserName(name: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.name == name }\\\\n    }\\\\n\\\\n    override fun findFollowedUserIdsFor(userId: UserId): List<UserId> {\\\\n        return InMemoryDatabase.followings[userId]?.toList() ?: emptyList()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 9, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\", \"description\": \"InMemoryDatabaseì—ì„œ ì‚¬ìš©ì ë° ê²Œì‹œê¸€ ì €ì¥ì†Œì˜ ê°’ íƒ€ì…ì„ `Any`ì—ì„œ êµ¬ì²´ì ì¸ íƒ€ì…(`User`, `Article`)ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤. ì´ì „ì—ëŠ” ì €ì¥ëœ ê°ì²´ì˜ ì‹¤ì œ íƒ€ì…ì„ ì•Œ ìˆ˜ ì—†ì–´ ìºìŠ¤íŒ…ì´ í•„ìš”í–ˆì§€ë§Œ, ì´ì œ ì»´íŒŒì¼ ì‹œì ì— íƒ€ì… ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë³€ê²½ëœ ì½”ë“œê°€ ì˜¬ë°”ë¥¸ ë°©í–¥ì…ë‹ˆë‹¤. êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\", \"improved_code\": \"val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 18, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\", \"description\": \"InMemoryDatabaseì˜ íƒ€ì… ë³€ê²½ ë•ë¶„ì— `as? User` ë˜ëŠ” `mapNotNull { it as? Article }`ì™€ ê°™ì€ ë¶ˆí•„ìš”í•œ ìºìŠ¤íŒ… ì½”ë“œë¥¼ ì œê±°í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì´ê³  ì ì¬ì ì¸ ëŸ°íƒ€ì„ ìºìŠ¤íŒ… ì˜¤ë¥˜ì˜ ìœ„í—˜ì„ ì¤„ì…ë‹ˆë‹¤.\", \"suggestion\": \"ìºìŠ¤íŒ… ì œê±°ëŠ” ì˜¬ë°”ë¥¸ ê°œì„ ì…ë‹ˆë‹¤. ì•ìœ¼ë¡œë„ ê°€ëŠ¥í•œ ê²½ìš° êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ìºìŠ¤íŒ…ì„ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\", \"improved_code\": \"val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 14, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\", \"description\": \"replaceAll ëŒë‹¤ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°(ë§µì˜ í‚¤)ë¥¼ ê´€ë¡€ì ìœ¼ë¡œ `_`ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ íŒŒë¼ë¯¸í„°ê°€ ëŒë‹¤ ë³¸ë¬¸ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒì„ ëª…í™•íˆ ë³´ì—¬ì£¼ì–´ ì½”ë“œì˜ ì˜ë„ë¥¼ ë” ì˜ ë“œëŸ¬ëƒ…ë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°ë¥¼ `_`ë¡œ í‘œì‹œí•˜ëŠ” ê²ƒì€ ì¢‹ì€ ì½”í‹€ë¦° ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. ì´ ì»¨ë²¤ì…˜ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"InMemoryDatabase.articles.replaceAll { articleId, article ->\", \"improved_code\": \"InMemoryDatabase.articles.replaceAll { _, article ->\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë‚´ InMemoryDatabaseì˜ íƒ€ì… ì•ˆì „ì„±ì„ í¬ê²Œ ê°œì„ í•˜ê³ , ì´ì— ë”°ë¼ Mock Repository ì½”ë“œì—ì„œ ë¶ˆí•„ìš”í•œ ìºìŠ¤íŒ…ì„ ì œê±°í•©ë‹ˆë‹¤. ë˜í•œ, ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ëŒë‹¤ íŒŒë¼ë¯¸í„°ë¥¼ `_`ë¡œ í‘œì‹œí•˜ëŠ” ì½”í‹€ë¦° ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¼ì¸ì„ ë”°ë¦…ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ì•ˆì •ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ë„ë©”ì¸ ëª¨ë¸ì˜ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.\", \"ì½”í‹€ë¦° ì»¨ë²¤ì…˜ì„ ë”°ë¼ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ëŒë‹¤ íŒŒë¼ë¯¸í„°ëŠ” `_`ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\", \"Mock ê°ì²´ê°€ ì‹¤ì œ êµ¬í˜„ì²´ì˜ ê³„ì•½(Contract)ì„ ì •í™•íˆ ë”°ë¥´ëŠ”ì§€ ì§€ì†ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\nobject InMemoryDatabase {\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n\\\\n    val followings: MutableMap<UserId, MutableSet<UserId>> = mutableMapOf()\\\\n    val favorites: MutableMap<ArticleId, MutableSet<UserId>> = mutableMapOf()\\\\n\\\\n    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „í›„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ\\\\n    fun clear() {\\\\n        users.clear()\\\\n        articles.clear()\\\\n        followings.clear()\\\\n        favorites.clear()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.article.model.Slug\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleCountProjection\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleRepository\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\ndata class ArticleCountProjectionImpl(\\\\n    override val articleId: ArticleId,\\\\n    override val count: Int,\\\\n) : ArticleCountProjection\\\\n\\\\nclass MockArticleRepository : ArticleRepository {\\\\n    override fun save(article: Article): Article {\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n        val updatedArticle = if (article is Article.Companion.Model) {\\\\n            article.copy(author = updatedAuthor)\\\\n        } else {\\\\n            article\\\\n        }\\\\n        InMemoryDatabase.articles[updatedArticle.id] = updatedArticle\\\\n        return updatedArticle\\\\n    }\\\\n\\\\n    override fun delete(article: Article) {\\\\n        InMemoryDatabase.articles.remove(article.id)\\\\n        InMemoryDatabase.favorites.remove(article.id)\\\\n    }\\\\n\\\\n    override fun favorite(article: Article, user: User) {\\\\n        val favoritesSet = InMemoryDatabase.favorites.getOrPut(article.id) { mutableSetOf() }\\\\n        favoritesSet.add(user.id)\\\\n    }\\\\n\\\\n    override fun unFavorite(article: Article, user: User) {\\\\n        InMemoryDatabase.favorites[article.id]?.remove(user.id)\\\\n    }\\\\n\\\\n    override fun find(\\\\n        tag: String?,\\\\n        author: String?,\\\\n        favoritedUsername: String?,\\\\n        limit: Int,\\\\n        offset: Int,\\\\n    ): List<Article> {\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n\\\\n        if (tag != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.tags.any { it.name == tag }\\\\n            }\\\\n        }\\\\n\\\\n        if (author != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.author.name == author\\\\n            }\\\\n        }\\\\n\\\\n        if (favoritedUsername != null) {\\\\n            val favoriter = InMemoryDatabase.users.values\\\\n                .map { it }\\\\n                .find { it.name == favoritedUsername }\\\\n            filtered = if (favoriter != null) {\\\\n                filtered.filter { article ->\\\\n                    InMemoryDatabase.favorites[article.id]?.contains(favoriter.id) ?: false\\\\n                }\\\\n            } else {\\\\n                emptyList()\\\\n            }\\\\n        }\\\\n\\\\n        return filtered.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun findFeedArticles(userId: UserId, limit: Int, offset: Int): List<Article> {\\\\n        val followedUserIds = InMemoryDatabase.followings[userId] ?: emptySet()\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n            .filter { article ->\\\\n                followedUserIds.contains(article.author.id)\\\\n            }\\\\n        return feedArticles.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun getCountAllByArticleIds(articleIds: List<ArticleId>): List<ArticleCountProjection> {\\\\n        return articleIds.map { articleId ->\\\\n            val count = InMemoryDatabase.favorites[articleId]?.size ?: 0\\\\n            ArticleCountProjectionImpl(articleId, count)\\\\n        }\\\\n    }\\\\n\\\\n    override fun getFavoritesArticleIds(userId: UserId): List<ArticleId> {\\\\n        return InMemoryDatabase.favorites.filter { (_, userIds) ->\\\\n            userIds.contains(userId)\\\\n        }.keys.toList()\\\\n    }\\\\n\\\\n    override fun findBySlug(slug: Slug): Article? {\\\\n        return InMemoryDatabase.articles.values\\\\n            .map { it }\\\\n            .find { it.slug == slug }\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\nimport io.github.gunkim.realworld.domain.user.repository.UserRepository\\\\n\\\\nclass MockUserRepository : UserRepository {\\\\n    override fun save(user: User): User {\\\\n        val existingUser = InMemoryDatabase.users[user.id]\\\\n        InMemoryDatabase.users[user.id] = user\\\\n\\\\n        if (existingUser != null) {\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n                if (article.author.id == user.id) {\\\\n                    if (article is Article.Companion.Model) {\\\\n                        article.copy(author = user)\\\\n                    } else {\\\\n                        article\\\\n                    }\\\\n                } else {\\\\n                    article\\\\n                }\\\\n            }\\\\n        }\\\\n        return user\\\\n    }\\\\n\\\\n    override fun follow(followerId: UserId, followeeId: UserId) {\\\\n        val followingSet = InMemoryDatabase.followings.getOrPut(followerId) { mutableSetOf() }\\\\n        followingSet.add(followeeId)\\\\n    }\\\\n\\\\n    override fun unfollow(followerId: UserId, followeeId: UserId) {\\\\n        InMemoryDatabase.followings[followerId]?.remove(followeeId)\\\\n    }\\\\n\\\\n    override fun findByEmail(email: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.email == email }\\\\n    }\\\\n\\\\n    override fun findById(userId: UserId): User? {\\\\n        return InMemoryDatabase.users[userId]\\\\n    }\\\\n\\\\n    override fun findByUserName(name: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.name == name }\\\\n    }\\\\n\\\\n    override fun findFollowedUserIdsFor(userId: UserId): List<UserId> {\\\\n        return InMemoryDatabase.followings[userId]?.toList() ?: emptyList()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"file_content\\\": \\\"distributionBase=GRADLE_USER_HOME\\\\ndistributionPath=wrapper/dists\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\nnetworkTimeout=10000\\\\nvalidateDistributionUrl=true\\\\nzipStoreBase=GRADLE_USER_HOME\\\\nzipStorePath=wrapper/dists\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.7-bin.zip\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew.bat\\\", \\\"file_content\\\": \\\"@rem\\\\n@rem Copyright 2015 the original author or authors.\\\\n@rem\\\\n@rem Licensed under the Apache License, Version 2.0 (the \\\\\\\"License\\\\\\\");\\\\n@rem you may not use this file except in compliance with the License.\\\\n@rem You may obtain a copy of the License at\\\\n@rem\\\\n@rem      https://www.apache.org/licenses/LICENSE-2.0\\\\n@rem\\\\n@rem Unless required by applicable law or agreed to in writing, software\\\\n@rem distributed under the License is distributed on an \\\\\\\"AS IS\\\\\\\" BASIS,\\\\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\\\n@rem See the License for the specific language governing permissions and\\\\n@rem limitations under the License.\\\\n@rem\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n\\\\n@if \\\\\\\"%DEBUG%\\\\\\\"==\\\\\\\"\\\\\\\" @echo off\\\\n@rem ##########################################################################\\\\n@rem\\\\n@rem  Gradle startup script for Windows\\\\n@rem\\\\n@rem ##########################################################################\\\\n\\\\n@rem Set local scope for the variables with windows NT shell\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" setlocal\\\\n\\\\nset DIRNAME=%~dp0\\\\nif \\\\\\\"%DIRNAME%\\\\\\\"==\\\\\\\"\\\\\\\" set DIRNAME=.\\\\n@rem This is normally unused\\\\nset APP_BASE_NAME=%~n0\\\\nset APP_HOME=%DIRNAME%\\\\n\\\\n@rem Resolve any \\\\\\\".\\\\\\\" and \\\\\\\"..\\\\\\\" in APP_HOME to make it shorter.\\\\nfor %%i in (\\\\\\\"%APP_HOME%\\\\\\\") do set APP_HOME=%%~fi\\\\n\\\\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\\\\nset DEFAULT_JVM_OPTS=\\\\\\\"-Xmx64m\\\\\\\" \\\\\\\"-Xms64m\\\\\\\"\\\\n\\\\n@rem Find java.exe\\\\nif defined JAVA_HOME goto findJavaFromJavaHome\\\\n\\\\nset JAVA_EXE=java.exe\\\\n%JAVA_EXE% -version >NUL 2>&1\\\\nif %ERRORLEVEL% equ 0 goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:findJavaFromJavaHome\\\\nset JAVA_HOME=%JAVA_HOME:\\\\\\\"=%\\\\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\\\\n\\\\nif exist \\\\\\\"%JAVA_EXE%\\\\\\\" goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:execute\\\\n@rem Setup the command line\\\\n\\\\nset CLASSPATH=%APP_HOME%\\\\\\\\gradle\\\\\\\\wrapper\\\\\\\\gradle-wrapper.jar\\\\n\\\\n\\\\n@rem Execute Gradle\\\\n\\\\\\\"%JAVA_EXE%\\\\\\\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \\\\\\\"-Dorg.gradle.appname=%APP_BASE_NAME%\\\\\\\" -classpath \\\\\\\"%CLASSPATH%\\\\\\\" org.gradle.wrapper.GradleWrapperMain %*\\\\n\\\\n:end\\\\n@rem End local scope for the variables with windows NT shell\\\\nif %ERRORLEVEL% equ 0 goto mainEnd\\\\n\\\\n:fail\\\\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\\\\nrem the _cmd.exe /c_ return code!\\\\nset EXIT_CODE=%ERRORLEVEL%\\\\nif %EXIT_CODE% equ 0 set EXIT_CODE=1\\\\nif not \\\\\\\"\\\\\\\"==\\\\\\\"%GRADLE_EXIT_CONSOLE%\\\\\\\" exit %EXIT_CODE%\\\\nexit /b %EXIT_CODE%\\\\n\\\\n:mainEnd\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" endlocal\\\\n\\\\n:omega\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n```\\\", \\\"line_number\\\": 16}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"configuration\", \"line_number\": 8, \"file\": \"gradle/wrapper/gradle-wrapper.properties\", \"description\": \"gradle-wrapper.properties íŒŒì¼ì— ë¡œì»¬ í™˜ê²½ì— íŠ¹í™”ëœ Java í™ˆ ê²½ë¡œ(org.gradle.java.home)ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë¹Œë“œ í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§€ë¯€ë¡œ, ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì— í¬í•¨ë˜ë©´ ë‹¤ë¥¸ ê°œë°œìì˜ í™˜ê²½ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ë¶ˆí•„ìš”í•œ diffë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"í•´ë‹¹ ë¼ì¸ì„ ì‚­ì œí•˜ê³ , í•„ìš”í•˜ë‹¤ë©´ ë¡œì»¬ í™˜ê²½ ì„¤ì • íŒŒì¼(ì˜ˆ: ~/.gradle/gradle.properties)ì— ì¶”ê°€í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë˜í•œ, gradle-wrapper.properties íŒŒì¼ì´ ì‹¤ìˆ˜ë¡œ ë¡œì»¬ ì„¤ì •ì„ í¬í•¨í•˜ì§€ ì•Šë„ë¡ .gitignoreì— ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```text\\nzipStoreBase=GRADLE_USER_HOME\\nzipStorePath=wrapper/dists\\n```\", \"improved_code\": \"```text\\nzipStoreBase=GRADLE_USER_HOME\\nzipStorePath=wrapper/dists\\n```\"}], \"summary\": \"ì´ë²ˆ ë³€ê²½ì‚¬í•­ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ InMemoryDatabaseì—ì„œ ì‚¬ìš©ë˜ëŠ” Mapì˜ Value íƒ€ì…ì„ Anyì—ì„œ êµ¬ì²´ì ì¸ ë„ë©”ì¸ ëª¨ë¸(User, Article)ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì •ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ Mock Repository ì½”ë“œì—ì„œ ë¶ˆí•„ìš”í•œ íƒ€ì… ìºìŠ¤íŒ…(as?) ë° í•„í„°ë§(mapNotNull) ë¡œì§ì´ ì œê±°ë˜ì–´ ì½”ë“œê°€ ê°„ê²°í•´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ Gradle Wrapper ë²„ì „ì„ 8.7ì—ì„œ 8.10ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , gradlew.bat íŒŒì¼ì— SPDX ë¼ì´ì„ ìŠ¤ ì‹ë³„ìë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, gradle-wrapper.properties íŒŒì¼ì— ë¡œì»¬ Java í™ˆ ê²½ë¡œê°€ í¬í•¨ëœ ë¶€ë¶„ì€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"gradle/wrapper/gradle-wrapper.properties íŒŒì¼ì—ì„œ ë¡œì»¬ í™˜ê²½ì— íŠ¹í™”ëœ ì„¤ì •(org.gradle.java.home)ì„ ì œê±°í•˜ê³  .gitignoreì— ì¶”ê°€í•˜ì—¬ ë²„ì „ ê´€ë¦¬ê°€ ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.\", \"Mock Repository ì½”ë“œì˜ íƒ€ì… ì•ˆì •ì„± ê°œì„ ì€ ì¢‹ì€ ë°©í–¥ì´ë©°, ì•ìœ¼ë¡œë„ ê°€ëŠ¥í•œ êµ¬ì²´ì ì¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œì˜ ëª…í™•ì„±ì„ ë†’ì´ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        PermissionError: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•œ ê²½ìš°\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(repo_path, filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\\\n        abs_repo_path = os.path.abspath(repo_path)\\\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\\\\\"../../../etc/passwd\\\\\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\\\n        prospective_path = os.path.join(abs_repo_path, filename)\\\\n        abs_file_path = os.path.abspath(prospective_path)\\\\n\\\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\\\\\"/foo/bar\\\\\\\"ì™€ \\\\\\\"/foo/barbaz\\\\\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\\\n        if (\\\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\\\n            and abs_file_path != abs_repo_path\\\\n        ):\\\\n            raise PermissionError(\\\\n                f\\\\\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\\\\\"\\\\n            )\\\\n\\\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\\\n```\\\", \\\"line_number\\\": 65}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"security\", \"line_number\": 71, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"íŒŒì¼ ê²½ë¡œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì€ `os.path.abspath`ì™€ `startswith`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë””ë ‰í† ë¦¬ íƒìƒ‰ ê³µê²©ì„ ë°©ì–´í•˜ë ¤ëŠ” ì¢‹ì€ ì‹œë„ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ `os.path.abspath`ëŠ” ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ í•´ì„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì•…ì˜ì ìœ¼ë¡œ ìƒì„±ëœ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ í†µí•´ ì €ì¥ì†Œ ì™¸ë¶€ íŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” ê³µê²©ì— ì·¨ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‹¬ë³¼ë¦­ ë§í¬ ê³µê²©ì— ëŒ€í•œ ë°©ì–´ë¥¼ ê°•í™”í•˜ê¸° ìœ„í•´ `os.path.abspath` ëŒ€ì‹  `os.path.realpath`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ê²½ë¡œë¥¼ ì–»ì€ í›„ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. `os.path.realpath`ëŠ” ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ í•´ì„í•˜ì—¬ ìµœì¢… ê²½ë¡œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n        abs_file_path = os.path.abspath(prospective_path)\\n\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\"/foo/bar\\\"ì™€ \\\"/foo/barbaz\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\n        if (\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\n            and abs_file_path != abs_repo_path\\n        ):\\n            raise PermissionError(\\n                f\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\"\\n            )\\n\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\n```\", \"improved_code\": \"```python\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„± ë° ë³´ì•ˆ ê²€ì‚¬\\n        # realpathë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¬ë³¼ë¦­ ë§í¬ ê³µê²© ë°©ì§€ ê°•í™”\\n        abs_repo_path = os.path.realpath(repo_path)\\n        # filenameì´ repo_pathì— ëŒ€í•œ ìƒëŒ€ ê²½ë¡œë¼ê³  ê°€ì •í•©ë‹ˆë‹¤.\\n        # ì•…ì˜ì ì¸ filename (ì˜ˆ: \\\"../../../etc/passwd\\\")ì„ ë°©ì§€í•©ë‹ˆë‹¤.\\n        prospective_path = os.path.join(abs_repo_path, filename)\\n        abs_file_path = os.path.realpath(prospective_path)\\n\\n        # resolved_pathê°€ resolved_repo_pathë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\\n        # os.sepì„ ì¶”ê°€í•˜ì—¬ \\\"/foo/bar\\\"ì™€ \\\"/foo/barbaz\\\" ê°™ì€ ê²½ìš°ë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤.\\n        if (\\n            not abs_file_path.startswith(abs_repo_path + os.sep)\\n            and abs_file_path != abs_repo_path\\n        ):\\n            raise PermissionError(\\n                f\\\"ë³´ì•ˆ ìœ„í˜‘: ì €ì¥ì†Œ ì™¸ë¶€ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í–ˆìŠµë‹ˆë‹¤: {filename}\\\"\\n            )\\n\\n        file_path = abs_file_path  # ê²€ì¦ëœ ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©\\n```\"}, {\"type\": \"bug\", \"line_number\": 91, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"ê´‘ë²”ìœ„í•œ `except Exception` ë¸”ë¡ì€ `FileNotFoundError`, `PermissionError`, `UnicodeDecodeError` ì™¸ì— ë°œìƒí•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ êµ¬ì²´ì ì¸ íŒŒì¼ ì½ê¸° ê´€ë ¨ ì˜¤ë¥˜(ì˜ˆ: `IOError`, `OSError`ì˜ ë‹¤ë¥¸ í•˜ìœ„ í´ë˜ìŠ¤)ë¥¼ ëª¨ë‘ ì¡ì•„ëƒ…ë‹ˆë‹¤. ì´ëŠ” ë””ë²„ê¹…ì„ ì–´ë µê²Œ ë§Œë“¤ê³ , ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ì˜ ì›ì¸ì„ íŒŒì•…í•˜ê¸° í˜ë“¤ê²Œ í•©ë‹ˆë‹¤.\", \"suggestion\": \"ê°€ëŠ¥í•œ í•œ êµ¬ì²´ì ì¸ ì˜ˆì™¸ë¥¼ ì¡ê±°ë‚˜, íŒŒì¼ ì½ê¸° ê´€ë ¨ ì˜¤ë¥˜ì— ëŒ€í•´ `OSError`ë‚˜ `IOError`ì™€ ê°™ì´ ì¢€ ë” ì œí•œì ì¸ ì˜ˆì™¸ë¥¼ ì¡ë„ë¡ ë³€ê²½í•˜ì„¸ìš”. ë˜ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ í˜¸ì¶œìì—ê²Œ ì „íŒŒë˜ë„ë¡ ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œí‚¬ ë•ŒëŠ” ì›ë˜ ì˜ˆì™¸ ì •ë³´ë¥¼ í¬í•¨í•˜ë„ë¡ `raise ... from e` êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    except Exception as e:\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\n        import traceback\\n\\n        error_msg = f\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\n{traceback.format_exc()}\\\"\\n        raise Exception(error_msg) from e\\n```\", \"improved_code\": \"```python\\n    except (OSError, IOError) as e: # ë˜ëŠ” ë” êµ¬ì²´ì ì¸ ì˜ˆì™¸ë“¤ì„ ëª…ì‹œ\\n        # íŒŒì¼ ì½ê¸° ê´€ë ¨ ì˜¤ë¥˜ ì²˜ë¦¬\\n        import traceback\\n\\n        error_msg = f\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {type(e).__name__} - {str(e)}\\\\n{traceback.format_exc()}\\\"\\n        # ì›ë˜ ì˜ˆì™¸ íƒ€ì…ì„ ìœ ì§€í•˜ê±°ë‚˜ ë” ì ì ˆí•œ ì˜ˆì™¸ íƒ€ì…ìœ¼ë¡œ ë³€ê²½\\n        raise IOError(error_msg) from e\\n    # FileNotFoundError, PermissionError, UnicodeDecodeErrorëŠ” ì´ë¯¸ ìœ„ì—ì„œ ì²˜ë¦¬ë¨\\n```\"}, {\"type\": \"performance\", \"line_number\": 58, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"`load_file_content` í•¨ìˆ˜ì— `@lru_cache(maxsize=1)` ë°ì½”ë ˆì´í„°ê°€ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. `maxsize=1` ìºì‹œëŠ” ë°”ë¡œ ì§ì „ì— í˜¸ì¶œëœ ë™ì¼í•œ ì¸ìì— ëŒ€í•œ ê²°ê³¼ë§Œ ìºì‹œí•©ë‹ˆë‹¤. ì½”ë“œ ë¦¬ë·° ìš”ì²­ ì²˜ë¦¬ ì‹œ ì—¬ëŸ¬ íŒŒì¼ì„ ìˆœì°¨ì ìœ¼ë¡œ ì½ê²Œ ë˜ë¯€ë¡œ, ë™ì¼í•œ íŒŒì¼ì´ ì—°ì†í•´ì„œ ìš”ì²­ë  ê°€ëŠ¥ì„±ì´ ë‚®ì•„ ì´ ìºì‹œëŠ” ê±°ì˜ íš¨ê³¼ê°€ ì—†ì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.\", \"suggestion\": \"`load_file_content` í•¨ìˆ˜ì—ì„œ `@lru_cache(maxsize=1)` ë°ì½”ë ˆì´í„°ë¥¼ ì œê±°í•˜ê±°ë‚˜, íŒŒì¼ ë‚´ìš©ì„ ìºì‹œí•˜ëŠ” ê²ƒì´ ì‹¤ì œë¡œ ì„±ëŠ¥ì— ë„ì›€ì´ ëœë‹¤ê³  íŒë‹¨ë  ê²½ìš° ë” í° `maxsize`ë¥¼ ì„¤ì •í•˜ì—¬ ì—¬ëŸ¬ íŒŒì¼ì˜ ë‚´ìš©ì„ ìºì‹œí•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”. ë‹¤ë§Œ, íŒŒì¼ ë‚´ìš© ìºì‹œëŠ” ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n@lru_cache(maxsize=1)\\ndef load_file_content(filename: str, repo_path: str) -> str:\\n    \\\"\\\"\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\n```\", \"improved_code\": \"```python\\n# @lru_cache(maxsize=1) # ìºì‹œ ì œê±° ë˜ëŠ” ì ì ˆí•œ í¬ê¸°ë¡œ ë³€ê²½\\ndef load_file_content(filename: str, repo_path: str) -> str:\\n    \\\"\\\"\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\n```\"}, {\"type\": \"design\", \"line_number\": 140, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"`_create_simple_code_review_prompt` í•¨ìˆ˜ ë‚´ì—ì„œ ì…ë ¥ ì¸ìì¸ `review_request` ê°ì²´ì˜ `file_paths` ì†ì„±ì„ ìˆ˜ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•¨ìˆ˜ê°€ ìƒˆë¡œìš´ ê°ì²´(í”„ë¡¬í”„íŠ¸)ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì„ ì£¼ë¡œ ìˆ˜í–‰í•˜ëŠ”ë°, ì…ë ¥ ê°ì²´ì— ë¶€ìˆ˜ íš¨ê³¼(side effect)ë¥¼ ì¼ìœ¼í‚¤ëŠ” ê²ƒì€ ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ì¼ ìˆ˜ ìˆìœ¼ë©°, í˜¸ì¶œìê°€ `review_request` ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•  ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"í•¨ìˆ˜ ë‚´ì—ì„œ ì…ë ¥ ê°ì²´ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì„ í”¼í•˜ì„¸ìš”. ë§Œì•½ ì²˜ë¦¬ëœ íŒŒì¼ ê²½ë¡œ ëª©ë¡ì´ í•„ìš”í•˜ë‹¤ë©´, ì´ë¥¼ í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ì— í¬í•¨ì‹œí‚¤ê±°ë‚˜ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë˜í•œ, `file_paths`ê°€ ì¤‘ë³µì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ëª©ë¡ì´ë¼ë©´ `list` ëŒ€ì‹  `set`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ `in` ì—°ì‚° ë° ì¶”ê°€ ì‹œ ì„±ëŠ¥ì— ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n            file_name = file.filename\\n            if file_name not in review_request.file_paths:\\n                review_request.file_paths.append(file_name)\\n\\n            for hunk_idx, hunk in enumerate(file.hunks):\\n```\", \"improved_code\": \"```python\\n            file_name = file.filename\\n            # review_request ê°ì²´ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šë„ë¡ ë³€ê²½\\n            # if file_name not in review_request.file_paths:\\n            #     review_request.file_paths.append(file_name)\\n\\n            for hunk_idx, hunk in enumerate(file.hunks):\\n```\"}], \"summary\": \"ì œê³µëœ ì½”ë“œëŠ” ì½”ë“œ ë¦¬ë·°ë¥¼ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤. íŠ¹íˆ `load_file_content` í•¨ìˆ˜ì— ë””ë ‰í† ë¦¬ íƒìƒ‰ ê³µê²©ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ë³´ì•ˆ ê²€ì‚¬ ë¡œì§ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ë³´ì•ˆì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¤ëŠ” ê¸ì •ì ì¸ ë³€ê²½ì…ë‹ˆë‹¤. ë‹¤ë§Œ, ì‹¬ë³¼ë¦­ ë§í¬ì— ëŒ€í•œ ì ì¬ì  ì·¨ì•½ì , ê´‘ë²”ìœ„í•œ ì˜ˆì™¸ ì²˜ë¦¬, ë¹„íš¨ìœ¨ì ì¸ ìºì‹œ ì‚¬ìš©, ì…ë ¥ ê°ì²´ ìˆ˜ì •ê³¼ ê°™ì€ ê°œì„ í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"íŒŒì¼ ê²½ë¡œ ìœ íš¨ì„± ê²€ì‚¬ ì‹œ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ ê³ ë ¤í•˜ì—¬ `os.path.realpath` ì‚¬ìš©ì„ ê²€í† í•˜ì„¸ìš”.\", \"íŒŒì¼ ì½ê¸° ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ë” êµ¬ì²´ì ì¸ ì˜ˆì™¸ íƒ€ì…ìœ¼ë¡œ ì œí•œí•˜ì—¬ ë””ë²„ê¹… ìš©ì´ì„±ì„ ë†’ì´ì„¸ìš”.\", \"`load_file_content` í•¨ìˆ˜ì˜ `lru_cache(maxsize=1)`ë¥¼ ì œê±°í•˜ê±°ë‚˜ ì ì ˆí•œ ìºì‹± ì „ëµì„ ì¬ê²€í† í•˜ì„¸ìš”.\", \"í”„ë¡¬í”„íŠ¸ ìƒì„± í•¨ìˆ˜ ë‚´ì—ì„œ ì…ë ¥ ê°ì²´(`review_request`)ë¥¼ ìˆ˜ì •í•˜ëŠ” ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì œê±°í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        repo_path=repo_path,\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 559}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n    main_cli()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    main()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/diff_parser/parser.py\\\", \\\"file_content\\\": \\\"import re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils.prompts import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_FILE_HEADER = re.compile(r\\\\\\\"^diff --git a/(\\\\\\\\S+) b/(\\\\\\\\S+)\\\\\\\", flags=re.MULTILINE)\\\\n\\\\n\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ DiffResult ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        diff_text (str): git diff ëª…ë ¹ì–´ì˜ ì¶œë ¥ í…ìŠ¤íŠ¸\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        DiffResult: Git diff ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´\\\\n\\\\n    Raises:\\\\n        DiffParsingError: diffê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹ì¸ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not diff_text:\\\\n        raise DiffParsingError(\\\\\\\"ë¹ˆ diffê°€ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    file_diffs = _PATTERN_DIFF_SPLIT.split(diff_text)\\\\n    result = DiffResult()\\\\n\\\\n    for raw_diff in file_diffs:\\\\n        if not raw_diff.strip():\\\\n            continue\\\\n        header_match = _PATTERN_FILE_HEADER.search(raw_diff)\\\\n        if header_match:\\\\n            filename = header_match.group(2)\\\\n        else:\\\\n            continue\\\\n\\\\n        hunks = _PATTERN_HUNK_SPLIT.split(raw_diff)\\\\n        hunk_list = [\\\\n            Hunk.from_hunk_text(h) for h in hunks if h.lstrip().startswith(\\\\\\\"@@\\\\\\\")\\\\n        ]\\\\n\\\\n        if use_full_context:\\\\n            file_content = load_file_content(filename, repo_path)\\\\n        else:\\\\n            file_content = None\\\\n\\\\n        parsed_diff = FileDiff(\\\\n            filename=filename, file_content=file_content, hunks=hunk_list\\\\n        )\\\\n        parsed_diff.detect_language()\\\\n        parsed_diff.calculate_changes()\\\\n        result.files.append(parsed_diff)\\\\n\\\\n    if not result.files:\\\\n        raise DiffParsingError(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ diff í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    return result\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\ndef parse_git_diff(diff_text: str, use_full_context: bool) -> DiffResult:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 20}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n```\\\", \\\"line_number\\\": 57}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        file_path = os.path.join(project_root, filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n```\\\", \\\"line_number\\\": 70}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n        raise e\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n```\\\", \\\"line_number\\\": 152}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n```\\\", \\\"line_number\\\": 192}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n```\\\", \\\"line_number\\\": 197}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n```\\\", \\\"line_number\\\": 203}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n```\\\", \\\"line_number\\\": 215}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n    repo_path: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    repo_path: str\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"setup.py\\\", \\\"file_content\\\": \\\"from setuptools import find_packages, setup\\\\n\\\\n# ì‹¤í–‰ì— í•„ìš”í•œ ê¸°ë³¸ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ëª©ë¡\\\\nrequired = [\\\\n    \\\\\\\"requests>=2.31.0\\\\\\\",\\\\n    \\\\\\\"pydantic>=2.6.1\\\\\\\",\\\\n    \\\\\\\"python-dotenv>=1.0.0\\\\\\\",\\\\n    \\\\\\\"openai>=1.65.4\\\\\\\",\\\\n    \\\\\\\"anthropic>=0.39.0\\\\\\\",\\\\n    \\\\\\\"tiktoken>=0.5.2\\\\\\\",\\\\n    \\\\\\\"instructor>=1.7.7\\\\\\\",\\\\n    \\\\\\\"streamlit>=1.32.0\\\\\\\",\\\\n]\\\\n\\\\n# ê°œë°œ ë° í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ì¶”ê°€ ì˜ì¡´ì„±\\\\ndev_required = [\\\\n    \\\\\\\"pytest>=7.4.4\\\\\\\",\\\\n    \\\\\\\"pytest-cov>=4.1.0\\\\\\\",\\\\n    \\\\\\\"build>=1.0.3\\\\\\\",\\\\n    \\\\\\\"twine>=6.0.0\\\\\\\",\\\\n    \\\\\\\"wheel>=0.40.0\\\\\\\",\\\\n]\\\\n\\\\nsetup(\\\\n    name=\\\\\\\"reviewer\\\\\\\",\\\\n    version=\\\\\\\"0.1.0\\\\\\\",\\\\n    packages=find_packages(),\\\\n    install_requires=required,\\\\n    extras_require={\\\\n        \\\\\\\"dev\\\\\\\": dev_required,\\\\n    },\\\\n    entry_points={\\\\n        \\\\\\\"console_scripts\\\\\\\": [\\\\n            \\\\\\\"reviewer=reviewer.cli:main\\\\\\\",\\\\n        ],\\\\n    },\\\\n    python_requires=\\\\\\\">=3.6\\\\\\\",\\\\n    description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\",\\\\n    author=\\\\\\\"Reviewer íŒ€\\\\\\\",\\\\n    classifiers=[\\\\n        \\\\\\\"Programming Language :: Python :: 3\\\\\\\",\\\\n        \\\\\\\"License :: OSI Approved :: MIT License\\\\\\\",\\\\n        \\\\\\\"Operating System :: OS Independent\\\\\\\",\\\\n    ],\\\\n)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n            \\\\\\\"reviewer=reviewer.cli:main_cli\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"reviewer=reviewer.cli:main\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 14, \"file\": \"reviewer/src/diff_parser/parser.py\", \"description\": \"`parse_git_diff` í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— `repo_path` ì¸ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì €ì¥ì†Œ ê²½ë¡œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•œ ë³€ê²½ìœ¼ë¡œ, í•¨ìˆ˜ ì‚¬ìš© ë°©ì‹ì´ ë³€ê²½ë©ë‹ˆë‹¤.\", \"suggestion\": \"ë³€ê²½ ì‚¬í•­ì„ ë¬¸ì„œí™”í•˜ê³ , í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œë„ `repo_path`ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. (í˜„ì¬ diffì—ì„œëŠ” ì˜ ë°˜ì˜ë¨)\", \"severity\": \"info\", \"original_code\": \"```python\\ndef parse_git_diff(diff_text: str, use_full_context: bool) -> DiffResult:\\n```\", \"improved_code\": \"```python\\ndef parse_git_diff(\\n    diff_text: str, use_full_context: bool, repo_path: str\\n) -> DiffResult:\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 50, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"`load_file_content` í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— `repo_path` ì¸ìˆ˜ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ê¸° ìœ„í•œ ë³€ê²½ì…ë‹ˆë‹¤.\", \"suggestion\": \"ë³€ê²½ ì‚¬í•­ì„ ë¬¸ì„œí™”í•˜ê³ , í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œë„ `repo_path`ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì „ë‹¬í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. (í˜„ì¬ diffì—ì„œëŠ” ì˜ ë°˜ì˜ë¨)\", \"severity\": \"info\", \"original_code\": \"```python\\ndef load_file_content(filename: str) -> str:\\n    \\\"\\\"\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\"\\\"\\\"\\n    try:\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\n        project_root = find_project_root()\\n```\", \"improved_code\": \"```python\\ndef load_file_content(filename: str, repo_path: str) -> str:\\n    \\\"\\\"\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\n\\n    Args:\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\n```\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 70, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë° ì¸ì½”ë”© ì˜¤ë¥˜ê°€ ìˆëŠ” íŒŒì¼ì„ LLMì— ì „ë‹¬í•˜ì§€ ì•Šê³  ê±´ë„ˆë›°ê±°ë‚˜ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì‚¬ìš©í•˜ëŠ” ë¡œì§ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” LLM ì²˜ë¦¬ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ê³  ë¶ˆí•„ìš”í•œ í† í° ì‚¬ìš©ì„ ì¤„ì…ë‹ˆë‹¤.\", \"suggestion\": \"ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë‚˜ ê±´ë„ˆë›´ íŒŒì¼ì— ëŒ€í•´ ì‚¬ìš©ìì—ê²Œ ëª…í™•í•˜ê²Œ ì•Œë¦¬ëŠ” ë¡œê·¸ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\n        if os.path.exists(file_path):\\n```\", \"improved_code\": \"```python\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\n        if is_binary_file(filename):\\n            return f\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\"\\n\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\n        try:\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 49, \"file\": \"reviewer/cli.py\", \"description\": \"`--model` ì¸ìˆ˜ì˜ ë„ì›€ë§ í…ìŠ¤íŠ¸ í˜•ì‹ì´ f-stringì—ì„œ `%(default)s`ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” `argparse`ì˜ í‘œì¤€ì ì¸ ê¸°ë³¸ê°’ í‘œì‹œ ë°©ë²•ì…ë‹ˆë‹¤.\", \"suggestion\": \"ë‹¤ë¥¸ ì¸ìˆ˜ì˜ ë„ì›€ë§ í…ìŠ¤íŠ¸ì—ì„œë„ `%(default)s`ë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        help=f\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\",\\n```\", \"improved_code\": \"```python\\n        help=\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\",\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 559, \"file\": \"reviewer/cli.py\", \"description\": \"CLI ì§„ì…ì  í•¨ìˆ˜ ì´ë¦„ì´ `main_cli`ì—ì„œ `main`ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. `setup.py`ì˜ `entry_points`ë„ ì´ì— ë§ì¶° ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ì¸ Python CLI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì§„ì…ì  ëª…ëª… ê·œì¹™ì„ ë”°ë¦…ë‹ˆë‹¤.\", \"suggestion\": \"íŠ¹ë³„í•œ ì¶”ê°€ ì œì•ˆì€ ì—†ìŠµë‹ˆë‹¤. ì¢‹ì€ ë³€ê²½ì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\ndef main_cli() -> None:\\n    \\\"\\\"\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\"\\\"\\\"\\n    try:\\n        main()\\n    except KeyboardInterrupt:\\n        logger.info(\\\"\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n    except Exception as e:\\n        logger.error(f\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\")\\n        sys.exit(1)\\n\\n\\n```\", \"improved_code\": \"```python\\n\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œ ë¦¬ë·° ë„êµ¬ì— ì €ì¥ì†Œ ê²½ë¡œ ì§€ì • ê¸°ëŠ¥(`--repo-path`)ì„ ì¶”ê°€í•˜ê³ , ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš© ì‹œ í•´ë‹¹ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì½ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤. ë˜í•œ, ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë° ì¸ì½”ë”© ì˜¤ë¥˜ê°€ ìˆëŠ” íŒŒì¼ì„ ê±´ë„ˆë›°ì–´ LLM ì²˜ë¦¬ì˜ ì•ˆì •ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. CLI ì§„ì…ì  í•¨ìˆ˜ ì´ë¦„ ë³€ê²½ ë° ë„ì›€ë§ í…ìŠ¤íŠ¸ í˜•ì‹ ê°œì„ ê³¼ ê°™ì€ ìŠ¤íƒ€ì¼ ë° ë¦¬íŒ©í† ë§ ë³€ê²½ë„ í¬í•¨ë©ë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"ë¬¸ì„œ ì—…ë°ì´íŠ¸: `parse_git_diff` ë° `load_file_content` í•¨ìˆ˜ì˜ `repo_path` ì¸ìˆ˜ì— ëŒ€í•œ ì„¤ëª…ì„ ì¶”ê°€í•©ë‹ˆë‹¤.\", \"ë¡œê·¸ ê°œì„ : ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë‚˜ ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì¸í•´ ê±´ë„ˆë›´ íŒŒì¼ì— ëŒ€í•œ ëª…í™•í•œ ë¡œê·¸ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\", \"ì¼ê´€ëœ ë„ì›€ë§ í˜•ì‹: `argparse`ì˜ `%(default)s` í˜•ì‹ì„ ë‹¤ë¥¸ ì¸ìˆ˜ì˜ ë„ì›€ë§ í…ìŠ¤íŠ¸ì—ë„ ì¼ê´€ë˜ê²Œ ì ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    main()\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        repo_path=repo_path,\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    main()\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n    main_cli()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    main()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/diff_parser/parser.py\\\", \\\"file_content\\\": \\\"import re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils.prompts import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_FILE_HEADER = re.compile(r\\\\\\\"^diff --git a/(\\\\\\\\S+) b/(\\\\\\\\S+)\\\\\\\", flags=re.MULTILINE)\\\\n\\\\n\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ DiffResult ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        diff_text (str): git diff ëª…ë ¹ì–´ì˜ ì¶œë ¥ í…ìŠ¤íŠ¸\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        DiffResult: Git diff ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´\\\\n\\\\n    Raises:\\\\n        DiffParsingError: diffê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹ì¸ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not diff_text:\\\\n        raise DiffParsingError(\\\\\\\"ë¹ˆ diffê°€ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    file_diffs = _PATTERN_DIFF_SPLIT.split(diff_text)\\\\n    result = DiffResult()\\\\n\\\\n    for raw_diff in file_diffs:\\\\n        if not raw_diff.strip():\\\\n            continue\\\\n        header_match = _PATTERN_FILE_HEADER.search(raw_diff)\\\\n        if header_match:\\\\n            filename = header_match.group(2)\\\\n        else:\\\\n            continue\\\\n\\\\n        hunks = _PATTERN_HUNK_SPLIT.split(raw_diff)\\\\n        hunk_list = [\\\\n            Hunk.from_hunk_text(h) for h in hunks if h.lstrip().startswith(\\\\\\\"@@\\\\\\\")\\\\n        ]\\\\n\\\\n        if use_full_context:\\\\n            file_content = load_file_content(filename, repo_path)\\\\n        else:\\\\n            file_content = None\\\\n\\\\n        parsed_diff = FileDiff(\\\\n            filename=filename, file_content=file_content, hunks=hunk_list\\\\n        )\\\\n        parsed_diff.detect_language()\\\\n        parsed_diff.calculate_changes()\\\\n        result.files.append(parsed_diff)\\\\n\\\\n    if not result.files:\\\\n        raise DiffParsingError(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ diff í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    return result\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\ndef parse_git_diff(diff_text: str, use_full_context: bool) -> DiffResult:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 20}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n```\\\", \\\"line_number\\\": 57}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        file_path = os.path.join(project_root, filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n```\\\", \\\"line_number\\\": 70}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n        raise e\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n```\\\", \\\"line_number\\\": 152}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n```\\\", \\\"line_number\\\": 192}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n```\\\", \\\"line_number\\\": 197}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n```\\\", \\\"line_number\\\": 203}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n```\\\", \\\"line_number\\\": 215}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n    repo_path: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    repo_path: str\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 49, \"file\": \"reviewer/cli.py\", \"description\": \"--model ì¸ìˆ˜ì˜ ë„ì›€ë§ ë¬¸ìì—´ì—ì„œ ê¸°ë³¸ê°’ì„ í‘œì‹œí•˜ê¸° ìœ„í•´ f-stringì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. argparseëŠ” ê¸°ë³¸ê°’ì„ ìë™ìœ¼ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•œ `%(default)s` í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì œê³µí•˜ë©°, ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” í‘œì¤€ì ì´ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë„ì›€ë§ ë¬¸ìì—´ì—ì„œ `%(default)s` í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ argparseê°€ ê¸°ë³¸ê°’ì„ ìë™ìœ¼ë¡œ ì‚½ì…í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"        help=f\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\",\", \"improved_code\": \"        help=\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\",\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 82, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"`load_file_content` í•¨ìˆ˜ì—ì„œ ê´‘ë²”ìœ„í•œ `Exception`ì„ ì¡ê³  ìˆ˜ë™ìœ¼ë¡œ íŠ¸ë ˆì´ìŠ¤ë°±ì„ í¬í•¨í•œ ìƒˆë¡œìš´ ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•˜ì—¬ ë‹¤ì‹œ ë°œìƒì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ë‹¤ì–‘í•œ ì˜¤ë¥˜ë¥¼ ì¡ì„ ìˆ˜ ìˆì§€ë§Œ, íŠ¹ì • íŒŒì¼ ê´€ë ¨ ì˜¤ë¥˜(ì˜ˆ: `IOError`, `OSError`)ë¥¼ êµ¬ë¶„í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ê³ , ìˆ˜ë™ íŠ¸ë ˆì´ìŠ¤ë°± í¬ë§·íŒ…ì€ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê¸°ëŠ¥ì„ ì œëŒ€ë¡œ í™œìš©í•˜ì§€ ëª»í•©ë‹ˆë‹¤.\", \"suggestion\": \"íŒŒì¼ ê´€ë ¨ íŠ¹ì • ì˜ˆì™¸(`IOError`, `OSError` ë“±)ë¥¼ ë¨¼ì € ì¡ê³ , ë¡œê¹… ì‹œ `exc_info=True`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ íŠ¸ë ˆì´ìŠ¤ë°±ì„ í¬í•¨í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”. ì˜ˆì™¸ ë°œìƒ ì‹œì—ëŠ” ì›ë³¸ ì˜ˆì™¸ë¥¼ ê·¸ëŒ€ë¡œ ë‹¤ì‹œ ë°œìƒì‹œí‚¤ê±°ë‚˜, ì›ë³¸ ì˜ˆì™¸ë¥¼ í¬í•¨í•˜ëŠ” ìƒˆë¡œìš´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ í˜¸ì¶œìê°€ ì˜¤ë¥˜ ìœ í˜•ì„ ë” ì‰½ê²Œ íŒë‹¨í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"except Exception as e:\\n    # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\n    import traceback\\n\\n    error_msg = f\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\n{traceback.format_exc()}\\\"\\n    raise Exception(error_msg) from e\", \"improved_code\": \"except (IOError, OSError) as e:\\n    logger.error(f\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\", exc_info=True)\\n    raise # Re-raise the specific exception\\nexcept Exception as e: # Catch any other unexpected errors\\n    logger.error(f\\\"íŒŒì¼ '{filename}' ì½ê¸° ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\", exc_info=True)\\n    raise # Re-raise the unexpected exception\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ Git ì €ì¥ì†Œ ê²½ë¡œ ì²˜ë¦¬ ë¡œì§ì„ ê°œì„ í•˜ê³ , íŒŒì¼ ë‚´ìš© ë¡œë”© ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë° ì¸ì½”ë”© ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ê°•í™”í•©ë‹ˆë‹¤. `repo_path` ì¸ìê°€ `parse_git_diff` ë° `load_file_content` í•¨ìˆ˜ë¡œ ì „ë‹¬ë˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìœ¼ë©°, `ReviewRequest` ëª¨ë¸ì—ë„ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, CLI ì§„ì…ì  ì½”ë“œê°€ ê°„ì†Œí™”ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"`load_file_content` í•¨ìˆ˜ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ì„ ì¢€ ë” êµ¬ì²´ì ì¸ ì˜ˆì™¸ íƒ€ì…ì„ ì¡ê³  ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `exc_info`ë¥¼ í™œìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œì„ í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"ìƒˆë¡œìš´ `repo_path` ì²˜ë¦¬ ë¡œì§ê³¼ `load_file_content` í•¨ìˆ˜ì˜ ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤(íŒŒì¼ ì—†ìŒ, ë°”ì´ë„ˆë¦¬ íŒŒì¼, ì¸ì½”ë”© ì˜¤ë¥˜ ë“±)ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì—¬ ì½”ë“œì˜ ê²¬ê³ ì„±ì„ ë†’ì´ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        help=\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: %(default)s)\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        repo_path=repo_path,\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/diff_parser/parser.py\\\", \\\"file_content\\\": \\\"import re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils.prompts import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_FILE_HEADER = re.compile(r\\\\\\\"^diff --git a/(\\\\\\\\S+) b/(\\\\\\\\S+)\\\\\\\", flags=re.MULTILINE)\\\\n\\\\n\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ DiffResult ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        diff_text (str): git diff ëª…ë ¹ì–´ì˜ ì¶œë ¥ í…ìŠ¤íŠ¸\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        DiffResult: Git diff ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´\\\\n\\\\n    Raises:\\\\n        DiffParsingError: diffê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹ì¸ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not diff_text:\\\\n        raise DiffParsingError(\\\\\\\"ë¹ˆ diffê°€ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    file_diffs = _PATTERN_DIFF_SPLIT.split(diff_text)\\\\n    result = DiffResult()\\\\n\\\\n    for raw_diff in file_diffs:\\\\n        if not raw_diff.strip():\\\\n            continue\\\\n        header_match = _PATTERN_FILE_HEADER.search(raw_diff)\\\\n        if header_match:\\\\n            filename = header_match.group(2)\\\\n        else:\\\\n            continue\\\\n\\\\n        hunks = _PATTERN_HUNK_SPLIT.split(raw_diff)\\\\n        hunk_list = [\\\\n            Hunk.from_hunk_text(h) for h in hunks if h.lstrip().startswith(\\\\\\\"@@\\\\\\\")\\\\n        ]\\\\n\\\\n        if use_full_context:\\\\n            file_content = load_file_content(filename, repo_path)\\\\n        else:\\\\n            file_content = None\\\\n\\\\n        parsed_diff = FileDiff(\\\\n            filename=filename, file_content=file_content, hunks=hunk_list\\\\n        )\\\\n        parsed_diff.detect_language()\\\\n        parsed_diff.calculate_changes()\\\\n        result.files.append(parsed_diff)\\\\n\\\\n    if not result.files:\\\\n        raise DiffParsingError(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ diff í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    return result\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\ndef parse_git_diff(diff_text: str, use_full_context: bool) -> DiffResult:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 20}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom .file_utils import BINARY_EXTENSIONS, BINARY_FILENAMES, is_binary_file\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n__all__ = [\\\\n    \\\\\\\"run_git_diff\\\\\\\",\\\\n    \\\\\\\"save_prompt\\\\\\\",\\\\n    \\\\\\\"is_binary_file\\\\\\\",\\\\n    \\\\\\\"BINARY_EXTENSIONS\\\\\\\",\\\\n    \\\\\\\"BINARY_FILENAMES\\\\\\\",\\\\n]\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n    except Exception as e:\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n            try:\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.file_utils import is_binary_file\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n```\\\", \\\"line_number\\\": 57}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        file_path = os.path.join(project_root, filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        if not os.path.exists(file_path):\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\\\n        if is_binary_file(filename):\\\\n            return f\\\\\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\\\n        try:\\\\n```\\\", \\\"line_number\\\": 70}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        except UnicodeDecodeError:\\\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\\\n            return f\\\\\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\\\\\"\\\\n\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n        raise e\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ë‹¨ìˆœ ì˜ˆì™¸ ì „íŒŒê°€ ì•„ë‹Œ ì˜ë¯¸ ìˆëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ\\\\n        import traceback\\\\n\\\\n        error_msg = f\\\\\\\"íŒŒì¼ '{filename}' ì½ê¸° ì˜¤ë¥˜: {str(e)}\\\\\\\\n{traceback.format_exc()}\\\\\\\"\\\\n        raise Exception(error_msg) from e\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(file.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n```\\\", \\\"line_number\\\": 152}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n```\\\", \\\"line_number\\\": 192}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\\\n            if is_binary_file(request.filename):\\\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n\\\\n```\\\", \\\"line_number\\\": 197}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # íŒŒì¼ ë‚´ìš© ì½ê¸° ì‹œë„\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n\\\\n                # user_prompt ìƒì„±\\\\n                user_prompt = UserPromptWithFileContent(\\\\n                    file_name=request.filename,\\\\n                    file_content=file_content,\\\\n                    hunks=request.hunks,\\\\n                    language=request.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n```\\\", \\\"line_number\\\": 203}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            except FileNotFoundError:\\\\n                # íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ê±´ë„ˆëœë‹ˆë‹¤\\\\n                continue\\\\n```\\\", \\\"line_number\\\": 215}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n    repo_path: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    repo_path: str\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"design\", \"line_number\": 257, \"file\": \"reviewer/cli.py\", \"description\": \"Git ì €ì¥ì†Œ ê²½ë¡œ(`repo_path`)ë¥¼ íŒŒì‹± ë° ë¦¬ë·° ìš”ì²­ ê°ì²´ì— ì „ë‹¬í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ì§€ì •í•œ ê²½ë¡œ ë˜ëŠ” íƒì§€ëœ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\", \"suggestion\": \"ì´ ë³€ê²½ì€ ë‹¤ì–‘í•œ ì €ì¥ì†Œ êµ¬ì¡°ë¥¼ ì§€ì›í•˜ê³  íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ ë¡œë”©ì˜ ì •í™•ì„±ì„ ë†’ì…ë‹ˆë‹¤. ê´€ë ¨ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë° ëª¨ë¸ ì •ì˜ê°€ ì¼ê´€ë˜ê²Œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"diff_result = parse_git_diff(diff_content, use_full_context)\", \"improved_code\": \"diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\"}, {\"type\": \"quality\", \"line_number\": 72, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"`load_file_content` í•¨ìˆ˜ì—ì„œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë° ì¸ì½”ë”© ì˜¤ë¥˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬í•˜ë„ë¡ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì½ì§€ ì•Šê³ , ì¸ì½”ë”© ì˜¤ë¥˜ ë°œìƒ ì‹œì—ë„ ì˜ˆì™¸ ëŒ€ì‹  íŠ¹ì • ë¬¸ìì—´ì„ ë°˜í™˜í•˜ì—¬ ì•ˆì •ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. ë˜í•œ, íŒŒì¼ ì½ê¸° ì‹¤íŒ¨ ì‹œ ë” ìƒì„¸í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\", \"suggestion\": \"ì´ëŸ¬í•œ ë³€ê²½ì€ LLMì´ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ë‚´ìš©ì„ í”„ë¡¬í”„íŠ¸ì— í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ , íŒŒì¼ ë¡œë”© ì‹¤íŒ¨ ì‹œ ë””ë²„ê¹…ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\n        if os.path.exists(file_path):\\n            with open(file_path, encoding=\\\"utf-8\\\") as f:\\n                return f.read()\\n        else:\\n            raise FileNotFoundError(f\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\")\", \"improved_code\": \"        # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ í™•ì¸ (íŒŒì¼ í™•ì¥ì ë° ì´ë¦„ ê¸°ì¤€)\\n        if is_binary_file(filename):\\n            return f\\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: {filename}]\\\"\\n\\n        # UTF-8ë¡œ íŒŒì¼ ì½ê¸° ì‹œë„\\n        try:\\n            with open(file_path, encoding=\\\"utf-8\\\") as f:\\n                return f.read()\\n        except UnicodeDecodeError:\\n            # ì¸ì½”ë”© ì˜¤ë¥˜ ì‹œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ê°„ì£¼\\n            return f\\\"[ì¸ì½”ë”© ì˜¤ë¥˜ë¡œ ì½ì„ ìˆ˜ ì—†ëŠ” íŒŒì¼: {filename}]\\\"\"}, {\"type\": \"performance\", \"line_number\": 152, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ìƒì„± ì‹œ, ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ì‹ë³„ëœ íŒŒì¼ì€ ì²˜ë¦¬ ëŒ€ìƒì—ì„œ ì œì™¸í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” LLMì´ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ë‚´ìš©ì„ í”„ë¡¬í”„íŠ¸ì— í¬í•¨ì‹œí‚¤ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ , ë¶ˆí•„ìš”í•œ í† í° ì‚¬ìš©ì„ ì¤„ì…ë‹ˆë‹¤.\", \"suggestion\": \"ì´ ë³€ê²½ì€ í”„ë¡¬í”„íŠ¸ì˜ í’ˆì§ˆê³¼ LLM ì²˜ë¦¬ íš¨ìœ¨ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"        for file in review_request.processed_diff.files:\\n            file_name = file.filename\\n            if file_name not in review_request.file_paths:\\n                review_request.file_paths.append(file_name)\\n\\n            for hunk_idx, hunk in enumerate(file.hunks):\", \"improved_code\": \"        for file in review_request.processed_diff.files:\\n            # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì¸ì§€ ë¨¼ì € í™•ì¸\\n            if is_binary_file(file.filename):\\n                # ë°”ì´ë„ˆë¦¬ íŒŒì¼ì€ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê±´ë„ˆëœë‹ˆë‹¤\\n                continue\\n\\n            file_name = file.filename\\n            if file_name not in review_request.file_paths:\\n                review_request.file_paths.append(file_name)\\n\\n            for hunk_idx, hunk in enumerate(file.hunks):\"}, {\"type\": \"quality\", \"line_number\": 255, \"file\": \"reviewer/cli.py\", \"description\": \"`--repo-path .` ì˜µì…˜ ì‚¬ìš© ì‹œ, í˜„ì¬ ë””ë ‰í† ë¦¬ì—ì„œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ `FileNotFoundError`ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ ì˜ˆì™¸ëŠ” `main` í•¨ìˆ˜ì˜ ì¼ë°˜ ì˜ˆì™¸ ì²˜ë¦¬ ë¸”ë¡ì—ì„œ ì¡íˆì§€ë§Œ, ì‚¬ìš©ìì—ê²Œ \\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\"ì™€ ê°™ì€ ë” êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì§ì ‘ ì œê³µí•˜ë©´ ë¬¸ì œ í•´ê²°ì— ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`find_project_root()` í˜¸ì¶œ ì‹œ ë°œìƒí•˜ëŠ” `FileNotFoundError`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¡ì•„ì„œ ì‚¬ìš©ìì—ê²Œ ë” ìœ ìš©í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ë„ë¡ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"    repo_path = (\\n        str(Path(args.repo_path)) if args.repo_path != \\\".\\\" else str(find_project_root())\\n    )\", \"improved_code\": \"    try:\\n        repo_path = (\\n            str(Path(args.repo_path)) if args.repo_path != \\\".\\\" else str(find_project_root())\\n        )\\n    except FileNotFoundError as e:\\n        logger.error(f\\\"ì˜¤ë¥˜: í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Git ì €ì¥ì†Œ ë˜ëŠ” í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(.git, pyproject.toml ë“±)ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰í•˜ê±°ë‚˜ --repo-path ì˜µì…˜ì„ ì‚¬ìš©í•˜ì„¸ìš”. ({e})\\\")\\n        sys.exit(1)\"}], \"summary\": \"Git ì €ì¥ì†Œ ê²½ë¡œ ì²˜ë¦¬ ê°œì„  ë° íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ ë¡œë”© ì•ˆì •ì„± í–¥ìƒ. ë°”ì´ë„ˆë¦¬ íŒŒì¼ ë° ì¸ì½”ë”© ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•˜ì—¬ LLM í”„ë¡¬í”„íŠ¸ ìƒì„±ì˜ ì •í™•ì„±ê³¼ íš¨ìœ¨ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ íƒìƒ‰ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ìì—ê²Œ ë” ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ë„ë¡ ê°œì„ í•©ë‹ˆë‹¤.\", \"ìƒˆë¡œìš´ `--repo-path` ì˜µì…˜ì˜ ë™ì‘ ë°©ì‹(íŠ¹íˆ \\\".\\\" ì…ë ¥ ì‹œ)ì— ëŒ€í•œ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\nobject InMemoryDatabase {\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n\\\\n    val followings: MutableMap<UserId, MutableSet<UserId>> = mutableMapOf()\\\\n    val favorites: MutableMap<ArticleId, MutableSet<UserId>> = mutableMapOf()\\\\n\\\\n    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „í›„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ\\\\n    fun clear() {\\\\n        users.clear()\\\\n        articles.clear()\\\\n        followings.clear()\\\\n        favorites.clear()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.article.model.Slug\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleCountProjection\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleRepository\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\ndata class ArticleCountProjectionImpl(\\\\n    override val articleId: ArticleId,\\\\n    override val count: Int,\\\\n) : ArticleCountProjection\\\\n\\\\nclass MockArticleRepository : ArticleRepository {\\\\n    override fun save(article: Article): Article {\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n        val updatedArticle = if (article is Article.Companion.Model) {\\\\n            article.copy(author = updatedAuthor)\\\\n        } else {\\\\n            article\\\\n        }\\\\n        InMemoryDatabase.articles[updatedArticle.id] = updatedArticle\\\\n        return updatedArticle\\\\n    }\\\\n\\\\n    override fun delete(article: Article) {\\\\n        InMemoryDatabase.articles.remove(article.id)\\\\n        InMemoryDatabase.favorites.remove(article.id)\\\\n    }\\\\n\\\\n    override fun favorite(article: Article, user: User) {\\\\n        val favoritesSet = InMemoryDatabase.favorites.getOrPut(article.id) { mutableSetOf() }\\\\n        favoritesSet.add(user.id)\\\\n    }\\\\n\\\\n    override fun unFavorite(article: Article, user: User) {\\\\n        InMemoryDatabase.favorites[article.id]?.remove(user.id)\\\\n    }\\\\n\\\\n    override fun find(\\\\n        tag: String?,\\\\n        author: String?,\\\\n        favoritedUsername: String?,\\\\n        limit: Int,\\\\n        offset: Int,\\\\n    ): List<Article> {\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n\\\\n        if (tag != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.tags.any { it.name == tag }\\\\n            }\\\\n        }\\\\n\\\\n        if (author != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.author.name == author\\\\n            }\\\\n        }\\\\n\\\\n        if (favoritedUsername != null) {\\\\n            val favoriter = InMemoryDatabase.users.values\\\\n                .map { it }\\\\n                .find { it.name == favoritedUsername }\\\\n            filtered = if (favoriter != null) {\\\\n                filtered.filter { article ->\\\\n                    InMemoryDatabase.favorites[article.id]?.contains(favoriter.id) ?: false\\\\n                }\\\\n            } else {\\\\n                emptyList()\\\\n            }\\\\n        }\\\\n\\\\n        return filtered.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun findFeedArticles(userId: UserId, limit: Int, offset: Int): List<Article> {\\\\n        val followedUserIds = InMemoryDatabase.followings[userId] ?: emptySet()\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n            .filter { article ->\\\\n                followedUserIds.contains(article.author.id)\\\\n            }\\\\n        return feedArticles.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun getCountAllByArticleIds(articleIds: List<ArticleId>): List<ArticleCountProjection> {\\\\n        return articleIds.map { articleId ->\\\\n            val count = InMemoryDatabase.favorites[articleId]?.size ?: 0\\\\n            ArticleCountProjectionImpl(articleId, count)\\\\n        }\\\\n    }\\\\n\\\\n    override fun getFavoritesArticleIds(userId: UserId): List<ArticleId> {\\\\n        return InMemoryDatabase.favorites.filter { (_, userIds) ->\\\\n            userIds.contains(userId)\\\\n        }.keys.toList()\\\\n    }\\\\n\\\\n    override fun findBySlug(slug: Slug): Article? {\\\\n        return InMemoryDatabase.articles.values\\\\n            .map { it }\\\\n            .find { it.slug == slug }\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\nimport io.github.gunkim.realworld.domain.user.repository.UserRepository\\\\n\\\\nclass MockUserRepository : UserRepository {\\\\n    override fun save(user: User): User {\\\\n        val existingUser = InMemoryDatabase.users[user.id]\\\\n        InMemoryDatabase.users[user.id] = user\\\\n\\\\n        if (existingUser != null) {\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n                if (article.author.id == user.id) {\\\\n                    if (article is Article.Companion.Model) {\\\\n                        article.copy(author = user)\\\\n                    } else {\\\\n                        article\\\\n                    }\\\\n                } else {\\\\n                    article\\\\n                }\\\\n            }\\\\n        }\\\\n        return user\\\\n    }\\\\n\\\\n    override fun follow(followerId: UserId, followeeId: UserId) {\\\\n        val followingSet = InMemoryDatabase.followings.getOrPut(followerId) { mutableSetOf() }\\\\n        followingSet.add(followeeId)\\\\n    }\\\\n\\\\n    override fun unfollow(followerId: UserId, followeeId: UserId) {\\\\n        InMemoryDatabase.followings[followerId]?.remove(followeeId)\\\\n    }\\\\n\\\\n    override fun findByEmail(email: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.email == email }\\\\n    }\\\\n\\\\n    override fun findById(userId: UserId): User? {\\\\n        return InMemoryDatabase.users[userId]\\\\n    }\\\\n\\\\n    override fun findByUserName(name: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.name == name }\\\\n    }\\\\n\\\\n    override fun findFollowedUserIdsFor(userId: UserId): List<UserId> {\\\\n        return InMemoryDatabase.followings[userId]?.toList() ?: emptyList()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"file_content\\\": \\\"distributionBase=GRADLE_USER_HOME\\\\ndistributionPath=wrapper/dists\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\nnetworkTimeout=10000\\\\nvalidateDistributionUrl=true\\\\nzipStoreBase=GRADLE_USER_HOME\\\\nzipStorePath=wrapper/dists\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.7-bin.zip\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew.bat\\\", \\\"file_content\\\": \\\"@rem\\\\n@rem Copyright 2015 the original author or authors.\\\\n@rem\\\\n@rem Licensed under the Apache License, Version 2.0 (the \\\\\\\"License\\\\\\\");\\\\n@rem you may not use this file except in compliance with the License.\\\\n@rem You may obtain a copy of the License at\\\\n@rem\\\\n@rem      https://www.apache.org/licenses/LICENSE-2.0\\\\n@rem\\\\n@rem Unless required by applicable law or agreed to in writing, software\\\\n@rem distributed under the License is distributed on an \\\\\\\"AS IS\\\\\\\" BASIS,\\\\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\\\n@rem See the License for the specific language governing permissions and\\\\n@rem limitations under the License.\\\\n@rem\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n\\\\n@if \\\\\\\"%DEBUG%\\\\\\\"==\\\\\\\"\\\\\\\" @echo off\\\\n@rem ##########################################################################\\\\n@rem\\\\n@rem  Gradle startup script for Windows\\\\n@rem\\\\n@rem ##########################################################################\\\\n\\\\n@rem Set local scope for the variables with windows NT shell\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" setlocal\\\\n\\\\nset DIRNAME=%~dp0\\\\nif \\\\\\\"%DIRNAME%\\\\\\\"==\\\\\\\"\\\\\\\" set DIRNAME=.\\\\n@rem This is normally unused\\\\nset APP_BASE_NAME=%~n0\\\\nset APP_HOME=%DIRNAME%\\\\n\\\\n@rem Resolve any \\\\\\\".\\\\\\\" and \\\\\\\"..\\\\\\\" in APP_HOME to make it shorter.\\\\nfor %%i in (\\\\\\\"%APP_HOME%\\\\\\\") do set APP_HOME=%%~fi\\\\n\\\\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\\\\nset DEFAULT_JVM_OPTS=\\\\\\\"-Xmx64m\\\\\\\" \\\\\\\"-Xms64m\\\\\\\"\\\\n\\\\n@rem Find java.exe\\\\nif defined JAVA_HOME goto findJavaFromJavaHome\\\\n\\\\nset JAVA_EXE=java.exe\\\\n%JAVA_EXE% -version >NUL 2>&1\\\\nif %ERRORLEVEL% equ 0 goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:findJavaFromJavaHome\\\\nset JAVA_HOME=%JAVA_HOME:\\\\\\\"=%\\\\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\\\\n\\\\nif exist \\\\\\\"%JAVA_EXE%\\\\\\\" goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:execute\\\\n@rem Setup the command line\\\\n\\\\nset CLASSPATH=%APP_HOME%\\\\\\\\gradle\\\\\\\\wrapper\\\\\\\\gradle-wrapper.jar\\\\n\\\\n\\\\n@rem Execute Gradle\\\\n\\\\\\\"%JAVA_EXE%\\\\\\\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \\\\\\\"-Dorg.gradle.appname=%APP_BASE_NAME%\\\\\\\" -classpath \\\\\\\"%CLASSPATH%\\\\\\\" org.gradle.wrapper.GradleWrapperMain %*\\\\n\\\\n:end\\\\n@rem End local scope for the variables with windows NT shell\\\\nif %ERRORLEVEL% equ 0 goto mainEnd\\\\n\\\\n:fail\\\\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\\\\nrem the _cmd.exe /c_ return code!\\\\nset EXIT_CODE=%ERRORLEVEL%\\\\nif %EXIT_CODE% equ 0 set EXIT_CODE=1\\\\nif not \\\\\\\"\\\\\\\"==\\\\\\\"%GRADLE_EXIT_CONSOLE%\\\\\\\" exit %EXIT_CODE%\\\\nexit /b %EXIT_CODE%\\\\n\\\\n:mainEnd\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" endlocal\\\\n\\\\n:omega\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n```\\\", \\\"line_number\\\": 16}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 9, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\", \"description\": \"`InMemoryDatabase`ì—ì„œ `users`ì™€ `articles` ë§µì˜ ê°’ íƒ€ì…ì´ `Any`ë¡œ ì„ ì–¸ë˜ì–´ ìˆì–´ íƒ€ì… ì•ˆì „ì„±ì´ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ì €ì¥ë˜ëŠ” ê°ì²´ì˜ íƒ€ì…(`User`, `Article`)ìœ¼ë¡œ ëª…ì‹œí•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ í™•ë³´í•œ ê²ƒì€ ì¢‹ì€ ê°œì„ ì…ë‹ˆë‹¤.\", \"suggestion\": \"ë§µì˜ ê°’ íƒ€ì…ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì—¬ ì»´íŒŒì¼ ì‹œì ì— íƒ€ì… ì˜¤ë¥˜ë¥¼ ê°ì§€í•˜ê³  ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\", \"improved_code\": \"val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 49, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\", \"description\": \"`InMemoryDatabase`ì˜ ë§µ íƒ€ì…ì´ êµ¬ì²´ì ì¸ íƒ€ì…ìœ¼ë¡œ ë³€ê²½ë¨ì— ë”°ë¼, ê°’ì„ ê°€ì ¸ì˜¬ ë•Œ í•„ìš”í–ˆë˜ ë¶ˆí•„ìš”í•œ ìºìŠ¤íŒ…(`as? User`, `as? Article`)ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ê°„ê²°ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"suggestion\": \"íƒ€ì… ì•ˆì „ì„±ì´ í™•ë³´ë˜ì–´ ë¶ˆí•„ìš”í•œ ìºìŠ¤íŒ… ì½”ë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\", \"improved_code\": \"var filtered = InMemoryDatabase.articles.values.toList().map { it }\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 14, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\", \"description\": \"`replaceAll` ëŒë‹¤ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ íŒŒë¼ë¯¸í„°(`articleId`)ë¥¼ ì½”í‹€ë¦° ì»¨ë²¤ì…˜ì— ë”°ë¼ ì–¸ë”ìŠ¤ì½”ì–´(`_`)ë¡œ ë³€ê²½í•˜ì—¬ ì˜ë„ë¥¼ ëª…í™•íˆ í–ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°ëŠ” `_`ë¡œ í‘œê¸°í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"InMemoryDatabase.articles.replaceAll { articleId, article ->\", \"improved_code\": \"InMemoryDatabase.articles.replaceAll { _, article ->\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 8, \"file\": \"gradle/wrapper/gradle-wrapper.properties\", \"description\": \"`gradle-wrapper.properties` íŒŒì¼ì— íŠ¹ì • ê°œë°œ í™˜ê²½ì˜ Java í™ˆ ê²½ë¡œê°€ í•˜ë“œì½”ë”©ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ì„¤ì •ì€ ê°œë°œ í™˜ê²½ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ê³µìœ  ì €ì¥ì†Œì— í¬í•¨ë  ê²½ìš° ë‹¤ë¥¸ ê°œë°œìì˜ ë¹Œë“œ í™˜ê²½ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì´ ì„¤ì •ì€ ë¡œì»¬ í™˜ê²½ ì„¤ì •ìœ¼ë¡œ ê´€ë¦¬í•˜ê±°ë‚˜, `.gitignore`ì— ì¶”ê°€í•˜ì—¬ ì»¤ë°‹ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ê°€ì´ë“œí•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"\\\\ No newline at end of file\", \"improved_code\": \"org.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì£¼ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ `InMemoryDatabase`ì—ì„œ `Any` íƒ€ì…ì„ êµ¬ì²´ì ì¸ íƒ€ì…(`User`, `Article`)ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ê°œì„ í•˜ê³ , ì´ì— ë”°ë¼ ë¶ˆí•„ìš”í•´ì§„ ìºìŠ¤íŒ… ì½”ë“œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, `MockUserRepository`ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ëŒë‹¤ íŒŒë¼ë¯¸í„°ë¥¼ `_`ë¡œ ë³€ê²½í•˜ëŠ” ìŠ¤íƒ€ì¼ ê°œì„ ì´ ìˆì—ˆìŠµë‹ˆë‹¤. Gradle ë²„ì „ì´ 8.7ì—ì„œ 8.10ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆê³ , `gradle-wrapper.properties`ì— íŠ¹ì • Java í™ˆ ê²½ë¡œ ì„¤ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. `gradlew.bat` íŒŒì¼ì—ëŠ” SPDX ë¼ì´ì„ ìŠ¤ ì‹ë³„ìê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"`gradle-wrapper.properties`ì— í•˜ë“œì½”ë”©ëœ `org.gradle.java.home` ê²½ë¡œëŠ” ë¡œì»¬ í™˜ê²½ ì„¤ì •ìœ¼ë¡œ ê´€ë¦¬í•˜ê±°ë‚˜ `.gitignore`ì— ì¶”ê°€í•˜ì—¬ ê³µìœ  ì €ì¥ì†Œì— í¬í•¨ë˜ì§€ ì•Šë„ë¡ ìˆ˜ì •í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ìœ„í•´ ì¼ê´€ëœ ì½”í‹€ë¦° ì»¨ë²¤ì…˜ì„ ì ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\nobject InMemoryDatabase {\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n\\\\n    val followings: MutableMap<UserId, MutableSet<UserId>> = mutableMapOf()\\\\n    val favorites: MutableMap<ArticleId, MutableSet<UserId>> = mutableMapOf()\\\\n\\\\n    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „í›„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ\\\\n    fun clear() {\\\\n        users.clear()\\\\n        articles.clear()\\\\n        followings.clear()\\\\n        favorites.clear()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.article.model.Slug\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleCountProjection\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleRepository\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\ndata class ArticleCountProjectionImpl(\\\\n    override val articleId: ArticleId,\\\\n    override val count: Int,\\\\n) : ArticleCountProjection\\\\n\\\\nclass MockArticleRepository : ArticleRepository {\\\\n    override fun save(article: Article): Article {\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n        val updatedArticle = if (article is Article.Companion.Model) {\\\\n            article.copy(author = updatedAuthor)\\\\n        } else {\\\\n            article\\\\n        }\\\\n        InMemoryDatabase.articles[updatedArticle.id] = updatedArticle\\\\n        return updatedArticle\\\\n    }\\\\n\\\\n    override fun delete(article: Article) {\\\\n        InMemoryDatabase.articles.remove(article.id)\\\\n        InMemoryDatabase.favorites.remove(article.id)\\\\n    }\\\\n\\\\n    override fun favorite(article: Article, user: User) {\\\\n        val favoritesSet = InMemoryDatabase.favorites.getOrPut(article.id) { mutableSetOf() }\\\\n        favoritesSet.add(user.id)\\\\n    }\\\\n\\\\n    override fun unFavorite(article: Article, user: User) {\\\\n        InMemoryDatabase.favorites[article.id]?.remove(user.id)\\\\n    }\\\\n\\\\n    override fun find(\\\\n        tag: String?,\\\\n        author: String?,\\\\n        favoritedUsername: String?,\\\\n        limit: Int,\\\\n        offset: Int,\\\\n    ): List<Article> {\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n\\\\n        if (tag != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.tags.any { it.name == tag }\\\\n            }\\\\n        }\\\\n\\\\n        if (author != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.author.name == author\\\\n            }\\\\n        }\\\\n\\\\n        if (favoritedUsername != null) {\\\\n            val favoriter = InMemoryDatabase.users.values\\\\n                .map { it }\\\\n                .find { it.name == favoritedUsername }\\\\n            filtered = if (favoriter != null) {\\\\n                filtered.filter { article ->\\\\n                    InMemoryDatabase.favorites[article.id]?.contains(favoriter.id) ?: false\\\\n                }\\\\n            } else {\\\\n                emptyList()\\\\n            }\\\\n        }\\\\n\\\\n        return filtered.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun findFeedArticles(userId: UserId, limit: Int, offset: Int): List<Article> {\\\\n        val followedUserIds = InMemoryDatabase.followings[userId] ?: emptySet()\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n            .filter { article ->\\\\n                followedUserIds.contains(article.author.id)\\\\n            }\\\\n        return feedArticles.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun getCountAllByArticleIds(articleIds: List<ArticleId>): List<ArticleCountProjection> {\\\\n        return articleIds.map { articleId ->\\\\n            val count = InMemoryDatabase.favorites[articleId]?.size ?: 0\\\\n            ArticleCountProjectionImpl(articleId, count)\\\\n        }\\\\n    }\\\\n\\\\n    override fun getFavoritesArticleIds(userId: UserId): List<ArticleId> {\\\\n        return InMemoryDatabase.favorites.filter { (_, userIds) ->\\\\n            userIds.contains(userId)\\\\n        }.keys.toList()\\\\n    }\\\\n\\\\n    override fun findBySlug(slug: Slug): Article? {\\\\n        return InMemoryDatabase.articles.values\\\\n            .map { it }\\\\n            .find { it.slug == slug }\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\nimport io.github.gunkim.realworld.domain.user.repository.UserRepository\\\\n\\\\nclass MockUserRepository : UserRepository {\\\\n    override fun save(user: User): User {\\\\n        val existingUser = InMemoryDatabase.users[user.id]\\\\n        InMemoryDatabase.users[user.id] = user\\\\n\\\\n        if (existingUser != null) {\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n                if (article.author.id == user.id) {\\\\n                    if (article is Article.Companion.Model) {\\\\n                        article.copy(author = user)\\\\n                    } else {\\\\n                        article\\\\n                    }\\\\n                } else {\\\\n                    article\\\\n                }\\\\n            }\\\\n        }\\\\n        return user\\\\n    }\\\\n\\\\n    override fun follow(followerId: UserId, followeeId: UserId) {\\\\n        val followingSet = InMemoryDatabase.followings.getOrPut(followerId) { mutableSetOf() }\\\\n        followingSet.add(followeeId)\\\\n    }\\\\n\\\\n    override fun unfollow(followerId: UserId, followeeId: UserId) {\\\\n        InMemoryDatabase.followings[followerId]?.remove(followeeId)\\\\n    }\\\\n\\\\n    override fun findByEmail(email: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.email == email }\\\\n    }\\\\n\\\\n    override fun findById(userId: UserId): User? {\\\\n        return InMemoryDatabase.users[userId]\\\\n    }\\\\n\\\\n    override fun findByUserName(name: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.name == name }\\\\n    }\\\\n\\\\n    override fun findFollowedUserIdsFor(userId: UserId): List<UserId> {\\\\n        return InMemoryDatabase.followings[userId]?.toList() ?: emptyList()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.jar\\\", \\\"file_content\\\": \\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: gradle/wrapper/gradle-wrapper.jar]\\\", \\\"formatted_hunks\\\": []}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"file_content\\\": \\\"distributionBase=GRADLE_USER_HOME\\\\ndistributionPath=wrapper/dists\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\nnetworkTimeout=10000\\\\nvalidateDistributionUrl=true\\\\nzipStoreBase=GRADLE_USER_HOME\\\\nzipStorePath=wrapper/dists\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.7-bin.zip\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew\\\", \\\"file_content\\\": \\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: gradlew]\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n# SPDX-License-Identifier: Apache-2.0\\\\n#\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```text\\\\nAPP_HOME=$( cd \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && pwd -P ) || exit\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\nAPP_HOME=$( cd -P \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && printf '%s\\\\n' \\\\\\\"$PWD\\\\\\\" ) || exit\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew.bat\\\", \\\"file_content\\\": \\\"@rem\\\\n@rem Copyright 2015 the original author or authors.\\\\n@rem\\\\n@rem Licensed under the Apache License, Version 2.0 (the \\\\\\\"License\\\\\\\");\\\\n@rem you may not use this file except in compliance with the License.\\\\n@rem You may obtain a copy of the License at\\\\n@rem\\\\n@rem      https://www.apache.org/licenses/LICENSE-2.0\\\\n@rem\\\\n@rem Unless required by applicable law or agreed to in writing, software\\\\n@rem distributed under the License is distributed on an \\\\\\\"AS IS\\\\\\\" BASIS,\\\\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\\\n@rem See the License for the specific language governing permissions and\\\\n@rem limitations under the License.\\\\n@rem\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n\\\\n@if \\\\\\\"%DEBUG%\\\\\\\"==\\\\\\\"\\\\\\\" @echo off\\\\n@rem ##########################################################################\\\\n@rem\\\\n@rem  Gradle startup script for Windows\\\\n@rem\\\\n@rem ##########################################################################\\\\n\\\\n@rem Set local scope for the variables with windows NT shell\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" setlocal\\\\n\\\\nset DIRNAME=%~dp0\\\\nif \\\\\\\"%DIRNAME%\\\\\\\"==\\\\\\\"\\\\\\\" set DIRNAME=.\\\\n@rem This is normally unused\\\\nset APP_BASE_NAME=%~n0\\\\nset APP_HOME=%DIRNAME%\\\\n\\\\n@rem Resolve any \\\\\\\".\\\\\\\" and \\\\\\\"..\\\\\\\" in APP_HOME to make it shorter.\\\\nfor %%i in (\\\\\\\"%APP_HOME%\\\\\\\") do set APP_HOME=%%~fi\\\\n\\\\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\\\\nset DEFAULT_JVM_OPTS=\\\\\\\"-Xmx64m\\\\\\\" \\\\\\\"-Xms64m\\\\\\\"\\\\n\\\\n@rem Find java.exe\\\\nif defined JAVA_HOME goto findJavaFromJavaHome\\\\n\\\\nset JAVA_EXE=java.exe\\\\n%JAVA_EXE% -version >NUL 2>&1\\\\nif %ERRORLEVEL% equ 0 goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:findJavaFromJavaHome\\\\nset JAVA_HOME=%JAVA_HOME:\\\\\\\"=%\\\\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\\\\n\\\\nif exist \\\\\\\"%JAVA_EXE%\\\\\\\" goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:execute\\\\n@rem Setup the command line\\\\n\\\\nset CLASSPATH=%APP_HOME%\\\\\\\\gradle\\\\\\\\wrapper\\\\\\\\gradle-wrapper.jar\\\\n\\\\n\\\\n@rem Execute Gradle\\\\n\\\\\\\"%JAVA_EXE%\\\\\\\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \\\\\\\"-Dorg.gradle.appname=%APP_BASE_NAME%\\\\\\\" -classpath \\\\\\\"%CLASSPATH%\\\\\\\" org.gradle.wrapper.GradleWrapperMain %*\\\\n\\\\n:end\\\\n@rem End local scope for the variables with windows NT shell\\\\nif %ERRORLEVEL% equ 0 goto mainEnd\\\\n\\\\n:fail\\\\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\\\\nrem the _cmd.exe /c_ return code!\\\\nset EXIT_CODE=%ERRORLEVEL%\\\\nif %EXIT_CODE% equ 0 set EXIT_CODE=1\\\\nif not \\\\\\\"\\\\\\\"==\\\\\\\"%GRADLE_EXIT_CONSOLE%\\\\\\\" exit %EXIT_CODE%\\\\nexit /b %EXIT_CODE%\\\\n\\\\n:mainEnd\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" endlocal\\\\n\\\\n:omega\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n```\\\", \\\"line_number\\\": 16}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 8, \"file\": \"gradle/wrapper/gradle-wrapper.properties\", \"description\": \"gradle-wrapper.properties íŒŒì¼ì— ê°œë°œì ë¡œì»¬ í™˜ê²½ì˜ Java ê²½ë¡œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ë¥¸ ê°œë°œìì˜ í™˜ê²½ì—ì„œëŠ” ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©°, í”„ë¡œì íŠ¸ ì„¤ì • íŒŒì¼ì— ë¡œì»¬ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šì€ ê´€í–‰ì…ë‹ˆë‹¤.\", \"suggestion\": \"í•´ë‹¹ ë¼ì¸ì„ ì‚­ì œí•˜ì—¬ ëª¨ë“  ê°œë°œìê°€ ê°ìì˜ í™˜ê²½ ì„¤ì •(ì˜ˆ: JAVA_HOME í™˜ê²½ ë³€ìˆ˜)ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê±°ë‚˜, í•„ìš”í•œ ê²½ìš° ë¡œì»¬ `.gradle/gradle.properties` íŒŒì¼ì— ì„¤ì •í•˜ë„ë¡ ì•ˆë‚´í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"zipStorePath=wrapper/dists\", \"improved_code\": \"zipStorePath=wrapper/dists\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ Any íƒ€ì…ì„ êµ¬ì²´ì ì¸ íƒ€ì…(User, Article)ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì •ì„±ì„ ê°œì„ í•˜ê³ , ì´ì— ë”°ë¼ Mock ë¦¬í¬ì§€í† ë¦¬ ì½”ë“œì—ì„œ ë¶ˆí•„ìš”í•œ íƒ€ì… ìºìŠ¤íŒ…ê³¼ mapNotNull í˜¸ì¶œì„ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ê°„ê²°í™”í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, Gradle Wrapper ë²„ì „ì„ 8.7ì—ì„œ 8.10ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , wrapper ìŠ¤í¬ë¦½íŠ¸ì— SPDX ë¼ì´ì„ ìŠ¤ ì‹ë³„ìë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. MockUserRepositoryì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°ë¥¼ `_`ë¡œ ë³€ê²½í•˜ê³  ë¶ˆí•„ìš”í•œ ì£¼ì„ì„ ì œê±°í•˜ëŠ” ë“± ì‚¬ì†Œí•œ ì½”ë“œ ìŠ¤íƒ€ì¼ ê°œì„ ë„ í¬í•¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, gradle-wrapper.properties íŒŒì¼ì— ë¡œì»¬ í™˜ê²½ì˜ Java ê²½ë¡œê°€ í¬í•¨ëœ ì ì€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"gradle/wrapper/gradle-wrapper.properties íŒŒì¼ì—ì„œ ë¡œì»¬ í™˜ê²½ì˜ Java ê²½ë¡œ ì„¤ì •ì„ ì œê±°í•˜ì„¸ìš”.\", \"ì•ìœ¼ë¡œë„ íƒ€ì… ì•ˆì „ì„±ì„ ë†’ì´ê³  ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì½”ë“œë¥¼ ê°œì„ í•´ ë‚˜ê°€ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\nobject InMemoryDatabase {\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n\\\\n    val followings: MutableMap<UserId, MutableSet<UserId>> = mutableMapOf()\\\\n    val favorites: MutableMap<ArticleId, MutableSet<UserId>> = mutableMapOf()\\\\n\\\\n    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „í›„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ\\\\n    fun clear() {\\\\n        users.clear()\\\\n        articles.clear()\\\\n        followings.clear()\\\\n        favorites.clear()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.article.model.Slug\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleCountProjection\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleRepository\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\ndata class ArticleCountProjectionImpl(\\\\n    override val articleId: ArticleId,\\\\n    override val count: Int,\\\\n) : ArticleCountProjection\\\\n\\\\nclass MockArticleRepository : ArticleRepository {\\\\n    override fun save(article: Article): Article {\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n        val updatedArticle = if (article is Article.Companion.Model) {\\\\n            article.copy(author = updatedAuthor)\\\\n        } else {\\\\n            article\\\\n        }\\\\n        InMemoryDatabase.articles[updatedArticle.id] = updatedArticle\\\\n        return updatedArticle\\\\n    }\\\\n\\\\n    override fun delete(article: Article) {\\\\n        InMemoryDatabase.articles.remove(article.id)\\\\n        InMemoryDatabase.favorites.remove(article.id)\\\\n    }\\\\n\\\\n    override fun favorite(article: Article, user: User) {\\\\n        val favoritesSet = InMemoryDatabase.favorites.getOrPut(article.id) { mutableSetOf() }\\\\n        favoritesSet.add(user.id)\\\\n    }\\\\n\\\\n    override fun unFavorite(article: Article, user: User) {\\\\n        InMemoryDatabase.favorites[article.id]?.remove(user.id)\\\\n    }\\\\n\\\\n    override fun find(\\\\n        tag: String?,\\\\n        author: String?,\\\\n        favoritedUsername: String?,\\\\n        limit: Int,\\\\n        offset: Int,\\\\n    ): List<Article> {\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n\\\\n        if (tag != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.tags.any { it.name == tag }\\\\n            }\\\\n        }\\\\n\\\\n        if (author != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.author.name == author\\\\n            }\\\\n        }\\\\n\\\\n        if (favoritedUsername != null) {\\\\n            val favoriter = InMemoryDatabase.users.values\\\\n                .map { it }\\\\n                .find { it.name == favoritedUsername }\\\\n            filtered = if (favoriter != null) {\\\\n                filtered.filter { article ->\\\\n                    InMemoryDatabase.favorites[article.id]?.contains(favoriter.id) ?: false\\\\n                }\\\\n            } else {\\\\n                emptyList()\\\\n            }\\\\n        }\\\\n\\\\n        return filtered.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun findFeedArticles(userId: UserId, limit: Int, offset: Int): List<Article> {\\\\n        val followedUserIds = InMemoryDatabase.followings[userId] ?: emptySet()\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n            .filter { article ->\\\\n                followedUserIds.contains(article.author.id)\\\\n            }\\\\n        return feedArticles.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun getCountAllByArticleIds(articleIds: List<ArticleId>): List<ArticleCountProjection> {\\\\n        return articleIds.map { articleId ->\\\\n            val count = InMemoryDatabase.favorites[articleId]?.size ?: 0\\\\n            ArticleCountProjectionImpl(articleId, count)\\\\n        }\\\\n    }\\\\n\\\\n    override fun getFavoritesArticleIds(userId: UserId): List<ArticleId> {\\\\n        return InMemoryDatabase.favorites.filter { (_, userIds) ->\\\\n            userIds.contains(userId)\\\\n        }.keys.toList()\\\\n    }\\\\n\\\\n    override fun findBySlug(slug: Slug): Article? {\\\\n        return InMemoryDatabase.articles.values\\\\n            .map { it }\\\\n            .find { it.slug == slug }\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\nimport io.github.gunkim.realworld.domain.user.repository.UserRepository\\\\n\\\\nclass MockUserRepository : UserRepository {\\\\n    override fun save(user: User): User {\\\\n        val existingUser = InMemoryDatabase.users[user.id]\\\\n        InMemoryDatabase.users[user.id] = user\\\\n\\\\n        if (existingUser != null) {\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n                if (article.author.id == user.id) {\\\\n                    if (article is Article.Companion.Model) {\\\\n                        article.copy(author = user)\\\\n                    } else {\\\\n                        article\\\\n                    }\\\\n                } else {\\\\n                    article\\\\n                }\\\\n            }\\\\n        }\\\\n        return user\\\\n    }\\\\n\\\\n    override fun follow(followerId: UserId, followeeId: UserId) {\\\\n        val followingSet = InMemoryDatabase.followings.getOrPut(followerId) { mutableSetOf() }\\\\n        followingSet.add(followeeId)\\\\n    }\\\\n\\\\n    override fun unfollow(followerId: UserId, followeeId: UserId) {\\\\n        InMemoryDatabase.followings[followerId]?.remove(followeeId)\\\\n    }\\\\n\\\\n    override fun findByEmail(email: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.email == email }\\\\n    }\\\\n\\\\n    override fun findById(userId: UserId): User? {\\\\n        return InMemoryDatabase.users[userId]\\\\n    }\\\\n\\\\n    override fun findByUserName(name: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.name == name }\\\\n    }\\\\n\\\\n    override fun findFollowedUserIdsFor(userId: UserId): List<UserId> {\\\\n        return InMemoryDatabase.followings[userId]?.toList() ?: emptyList()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.jar\\\", \\\"file_content\\\": \\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: gradle/wrapper/gradle-wrapper.jar]\\\", \\\"formatted_hunks\\\": []}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"file_content\\\": \\\"distributionBase=GRADLE_USER_HOME\\\\ndistributionPath=wrapper/dists\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\nnetworkTimeout=10000\\\\nvalidateDistributionUrl=true\\\\nzipStoreBase=GRADLE_USER_HOME\\\\nzipStorePath=wrapper/dists\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.7-bin.zip\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew\\\", \\\"file_content\\\": \\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: gradlew]\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n# SPDX-License-Identifier: Apache-2.0\\\\n#\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```text\\\\nAPP_HOME=$( cd \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && pwd -P ) || exit\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\nAPP_HOME=$( cd -P \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && printf '%s\\\\n' \\\\\\\"$PWD\\\\\\\" ) || exit\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew.bat\\\", \\\"file_content\\\": \\\"@rem\\\\n@rem Copyright 2015 the original author or authors.\\\\n@rem\\\\n@rem Licensed under the Apache License, Version 2.0 (the \\\\\\\"License\\\\\\\");\\\\n@rem you may not use this file except in compliance with the License.\\\\n@rem You may obtain a copy of the License at\\\\n@rem\\\\n@rem      https://www.apache.org/licenses/LICENSE-2.0\\\\n@rem\\\\n@rem Unless required by applicable law or agreed to in writing, software\\\\n@rem distributed under the License is distributed on an \\\\\\\"AS IS\\\\\\\" BASIS,\\\\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\\\n@rem See the License for the specific language governing permissions and\\\\n@rem limitations under the License.\\\\n@rem\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n\\\\n@if \\\\\\\"%DEBUG%\\\\\\\"==\\\\\\\"\\\\\\\" @echo off\\\\n@rem ##########################################################################\\\\n@rem\\\\n@rem  Gradle startup script for Windows\\\\n@rem\\\\n@rem ##########################################################################\\\\n\\\\n@rem Set local scope for the variables with windows NT shell\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" setlocal\\\\n\\\\nset DIRNAME=%~dp0\\\\nif \\\\\\\"%DIRNAME%\\\\\\\"==\\\\\\\"\\\\\\\" set DIRNAME=.\\\\n@rem This is normally unused\\\\nset APP_BASE_NAME=%~n0\\\\nset APP_HOME=%DIRNAME%\\\\n\\\\n@rem Resolve any \\\\\\\".\\\\\\\" and \\\\\\\"..\\\\\\\" in APP_HOME to make it shorter.\\\\nfor %%i in (\\\\\\\"%APP_HOME%\\\\\\\") do set APP_HOME=%%~fi\\\\n\\\\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\\\\nset DEFAULT_JVM_OPTS=\\\\\\\"-Xmx64m\\\\\\\" \\\\\\\"-Xms64m\\\\\\\"\\\\n\\\\n@rem Find java.exe\\\\nif defined JAVA_HOME goto findJavaFromJavaHome\\\\n\\\\nset JAVA_EXE=java.exe\\\\n%JAVA_EXE% -version >NUL 2>&1\\\\nif %ERRORLEVEL% equ 0 goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:findJavaFromJavaHome\\\\nset JAVA_HOME=%JAVA_HOME:\\\\\\\"=%\\\\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\\\\n\\\\nif exist \\\\\\\"%JAVA_EXE%\\\\\\\" goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:execute\\\\n@rem Setup the command line\\\\n\\\\nset CLASSPATH=%APP_HOME%\\\\\\\\gradle\\\\\\\\wrapper\\\\\\\\gradle-wrapper.jar\\\\n\\\\n\\\\n@rem Execute Gradle\\\\n\\\\\\\"%JAVA_EXE%\\\\\\\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \\\\\\\"-Dorg.gradle.appname=%APP_BASE_NAME%\\\\\\\" -classpath \\\\\\\"%CLASSPATH%\\\\\\\" org.gradle.wrapper.GradleWrapperMain %*\\\\n\\\\n:end\\\\n@rem End local scope for the variables with windows NT shell\\\\nif %ERRORLEVEL% equ 0 goto mainEnd\\\\n\\\\n:fail\\\\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\\\\nrem the _cmd.exe /c_ return code!\\\\nset EXIT_CODE=%ERRORLEVEL%\\\\nif %EXIT_CODE% equ 0 set EXIT_CODE=1\\\\nif not \\\\\\\"\\\\\\\"==\\\\\\\"%GRADLE_EXIT_CONSOLE%\\\\\\\" exit %EXIT_CODE%\\\\nexit /b %EXIT_CODE%\\\\n\\\\n:mainEnd\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" endlocal\\\\n\\\\n:omega\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n```\\\", \\\"line_number\\\": 16}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 9, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\", \"description\": \"`InMemoryDatabase`ì˜ ë§µ ì œë„¤ë¦­ íƒ€ì…ì„ `Any`ì—ì„œ êµ¬ì²´ì ì¸ ë„ë©”ì¸ ëª¨ë¸(`User`, `Article`)ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. ì´ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ì•ˆì •ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ì¢‹ì€ ê°œì„ ì…ë‹ˆë‹¤.\", \"suggestion\": \"ì´ëŸ¬í•œ íƒ€ì… êµ¬ì²´í™”ëŠ” ì½”ë“œì˜ ì˜ë„ë¥¼ ëª…í™•íˆ í•˜ê³  ì ì¬ì ì¸ ëŸ°íƒ€ì„ ì˜¤ë¥˜ë¥¼ ì¤„ì´ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\", \"improved_code\": \"val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 50, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\", \"description\": \"`InMemoryDatabase`ì˜ ë§µ íƒ€ì…ì´ êµ¬ì²´í™”ë¨ì— ë”°ë¼, ë¶ˆí•„ìš”í•œ `as?` ìºìŠ¤íŒ…ê³¼ `mapNotNull` í˜¸ì¶œì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì½”ë“œì˜ ê°„ê²°ì„±ê³¼ ëª…í™•ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"suggestion\": \"íƒ€ì… ì•ˆì „ì„±ì´ í™•ë³´ëœ ìƒíƒœì—ì„œëŠ” ì´ëŸ¬í•œ ë¶ˆí•„ìš”í•œ ë³€í™˜ ë¡œì§ì„ ì œê±°í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\", \"improved_code\": \"var filtered = InMemoryDatabase.articles.values.toList().map { it }\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 15, \"file\": \"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\", \"description\": \"`replaceAll` ëŒë‹¤ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í‚¤ íŒŒë¼ë¯¸í„°(`articleId`)ë¥¼ ì½”í‹€ë¦° ì»¨ë²¤ì…˜ì— ë”°ë¼ `_`ë¡œ ë³€ê²½í•˜ì—¬ ì˜ë„ë¥¼ ëª…í™•íˆ í–ˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°ì— `_`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ì½”í‹€ë¦° ìŠ¤íƒ€ì¼ì´ë©° ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"InMemoryDatabase.articles.replaceAll { articleId, article ->\", \"improved_code\": \"InMemoryDatabase.articles.replaceAll { _, article ->\"}, {\"type\": \"ì„¤ì •\", \"line_number\": 7, \"file\": \"gradle/wrapper/gradle-wrapper.properties\", \"description\": \"`org.gradle.java.home` ì†ì„±ì— íŠ¹ì • ê°œë°œìì˜ ë¡œì»¬ í™˜ê²½ ê²½ë¡œê°€ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ë¥¸ í™˜ê²½(ë‹¤ë¥¸ ê°œë°œì ë¨¸ì‹ , CI/CD í™˜ê²½ ë“±)ì—ì„œ ë¹Œë“œ ì‹œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì´ ì†ì„±ì€ ë¡œì»¬ í™˜ê²½ ì„¤ì •ì´ë¯€ë¡œ ì»¤ë°‹í•˜ì§€ ì•Šê±°ë‚˜, í™˜ê²½ ë³€ìˆ˜ ë“±ì„ ì‚¬ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ ì„¤ì •ë˜ë„ë¡ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ `gradle-wrapper.properties` íŒŒì¼ì—ëŠ” í™˜ê²½ì— ë…ë¦½ì ì¸ ì„¤ì •ë§Œ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": null, \"improved_code\": \"org.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ `InMemoryDatabase`ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë§µì˜ ì œë„¤ë¦­ íƒ€ì…ì„ `Any`ì—ì„œ êµ¬ì²´ì ì¸ ë„ë©”ì¸ ëª¨ë¸ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ í¬ê²Œ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ ê´€ë ¨ Mock Repository ì½”ë“œì—ì„œ ë¶ˆí•„ìš”í•œ ìºìŠ¤íŒ… ë° ë³€í™˜ ë¡œì§ì´ ì œê±°ë˜ì–´ ì½”ë“œê°€ ë” ê°„ê²°í•´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ, Gradle Wrapper ë²„ì „ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆê³ , `gradlew` ë° `gradlew.bat` ìŠ¤í¬ë¦½íŠ¸ì˜ ì‚¬ì†Œí•œ ê°œì„ ì´ í¬í•¨ë˜ì—ˆìŠµë‹ˆë‹¤. `gradle-wrapper.properties` íŒŒì¼ì— ë¡œì»¬ í™˜ê²½ ê²½ë¡œê°€ í¬í•¨ëœ ì ì¬ì ì¸ ì„¤ì • ë¬¸ì œê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"`gradle-wrapper.properties` íŒŒì¼ì— ì»¤ë°‹ëœ ë¡œì»¬ í™˜ê²½ ê²½ë¡œ(`org.gradle.java.home`)ë¥¼ ì œê±°í•˜ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ ë“±ìœ¼ë¡œ ëŒ€ì²´í•˜ì—¬ ëª¨ë“  ê°œë°œ í™˜ê²½ì—ì„œ ì¼ê´€ëœ ë¹Œë“œë¥¼ ë³´ì¥í•˜ë„ë¡ ìˆ˜ì •í•˜ì„¸ìš”.\", \"í…ŒìŠ¤íŠ¸ ì½”ë“œ ì „ë°˜ì— ê±¸ì³ íƒ€ì… ì•ˆì „ì„±ì„ ë†’ì´ëŠ” ë…¸ë ¥ì„ ì§€ì†í•˜ê³ , ë¶ˆí•„ìš”í•œ ìºìŠ¤íŒ…ì´ë‚˜ `Any` íƒ€ì… ì‚¬ìš©ì„ ìµœì†Œí™”í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\nobject InMemoryDatabase {\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n\\\\n    val followings: MutableMap<UserId, MutableSet<UserId>> = mutableMapOf()\\\\n    val favorites: MutableMap<ArticleId, MutableSet<UserId>> = mutableMapOf()\\\\n\\\\n    // í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „í›„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ\\\\n    fun clear() {\\\\n        users.clear()\\\\n        articles.clear()\\\\n        followings.clear()\\\\n        favorites.clear()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.article.model.ArticleId\\\\nimport io.github.gunkim.realworld.domain.article.model.Slug\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleCountProjection\\\\nimport io.github.gunkim.realworld.domain.article.repository.ArticleRepository\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\n\\\\ndata class ArticleCountProjectionImpl(\\\\n    override val articleId: ArticleId,\\\\n    override val count: Int,\\\\n) : ArticleCountProjection\\\\n\\\\nclass MockArticleRepository : ArticleRepository {\\\\n    override fun save(article: Article): Article {\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n        val updatedArticle = if (article is Article.Companion.Model) {\\\\n            article.copy(author = updatedAuthor)\\\\n        } else {\\\\n            article\\\\n        }\\\\n        InMemoryDatabase.articles[updatedArticle.id] = updatedArticle\\\\n        return updatedArticle\\\\n    }\\\\n\\\\n    override fun delete(article: Article) {\\\\n        InMemoryDatabase.articles.remove(article.id)\\\\n        InMemoryDatabase.favorites.remove(article.id)\\\\n    }\\\\n\\\\n    override fun favorite(article: Article, user: User) {\\\\n        val favoritesSet = InMemoryDatabase.favorites.getOrPut(article.id) { mutableSetOf() }\\\\n        favoritesSet.add(user.id)\\\\n    }\\\\n\\\\n    override fun unFavorite(article: Article, user: User) {\\\\n        InMemoryDatabase.favorites[article.id]?.remove(user.id)\\\\n    }\\\\n\\\\n    override fun find(\\\\n        tag: String?,\\\\n        author: String?,\\\\n        favoritedUsername: String?,\\\\n        limit: Int,\\\\n        offset: Int,\\\\n    ): List<Article> {\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n\\\\n        if (tag != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.tags.any { it.name == tag }\\\\n            }\\\\n        }\\\\n\\\\n        if (author != null) {\\\\n            filtered = filtered.filter { article ->\\\\n                article.author.name == author\\\\n            }\\\\n        }\\\\n\\\\n        if (favoritedUsername != null) {\\\\n            val favoriter = InMemoryDatabase.users.values\\\\n                .map { it }\\\\n                .find { it.name == favoritedUsername }\\\\n            filtered = if (favoriter != null) {\\\\n                filtered.filter { article ->\\\\n                    InMemoryDatabase.favorites[article.id]?.contains(favoriter.id) ?: false\\\\n                }\\\\n            } else {\\\\n                emptyList()\\\\n            }\\\\n        }\\\\n\\\\n        return filtered.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun findFeedArticles(userId: UserId, limit: Int, offset: Int): List<Article> {\\\\n        val followedUserIds = InMemoryDatabase.followings[userId] ?: emptySet()\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n            .filter { article ->\\\\n                followedUserIds.contains(article.author.id)\\\\n            }\\\\n        return feedArticles.drop(offset).take(limit)\\\\n    }\\\\n\\\\n    override fun getCountAllByArticleIds(articleIds: List<ArticleId>): List<ArticleCountProjection> {\\\\n        return articleIds.map { articleId ->\\\\n            val count = InMemoryDatabase.favorites[articleId]?.size ?: 0\\\\n            ArticleCountProjectionImpl(articleId, count)\\\\n        }\\\\n    }\\\\n\\\\n    override fun getFavoritesArticleIds(userId: UserId): List<ArticleId> {\\\\n        return InMemoryDatabase.favorites.filter { (_, userIds) ->\\\\n            userIds.contains(userId)\\\\n        }.keys.toList()\\\\n    }\\\\n\\\\n    override fun findBySlug(slug: Slug): Article? {\\\\n        return InMemoryDatabase.articles.values\\\\n            .map { it }\\\\n            .find { it.slug == slug }\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"file_content\\\": \\\"package io.github.gunkim.realworld.share\\\\n\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\nimport io.github.gunkim.realworld.domain.user.model.UserId\\\\nimport io.github.gunkim.realworld.domain.user.repository.UserRepository\\\\n\\\\nclass MockUserRepository : UserRepository {\\\\n    override fun save(user: User): User {\\\\n        val existingUser = InMemoryDatabase.users[user.id]\\\\n        InMemoryDatabase.users[user.id] = user\\\\n\\\\n        if (existingUser != null) {\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n                if (article.author.id == user.id) {\\\\n                    if (article is Article.Companion.Model) {\\\\n                        article.copy(author = user)\\\\n                    } else {\\\\n                        article\\\\n                    }\\\\n                } else {\\\\n                    article\\\\n                }\\\\n            }\\\\n        }\\\\n        return user\\\\n    }\\\\n\\\\n    override fun follow(followerId: UserId, followeeId: UserId) {\\\\n        val followingSet = InMemoryDatabase.followings.getOrPut(followerId) { mutableSetOf() }\\\\n        followingSet.add(followeeId)\\\\n    }\\\\n\\\\n    override fun unfollow(followerId: UserId, followeeId: UserId) {\\\\n        InMemoryDatabase.followings[followerId]?.remove(followeeId)\\\\n    }\\\\n\\\\n    override fun findByEmail(email: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.email == email }\\\\n    }\\\\n\\\\n    override fun findById(userId: UserId): User? {\\\\n        return InMemoryDatabase.users[userId]\\\\n    }\\\\n\\\\n    override fun findByUserName(name: String): User? {\\\\n        return InMemoryDatabase.users.values.find { it.name == name }\\\\n    }\\\\n\\\\n    override fun findFollowedUserIdsFor(userId: UserId): List<UserId> {\\\\n        return InMemoryDatabase.followings[userId]?.toList() ?: emptyList()\\\\n    }\\\\n}\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.jar\\\", \\\"file_content\\\": \\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: gradle/wrapper/gradle-wrapper.jar]\\\", \\\"formatted_hunks\\\": []}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"file_content\\\": \\\"distributionBase=GRADLE_USER_HOME\\\\ndistributionPath=wrapper/dists\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\nnetworkTimeout=10000\\\\nvalidateDistributionUrl=true\\\\nzipStoreBase=GRADLE_USER_HOME\\\\nzipStorePath=wrapper/dists\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.7-bin.zip\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew\\\", \\\"file_content\\\": \\\"[ë°”ì´ë„ˆë¦¬ íŒŒì¼: gradlew]\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n# SPDX-License-Identifier: Apache-2.0\\\\n#\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```text\\\\nAPP_HOME=$( cd \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && pwd -P ) || exit\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\nAPP_HOME=$( cd -P \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && printf '%s\\\\n' \\\\\\\"$PWD\\\\\\\" ) || exit\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"gradlew.bat\\\", \\\"file_content\\\": \\\"@rem\\\\n@rem Copyright 2015 the original author or authors.\\\\n@rem\\\\n@rem Licensed under the Apache License, Version 2.0 (the \\\\\\\"License\\\\\\\");\\\\n@rem you may not use this file except in compliance with the License.\\\\n@rem You may obtain a copy of the License at\\\\n@rem\\\\n@rem      https://www.apache.org/licenses/LICENSE-2.0\\\\n@rem\\\\n@rem Unless required by applicable law or agreed to in writing, software\\\\n@rem distributed under the License is distributed on an \\\\\\\"AS IS\\\\\\\" BASIS,\\\\n@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\\\n@rem See the License for the specific language governing permissions and\\\\n@rem limitations under the License.\\\\n@rem\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n\\\\n@if \\\\\\\"%DEBUG%\\\\\\\"==\\\\\\\"\\\\\\\" @echo off\\\\n@rem ##########################################################################\\\\n@rem\\\\n@rem  Gradle startup script for Windows\\\\n@rem\\\\n@rem ##########################################################################\\\\n\\\\n@rem Set local scope for the variables with windows NT shell\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" setlocal\\\\n\\\\nset DIRNAME=%~dp0\\\\nif \\\\\\\"%DIRNAME%\\\\\\\"==\\\\\\\"\\\\\\\" set DIRNAME=.\\\\n@rem This is normally unused\\\\nset APP_BASE_NAME=%~n0\\\\nset APP_HOME=%DIRNAME%\\\\n\\\\n@rem Resolve any \\\\\\\".\\\\\\\" and \\\\\\\"..\\\\\\\" in APP_HOME to make it shorter.\\\\nfor %%i in (\\\\\\\"%APP_HOME%\\\\\\\") do set APP_HOME=%%~fi\\\\n\\\\n@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.\\\\nset DEFAULT_JVM_OPTS=\\\\\\\"-Xmx64m\\\\\\\" \\\\\\\"-Xms64m\\\\\\\"\\\\n\\\\n@rem Find java.exe\\\\nif defined JAVA_HOME goto findJavaFromJavaHome\\\\n\\\\nset JAVA_EXE=java.exe\\\\n%JAVA_EXE% -version >NUL 2>&1\\\\nif %ERRORLEVEL% equ 0 goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:findJavaFromJavaHome\\\\nset JAVA_HOME=%JAVA_HOME:\\\\\\\"=%\\\\nset JAVA_EXE=%JAVA_HOME%/bin/java.exe\\\\n\\\\nif exist \\\\\\\"%JAVA_EXE%\\\\\\\" goto execute\\\\n\\\\necho. 1>&2\\\\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2\\\\necho. 1>&2\\\\necho Please set the JAVA_HOME variable in your environment to match the 1>&2\\\\necho location of your Java installation. 1>&2\\\\n\\\\ngoto fail\\\\n\\\\n:execute\\\\n@rem Setup the command line\\\\n\\\\nset CLASSPATH=%APP_HOME%\\\\\\\\gradle\\\\\\\\wrapper\\\\\\\\gradle-wrapper.jar\\\\n\\\\n\\\\n@rem Execute Gradle\\\\n\\\\\\\"%JAVA_EXE%\\\\\\\" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% \\\\\\\"-Dorg.gradle.appname=%APP_BASE_NAME%\\\\\\\" -classpath \\\\\\\"%CLASSPATH%\\\\\\\" org.gradle.wrapper.GradleWrapperMain %*\\\\n\\\\n:end\\\\n@rem End local scope for the variables with windows NT shell\\\\nif %ERRORLEVEL% equ 0 goto mainEnd\\\\n\\\\n:fail\\\\nrem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of\\\\nrem the _cmd.exe /c_ return code!\\\\nset EXIT_CODE=%ERRORLEVEL%\\\\nif %EXIT_CODE% equ 0 set EXIT_CODE=1\\\\nif not \\\\\\\"\\\\\\\"==\\\\\\\"%GRADLE_EXIT_CONSOLE%\\\\\\\" exit %EXIT_CODE%\\\\nexit /b %EXIT_CODE%\\\\n\\\\n:mainEnd\\\\nif \\\\\\\"%OS%\\\\\\\"==\\\\\\\"Windows_NT\\\\\\\" endlocal\\\\n\\\\n:omega\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n```\\\", \\\"line_number\\\": 16}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 8, \"file\": \"gradle/wrapper/gradle-wrapper.properties\", \"description\": \"gradle-wrapper.properties íŒŒì¼ì— ê°œë°œì ë¡œì»¬ í™˜ê²½ì˜ Java ê²½ë¡œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ë¥¸ ê°œë°œìì˜ í™˜ê²½ì—ì„œëŠ” ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©°, í”„ë¡œì íŠ¸ ì„¤ì • íŒŒì¼ì— ë¡œì»¬ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šì€ ê´€í–‰ì…ë‹ˆë‹¤.\", \"suggestion\": \"í•´ë‹¹ ë¼ì¸ì„ ì‚­ì œí•˜ì—¬ ëª¨ë“  ê°œë°œìê°€ ê°ìì˜ í™˜ê²½ ì„¤ì •(ì˜ˆ: JAVA_HOME í™˜ê²½ ë³€ìˆ˜)ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê±°ë‚˜, í•„ìš”í•œ ê²½ìš° ë¡œì»¬ `.gradle/gradle.properties` íŒŒì¼ì— ì„¤ì •í•˜ë„ë¡ ì•ˆë‚´í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"zipStorePath=wrapper/dists\", \"improved_code\": \"zipStorePath=wrapper/dists\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ Any íƒ€ì…ì„ êµ¬ì²´ì ì¸ íƒ€ì…(User, Article)ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ íƒ€ì… ì•ˆì •ì„±ì„ ê°œì„ í•˜ê³ , ì´ì— ë”°ë¼ Mock ë¦¬í¬ì§€í† ë¦¬ ì½”ë“œì—ì„œ ë¶ˆí•„ìš”í•œ íƒ€ì… ìºìŠ¤íŒ…ê³¼ mapNotNull í˜¸ì¶œì„ ì œê±°í•˜ì—¬ ì½”ë“œë¥¼ ê°„ê²°í™”í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, Gradle Wrapper ë²„ì „ì„ 8.7ì—ì„œ 8.10ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , wrapper ìŠ¤í¬ë¦½íŠ¸ì— SPDX ë¼ì´ì„ ìŠ¤ ì‹ë³„ìë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. MockUserRepositoryì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒë¼ë¯¸í„°ë¥¼ `_`ë¡œ ë³€ê²½í•˜ê³  ë¶ˆí•„ìš”í•œ ì£¼ì„ì„ ì œê±°í•˜ëŠ” ë“± ì‚¬ì†Œí•œ ì½”ë“œ ìŠ¤íƒ€ì¼ ê°œì„ ë„ í¬í•¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, gradle-wrapper.properties íŒŒì¼ì— ë¡œì»¬ í™˜ê²½ì˜ Java ê²½ë¡œê°€ í¬í•¨ëœ ì ì€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"gradle/wrapper/gradle-wrapper.properties íŒŒì¼ì—ì„œ ë¡œì»¬ í™˜ê²½ì˜ Java ê²½ë¡œ ì„¤ì •ì„ ì œê±°í•˜ì„¸ìš”.\", \"ì•ìœ¼ë¡œë„ íƒ€ì… ì•ˆì „ì„±ì„ ë†’ì´ê³  ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì½”ë“œë¥¼ ê°œì„ í•´ ë‚˜ê°€ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.article.model.Article\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\nimport io.github.gunkim.realworld.domain.user.model.User\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/InMemoryDatabase.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, Any> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Any> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n    val users: MutableMap<UserId, User> = mutableMapOf() // User ì €ì¥ì†Œ\\\\n    val articles: MutableMap<ArticleId, Article> = mutableMapOf() // Article ì €ì¥ì†Œ\\\\n```\\\", \\\"line_number\\\": 9, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] as? User ?: article.author\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val updatedAuthor: User = InMemoryDatabase.users[article.author.id] ?: article.author\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        var filtered = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n                .mapNotNull { it as? User }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n                .map { it }\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"4\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n        val feedArticles = InMemoryDatabase.articles.values.toList().map { it }\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"5\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockArticleRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            .mapNotNull { it as? Article }\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            .map { it }\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { articleId, article ->\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n            InMemoryDatabase.articles.replaceAll { _, article ->\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"core/src/test/kotlin/io/github/gunkim/realworld/share/MockUserRepository.kt\\\", \\\"original_code\\\": \\\"```kotlin\\\\n        // followerIdê°€ followeeIdë¥¼ íŒ”ë¡œìš°í•˜ë„ë¡ followings ë§µì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\\\\n```\\\", \\\"modified_code\\\": \\\"```kotlin\\\\n\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"kotlin\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"original_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.7-bin.zip\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\ndistributionUrl=https\\\\\\\\://services.gradle.org/distributions/gradle-8.10-bin.zip\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"text\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"gradle/wrapper/gradle-wrapper.properties\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\norg.gradle.java.home=/Users/yunmin-u/Library/Java/JavaVirtualMachines/corretto-21.0.6/Contents/Home\\\\n\\\\\\\\ No newline at end of file\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"text\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"gradlew\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n# SPDX-License-Identifier: Apache-2.0\\\\n#\\\\n```\\\", \\\"line_number\\\": 18, \\\"language\\\": \\\"text\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"gradlew\\\", \\\"original_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/subprojects/plugins/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"text\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"gradlew\\\", \\\"original_code\\\": \\\"```text\\\\nAPP_HOME=$( cd \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && pwd -P ) || exit\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\nAPP_HOME=$( cd -P \\\\\\\"${APP_HOME:-./}\\\\\\\" > /dev/null && printf '%s\\\\n' \\\\\\\"$PWD\\\\\\\" ) || exit\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"text\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"gradlew.bat\\\", \\\"original_code\\\": \\\"```text\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```text\\\\n@rem SPDX-License-Identifier: Apache-2.0\\\\n@rem\\\\n```\\\", \\\"line_number\\\": 16, \\\"language\\\": \\\"text\\\"}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line\": null, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"ì½”ë“œì—ì„œ `_get_language_prompt` ë©”ì„œë“œì™€ í•´ë‹¹ í˜¸ì¶œë¶€ë¥¼ ì œê±°í•˜ë©´ì„œ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì–¸ì–´ ì •ë³´ê°€ ë” ì´ìƒ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ LLMì´ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì˜ ì–¸ì–´ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•´ ë¶„ì„ ì •í™•ë„ê°€ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì–¸ì–´ ì •ë³´ë¥¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ë‹¤ì‹œ í¬í•¨í•˜ë„ë¡ ë¡œì§ì„ ì¶”ê°€í•˜ì„¸ìš”. `_get_language_prompt` ë©”ì„œë“œë¥¼ ìœ ì§€í•˜ê±°ë‚˜, ì¸ë¼ì¸ f-stringì„ ì‚¬ìš©í•´ `generate_prompt` ë‚´ì—ì„œ ì§ì ‘ ì–¸ì–´ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"def _get_language_prompt(self, language: str) -> str:\\n    \\\"\\\"\\\"ì–¸ì–´ ì •ë³´ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\n\\n    Args:\\n        language: ì–¸ì–´ ì •ë³´\\n\\n    Returns:\\n        str: ì–¸ì–´ ì •ë³´ í”„ë¡¬í”„íŠ¸\\n    \\\"\\\"\\\"\\n    return f\\\"\\\\n\\\\nì½”ë“œëŠ” {language} ì–¸ì–´ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\\\"  \\n\\n# generate_prompt ë‚´ í˜¸ì¶œë¶€\\nif review_request.language:\\n    system_prompt += self._get_language_prompt(review_request.language)\", \"improved_code\": \"# generate_prompt ë‚´ ì¸ë¼ì¸ ì ìš© ì˜ˆì‹œ\\nif review_request.language:\\n    system_prompt += f\\\"\\\\n\\\\nì½”ë“œëŠ” {review_request.language} ì–¸ì–´ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\\\"  \"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line\": null, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"`if review_request.file_paths and len(review_request.file_paths) > 0` ì¡°ê±´ì´ ì¤‘ë³µë©ë‹ˆë‹¤. ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ê²€ì‚¬í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì¶©ë¶„í•˜ë¯€ë¡œ ê°€ë…ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.\", \"suggestion\": \"ë‹¨ìˆœíˆ `if review_request.file_paths:` í˜•íƒœë¡œ ë³€ê²½í•´ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"if review_request.file_paths and len(review_request.file_paths) > 0:\\n    system_prompt += self._get_file_paths_prompt(review_request.file_paths)\", \"improved_code\": \"if review_request.file_paths:\\n    system_prompt += self._get_file_paths_prompt(review_request.file_paths)  \"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line\": null, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"hunk ë©”íƒ€ë°ì´í„°ì— ì¶”ê°€ëœ `language` í•„ë“œë¥¼ ë¬¸ìì—´ë¡œ ìºìŠ¤íŒ…í•˜ì§€ ì•Šì•„, None ë˜ëŠ” ìˆ«ìê°€ ë“¤ì–´ì˜¬ ê²½ìš° íƒ€ì… ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`language` ê°’ì„ `str()` ë¡œ ê°ì‹¸ ëª…ì‹œì  ìºìŠ¤íŒ…ì„ ìˆ˜í–‰í•´ íƒ€ì… ì¼ê´€ì„±ì„ í™•ë³´í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"\\\"language\\\": hunk.get(\\\"language\\\", \\\"\\\"),\", \"improved_code\": \"\\\"language\\\": str(hunk.get(\\\"language\\\", \\\"\\\")),\"}], \"summary\": \"`prompt_generator.py`ì—ì„œ ì–¸ì–´ ì •ë³´ ê´€ë ¨ ë©”ì„œë“œì™€ í˜¸ì¶œë¶€ë¥¼ ì œê±°í•˜ê³  íŒŒì¼ ê²½ë¡œ ì²˜ë¦¬ì™€ hunk ë©”íƒ€ë°ì´í„°ì— `language` í•„ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì–¸ì–´ í”„ë¡¬í”„íŠ¸ ëˆ„ë½, ë¶ˆí•„ìš”í•œ ì¡°ê±´ ì¤‘ë³µ, ë°ì´í„° íƒ€ì… ì¼ê´€ì„± ë¬¸ì œ ë“±ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì–¸ì–´ ì •ë³´ í¬í•¨ ë¡œì§ì„ ì¬ë„ì…í•˜ì„¸ìš”.\", \"ì¡°ê±´ë¬¸ ê°„ì†Œí™”ë¡œ ê°€ë…ì„±ì„ ê°œì„ í•˜ì„¸ìš”.\", \"ë©”íƒ€ë°ì´í„° í•„ë“œ ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ìºìŠ¤íŒ…í•´ íƒ€ì… ì•ˆì •ì„±ì„ í™•ë³´í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\\\", \\\"file_content\\\": \\\"package com.hoangtien2k3.userservice.service.impl;\\\\n\\\\nimport com.hoangtien2k3.userservice.entity.User;\\\\nimport com.hoangtien2k3.userservice.entity.UserRole;\\\\nimport com.hoangtien2k3.userservice.repository.UserRepository;\\\\nimport com.hoangtien2k3.userservice.repository.UserRoleRepository;\\\\nimport com.hoangtien2k3.userservice.service.UserService;\\\\nimport org.springframework.beans.factory.annotation.Autowired;\\\\nimport org.springframework.stereotype.Service;\\\\n\\\\nimport java.util.List;\\\\n\\\\n@Service\\\\npublic class UserServiceImpl implements UserService {\\\\n\\\\n    @Autowired\\\\n    private UserRepository userRepository;\\\\n\\\\n    @Autowired\\\\n    private UserRoleRepository userRoleRepository;\\\\n\\\\n    @Override\\\\n    public List<User> getAllUser() {\\\\n        return userRepository.findAll();\\\\n    }\\\\n\\\\n    @Override\\\\n    public User getUserById(Long id) {\\\\n\\\\n        return userRepository.getReferenceById(id);\\\\n    }\\\\n\\\\n    @Override\\\\n    public User getUserByName(String userName) {\\\\n        return userRepository.findByUserName(userName);\\\\n    }\\\\n\\\\n    @Override\\\\n    public User saveUser(User user) {\\\\n\\\\n        user.setActive(1); // active success\\\\n        UserRole role = userRoleRepository.findUserRoleByRoleName(\\\\\\\"ROLE_USER\\\\\\\");\\\\n        user.setRole(role);\\\\n\\\\n        return userRepository.save(user);\\\\n    }\\\\n}\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```java\\\\n        return userRepository.getOne(id);\\\\n```\\\", \\\"modified_code\\\": \\\"```java\\\\n        return userRepository.getReferenceById(id);\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 30, \"file\": \"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\", \"description\": \"`userRepository.getOne(id)` ë©”ì„œë“œëŠ” Spring Data JPA 2.2ì—ì„œ deprecated ë˜ì—ˆìœ¼ë©°, `getReferenceById(id)`ë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ìµœì‹  APIë¥¼ ì‚¬ìš©í•˜ëŠ” ì¢‹ì€ ê°œì„ ì…ë‹ˆë‹¤. `getReferenceById`ëŠ” ì—”í‹°í‹°ê°€ ì‹¤ì œë¡œ ì‚¬ìš©ë  ë•Œê¹Œì§€ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ì§€ì—°ì‹œí‚¤ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë§Œì•½ í•´ë‹¹ IDì˜ ì—”í‹°í‹°ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, í”„ë¡ì‹œ ê°ì²´ì˜ ì†ì„±ì— ì ‘ê·¼í•  ë•Œ `EntityNotFoundException`ì´ ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"ë³€ê²½ëœ `getReferenceById` ì‚¬ìš©ì„ ìœ ì§€í•©ë‹ˆë‹¤. ì´ ë©”ì„œë“œì˜ ë™ì‘ ë°©ì‹(lazy loading ë° ì¡´ì¬í•˜ì§€ ì•ŠëŠ” IDì— ëŒ€í•œ `EntityNotFoundException`)ì„ ì´í•´í•˜ê³ , í•„ìš”í•œ ê²½ìš° í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```java\\n        return userRepository.getOne(id);\\n```\", \"improved_code\": \"```java\\n        return userRepository.getReferenceById(id);\\n```\"}, {\"type\": \"bug\", \"line_number\": 43, \"file\": \"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\", \"description\": \"`userRoleRepository.findUserRoleByRoleName(\\\"ROLE_USER\\\")` í˜¸ì¶œ ê²°ê³¼ê°€ `null`ì¼ ê²½ìš°, `user.setRole(role)`ì—ì„œ `NullPointerException`ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” \\\"ROLE_USER\\\" ì—­í• ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"ì—­í• ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—­í• ì´ `null`ì´ë©´ ê¸°ë³¸ ì—­í• ì„ í• ë‹¹í•˜ê±°ë‚˜, ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì•Œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"```java\\n        UserRole role = userRoleRepository.findUserRoleByRoleName(\\\"ROLE_USER\\\");\\n        user.setRole(role);\\n```\", \"improved_code\": \"```java\\n        UserRole role = userRoleRepository.findUserRoleByRoleName(\\\"ROLE_USER\\\");\\n        if (role == null) {\\n            // ì˜ˆ: ì—­í• ì´ ì—†ì„ ê²½ìš° ì˜ˆì™¸ ë°œìƒ\\n            throw new IllegalArgumentException(\\\"Role 'ROLE_USER' not found\\\");\\n            // ë˜ëŠ” ê¸°ë³¸ ì—­í•  í• ë‹¹ ë˜ëŠ” ë¡œê¹… ë“±\\n        } else {\\n            user.setRole(role);\\n        }\\n```\"}, {\"type\": \"style\", \"line_number\": 16, \"file\": \"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\", \"description\": \"í•„ë“œ ì£¼ì…(`@Autowired` on fields)ì€ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ë° ì˜ì¡´ì„± ê´€ë¦¬ ì¸¡ë©´ì—ì„œ ìƒì„±ì ì£¼ì…ë³´ë‹¤ ì„ í˜¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì„ ìˆ¨ê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```java\\n    @Autowired\\n    private UserRepository userRepository;\\n\\n    @Autowired\\n    private UserRoleRepository userRoleRepository;\\n```\", \"improved_code\": \"```java\\n    private final UserRepository userRepository;\\n    private final UserRoleRepository userRoleRepository;\\n\\n    // @AutowiredëŠ” Spring 4.3+ì—ì„œ ìƒì„±ìê°€ í•˜ë‚˜ì¼ ê²½ìš° ìƒëµ ê°€ëŠ¥\\n    public UserServiceImpl(UserRepository userRepository, UserRoleRepository userRoleRepository) {\\n        this.userRepository = userRepository;\\n        this.userRoleRepository = userRoleRepository;\\n    }\\n```\"}], \"summary\": \"ì œê³µëœ diffëŠ” deprecatedëœ `getOne` ë©”ì„œë“œë¥¼ ìµœì‹  `getReferenceById`ë¡œ ë³€ê²½í•˜ëŠ” ì¢‹ì€ ê°œì„ ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì½”ë“œ ì „ë°˜ì ìœ¼ë¡œëŠ” í•„ë“œ ì£¼ì… ëŒ€ì‹  ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë˜ë©°, ì‚¬ìš©ì ì €ì¥ ì‹œ \\\"ROLE_USER\\\" ì—­í• ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° `NullPointerException`ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì ì¬ì ì¸ ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"í•„ë“œ ì£¼ì… ëŒ€ì‹  ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ì„¸ìš”.\", \"ì‚¬ìš©ì ì €ì¥ ì‹œ \\\"ROLE_USER\\\" ì—­í• ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\", \"ìƒíƒœ ê°’(ì˜ˆ: active=1)ì— ë§¤ì§ ë„˜ë²„ ëŒ€ì‹  ìƒìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n        repo_path=repo_path,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.prompt_generator import (\\\\n    PromptGenerator,\\\\n    find_project_root,\\\\n)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n    # repo_path ê²°ì • - ì‚¬ìš©ì ì…ë ¥ ë˜ëŠ” í”„ë¡œì íŠ¸ ë£¨íŠ¸\\\\n    repo_path = (\\\\n        str(Path(args.repo_path)) if args.repo_path != \\\\\\\".\\\\\\\" else str(find_project_root())\\\\n    )\\\\n    diff_result = parse_git_diff(diff_content, use_full_context, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        repo_path=repo_path,\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/diff_parser/parser.py\\\", \\\"file_content\\\": \\\"import re\\\\n\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.utils.prompts import load_file_content\\\\n\\\\nfrom .models import DiffResult, FileDiff, Hunk\\\\n\\\\n_PATTERN_DIFF_SPLIT = re.compile(r\\\\\\\"(?=^diff --git)\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_HUNK_SPLIT = re.compile(r\\\\\\\"(?=^@@ )\\\\\\\", flags=re.MULTILINE)\\\\n_PATTERN_FILE_HEADER = re.compile(r\\\\\\\"^diff --git a/(\\\\\\\\S+) b/(\\\\\\\\S+)\\\\\\\", flags=re.MULTILINE)\\\\n\\\\n\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ êµ¬ì¡°í™”ëœ DiffResult ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        diff_text (str): git diff ëª…ë ¹ì–´ì˜ ì¶œë ¥ í…ìŠ¤íŠ¸\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        DiffResult: Git diff ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´\\\\n\\\\n    Raises:\\\\n        DiffParsingError: diffê°€ ë¹„ì–´ìˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ í˜•ì‹ì¸ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not diff_text:\\\\n        raise DiffParsingError(\\\\\\\"ë¹ˆ diffê°€ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    file_diffs = _PATTERN_DIFF_SPLIT.split(diff_text)\\\\n    result = DiffResult()\\\\n\\\\n    for raw_diff in file_diffs:\\\\n        if not raw_diff.strip():\\\\n            continue\\\\n        header_match = _PATTERN_FILE_HEADER.search(raw_diff)\\\\n        if header_match:\\\\n            filename = header_match.group(2)\\\\n        else:\\\\n            continue\\\\n\\\\n        hunks = _PATTERN_HUNK_SPLIT.split(raw_diff)\\\\n        hunk_list = [\\\\n            Hunk.from_hunk_text(h) for h in hunks if h.lstrip().startswith(\\\\\\\"@@\\\\\\\")\\\\n        ]\\\\n\\\\n        if use_full_context:\\\\n            file_content = load_file_content(filename, repo_path)\\\\n        else:\\\\n            file_content = None\\\\n\\\\n        parsed_diff = FileDiff(\\\\n            filename=filename, file_content=file_content, hunks=hunk_list\\\\n        )\\\\n        parsed_diff.detect_language()\\\\n        parsed_diff.calculate_changes()\\\\n        result.files.append(parsed_diff)\\\\n\\\\n    if not result.files:\\\\n        raise DiffParsingError(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ diff í˜•ì‹ì…ë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n    return result\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\ndef parse_git_diff(diff_text: str, use_full_context: bool) -> DiffResult:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef parse_git_diff(\\\\n    diff_text: str, use_full_context: bool, repo_path: str\\\\n) -> DiffResult:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        use_full_context (bool): ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ì§€ ì—¬ë¶€\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n```\\\", \\\"line_number\\\": 20}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            file_content = load_file_content(filename, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(repo_path, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef load_file_content(filename: str, repo_path: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ì§€ì •ëœ ì €ì¥ì†Œ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        filename (str): ì½ì„ íŒŒì¼ ê²½ë¡œ\\\\n        repo_path (str): ì €ì¥ì†Œ ê²½ë¡œ\\\\n\\\\n    Returns:\\\\n        str: íŒŒì¼ ë‚´ìš©\\\\n```\\\", \\\"line_number\\\": 49}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    Raises:\\\\n        FileNotFoundError: íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n```\\\", \\\"line_number\\\": 59}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        file_path = os.path.join(project_root, filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        file_path = os.path.join(repo_path, filename)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n        # ì €ì¥ì†Œ ê²½ë¡œëŠ” ë¦¬ë·° ìš”ì²­ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n        repo_path = review_request.repo_path\\\\n\\\\n```\\\", \\\"line_number\\\": 173}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n                file_content = load_file_content(request.filename)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                file_content = load_file_content(request.filename, repo_path)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n    repo_path: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    repo_path: str\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 68, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"load_file_content í•¨ìˆ˜ì—ì„œ ë„ˆë¬´ ì¼ë°˜ì ì¸ Exceptionì„ ì¡ê³  ë‹¤ì‹œ ë°œìƒì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤. íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: FileNotFoundError, IOError)ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ë³´ë‹¤ êµ¬ì²´ì ì¸ ì˜ˆì™¸ë¥¼ ì¡ê±°ë‚˜, ìµœì†Œí•œ `except Exception:` ëŒ€ì‹  `except OSError as e:` ë˜ëŠ” `except (FileNotFoundError, IOError) as e:` ì™€ ê°™ì´ íŒŒì¼ ê´€ë ¨ ì˜ˆì™¸ë¥¼ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    except Exception as e:\\n        raise e\\n```\", \"improved_code\": \"```python\\n    except FileNotFoundError as e:\\n        raise FileNotFoundError(f\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\") from e\\n    except IOError as e:\\n        raise IOError(f\\\"íŒŒì¼ ì½ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {file_path}\\\") from e\\n    except Exception as e:\\n        # ì˜ˆìƒì¹˜ ëª»í•œ ë‹¤ë¥¸ ì˜¤ë¥˜ ì²˜ë¦¬\\n        raise RuntimeError(f\\\"íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {file_path}\\\") from e\\n```\"}, {\"type\": \"design\", \"line_number\": 20, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"find_project_root í•¨ìˆ˜ëŠ” ì´ì œ cli.pyì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ì–´ repo_pathë¥¼ ê²°ì •í•˜ëŠ” ë° ê¸°ì—¬í•©ë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°ë³´ë‹¤ëŠ” ë” ì¼ë°˜ì ì¸ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ(ì˜ˆ: reviewer.src.utils)ë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"find_project_root í•¨ìˆ˜ë¥¼ reviewer.src.utilsì™€ ê°™ì€ ë” ë²”ìš©ì ì¸ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆë¡œ ì´ë™ì‹œì¼œ ì½”ë“œ êµ¬ì¡°ë¥¼ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ìœ„ì¹˜ë„ ê¸°ëŠ¥ì ìœ¼ë¡œ ë¬¸ì œëŠ” ì—†ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n@lru_cache(maxsize=1)\\ndef find_project_root() -> Path:\\n    \\\"\\\"\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\n\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\n\\n    Returns:\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\n    \\\"\\\"\\\"\\n    current_dir = Path(__file__).resolve().parent\\n\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\n    root_identifiers = [\\n        \\\".git\\\",\\n        \\\"pyproject.toml\\\",\\n        \\\"setup.py\\\",\\n        \\\"setup.cfg\\\",\\n        \\\"requirements.txt\\\",\\n    ]\\n\\n    while True:\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\n            return current_dir\\n        if current_dir.parent == current_dir:\\n            break\\n        current_dir = current_dir.parent\\n    raise FileNotFoundError(f\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\")\\n```\", \"improved_code\": \"```python\\n# ì´ í•¨ìˆ˜ë¥¼ reviewer/src/utils/path_utils.py ë“±ìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì„ ê³ ë ¤í•©ë‹ˆë‹¤.\\n# (ì‹¤ì œ ì½”ë“œ ë³€ê²½ì€ ì´ë™ëœ íŒŒì¼ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤)\\n# ì˜ˆì‹œ: reviewer/src/utils/path_utils.py\\n\\n# from functools import lru_cache\\n# from pathlib import Path\\n\\n# @lru_cache(maxsize=1)\\n# def find_project_root() -> Path:\\n#     ...\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œ ë¦¬ë·° ë„êµ¬ì—ì„œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ê°œì„ í•©ë‹ˆë‹¤. íŠ¹íˆ `--repo-path .` ì˜µì…˜ ì‚¬ìš© ì‹œ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¥¼ ì •í™•íˆ ì°¾ê³ , ì „ì²´ íŒŒì¼ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•  ë•Œ ì˜¬ë°”ë¥¸ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë„ë¡ `parse_git_diff` ë° `load_file_content` í•¨ìˆ˜ì— `repo_path` ì¸ìë¥¼ ì¶”ê°€í•˜ê³ , ì´ë¥¼ `ReviewRequest` ëª¨ë¸ì— í¬í•¨ì‹œì¼°ìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ê²½ë¡œ ì²˜ë¦¬ì˜ ê²¬ê³ ì„±ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"load_file_content í•¨ìˆ˜ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¢€ ë” êµ¬ì²´ì ìœ¼ë¡œ ê°œì„ í•©ë‹ˆë‹¤.\", \"find_project_rootì™€ ê°™ì€ ë²”ìš© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì ì ˆí•œ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆë¡œ ì´ë™ì‹œì¼œ ì½”ë“œ êµ¬ì¡°ë¥¼ ëª…í™•íˆ í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\\\", \\\"file_content\\\": \\\"package com.hoangtien2k3.userservice.service.impl;\\\\n\\\\nimport com.hoangtien2k3.userservice.entity.User;\\\\nimport com.hoangtien2k3.userservice.entity.UserRole;\\\\nimport com.hoangtien2k3.userservice.repository.UserRepository;\\\\nimport com.hoangtien2k3.userservice.repository.UserRoleRepository;\\\\nimport com.hoangtien2k3.userservice.service.UserService;\\\\nimport org.springframework.beans.factory.annotation.Autowired;\\\\nimport org.springframework.stereotype.Service;\\\\n\\\\nimport java.util.List;\\\\n\\\\n@Service\\\\npublic class UserServiceImpl implements UserService {\\\\n\\\\n    @Autowired\\\\n    private UserRepository userRepository;\\\\n\\\\n    @Autowired\\\\n    private UserRoleRepository userRoleRepository;\\\\n\\\\n    @Override\\\\n    public List<User> getAllUser() {\\\\n        return userRepository.findAll();\\\\n    }\\\\n\\\\n    @Override\\\\n    public User getUserById(Long id) {\\\\n\\\\n        return userRepository.getReferenceById(id);\\\\n    }\\\\n\\\\n    @Override\\\\n    public User getUserByName(String userName) {\\\\n        return userRepository.findByUserName(userName);\\\\n    }\\\\n\\\\n    @Override\\\\n    public User saveUser(User user) {\\\\n\\\\n        user.setActive(1); // active success\\\\n        UserRole role = userRoleRepository.findUserRoleByRoleName(\\\\\\\"ROLE_USER\\\\\\\");\\\\n        user.setRole(role);\\\\n\\\\n        return userRepository.save(user);\\\\n    }\\\\n}\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```java\\\\n        return userRepository.getOne(id);\\\\n```\\\", \\\"modified_code\\\": \\\"```java\\\\n        return userRepository.getReferenceById(id);\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 30, \"file\": \"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\", \"description\": \"`userRepository.getOne(id)` ë©”ì„œë“œëŠ” Spring Data JPA 2.2ì—ì„œ deprecated ë˜ì—ˆìœ¼ë©°, `getReferenceById(id)`ë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ìµœì‹  APIë¥¼ ì‚¬ìš©í•˜ëŠ” ì¢‹ì€ ê°œì„ ì…ë‹ˆë‹¤. `getReferenceById`ëŠ” ì—”í‹°í‹°ê°€ ì‹¤ì œë¡œ ì‚¬ìš©ë  ë•Œê¹Œì§€ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ì§€ì—°ì‹œí‚¤ëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ë§Œì•½ í•´ë‹¹ IDì˜ ì—”í‹°í‹°ê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, í”„ë¡ì‹œ ê°ì²´ì˜ ì†ì„±ì— ì ‘ê·¼í•  ë•Œ `EntityNotFoundException`ì´ ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"ë³€ê²½ëœ `getReferenceById` ì‚¬ìš©ì„ ìœ ì§€í•©ë‹ˆë‹¤. ì´ ë©”ì„œë“œì˜ ë™ì‘ ë°©ì‹(lazy loading ë° ì¡´ì¬í•˜ì§€ ì•ŠëŠ” IDì— ëŒ€í•œ `EntityNotFoundException`)ì„ ì´í•´í•˜ê³ , í•„ìš”í•œ ê²½ìš° í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```java\\n        return userRepository.getOne(id);\\n```\", \"improved_code\": \"```java\\n        return userRepository.getReferenceById(id);\\n```\"}, {\"type\": \"bug\", \"line_number\": 43, \"file\": \"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\", \"description\": \"`userRoleRepository.findUserRoleByRoleName(\\\"ROLE_USER\\\")` í˜¸ì¶œ ê²°ê³¼ê°€ `null`ì¼ ê²½ìš°, `user.setRole(role)`ì—ì„œ `NullPointerException`ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” \\\"ROLE_USER\\\" ì—­í• ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"ì—­í• ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—­í• ì´ `null`ì´ë©´ ê¸°ë³¸ ì—­í• ì„ í• ë‹¹í•˜ê±°ë‚˜, ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì•Œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"```java\\n        UserRole role = userRoleRepository.findUserRoleByRoleName(\\\"ROLE_USER\\\");\\n        user.setRole(role);\\n```\", \"improved_code\": \"```java\\n        UserRole role = userRoleRepository.findUserRoleByRoleName(\\\"ROLE_USER\\\");\\n        if (role == null) {\\n            // ì˜ˆ: ì—­í• ì´ ì—†ì„ ê²½ìš° ì˜ˆì™¸ ë°œìƒ\\n            throw new IllegalArgumentException(\\\"Role 'ROLE_USER' not found\\\");\\n            // ë˜ëŠ” ê¸°ë³¸ ì—­í•  í• ë‹¹ ë˜ëŠ” ë¡œê¹… ë“±\\n        } else {\\n            user.setRole(role);\\n        }\\n```\"}, {\"type\": \"style\", \"line_number\": 16, \"file\": \"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\", \"description\": \"í•„ë“œ ì£¼ì…(`@Autowired` on fields)ì€ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ë° ì˜ì¡´ì„± ê´€ë¦¬ ì¸¡ë©´ì—ì„œ ìƒì„±ì ì£¼ì…ë³´ë‹¤ ì„ í˜¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìˆœí™˜ ì˜ì¡´ì„±ì„ ìˆ¨ê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```java\\n    @Autowired\\n    private UserRepository userRepository;\\n\\n    @Autowired\\n    private UserRoleRepository userRoleRepository;\\n```\", \"improved_code\": \"```java\\n    private final UserRepository userRepository;\\n    private final UserRoleRepository userRoleRepository;\\n\\n    // @AutowiredëŠ” Spring 4.3+ì—ì„œ ìƒì„±ìê°€ í•˜ë‚˜ì¼ ê²½ìš° ìƒëµ ê°€ëŠ¥\\n    public UserServiceImpl(UserRepository userRepository, UserRoleRepository userRoleRepository) {\\n        this.userRepository = userRepository;\\n        this.userRoleRepository = userRoleRepository;\\n    }\\n```\"}], \"summary\": \"ì œê³µëœ diffëŠ” deprecatedëœ `getOne` ë©”ì„œë“œë¥¼ ìµœì‹  `getReferenceById`ë¡œ ë³€ê²½í•˜ëŠ” ì¢‹ì€ ê°œì„ ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì½”ë“œ ì „ë°˜ì ìœ¼ë¡œëŠ” í•„ë“œ ì£¼ì… ëŒ€ì‹  ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë˜ë©°, ì‚¬ìš©ì ì €ì¥ ì‹œ \\\"ROLE_USER\\\" ì—­í• ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° `NullPointerException`ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì ì¬ì ì¸ ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"í•„ë“œ ì£¼ì… ëŒ€ì‹  ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ì„¸ìš”.\", \"ì‚¬ìš©ì ì €ì¥ ì‹œ \\\"ROLE_USER\\\" ì—­í• ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\", \"ìƒíƒœ ê°’(ì˜ˆ: active=1)ì— ë§¤ì§ ë„˜ë²„ ëŒ€ì‹  ìƒìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"user-service/src/main/java/com/hoangtien2k3/userservice/service/impl/UserServiceImpl.java\\\", \\\"file_content\\\": \\\"\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```java\\\\n        return userRepository.getOne(id);\\\\n```\\\", \\\"modified_code\\\": \\\"```java\\\\n        return userRepository.getReferenceById(id);\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"bug\", \"line_number\": null, \"file\": \"reviewer/cli.py\", \"description\": \"handle_results_command í•¨ìˆ˜ì—ì„œ get_default_results_dir()ê°€ ë¬¸ìì—´ì„ ë°˜í™˜í•œ í›„ .exists()ë¥¼ í˜¸ì¶œí•˜ì—¬ AttributeErrorê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"get_default_results_dir()ì˜ ë°˜í™˜ê°’ì„ pathlib.Pathë¡œ ê°ì‹¸ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"results_dir = get_default_results_dir()\\nif not results_dir.exists():\\n    print(f\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\")\\n    return\", \"improved_code\": \"from pathlib import Path\\n\\nresults_dir = Path(get_default_results_dir())\\nif not results_dir.exists():\\n    print(f\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\")\\n    return\"}, {\"type\": \"design\", \"line_number\": null, \"file\": \"reviewer/src/diff_parser/parser.py\", \"description\": \"parse_git_diffì—ì„œ load_file_contentë¥¼ í†µí•´ íŒŒì¼ì„ ë¡œë“œí•  ë•Œ í˜„ì¬ ì‘ì—… ë””ë ‰í„°ë¦¬ ê¸°ì¤€ìœ¼ë¡œë§Œ ë™ì‘í•˜ì—¬ --repo-path ì˜µì…˜ì„ ë°˜ì˜í•˜ì§€ ëª»í•©ë‹ˆë‹¤.\", \"suggestion\": \"parse_git_diffì— repo_path ì¸ìë¥¼ ì¶”ê°€í•˜ê³ , load_file_content í˜¸ì¶œ ì‹œ Path(repo_path)/filenameì„ ì‚¬ìš©í•˜ì—¬ ì˜¬ë°”ë¥¸ ê²½ë¡œì—ì„œ íŒŒì¼ì„ ì½ì–´ì˜¤ë„ë¡ ìˆ˜ì •í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"if use_full_context:\\n    file_content = load_file_content(filename)\\nelse:\\n    file_content = None\", \"improved_code\": \"if use_full_context:\\n    full_path = Path(repo_path) / filename  # repo_path ì „ë‹¬ í•„ìš”\\n    file_content = load_file_content(str(full_path))\\nelse:\\n    file_content = None\"}, {\"type\": \"design\", \"line_number\": 66, \"file\": \"reviewer/cli.py\", \"description\": \"--commit-rangeì™€ --diff-file ì¸ìˆ˜ê°€ ìƒí˜¸ ë°°íƒ€ì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šì•„ ì‚¬ìš©ìê°€ ë‘ ì˜µì…˜ì„ ë™ì‹œì— ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"argparseì˜ add_mutually_exclusive_group()ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘ ì¸ìˆ˜ë¥¼ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ê³ , ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ í—ˆìš©í•˜ë„ë¡ ì„¤ì •í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"review_parser.add_argument(\\n    \\\"--commit-range\\\", type=str, help=\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„\\\"\\n)\\nreview_parser.add_argument(\\n    \\\"--diff-file\\\", type=str, help=\\\"Git diff íŒŒì¼ ê²½ë¡œ\\\"\\n)\", \"improved_code\": \"group = review_parser.add_mutually_exclusive_group()\\ngroup.add_argument(\\n    \\\"--commit-range\\\", type=str, help=\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„\\\"\\n)\\ngroup.add_argument(\\n    \\\"--diff-file\\\", type=str, help=\\\"Git diff íŒŒì¼ ê²½ë¡œ\\\"\\n)\"}, {\"type\": \"security\", \"line_number\": null, \"file\": \"reviewer/cli.py\", \"description\": \"save_review_requestì—ì„œ íŒŒì¼ëª…ì— review_request.model ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ëª…ì— í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë¬¸ìê°€ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"íŒŒì¼ëª…ì— ì‚¬ìš©ë˜ëŠ” ëª¨ë¸ ì´ë¦„ì„ re.sub ë“±ì„ ì´ìš©í•´ ì•ŒíŒŒë²³Â·ìˆ«ìÂ·ì–¸ë”ìŠ¤ì½”ì–´ë§Œ í—ˆìš©í•˜ë„ë¡ ì •ê·œí™” í›„ ì‚¬ìš©í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"filename = f\\\"review_request_{timestamp}_{review_request.model}.json\\\"\", \"improved_code\": \"import re\\nsafe_model = re.sub(r\\\"[^A-Za-z0-9_]\\\", \\\"\\\", review_request.model)\\nfilename = f\\\"review_request_{timestamp}_{safe_model}.json\\\"\"}], \"summary\": \"ì´ë²ˆ ë³€ê²½ì—ì„œëŠ” --diff-only ì˜µì…˜ ì¶”ê°€ë¡œ full-context ëª¨ë“œë¥¼ ì œì–´í•˜ê³ , diff íŒŒì„œ ë° CLIì˜ save_review_request í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë³€ê²½, LLM ê²Œì´íŠ¸ì›¨ì´ì—ì„œ review_prompt ë³€ìˆ˜ ì¼ê´€í™” ë“±ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ê¸°ëŠ¥ í™•ì¥ì€ ë˜ì—ˆìœ¼ë‚˜, ê²½ë¡œ ì²˜ë¦¬, ì¸ìˆ˜ ê²€ì¦, íŒŒì¼ëª… ì•ˆì „ì„± ë“±ì—ì„œ ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 7.0, \"recommendations\": [\"get_default_results_dir ë°˜í™˜ê°’ì€ pathlib.Pathë¡œ ë³€í™˜í•˜ì—¬ ì¼ê´€ëœ ê²½ë¡œ ì²˜ë¦¬ë¥¼ ì ìš©í•˜ì„¸ìš”.\", \"parse_git_diffì— repo_pathë¥¼ ì „ë‹¬í•˜ì—¬ íŒŒì¼ ë¡œë“œ ì‹œ ì˜¬ë°”ë¥¸ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ê°œì„ í•˜ì„¸ìš”.\", \"argparse ìƒí˜¸ ë°°íƒ€ì  ì¸ìˆ˜ ê·¸ë£¹(mutually exclusive group)ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ì…ë ¥ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ì„¸ìš”.\", \"íŒŒì¼ ìƒì„± ì‹œ ì‚¬ìš©ì ì…ë ¥ê°’ì„ íŒŒì¼ëª…ì— ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡, ë°˜ë“œì‹œ ì•ˆì „í•œ ë¬¸ìì—´ë¡œ ì •ê·œí™”í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"html\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: html)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\"],\\\\n        default=\\\\\\\"html\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: html)\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 47}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        review_focus=args.review_focus,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/review_processor.py\\\", \\\"file_content\\\": \\\"import html\\\\nimport json\\\\nfrom typing import Any, Dict, List\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewIssue, ReviewResponse\\\\n\\\\n\\\\nclass ReviewFormatter:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def to_markdown(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        md_lines = [\\\\\\\"# ì½”ë“œ ë¦¬ë·° ê²°ê³¼\\\\\\\\n\\\\\\\"]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        md_lines.append(\\\\\\\"## ìš”ì•½\\\\\\\\n\\\\\\\")\\\\n        md_lines.append(f\\\\\\\"{review.summary}\\\\\\\\n\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            md_lines.append(f\\\\\\\"**ì ìˆ˜**: {review.score}/10\\\\\\\\n\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            md_lines.append(\\\\\\\"## ë°œê²¬ëœ ì´ìŠˆ\\\\\\\\n\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                md_lines.append(f\\\\\\\"### {i}. {severity_emoji} {issue.type}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"**íŒŒì¼**: `{issue.file}`\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", **ë¼ì¸**: {issue.line_number}\\\\\\\"\\\\n                    md_lines.append(f\\\\\\\"{file_info}\\\\\\\\n\\\\\\\")\\\\n\\\\n                md_lines.append(f\\\\\\\"**ì„¤ëª…**: {issue.description}\\\\\\\\n\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    md_lines.append(f\\\\\\\"**ì œì•ˆ**: {issue.suggestion}\\\\\\\\n\\\\\\\")\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.original_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    md_lines.append(\\\\n                        \\\\\\\"**ê°œì„ ëœ ì½”ë“œ**:\\\\\\\\n```\\\\\\\\n\\\\\\\" + issue.improved_code + \\\\\\\"\\\\\\\\n```\\\\\\\\n\\\\\\\"\\\\n                    )\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            md_lines.append(\\\\\\\"## ê¶Œì¥ì‚¬í•­\\\\\\\\n\\\\\\\")\\\\n            for i, rec in enumerate(review.recommendations, 1):\\\\n                md_lines.append(f\\\\\\\"{i}. {rec}\\\\\\\\n\\\\\\\")\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(md_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_html(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: HTML í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        html_lines = [\\\\n            \\\\\\\"<!DOCTYPE html>\\\\\\\",\\\\n            \\\\\\\"<html>\\\\\\\",\\\\n            \\\\\\\"<head>\\\\\\\",\\\\n            \\\\\\\"<meta charset='UTF-8'>\\\\\\\",\\\\n            \\\\\\\"<title>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</title>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }\\\\\\\",\\\\n            \\\\\\\"h1 { color: #333; }\\\\\\\",\\\\n            \\\\\\\"h2 { color: #444; border-bottom: 1px solid #eee; padding-bottom: 5px; }\\\\\\\",\\\\n            \\\\\\\"h3 { color: #555; }\\\\\\\",\\\\n            \\\\\\\".issue { background-color: #f9f9f9; border-left: 4px solid #ddd; padding: 10px; margin-bottom: 15px; }\\\\\\\",\\\\n            \\\\\\\".info { border-left-color: #2196F3; }\\\\\\\",\\\\n            \\\\\\\".warning { border-left-color: #FF9800; }\\\\\\\",\\\\n            \\\\\\\".error { border-left-color: #F44336; }\\\\\\\",\\\\n            \\\\\\\".file-info { font-family: monospace; background-color: #eee; padding: 3px 5px; border-radius: 3px; }\\\\\\\",\\\\n            \\\\\\\".recommendations { background-color: #e8f5e9; padding: 10px; border-radius: 5px; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"<style>\\\\\\\",\\\\n            \\\\\\\"pre { background-color: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }\\\\\\\",\\\\n            \\\\\\\"code { font-family: 'Courier New', Courier, monospace; }\\\\\\\",\\\\n            \\\\\\\"</style>\\\\\\\",\\\\n            \\\\\\\"</head>\\\\\\\",\\\\n            \\\\\\\"<body>\\\\\\\",\\\\n            \\\\\\\"<h1>ì½”ë“œ ë¦¬ë·° ê²°ê³¼</h1>\\\\\\\",\\\\n        ]\\\\n\\\\n        # ìš”ì•½ ë° ì ìˆ˜\\\\n        html_lines.append(\\\\\\\"<h2>ìš”ì•½</h2>\\\\\\\")\\\\n        html_lines.append(f\\\\\\\"<p>{review.summary}</p>\\\\\\\")\\\\n\\\\n        if review.score is not None:\\\\n            html_lines.append(f\\\\\\\"<p><strong>ì ìˆ˜</strong>: {review.score}/10</p>\\\\\\\")\\\\n\\\\n        # ì´ìŠˆ ëª©ë¡\\\\n        if review.issues:\\\\n            html_lines.append(\\\\\\\"<h2>ë°œê²¬ëœ ì´ìŠˆ</h2>\\\\\\\")\\\\n\\\\n            for i, issue in enumerate(review.issues, 1):\\\\n                severity_emoji = {\\\\\\\"info\\\\\\\": \\\\\\\"â„¹ï¸\\\\\\\", \\\\\\\"warning\\\\\\\": \\\\\\\"âš ï¸\\\\\\\", \\\\\\\"error\\\\\\\": \\\\\\\"ğŸ›‘\\\\\\\"}.get(\\\\n                    issue.severity, \\\\\\\"â„¹ï¸\\\\\\\"\\\\n                )\\\\n\\\\n                html_lines.append(f\\\\\\\"<div class='issue {issue.severity}'>\\\\\\\")\\\\n                html_lines.append(f\\\\\\\"<h3>{i}. {severity_emoji} {issue.type}</h3>\\\\\\\")\\\\n\\\\n                if issue.file:\\\\n                    file_info = f\\\\\\\"<strong>íŒŒì¼</strong>: <span class='file-info'>{issue.file}</span>\\\\\\\"\\\\n                    if issue.line_number:\\\\n                        file_info += f\\\\\\\", <strong>ë¼ì¸</strong>: {issue.line_number}\\\\\\\"\\\\n                    html_lines.append(f\\\\\\\"<p>{file_info}</p>\\\\\\\")\\\\n\\\\n                html_lines.append(f\\\\\\\"<p><strong>ì„¤ëª…</strong>: {issue.description}</p>\\\\\\\")\\\\n\\\\n                if issue.suggestion:\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<p><strong>ì œì•ˆ</strong>: {issue.suggestion}</p>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ ì¶”ê°€\\\\n                if issue.original_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.original_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                # ê°œì„ ëœ ì½”ë“œ ì¶”ê°€\\\\n                if issue.improved_code:\\\\n                    html_lines.append(\\\\\\\"<p><strong>ê°œì„ ëœ ì½”ë“œ</strong>:</p>\\\\\\\")\\\\n                    html_lines.append(\\\\n                        f\\\\\\\"<pre><code>{html.escape(issue.improved_code)}</code></pre>\\\\\\\"\\\\n                    )\\\\n\\\\n                html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        # ê¶Œì¥ì‚¬í•­\\\\n        if review.recommendations:\\\\n            html_lines.append(\\\\\\\"<h2>ê¶Œì¥ì‚¬í•­</h2>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<div class='recommendations'>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"<ol>\\\\\\\")\\\\n            for rec in review.recommendations:\\\\n                html_lines.append(f\\\\\\\"<li>{rec}</li>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</ol>\\\\\\\")\\\\n            html_lines.append(\\\\\\\"</div>\\\\\\\")\\\\n\\\\n        html_lines.extend([\\\\\\\"</body>\\\\\\\", \\\\\\\"</html>\\\\\\\"])\\\\n\\\\n        return \\\\\\\"\\\\\\\\n\\\\\\\".join(html_lines)\\\\n\\\\n    @staticmethod\\\\n    def to_json(review: ReviewResponse) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            str: JSON í˜•ì‹ì˜ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return json.dumps(review.model_dump(), indent=2, ensure_ascii=False)\\\\n\\\\n\\\\nclass ReviewAnalyzer:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ë¶„ì„í•˜ëŠ” í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def get_severity_counts(review: ReviewResponse) -> Dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, int]: ì‹¬ê°ë„ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {\\\\\\\"info\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 0, \\\\\\\"error\\\\\\\": 0}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.severity] = counts.get(issue.severity, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_type_counts(review: ReviewResponse) -> Dict[str, int]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, int]: ìœ í˜•ë³„ ì´ìŠˆ ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        counts = {}\\\\n\\\\n        for issue in review.issues:\\\\n            counts[issue.type] = counts.get(issue.type, 0) + 1\\\\n\\\\n        return counts\\\\n\\\\n    @staticmethod\\\\n    def get_file_issues(review: ReviewResponse) -> Dict[str, List[ReviewIssue]]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, List[ReviewIssue]]: íŒŒì¼ë³„ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        file_issues = {}\\\\n\\\\n        for issue in review.issues:\\\\n            if issue.file:\\\\n                if issue.file not in file_issues:\\\\n                    file_issues[issue.file] = []\\\\n                file_issues[issue.file].append(issue)\\\\n\\\\n        return file_issues\\\\n\\\\n    @staticmethod\\\\n    def get_most_critical_issues(\\\\n        review: ReviewResponse, limit: int = 3\\\\n    ) -> List[ReviewIssue]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê°€ì¥ ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            limit: ë°˜í™˜í•  ì´ìŠˆ ìˆ˜\\\\n\\\\n        Returns:\\\\n            List[ReviewIssue]: ì¤‘ìš”í•œ ì´ìŠˆ ëª©ë¡\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ì‹¬ê°ë„ ìˆœìœ¼ë¡œ ì •ë ¬ (error > warning > info)\\\\n        severity_order = {\\\\\\\"error\\\\\\\": 0, \\\\\\\"warning\\\\\\\": 1, \\\\\\\"info\\\\\\\": 2}\\\\n        sorted_issues = sorted(\\\\n            review.issues, key=lambda x: severity_order.get(x.severity, 3)\\\\n        )\\\\n\\\\n        return sorted_issues[:limit]\\\\n\\\\n\\\\nclass ReviewPostProcessor:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í›„ì²˜ë¦¬ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self):\\\\n        self.formatter = ReviewFormatter()\\\\n        self.analyzer = ReviewAnalyzer()\\\\n\\\\n    def process_review(\\\\n        self, review: ReviewResponse, output_format: str = \\\\\\\"markdown\\\\\\\"\\\\n    ) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ ì²˜ë¦¬í•˜ê³  ì§€ì •ëœ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n            output_format: ì¶œë ¥ í˜•ì‹ (markdown, html, json)\\\\n\\\\n        Returns:\\\\n            str: ë³€í™˜ëœ ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if output_format == \\\\\\\"markdown\\\\\\\":\\\\n            return self.formatter.to_markdown(review)\\\\n        elif output_format == \\\\\\\"html\\\\\\\":\\\\n            return self.formatter.to_html(review)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¶œë ¥ í˜•ì‹: {output_format}\\\\\\\")\\\\n\\\\n    def get_review_summary(self, review: ReviewResponse) -> Dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ì˜ ìš”ì•½ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review: ë¦¬ë·° ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            Dict[str, Any]: ë¦¬ë·° ìš”ì•½ ì •ë³´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        severity_counts = self.analyzer.get_severity_counts(review)\\\\n        type_counts = self.analyzer.get_type_counts(review)\\\\n        most_critical = self.analyzer.get_most_critical_issues(review)\\\\n\\\\n        return {\\\\n            \\\\\\\"summary\\\\\\\": review.summary,\\\\n            \\\\\\\"score\\\\\\\": review.score,\\\\n            \\\\\\\"total_issues\\\\\\\": len(review.issues),\\\\n            \\\\\\\"severity_counts\\\\\\\": severity_counts,\\\\n            \\\\\\\"type_counts\\\\\\\": type_counts,\\\\n            \\\\\\\"most_critical_issues\\\\\\\": [\\\\n                {\\\\n                    \\\\\\\"type\\\\\\\": issue.type,\\\\n                    \\\\\\\"severity\\\\\\\": issue.severity,\\\\n                    \\\\\\\"description\\\\\\\": issue.description,\\\\n                }\\\\n                for issue in most_critical\\\\n            ],\\\\n            \\\\\\\"recommendations\\\\\\\": review.recommendations,\\\\n        }\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        elif output_format == \\\\\\\"json\\\\\\\":\\\\n            return self.formatter.to_json(review)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 285}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(project_root, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    def _get_review_focus_prompt(self, review_focus: str) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_focus: ë¦¬ë·° í¬ì»¤ìŠ¤\\\\n\\\\n        Returns:\\\\n            str: ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return f\\\\\\\"\\\\\\\\n\\\\\\\\níŠ¹ë³„íˆ ë‹¤ìŒ ì¸¡ë©´ì— ì§‘ì¤‘í•˜ì„¸ìš”: {review_focus}\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 95}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 161}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_focus: Optional[str] = None\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `--review-focus` ëª…ë ¹ì¤„ ì¸ìì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ì œê±°í•©ë‹ˆë‹¤. `cli.py`ì—ì„œ í•´ë‹¹ ì¸ì ì •ì˜ê°€ ì‚­ì œë˜ì—ˆê³ , `models.py`ì˜ `ReviewRequest` ëª¨ë¸ì—ì„œ `review_focus` í•„ë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, `prompt_generator.py`ì—ì„œ `review_focus`ë¥¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€í•˜ëŠ” ê´€ë ¨ ë¡œì§ê³¼ í—¬í¼ ë©”ì†Œë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ë¥¼ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì´ ê¸°ëŠ¥ ì œê±°ê°€ ì˜ë„ëœ ë³€ê²½ì´ë¼ë©´, ì‚¬ìš©ì ë¬¸ì„œì— í•´ë‹¹ ë‚´ìš©ì´ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"í–¥í›„ íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ ê¸°ëŠ¥ì´ ë‹¤ì‹œ í•„ìš”í•  ê²½ìš°, ë” ìœ ì—°í•˜ê±°ë‚˜ í™•ì¥ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        review_focus=args.review_focus,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(project_root, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    def _get_review_focus_prompt(self, review_focus: str) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_focus: ë¦¬ë·° í¬ì»¤ìŠ¤\\\\n\\\\n        Returns:\\\\n            str: ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return f\\\\\\\"\\\\\\\\n\\\\\\\\níŠ¹ë³„íˆ ë‹¤ìŒ ì¸¡ë©´ì— ì§‘ì¤‘í•˜ì„¸ìš”: {review_focus}\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 95}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 161}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_focus: Optional[str] = None\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `--review-focus` ëª…ë ¹ì¤„ ì¸ìì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ì œê±°í•©ë‹ˆë‹¤. `cli.py`ì—ì„œ í•´ë‹¹ ì¸ì ì •ì˜ê°€ ì‚­ì œë˜ì—ˆê³ , `models.py`ì˜ `ReviewRequest` ëª¨ë¸ì—ì„œ `review_focus` í•„ë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, `prompt_generator.py`ì—ì„œ `review_focus`ë¥¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€í•˜ëŠ” ê´€ë ¨ ë¡œì§ê³¼ í—¬í¼ ë©”ì†Œë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ë¥¼ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì´ ê¸°ëŠ¥ ì œê±°ê°€ ì˜ë„ëœ ë³€ê²½ì´ë¼ë©´, ì‚¬ìš©ì ë¬¸ì„œì— í•´ë‹¹ ë‚´ìš©ì´ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"í–¥í›„ íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ ê¸°ëŠ¥ì´ ë‹¤ì‹œ í•„ìš”í•  ê²½ìš°, ë” ìœ ì—°í•˜ê±°ë‚˜ í™•ì¥ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        review_focus=args.review_focus,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(project_root, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    def _get_review_focus_prompt(self, review_focus: str) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_focus: ë¦¬ë·° í¬ì»¤ìŠ¤\\\\n\\\\n        Returns:\\\\n            str: ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return f\\\\\\\"\\\\\\\\n\\\\\\\\níŠ¹ë³„íˆ ë‹¤ìŒ ì¸¡ë©´ì— ì§‘ì¤‘í•˜ì„¸ìš”: {review_focus}\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 95}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 161}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_focus: Optional[str] = None\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `--review-focus` ëª…ë ¹ì¤„ ì¸ìì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ì œê±°í•©ë‹ˆë‹¤. `cli.py`ì—ì„œ í•´ë‹¹ ì¸ì ì •ì˜ê°€ ì‚­ì œë˜ì—ˆê³ , `models.py`ì˜ `ReviewRequest` ëª¨ë¸ì—ì„œ `review_focus` í•„ë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, `prompt_generator.py`ì—ì„œ `review_focus`ë¥¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€í•˜ëŠ” ê´€ë ¨ ë¡œì§ê³¼ í—¬í¼ ë©”ì†Œë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ë¥¼ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì´ ê¸°ëŠ¥ ì œê±°ê°€ ì˜ë„ëœ ë³€ê²½ì´ë¼ë©´, ì‚¬ìš©ì ë¬¸ì„œì— í•´ë‹¹ ë‚´ìš©ì´ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"í–¥í›„ íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ ê¸°ëŠ¥ì´ ë‹¤ì‹œ í•„ìš”í•  ê²½ìš°, ë” ìœ ì—°í•˜ê±°ë‚˜ í™•ì¥ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        review_focus=args.review_focus,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(project_root, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    def _get_review_focus_prompt(self, review_focus: str) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_focus: ë¦¬ë·° í¬ì»¤ìŠ¤\\\\n\\\\n        Returns:\\\\n            str: ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return f\\\\\\\"\\\\\\\\n\\\\\\\\níŠ¹ë³„íˆ ë‹¤ìŒ ì¸¡ë©´ì— ì§‘ì¤‘í•˜ì„¸ìš”: {review_focus}\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 95}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 161}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_focus: Optional[str] = None\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 50, \"file\": \"reviewer/cli.py\", \"description\": \"'--review-focus' CLI ì¸ì ë° ê´€ë ¨ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì‚¬ìš©ìëŠ” LLM ë¦¬ë·° ì‹œ íŠ¹ì • ê²€í†  ì˜ì—­(ì˜ˆ: ë³´ì•ˆ, ì„±ëŠ¥)ì„ ì§€ì •í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ì´ ë³€ê²½ì€ ë„êµ¬ì˜ ë³µì¡ì„±ì„ ì¤„ì´ëŠ” ì´ì ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‚˜, ì„¸ë°€í•œ ë¦¬ë·° ì œì–´ë¥¼ ì›í–ˆë˜ ì‚¬ìš©ìì—ê²ŒëŠ” ê¸°ëŠ¥ ì¶•ì†Œë¡œ ì¸ì‹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ëŠ¥ ì œê±° ê²°ì •ì´ í™•ì •ëœ ê²½ìš°, í•´ë‹¹ ë³€ê²½ ì‚¬í•­ì„ ì‚¬ìš©ì ë¬¸ì„œ ë° ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ì— ëª…í™•íˆ ê³ ì§€í•˜ê³ , ì œê±° ì´ìœ  ë˜ëŠ” í”„ë¡¬í”„íŠ¸ ìˆ˜ì •ì„ í†µí•´ ìœ ì‚¬í•œ íš¨ê³¼ë¥¼ ì–»ëŠ” ë°©ë²• ë“± ëŒ€ì•ˆì„ ì•ˆë‚´í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    review_parser.add_argument(\\n        \\\"--review-focus\\\", type=str, help=\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\"\\n    )\\n```\", \"improved_code\": null}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 409, \"file\": \"reviewer/cli.py\", \"description\": \"`review_code` í•¨ìˆ˜ ë‚´ API í‚¤ ì„¤ì • ë¡œì§(409í–‰ ë¶€ê·¼)ì´ ì—¬ëŸ¬ ë‹¨ê³„ì˜ `if/else` ë° `try/except` ë¸”ë¡ìœ¼ë¡œ ì¤‘ì²©ë˜ì–´ ìˆì–´ ê°€ë…ì„±ì´ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ API í‚¤ê°€ ì—†ì„ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì„¤ì • ì—¬ë¶€ë¥¼ ë¬»ê³  ì…ë ¥ë°›ëŠ” ê³¼ì •ì´ ë³µì¡í•˜ê²Œ ëŠê»´ì§‘ë‹ˆë‹¤.\", \"suggestion\": \"API í‚¤ë¥¼ í™•ì¸í•˜ê³ , ì—†ëŠ” ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì…ë ¥ì„ ìš”ì²­í•˜ì—¬ ì„¤ì •í•˜ëŠ” ê³¼ì •ì„ ë³„ë„ì˜ í—¬í¼ í•¨ìˆ˜(ì˜ˆ: `_ensure_api_key_configured`)ë¡œ ì¶”ì¶œí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì‹­ì‹œì˜¤. ì´ë¥¼ í†µí•´ `review_code` í•¨ìˆ˜ì˜ ì£¼ ë¡œì§ì„ ë” ëª…í™•í•˜ê²Œ ë§Œë“¤ê³  ì¤‘ì²©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    # API í‚¤ í™•ì¸\\n    api_key = get_api_key(\\\"openai\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\n    if not api_key:\\n        logger.warning(\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\")\\n        logger.info(\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\")\\n        logger.info(\\\"  reviewer config api-key openai\\\")\\n\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\n        try:\\n            response = input(\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\")\\n            if response.lower() == \\\"y\\\":\\n                try:\\n                    new_api_key = getpass.getpass(\\n                        \\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\"\\n                    )\\n                    if new_api_key:\\n                        if set_api_key(new_api_key, \\\"openai\\\"):\\n                            logger.info(\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n                            api_key = new_api_key\\n                        else:\\n                            logger.error(\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\")\\n                            return\\n                    else:\\n                        logger.warning(\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n                        return\\n                except KeyboardInterrupt:\\n                    logger.info(\\\"\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n                    return\\n            else:\\n                return\\n        except KeyboardInterrupt:\\n            logger.info(\\\"\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n            return\\n```\", \"improved_code\": \"```python\\n    # # ì˜ˆì‹œ: í—¬í¼ í•¨ìˆ˜ ì‚¬ìš©\\n    # def _ensure_api_key_configured(provider: str) -> Optional[str]:\\n    #     api_key = get_api_key(provider)\\n    #     if api_key:\\n    #         return api_key\\n    # \\n    #     logger.warning(f\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\")\\n    #     # ... (ì‚¬ìš©ìì—ê²Œ ì„¤ì • ì—¬ë¶€ í™•ì¸ ë° ì…ë ¥ ìš”ì²­ ë¡œì§) ...\\n    #     # ì„±ê³µ ì‹œ í‚¤ ë°˜í™˜, ì‹¤íŒ¨ ë˜ëŠ” ì·¨ì†Œ ì‹œ None ë°˜í™˜\\n    #     return new_key_or_none\\n    # \\n    # # review_code í•¨ìˆ˜ ë‚´ì—ì„œ í˜¸ì¶œ\\n    # api_key = _ensure_api_key_configured(\\\"openai\\\")\\n    # if not api_key:\\n    #     logger.error(\\\"OpenAI API í‚¤ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¦¬ë·°ë¥¼ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")\\n    #     return\\n```\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 320, \"file\": \"reviewer/cli.py\", \"description\": \"`show_result` í•¨ìˆ˜ì—ì„œ íŒŒì¼ ë‚´ìš©ì„ í™”ë©´ì— í‘œì‹œí•˜ê¸° ìœ„í•´ `print(content)`ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œëŠ” `logger`ë¥¼ í†µí•œ ì¶œë ¥ì„ ì£¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆì–´, ì¶œë ¥ ë°©ì‹ì˜ ì¼ê´€ì„±ì´ ë‹¤ì†Œ ë¶€ì¡±í•´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"íŒŒì¼ ë‚´ìš©ì„ í‘œì‹œí•  ë•Œë„ `logger.info()`ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ (ë‚´ìš©ì´ ê¸¸ ê²½ìš° ì—¬ëŸ¬ ì¤„ë¡œ ë‚˜ë‰˜ì–´ ë¡œê¹…ë  ìˆ˜ ìˆìŒì„ ê³ ë ¤), í˜¹ì€ ì½˜ì†”ì— ì§ì ‘ì ì¸ ì›ì‹œ ë°ì´í„° ì¶œë ¥ì„ ìœ„í•œ ë³„ë„ì˜ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ë§ˆë ¨í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”. ë§Œì•½ `print` ì‚¬ìš©ì´ ì˜ë„ëœ ê²ƒì´ë¼ë©´ (ì˜ˆ: ë¡œê±° í¬ë§·íŒ…ì„ í”¼í•˜ê¸° ìœ„í•¨), í•´ë‹¹ ë¶€ë¶„ì— ì£¼ì„ì„ ì¶”ê°€í•˜ì—¬ ê·¸ ì˜ë„ë¥¼ ëª…í™•íˆ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    with open(file_path, encoding=\\\"utf-8\\\") as f:\\n        content = f.read()\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\n        print(content)\\n```\", \"improved_code\": \"```python\\n    with open(file_path, encoding=\\\"utf-8\\\") as f:\\n        content = f.read()\\n        # íŒŒì¼ ë‚´ìš©ì„ ì§ì ‘ ì¶œë ¥. ë¡œê±° í¬ë§·íŒ…ì„ í”¼í•˜ê¸° ìœ„í•´ print ì‚¬ìš©.\\n        # ë˜ëŠ” logger.info(f\\\"\\\\n{content}\\\") ë“±ìœ¼ë¡œ ë¡œê±° ì‚¬ìš© ê³ ë ¤.\\n        print(content)\\n```\"}], \"summary\": \"ì´ë²ˆ ì½”ë“œ ë³€ê²½ì€ '--review-focus' CLI ì¸ìì™€ ê´€ë ¨ëœ 'ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­' ì§€ì • ê¸°ëŠ¥ì„ ì™„ì „íˆ ì œê±°í•˜ëŠ” ë° ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ CLI ì¸ìˆ˜ íŒŒì‹±, `ReviewRequest` ë°ì´í„° ëª¨ë¸, ê·¸ë¦¬ê³  LLM í”„ë¡¬í”„íŠ¸ ìƒì„± ë¡œì§ì—ì„œ í•´ë‹¹ ê¸°ëŠ¥ê³¼ ê´€ë ¨ëœ ì½”ë“œë“¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ì€ ë„êµ¬ì˜ ì¸í„°í˜ì´ìŠ¤ì™€ ë‚´ë¶€ ë¡œì§ì„ ë‹¨ìˆœí™”í•˜ëŠ” íš¨ê³¼ê°€ ìˆìœ¼ë‚˜, íŠ¹ì • ê²€í†  ì˜ì—­ì— ëŒ€í•œ ì„¸ë°€í•œ ì œì–´ë¥¼ ì›í–ˆë˜ ì‚¬ìš©ìì—ê²ŒëŠ” ê¸°ëŠ¥ ì¶•ì†Œë¡œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì½”ë“œ ë³€ê²½ ìì²´ëŠ” ê´€ë ¨ëœ ì—¬ëŸ¬ íŒŒì¼ì— ê±¸ì³ ì¼ê´€ì„± ìˆê²Œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"'ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­' ê¸°ëŠ¥ ì œê±°ì— ëŒ€í•œ ë°°ê²½ê³¼ ê·¸ë¡œ ì¸í•œ ì‚¬ìš©ì ê²½í—˜ ë³€í™”(ì˜ˆ: ê¸°ëŠ¥ ì¶•ì†Œ ë˜ëŠ” ëŒ€ì•ˆ ì•ˆë‚´)ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ëª…í™•íˆ í•˜ê³ , í•„ìš”ì‹œ ì‚¬ìš©ì ë¬¸ì„œë‚˜ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ë¥¼ í†µí•´ ê´€ë ¨ ë‚´ìš©ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\", \"`reviewer/cli.py`ì˜ `review_code` í•¨ìˆ˜ ë‚´ API í‚¤ ì…ë ¥ ì²˜ë¦¬ ë¡œì§(409í–‰ ë¶€ê·¼)ì€ ì¤‘ì²©ëœ ì œì–´ êµ¬ì¡°ë¡œ ì¸í•´ ê°€ë…ì„±ì´ ë‚®ìœ¼ë¯€ë¡œ, ì´ë¥¼ ë³„ë„ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ê±°ë‚˜ ë¡œì§ì„ ë‹¨ìˆœí™”í•˜ì—¬ ê°œì„ í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì˜ ì¶œë ¥ ì¼ê´€ì„±ì„ ìœ„í•´ `reviewer/cli.py`ì˜ `show_result` í•¨ìˆ˜(320í–‰)ì—ì„œ íŒŒì¼ ë‚´ìš© ì¶œë ¥ ì‹œ `print` ëŒ€ì‹  ë¡œê±° ì‚¬ìš© ë˜ëŠ” ë‹¤ë¥¸ ì¼ê´€ëœ ë°©ì‹ì„ ê²€í† í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        review_focus=args.review_focus,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(project_root, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    def _get_review_focus_prompt(self, review_focus: str) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_focus: ë¦¬ë·° í¬ì»¤ìŠ¤\\\\n\\\\n        Returns:\\\\n            str: ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return f\\\\\\\"\\\\\\\\n\\\\\\\\níŠ¹ë³„íˆ ë‹¤ìŒ ì¸¡ë©´ì— ì§‘ì¤‘í•˜ì„¸ìš”: {review_focus}\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 95}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 161}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_focus: Optional[str] = None\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ `--review-focus` ëª…ë ¹ì¤„ ì¸ìì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ì œê±°í•©ë‹ˆë‹¤. `cli.py`ì—ì„œ í•´ë‹¹ ì¸ì ì •ì˜ê°€ ì‚­ì œë˜ì—ˆê³ , `models.py`ì˜ `ReviewRequest` ëª¨ë¸ì—ì„œ `review_focus` í•„ë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, `prompt_generator.py`ì—ì„œ `review_focus`ë¥¼ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€í•˜ëŠ” ê´€ë ¨ ë¡œì§ê³¼ í—¬í¼ ë©”ì†Œë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ë¥¼ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\", \"score\": 9.5, \"recommendations\": [\"ì´ ê¸°ëŠ¥ ì œê±°ê°€ ì˜ë„ëœ ë³€ê²½ì´ë¼ë©´, ì‚¬ìš©ì ë¬¸ì„œì— í•´ë‹¹ ë‚´ìš©ì´ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"í–¥í›„ íŠ¹ì • ë¦¬ë·° í¬ì»¤ìŠ¤ ê¸°ëŠ¥ì´ ë‹¤ì‹œ í•„ìš”í•  ê²½ìš°, ë” ìœ ì—°í•˜ê±°ë‚˜ í™•ì¥ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 50}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        review_focus=args.review_focus,\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompts/prompt_generator.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport os\\\\nfrom functools import lru_cache\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\nfrom .models import (\\\\n    ReviewPrompt,\\\\n    ReviewPromptWithFileContent,\\\\n    SystemPrompt,\\\\n    UserPrompt,\\\\n    UserPromptWithFileContent,\\\\n)\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef find_project_root() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì‹ë³„ íŒŒì¼(ì˜ˆ: .git, pyproject.toml, setup.py)ì´ ìˆëŠ”\\\\n    ìƒìœ„ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        Path: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    current_dir = Path(__file__).resolve().parent\\\\n\\\\n    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ì‹ë³„ì íŒŒì¼ ëª©ë¡\\\\n    root_identifiers = [\\\\n        \\\\\\\".git\\\\\\\",\\\\n        \\\\\\\"pyproject.toml\\\\\\\",\\\\n        \\\\\\\"setup.py\\\\\\\",\\\\n        \\\\\\\"setup.cfg\\\\\\\",\\\\n        \\\\\\\"requirements.txt\\\\\\\",\\\\n    ]\\\\n\\\\n    while True:\\\\n        if any((current_dir / identifier).exists() for identifier in root_identifiers):\\\\n            return current_dir\\\\n        if current_dir.parent == current_dir:\\\\n            break\\\\n        current_dir = current_dir.parent\\\\n    raise FileNotFoundError(f\\\\\\\"í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {current_dir}\\\\\\\")\\\\n\\\\n\\\\n@lru_cache(maxsize=1)\\\\ndef load_file_content(filename: str) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì½ì–´ì˜µë‹ˆë‹¤. ìƒëŒ€ ê²½ë¡œë¡œ ëœ íŒŒì¼ì„ Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ ì°¾ìŠµë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # Git ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì°¾ê¸°\\\\n        project_root = find_project_root()\\\\n\\\\n        # íŒŒì¼ ê²½ë¡œ ì™„ì„±\\\\n        file_path = os.path.join(project_root, filename)\\\\n\\\\n        # íŒŒì¼ ë‚´ìš© ì½ê¸°\\\\n        if os.path.exists(file_path):\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                return f.read()\\\\n        else:\\\\n            raise FileNotFoundError(f\\\\\\\"íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {file_path}\\\\\\\")\\\\n    except Exception as e:\\\\n        raise e\\\\n\\\\n\\\\nclass PromptGenerator:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @classmethod\\\\n    @lru_cache(maxsize=1)\\\\n    def _get_code_review_system_prompt(cls) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: ì½”ë“œ ë¦¬ë·° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        project_root = find_project_root()\\\\n        prompt_path = (\\\\n            project_root\\\\n            / \\\\\\\"resources\\\\\\\"\\\\n            / \\\\\\\"prompt\\\\\\\"\\\\n            / \\\\\\\"v1\\\\\\\"\\\\n            / \\\\\\\"code_review_system_prompt.txt\\\\\\\"\\\\n        )\\\\n\\\\n        if not prompt_path.exists():\\\\n            raise FileNotFoundError(\\\\n                f\\\\\\\"ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {prompt_path}\\\\\\\"\\\\n            )\\\\n\\\\n        with open(prompt_path, encoding=\\\\\\\"utf-8\\\\\\\") as file:\\\\n            return file.read()\\\\n\\\\n    def create_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt | ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        use_full_context í”Œë˜ê·¸ì— ë”°ë¼ ì ì ˆí•œ í”„ë¡¬í”„íŠ¸ ìƒì„± ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt | ReviewPromptWithFileContent: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if review_request.use_full_context:\\\\n            return self._create_full_context_code_review_prompt(review_request)\\\\n        else:\\\\n            return self._create_simple_code_review_prompt(review_request)\\\\n\\\\n    def _create_simple_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPrompt:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ê¸°ë³¸ ì½”ë“œ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPrompt: ìƒì„±ëœ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts = []\\\\n\\\\n        for file in review_request.processed_diff.files:\\\\n            file_name = file.filename\\\\n            if file_name not in review_request.file_paths:\\\\n                review_request.file_paths.append(file_name)\\\\n\\\\n            for hunk_idx, hunk in enumerate(file.hunks):\\\\n                safe_original = hunk.get_safe_original_code()\\\\n                safe_modified = hunk.get_safe_modified_code()\\\\n                user_prompt = UserPrompt(\\\\n                    hunk_idx=str(hunk_idx + 1),\\\\n                    file_name=file_name,\\\\n                    original_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_original}\\\\\\\\n```\\\\\\\",\\\\n                    modified_code=f\\\\\\\"```{file.language}\\\\\\\\n{safe_modified}\\\\\\\\n```\\\\\\\",\\\\n                    line_number=hunk.start_line_modified,\\\\n                    language=file.language,\\\\n                )\\\\n                user_prompts.append(user_prompt)\\\\n\\\\n        return ReviewPrompt(system_prompt=system_prompt, user_prompts=user_prompts)\\\\n\\\\n    def _create_full_context_code_review_prompt(\\\\n        self, review_request: ReviewRequest\\\\n    ) -> ReviewPromptWithFileContent:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ìœ¼ë¡œë¶€í„° íŒŒì¼ ë‚´ìš©ì„ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_request: ë¦¬ë·° ìš”ì²­ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewPromptWithFileContent: ìƒì„±ëœ íŒŒì¼ ë‚´ìš© í¬í•¨ ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt_content = self._get_code_review_system_prompt()\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        system_prompt = SystemPrompt(role=\\\\\\\"system\\\\\\\", content=system_prompt_content)\\\\n        user_prompts: list[UserPromptWithFileContent] = []\\\\n        for request in review_request.processed_diff.files:\\\\n            try:\\\\n                file_content = load_file_content(request.filename)\\\\n            except FileNotFoundError:\\\\n                file_content = \\\\\\\"\\\\\\\"\\\\n\\\\n            user_prompt = UserPromptWithFileContent(\\\\n                file_name=request.filename,\\\\n                file_content=file_content,\\\\n                hunks=request.hunks,\\\\n                language=request.language,\\\\n            )\\\\n            user_prompts.append(user_prompt)\\\\n\\\\n        review_prompt_with_file_content = ReviewPromptWithFileContent(\\\\n            system_prompt=system_prompt,\\\\n            user_prompts=user_prompts,\\\\n        )\\\\n\\\\n        return review_prompt_with_file_content\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    def _get_review_focus_prompt(self, review_focus: str) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_focus: ë¦¬ë·° í¬ì»¤ìŠ¤\\\\n\\\\n        Returns:\\\\n            str: ë¦¬ë·° í¬ì»¤ìŠ¤ í”„ë¡¬í”„íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return f\\\\\\\"\\\\\\\\n\\\\\\\\níŠ¹ë³„íˆ ë‹¤ìŒ ì¸¡ë©´ì— ì§‘ì¤‘í•˜ì„¸ìš”: {review_focus}\\\\\\\"\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 95}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # ë¦¬ë·° í¬ì»¤ìŠ¤ê°€ ìˆëŠ” ê²½ìš° ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì¶”ê°€\\\\n        if review_request.review_focus:\\\\n            system_prompt_content += self._get_review_focus_prompt(\\\\n                review_request.review_focus\\\\n            )\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 161}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_focus: Optional[str] = None\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"bug\", \"line_number\": 46, \"file\": \"reviewer/cli.py\", \"description\": \"ì½”ë“œ ë¦¬ë·°ì˜ ì§‘ì¤‘ ì˜ì—­ì„ ì§€ì •í•˜ëŠ” `--review-focus` ëª…ë ¹ì¤„ ì¸ìˆ˜ê°€ ì •ì˜ë˜ì–´ ìˆì§€ë§Œ, ê´€ë ¨ ê¸°ëŠ¥ì´ ì½”ë“œì—ì„œ ì œê±°ë˜ì–´ ì´ ì¸ìˆ˜ì˜ ê°’ì´ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ìì—ê²Œ í˜¼ë€ì„ ì¤„ ìˆ˜ ìˆìœ¼ë©° ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ë‚¨ê¹ë‹ˆë‹¤.\", \"suggestion\": \"ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìœ¼ë¯€ë¡œ `--review-focus` ì¸ìˆ˜ì˜ ì •ì˜ë„ í•¨ê»˜ ì œê±°í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    review_parser.add_argument(\\n        \\\"--review-focus\\\", type=str, help=\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\"\\n    )\\n```\", \"improved_code\": \"```python\\n    # --review-focus ì¸ìˆ˜ëŠ” ê¸°ëŠ¥ ì œê±°ë¡œ ì¸í•´ ì‚­ì œë¨\\n    # review_parser.add_argument(\\n    #     \\\"--review-focus\\\", type=str, help=\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\"\\n    # )\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ ì½”ë“œ ë¦¬ë·°ì˜ ì§‘ì¤‘ ì˜ì—­ì„ ì§€ì •í•˜ëŠ” `review_focus` ê¸°ëŠ¥ì„ ì œê±°í•©ë‹ˆë‹¤. CLI ì¸ì, `ReviewRequest` ëª¨ë¸ í•„ë“œ, í”„ë¡¬í”„íŠ¸ ìƒì„± ë¡œì§ì—ì„œ ê´€ë ¨ ì½”ë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, CLIì—ì„œ `--review-focus` ì¸ìë¥¼ ì •ì˜í•˜ëŠ” ë¶€ë¶„ì´ ë‚¨ì•„ìˆì–´ ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"--review-focus` ëª…ë ¹ì¤„ ì¸ì ì •ì˜ë¥¼ ì œê±°í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì½”ë“œë¥¼ ì •ë¦¬í•˜ê³  ì‚¬ìš©ì í˜¼ë€ì„ ë°©ì§€í•˜ì„¸ìš”.\", \"ê¸°ëŠ¥ ì œê±°ì— ëŒ€í•œ ë°°ê²½ì´ë‚˜ ì´ìœ ë¥¼ ì»¤ë°‹ ë©”ì‹œì§€ì— ëª…í™•íˆ ê¸°ë¡í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), None)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 43}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    return run_git_diff(str(repo_path), args.commit_range)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    return run_git_diff(str(repo_path), None)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ì„¤ê³„\", \"line_number\": 43, \"file\": \"reviewer/cli.py\", \"description\": \"--commit-range ëª…ë ¹ì¤„ ì¸ì ì •ì˜(43í–‰)ì™€ ì´ë¥¼ get_diff_content í•¨ìˆ˜ì—ì„œ run_git_diffì— ì „ë‹¬í•˜ëŠ” ë¡œì§(128í–‰)ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì‚¬ìš©ìê°€ íŠ¹ì • ì»¤ë°‹ ë²”ìœ„ë¥¼ ì§€ì •í•˜ì—¬ ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê¸°ëŠ¥ì´ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ì´ì œ ë„êµ¬ëŠ” ê¸°ë³¸ git diff ê²°ê³¼ë§Œ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.\", \"suggestion\": \"ì´ ë³€ê²½ì´ ì˜ë„ëœ ê¸°ëŠ¥ ì¶•ì†Œë¼ë©´, ì‚¬ìš©ìì—ê²Œ ì´ ê¸°ëŠ¥ì´ ì œê±°ë˜ì—ˆìŒì„ ëª…í™•íˆ ì•Œë¦¬ê³  ë¬¸ì„œí™”í•´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ íŠ¹ì • ì»¤ë°‹ ë²”ìœ„ ë¦¬ë·° ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ë©´, --commit-range ì¸ìë¥¼ ë³µì›í•˜ê³  get_diff_content í•¨ìˆ˜ì—ì„œ ì´ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. ë˜ëŠ”, git diff ê²°ê³¼ë¥¼ íŒŒì´í”„(|)ë¥¼ í†µí•´ ì…ë ¥ë°›ëŠ” ë°©ì‹ì„ ê³ ë ¤í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n    review_parser.add_argument(\\n        \\\"--commit-range\\\", type=str, help=\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\"\\n    )\\n```\", \"improved_code\": \"```python\\n\\n```\"}], \"summary\": \"ì½”ë“œ ë¦¬ë·° ëª…ë ¹ì–´ì—ì„œ --commit-range ì¸ìì™€ í•´ë‹¹ ê¸°ëŠ¥ì„ ì œê±°í•˜ì—¬, íŠ¹ì • ì»¤ë°‹ ë²”ìœ„ì— ëŒ€í•œ diff ë¦¬ë·° ê¸°ëŠ¥ì„ ë¹„í™œì„±í™”í–ˆìŠµë‹ˆë‹¤. ì´ì œ ê¸°ë³¸ git diff ê²°ê³¼ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"ê¸°ëŠ¥ ì œê±°ì˜ ì˜ë„ë¥¼ ëª…í™•íˆ í•˜ê³  ì‚¬ìš©ì ë¬¸ì„œì— ë°˜ì˜í•©ë‹ˆë‹¤.\", \"ë§Œì•½ íŠ¹ì • ì»¤ë°‹ ë²”ìœ„ ë¦¬ë·° ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ë©´, ì¸ìë¥¼ ë³µì›í•˜ê±°ë‚˜ diff ë‚´ìš©ì„ í‘œì¤€ ì…ë ¥ìœ¼ë¡œ ë°›ëŠ” ë°©ì‹ì„ ê³ ë ¤í•©ë‹ˆë‹¤.\", \"ì œê±°ëœ ê¸°ëŠ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ìˆì—ˆë‹¤ë©´ í•¨ê»˜ ì œê±°í•˜ê±°ë‚˜ ìˆ˜ì •í•©ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 46}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), args.commit_range)\\\\n```\\\", \\\"line_number\\\": 152}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/base_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom __future__ import annotations\\\\n\\\\nimport abc\\\\nimport json\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.utils import save_prompt\\\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\\\nfrom reviewer.src.utils.logging import get_logger\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\nfrom reviewer.src.utils.token.models import (\\\\n    DiffCheckResult,\\\\n    EstimatedCost,\\\\n    ReviewResponse,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n\\\\n\\\\nclass BaseGateway(abc.ABC):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = self._load_api_key()\\\\n\\\\n    @abc.abstractmethod\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Providerì— ë§ëŠ” API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        ê° í”„ë¡œë°”ì´ë”ë³„ API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n        ê° í•˜ìœ„ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ LLM í”„ë¡œë°”ì´ë”ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    def get_model_name(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ ì „ì²´ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ í”„ë¡œë°”ì´ë”ì— ë§ëŠ” LLM í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            Instructor: êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” LLM í´ë¼ì´ì–¸íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return LLMClientFactory.create_client(self.get_provider(), self.api_key)\\\\n\\\\n    def estimate_review_cost(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì˜ ì˜ˆìƒ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´ (ReviewPrompt ë˜ëŠ” ReviewPromptWithFileContent)\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        combined_text = \\\\\\\"\\\\\\\"\\\\n        combined_text += review_prompt.system_prompt.content + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n        for user_prompt in review_prompt.user_prompts:\\\\n            combined_text += user_prompt.to_message()[\\\\\\\"content\\\\\\\"] + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        return TokenUtils.estimate_cost(combined_text, model_name)\\\\n\\\\n    def check_diff_size(self, diff_content: str) -> DiffCheckResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Diff ë‚´ìš©ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê³  ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            diff_content: diff ë‚´ìš©\\\\n\\\\n        Returns:\\\\n            DiffCheckResult: í¬ê¸° ë° ë¹„ìš© ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        cost_info = TokenUtils.estimate_cost(diff_content, model_name)\\\\n\\\\n        # DiffCheckResult ê°ì²´ ìƒì„±í•˜ì—¬ ë°˜í™˜\\\\n        return DiffCheckResult(\\\\n            model=cost_info.model,\\\\n            input_tokens=cost_info.input_tokens,\\\\n            input_cost_usd=cost_info.input_cost_usd,\\\\n            estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n            estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n            estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n            within_context_limit=cost_info.within_context_limit,\\\\n            character_count=len(diff_content),\\\\n            line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n        )\\\\n\\\\n    def save_raw_response(self, completion: StructuredReviewResponse) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"LLM API ì›ë³¸ ì‘ë‹µì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            completion: API ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            provider = self.get_provider()\\\\n            current_time = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n\\\\n            with open(raw_response_file, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                f.write(f\\\\\\\"# {provider.capitalize()} ì›ë³¸ ì‘ë‹µ\\\\\\\\n\\\\\\\\n\\\\\\\")\\\\n                try:\\\\n                    raw_response = completion.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n                    f.write(\\\\n                        json.dumps(\\\\n                            raw_response, indent=2, default=str, ensure_ascii=False\\\\n                        )\\\\n                    )\\\\n                except Exception:\\\\n                    f.write(str(completion))\\\\n            logger.info(\\\\n                f\\\\\\\"{provider.capitalize()} ì›ë³¸ ì‘ë‹µì„ {raw_response_file}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n\\\\n    def prepare_review_request(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì „ ë¹„ìš© ì¶”ì • ë° ë©”ì‹œì§€ ì¤€ë¹„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            None\\\\n\\\\n        Raises:\\\\n            ContextLimitExceededError: ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì´ˆê³¼í•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        estimated_cost = self.estimate_review_cost(review_prompt)\\\\n\\\\n        if not estimated_cost.within_context_limit:\\\\n            raise ContextLimitExceededError(\\\\n                input_tokens=estimated_cost.input_tokens,\\\\n                context_limit=self.model.get(\\\\\\\"context_limit\\\\\\\"),\\\\n            )\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸: {estimated_cost.model}, \\\\\\\"\\\\n            f\\\\\\\"í† í° ìˆ˜: {estimated_cost.input_tokens}, \\\\\\\"\\\\n            f\\\\\\\"ë¹„ìš©: {estimated_cost.estimated_total_cost_usd} USD\\\\\\\"\\\\n        )\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ì €ì¥\\\\n        save_prompt(review_prompt.to_messages(), self.get_model_name())\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            Exception: API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ìš”ì²­ ì¤€ë¹„\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = self._create_client()\\\\n\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # API ìš”ì²­ ì†¡ì‹ \\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n            self.save_raw_response(completion)\\\\n\\\\n            # ì‘ë‹µ ì²˜ë¦¬\\\\n            if not completion:\\\\n                return ReviewResponse.get_empty_response()\\\\n\\\\n            return ReviewResponse.from_structured_response(completion)\\\\n\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n            return ReviewResponse.get_error_response(e)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 106}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 125}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\nfrom .token_utils import TokenUtils\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\nfrom .models import EstimatedCost\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nimport os\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom .models import EstimatedCost\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 183}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"code quality\", \"line_number\": 183, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” `analyze_diff_file` ë©”ì„œë“œì™€ ê´€ë ¨ ì„í¬íŠ¸(`os`, `DiffAnalysisResult`)ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” ì œê±°ëœ `--diff-file` CLI ì˜µì…˜ê³¼ ì—°ê²°ë˜ì–´ ìˆì—ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œë¥¼ ì œê±°í•˜ëŠ” ê²ƒì€ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê°„ê²°í•˜ê²Œ ìœ ì§€í•˜ê³  ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ì„ ì¤„ì´ëŠ” ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤.\", \"suggestion\": null, \"severity\": \"info\", \"original_code\": \"```python\\n\\n    @staticmethod\\n    def analyze_diff_file(file_path: str, model: str = \\\"gpt-4o\\\") -> DiffAnalysisResult:\\n        \\\"\\\"\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\n\\n        Args:\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\n\\n        Returns:\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\n        \\\"\\\"\\\"\\n        try:\\n            with open(file_path, encoding=\\\"utf-8\\\") as f:\\n                diff_content = f.read()\\n\\n            # ë¹„ìš© ì¶”ì •\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\n\\n            return DiffAnalysisResult(\\n                model=cost_info.model,\\n                input_tokens=cost_info.input_tokens,\\n                input_cost_usd=cost_info.input_cost_usd,\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\n                within_context_limit=cost_info.within_context_limit,\\n                character_count=len(diff_content),\\n                line_count=diff_content.count(\\\"\\\\n\\\") + 1,\\n                file_path=file_path,\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\n            )\\n        except Exception as e:\\n            return DiffAnalysisResult(\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\n                input_tokens=0,\\n                input_cost_usd=0.0,\\n                estimated_output_tokens=0,\\n                estimated_output_cost_usd=0.0,\\n                estimated_total_cost_usd=0.0,\\n                within_context_limit=False,\\n                character_count=0,\\n                line_count=0,\\n                file_path=file_path,\\n                file_size_kb=0.0,\\n                error=str(e),\\n            )\\n```\", \"improved_code\": \"```python\\n\\n```\"}, {\"type\": \"style\", \"line_number\": 0, \"file\": \"reviewer/src/utils/token/__init__.py\", \"description\": \"`TokenUtils`ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼(`_TokenUtilsWrapper`)ê°€ ì œê±°ë˜ê³ , `__init__.py` ë° `base_gateway.py`ì—ì„œ ì§ì ‘ ì„í¬íŠ¸í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì„í¬íŠ¸ ë©”ì»¤ë‹ˆì¦˜ì„ ë‹¨ìˆœí™”í•˜ê³  ì½”ë“œì˜ ê°€ë…ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ì§€ì—° ì„í¬íŠ¸ëŠ” íŠ¹ì • ìƒí™©ì—ì„œ ìœ ìš©í•  ìˆ˜ ìˆì§€ë§Œ, í•µì‹¬ ìœ í‹¸ë¦¬í‹°ì˜ ê²½ìš° ì§ì ‘ ì„í¬íŠ¸ê°€ ë” ëª…í™•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": null, \"severity\": \"info\", \"original_code\": \"```python\\n\\n\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\nclass _TokenUtilsWrapper:\\n    \\\"\\\"\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\n\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\n    \\\"\\\"\\\"\\n\\n    def __getattr__(self, name):\\n        from .token_utils import TokenUtils\\n\\n        return getattr(TokenUtils, name)\\n\\n\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\nTokenUtils = _TokenUtilsWrapper()\\n```\", \"improved_code\": \"```python\\nfrom .token_utils import TokenUtils\\n```\"}], \"summary\": \"ì œê³µëœ diffëŠ” CLIì—ì„œ `--diff-file` ì˜µì…˜ì„ ì œê±°í•˜ê³ , íŒŒì¼ì—ì„œ diff ë‚´ìš©ì„ ì½ì–´ì˜¤ëŠ” ê¸°ëŠ¥ì„ ì‚­ì œí•©ë‹ˆë‹¤. ë˜í•œ, `TokenUtils` ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê±°í•˜ê³  ì§ì ‘ ì„í¬íŠ¸í•˜ë„ë¡ ë³€ê²½í•˜ì—¬ ì½”ë“œ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” `analyze_diff_file` ë©”ì„œë“œë„ í•¨ê»˜ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"ì œê±°ëœ `--diff-file` ê¸°ëŠ¥ì— ëŒ€í•œ ì‚¬ìš©ì ë¬¸ì„œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\", \"`TokenUtils`ì˜ ì§ì ‘ ì„í¬íŠ¸ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œê°„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥(ë¯¸ë¯¸í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ì§€ë§Œ)ì„ í™•ì¸í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 46}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    repo_path = Path(args.repo_path)\\\\n    if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n        raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n    return run_git_diff(str(repo_path), args.commit_range)\\\\n```\\\", \\\"line_number\\\": 152}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\nfrom .token_utils import TokenUtils\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"design\", \"line_number\": 46, \"file\": \"reviewer/cli.py\", \"description\": \"CLI ì˜µì…˜ `--diff-file`ì´ ì œê±°ë˜ì–´ ì‚¬ìš©ìê°€ íŒŒì¼ë¡œë¶€í„° ì§ì ‘ diffë¥¼ ì…ë ¥í•˜ëŠ” ê¸°ëŠ¥ì´ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ì´ëŠ” í•˜ìœ„ í˜¸í™˜ì„±ì„ ê¹¨ëœ¨ë¦´ ìˆ˜ ìˆìœ¼ë©°, ë¬¸ì„œ ë° í…ŒìŠ¤íŠ¸ê°€ ì´ ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•˜ì§€ ì•Šì„ ê²½ìš° í˜¼ë€ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`--diff-file` ì˜µì…˜ì„ ë‹¤ì‹œ ë„ì…í•˜ê±°ë‚˜, ì œê±°í•  ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì‚¬ì „ ê²½ê³ ë¥¼ ì œê³µí•˜ê³  README ë° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ëª¨ë‘ ìµœì‹ í™”í•˜ì„¸ìš”. ë˜í•œ, ë©”ì´ì € ë²„ì „ ì—…ë°ì´íŠ¸ë¥¼ ê³ ë ¤í•˜ì—¬ breaking changeë¥¼ ëª…ì‹œí•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"review_parser.add_argument(\\n    \\\"--diff-file\\\", type=str, help=\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\"\\n)\", \"improved_code\": \"review_parser.add_argument(\\n    \\\"--diff-file\\\", type=str, help=\\\"(Deprecated) Git diff íŒŒì¼ ê²½ë¡œ (í–¥í›„ ì œê±° ì˜ˆì •, ëŒ€ì‹  --commit-range ì‚¬ìš©)\\\"\\n)\\n# ì´í›„ get_diff_contentì—ì„œ diff_file ì‚¬ìš© ì§€ì› ë¡œì§ ìœ ì§€\"}, {\"type\": \"bug\", \"line_number\": 152, \"file\": \"reviewer/cli.py\", \"description\": \"`get_diff_content` í•¨ìˆ˜ì—ì„œ `args.commit_range`ê°€ Noneì¸ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ìˆì–´, ê¸°ë³¸ê°’ì´ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ `run_git_diff` í˜¸ì¶œ ì‹œ ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ì´ë‚˜ ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"commit_rangeê°€ Noneì¼ ë•Œ ê¸°ë³¸ê°’(ì˜ˆ: HEAD~1..HEAD ë˜ëŠ” ì›Œí‚¹ ë””ë ‰í† ë¦¬ ë³€ê²½)ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•˜ê³ , ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ í”¼ë“œë°±ì„ ì œê³µí•˜ë„ë¡ ë¡œì§ì„ ì¶”ê°€í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"def get_diff_content(args: argparse.Namespace) -> str:\\n    # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\n    repo_path = Path(args.repo_path)\\n    if not repo_path.exists() or not (repo_path / \\\".git\\\").exists():\\n        raise ValueError(f\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\")\\n    return run_git_diff(str(repo_path), args.commit_range)\", \"improved_code\": \"def get_diff_content(args: argparse.Namespace) -> str:\\n    repo_path = Path(args.repo_path)\\n    if not repo_path.exists() or not (repo_path / \\\".git\\\").exists():\\n        raise ValueError(f\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\")\\n    commit_range = args.commit_range or \\\"HEAD~1..HEAD\\\"\\n    return run_git_diff(str(repo_path), commit_range)\"}, {\"type\": \"performance\", \"line_number\": null, \"file\": \"reviewer/src/utils/token/__init__.py\", \"description\": \"ì§ì ‘ `TokenUtils`ë¥¼ ì„í¬íŠ¸í•˜ë©´ì„œ ëª¨ë“ˆ ë¡œë”© ì‹œì ì— ëª¨ë“  ì¢…ì†ì„±ì„ ì¦‰ì‹œ ë¡œë“œí•˜ê²Œ ë˜ì–´, ì´ˆê¸° ì‹¤í–‰ ì†ë„ê°€ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"PEP 562ì˜ ëª¨ë“ˆ ìˆ˜ì¤€ `__getattr__`ì„ ì‚¬ìš©í•˜ì—¬ `TokenUtils`ë¥¼ ì§€ì—° ì„í¬íŠ¸í•˜ê±°ë‚˜, `importlib` ê¸°ë°˜ì˜ LazyLoaderë¥¼ í™œìš©í•´ í•„ìš”í•œ ì‹œì ì—ë§Œ ë¡œë“œë˜ë„ë¡ ê°œì„ í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\nclass _TokenUtilsWrapper:\\n    \\\"\\\"\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\n    ...\\nTokenUtils = _TokenUtilsWrapper()\", \"improved_code\": \"def __getattr__(name: str):\\n    if name == \\\"TokenUtils\\\":\\n        from .token_utils import TokenUtils\\n        return TokenUtils\\n    raise AttributeError(f\\\"module {__name__!r} has no attribute {name!r}\\\")\\n\\n__all__ = [ ... ]\"}], \"summary\": \"ì´ë²ˆ ì»¤ë°‹ì—ì„œëŠ” CLIì˜ `--diff-file` ì˜µì…˜ê³¼ ê´€ë ¨ ë¡œì§ì„ ì œê±°í•˜ê³ , `TokenUtils` ë˜í¼ë¥¼ ì‚­ì œí•˜ì—¬ ì§ì ‘ ì„í¬íŠ¸ ë°©ì‹ìœ¼ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ íŒŒì¼ ê¸°ë°˜ diff ì…ë ¥ ê¸°ëŠ¥ì´ ì‚¬ë¼ì§€ê³ , `args.commit_range` ë¯¸ì§€ì • ì‹œ ì²˜ë¦¬ê°€ ëˆ„ë½ë˜ì—ˆìœ¼ë©°, lazy import êµ¬ì¡°ê°€ ì œê±°ë˜ì–´ ì´ˆê¸° ë¡œë”© ì„±ëŠ¥ì— ì˜í–¥ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"score\": 6.0, \"recommendations\": [\"ì—”ë“œìœ ì € ì˜í–¥ì„ ìµœì†Œí™”í•˜ë„ë¡ ë³€ê²½ì‚¬í•­ì„ ëª…ì„¸í•˜ê³  ë¬¸ì„œí™”í•˜ì„¸ìš”.\", \"CLI ì£¼ìš” ì˜µì…˜ ì œê±° ì‹œ, í•˜ìœ„ í˜¸í™˜ì„± ë³´ì¥ì„ ìœ„í•´ deprecated ê²½ê³  ë° í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”.\", \"`get_diff_content`ì—ì„œ commit_range ê¸°ë³¸ê°’ì„ ì²˜ë¦¬í•˜ë„ë¡ ê°œì„ í•´ UXë¥¼ ë³´ê°•í•˜ì„¸ìš”.\", \"Lazy importê°€ í•„ìš”í•œ ê²½ìš° ëª¨ë“ˆ ìˆ˜ì¤€ `__getattr__` ë˜ëŠ” `importlib` ê¸°ë°˜ LazyLoaderë¥¼ í™œìš©í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_api_key_error import InvalidAPIKeyError\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef _validate_api_key(api_key: str, provider: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ê²€ì¦í•  API í‚¤\\\\n        provider: API ì œê³µì ì´ë¦„\\\\n\\\\n    Raises:\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ë¹ˆ ê°’ì´ê±°ë‚˜ ë„ˆë¬´ ì§§ì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not api_key or api_key.strip() == \\\\\\\"\\\\\\\":\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        raise InvalidAPIKeyError(provider, \\\\\\\"API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n\\\\n    if len(api_key) < 8:\\\\n        logger.error(\\\\n            f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        raise InvalidAPIKeyError(\\\\n            provider, \\\\\\\"API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤\\\\\\\"\\\\n        )\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤\\\\n\\\\n    Raises:\\\\n        APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        api_key = config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n        _validate_api_key(api_key, provider)\\\\n        return api_key\\\\n\\\\n    logger.error(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n    raise APIKeyNotFoundError(provider)\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # API í‚¤ ìœ íš¨ì„± ê²€ì¦\\\\n        _validate_api_key(api_key, provider)\\\\n\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except InvalidAPIKeyError:\\\\n        # ì´ë¯¸ ë¡œê·¸ëŠ” _validate_api_keyì—ì„œ ê¸°ë¡ë¨\\\\n        return False\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_api_key_error import InvalidAPIKeyError\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\ndef _validate_api_key(api_key: str, provider: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ê²€ì¦í•  API í‚¤\\\\n        provider: API ì œê³µì ì´ë¦„\\\\n\\\\n    Raises:\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ë¹ˆ ê°’ì´ê±°ë‚˜ ë„ˆë¬´ ì§§ì€ ê²½ìš°\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not api_key or api_key.strip() == \\\\\\\"\\\\\\\":\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        raise InvalidAPIKeyError(provider, \\\\\\\"API í‚¤ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n\\\\n    if len(api_key) < 8:\\\\n        logger.error(\\\\n            f\\\\\\\"{provider.upper()} API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.\\\\\\\"\\\\n        )\\\\n        raise InvalidAPIKeyError(\\\\n            provider, \\\\\\\"API í‚¤ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤\\\\\\\"\\\\n        )\\\\n\\\\n\\\\n```\\\", \\\"line_number\\\": 61}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        API í‚¤ (í‚¤ê°€ ì—†ëŠ” ê²½ìš° ValueError ë°œìƒ)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        API í‚¤\\\\n\\\\n    Raises:\\\\n        APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        InvalidAPIKeyError: API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        return config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        api_key = config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n        _validate_api_key(api_key, provider)\\\\n        return api_key\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n    raise ValueError(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.error(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n    raise APIKeyNotFoundError(provider)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # API í‚¤ ìœ íš¨ì„± ê²€ì¦\\\\n        _validate_api_key(api_key, provider)\\\\n\\\\n```\\\", \\\"line_number\\\": 120}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    except InvalidAPIKeyError:\\\\n        # ì´ë¯¸ ë¡œê·¸ëŠ” _validate_api_keyì—ì„œ ê¸°ë¡ë¨\\\\n        return False\\\\n```\\\", \\\"line_number\\\": 127}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/exceptions/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì˜ˆì™¸ í´ë˜ìŠ¤ë“¤ì„ ì •ì˜í•˜ëŠ” íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.exceptions.diff_parsing_error import DiffParsingError\\\\nfrom reviewer.src.exceptions.invalid_api_key_error import InvalidAPIKeyError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.exceptions.llm_gateway_error import LLMGatewayError\\\\nfrom reviewer.src.exceptions.unsupported_model_error import UnsupportedModelError\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"LLMGatewayError\\\\\\\",\\\\n    \\\\\\\"APIKeyNotFoundError\\\\\\\",\\\\n    \\\\\\\"InvalidModelProviderError\\\\\\\",\\\\n    \\\\\\\"UnsupportedModelError\\\\\\\",\\\\n    \\\\\\\"UnsupportedProviderError\\\\\\\",\\\\n    \\\\\\\"DiffParsingError\\\\\\\",\\\\n    \\\\\\\"ContextLimitExceededError\\\\\\\",\\\\n    \\\\\\\"InvalidAPIKeyError\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.exceptions.invalid_api_key_error import InvalidAPIKeyError\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"InvalidAPIKeyError\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"design\", \"line_number\": 139, \"file\": \"reviewer/src/config.py\", \"description\": \"ê¸°ë³¸ ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ë“¤(get_default_results_dir, get_default_raw_log_dir ë“±)ì—ì„œ ì„¤ì • íŒŒì¼ì„ í™•ì¸í•˜ê³  í”Œë«í¼ë³„ ê¸°ë³¸ ê²½ë¡œë¥¼ ê²°ì •í•˜ëŠ” ë¡œì§ì´ ë°˜ë³µë©ë‹ˆë‹¤. ì´ëŠ” ì½”ë“œ ì¤‘ë³µì„ ì•¼ê¸°í•˜ë©° ìœ ì§€ë³´ìˆ˜ë¥¼ ì–´ë µê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì„¤ì •ì—ì„œ ê²½ë¡œë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ í”Œë«í¼ë³„ ê¸°ë³¸ ê²½ë¡œë¥¼ ê²°ì •í•˜ëŠ” ê³µí†µ í—¬í¼ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì½”ë“œ ì¤‘ë³µì„ ì¤„ì´ì„¸ìš”. ì´ í—¬í¼ í•¨ìˆ˜ëŠ” ì„¤ì • í‚¤ì™€ í”Œë«í¼ë³„ ê¸°ë³¸ ê²½ë¡œ ë¡œì§ì„ ì¸ìë¡œ ë°›ì•„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"def get_default_results_dir() -> Path:\\n    \\\"\\\"\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    config = load_config()\\n\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\n    if \\\"default_results_dir\\\" in config[\\\"paths\\\"]:\\n        path = config[\\\"paths\\\"][\\\"default_results_dir\\\"]\\n        return Path(os.path.expanduser(path))\\n\\n    # ê¸°ë³¸ ìœ„ì¹˜\\n    if sys.platform == \\\"darwin\\\":\\n        return MAC_CONFIG_DIR / \\\"results\\\"\\n    else:\\n        return Path.home() / \\\".local\\\" / \\\"share\\\" / \\\"reviewer\\\" / \\\"results\\\"\", \"improved_code\": \"def _get_default_path(config_key: str, macos_subdir: str, other_path: Path) -> Path:\\n    config = load_config()\\n    if config_key in config[\\\"paths\\\"]:\\n        path = config[\\\"paths\\\"][config_key]\\n        return Path(os.path.expanduser(path))\\n    \\n    if sys.platform == \\\"darwin\\\":\\n        return MAC_CONFIG_DIR / macos_subdir\\n    else:\\n        return other_path\\n\\ndef get_default_results_dir() -> Path:\\n    \\\"\\\"\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    return _get_default_path(\\n        \\\"default_results_dir\\\", \\n        \\\"results\\\", \\n        Path.home() / \\\".local\\\" / \\\"share\\\" / \\\"reviewer\\\" / \\\"results\\\"\\n    )\"}, {\"type\": \"style\", \"line_number\": 20, \"file\": \"reviewer/src/config.py\", \"description\": \"`MAC_CONFIG_DIR` ìƒìˆ˜ëŠ” macOSì˜ ì„¤ì • ë””ë ‰í† ë¦¬ë¥¼ ì˜ë¯¸í•˜ì§€ë§Œ, ì½”ë“œ ë‚´ì—ì„œ ë‹¤ë¥¸ í”Œë«í¼ì˜ ê¸°ë³¸ ê²½ë¡œì™€ macOSì˜ ì„œë¸Œ ë””ë ‰í† ë¦¬ ê²½ë¡œ ê²°ì • ë°©ì‹ì´ ì¼ê´€ë˜ì§€ ì•Šì•„ í˜¼ë™ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ìƒìˆ˜ëŠ” macOSì˜ íŠ¹ì • ê¸°ë³¸ ê²½ë¡œë§Œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\", \"suggestion\": \"ìƒìˆ˜ ì´ë¦„ì„ `MACOS_APP_SUPPORT_BASE_DIR`ê³¼ ê°™ì´ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì—¬ í•´ë‹¹ ìƒìˆ˜ê°€ ë‚˜íƒ€ë‚´ëŠ” ë²”ìœ„ë¥¼ ëª…í™•íˆ í•˜ê±°ë‚˜, í”Œë«í¼ë³„ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ê²°ì •í•˜ëŠ” ë¡œì§ì„ ì¶”ìƒí™”í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"MAC_CONFIG_DIR = Path.home() / \\\"Library\\\" / \\\"Application Support\\\" / \\\"reviewer\\\"\", \"improved_code\": \"MACOS_APP_SUPPORT_BASE_DIR = Path.home() / \\\"Library\\\" / \\\"Application Support\\\" / \\\"reviewer\\\"\\n# ì´í›„ ì½”ë“œì—ì„œ MAC_CONFIG_DIR ëŒ€ì‹  MACOS_APP_SUPPORT_BASE_DIR ì‚¬ìš©\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ API í‚¤ ìœ íš¨ì„± ê²€ì¦ ë¡œì§(_validate_api_key í•¨ìˆ˜)ê³¼ API í‚¤ ê´€ë ¨ íŠ¹ì • ì˜ˆì™¸(APIKeyNotFoundError, InvalidAPIKeyError) ì²˜ë¦¬ë¥¼ ë„ì…í•˜ì—¬ ì„¤ì • ëª¨ë“ˆì˜ ê²¬ê³ ì„±ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤. ì„¤ì • íŒŒì¼ ì €ì¥ ì‹œ ì†Œìœ ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ íŒŒì¼ ê¶Œí•œì„ ì„¤ì •í•˜ëŠ” ë³´ì•ˆ ì¡°ì¹˜ë„ í¬í•¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ì½”ë“œì˜ ì•ˆì •ì„±ê³¼ ì˜¤ë¥˜ ì²˜ë¦¬ê°€ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ê¸°ë³¸ ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ì—ì„œ ìœ ì‚¬í•œ ë¡œì§ì´ ë°˜ë³µë˜ëŠ” ë¶€ë¶„ê³¼ í”Œë«í¼ë³„ ê²½ë¡œ ê´€ë ¨ ìƒìˆ˜ ì´ë¦„ì˜ ëª…í™•ì„±ì€ ê°œì„ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"ê¸°ë³¸ ë””ë ‰í† ë¦¬ ê²½ë¡œ ê²°ì • ë¡œì§ì˜ ì¤‘ë³µì„ ì œê±°í•˜ê¸° ìœ„í•´ ê³µí†µ í—¬í¼ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.\", \"í”Œë«í¼ë³„ ê¸°ë³¸ ê²½ë¡œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒìˆ˜ ì´ë¦„ì„ ë” ëª…í™•í•˜ê²Œ ë³€ê²½í•˜ì—¬ ì½”ë“œì˜ ê°€ë…ì„±ì„ ë†’ì´ì„¸ìš”.\", \"í‘œì¤€ í”Œë«í¼ë³„ ë””ë ‰í† ë¦¬ ìœ„ì¹˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `appdirs`ì™€ ê°™ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            logger.warning(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        logger.info(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\n```\\\", \\\"line_number\\\": 22}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 31}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 198}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"13\\\", \\\"original_code\\\": \\\"```python\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"14\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"15\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"16\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"17\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"18\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"19\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"20\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config list\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 275}, {\\\"hunk_idx\\\": \\\"21\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 294}, {\\\"hunk_idx\\\": \\\"22\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"23\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"24\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n    logger.info(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    logger.info(\\\\\\\"-\\\\\\\" * 80)\\\\n```\\\", \\\"line_number\\\": 324}, {\\\"hunk_idx\\\": \\\"25\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"26\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"27\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.warning(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"28\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.warning(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"29\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    logger.info(\\\\\\\"\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 373}, {\\\"hunk_idx\\\": \\\"30\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # ì—¬ê¸°ì„œëŠ” ë‚´ìš©ì„ printë¡œ ìœ ì§€ (ì½˜ì†” ì¶œë ¥ì— ì í•©)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"31\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.warning(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"32\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"33\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"34\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"35\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n            \\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\"\\\\n        )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"36\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"37\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"38\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"39\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"40\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.warning(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        logger.info(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 448}, {\\\"hunk_idx\\\": \\\"41\\\", \\\"original_code\\\": \\\"```python\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                            logger.info(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"42\\\", \\\"original_code\\\": \\\"```python\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                            logger.error(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"43\\\", \\\"original_code\\\": \\\"```python\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                        logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"44\\\", \\\"original_code\\\": \\\"```python\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                    logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"45\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"46\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.warning(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"47\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"48\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"49\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"50\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        logger.info(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 537}, {\\\"hunk_idx\\\": \\\"51\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n```\\\", \\\"line_number\\\": 543}, {\\\"hunk_idx\\\": \\\"52\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"53\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤ (í‚¤ê°€ ì—†ëŠ” ê²½ìš° ValueError ë°œìƒ)\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        return config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n\\\\n    raise ValueError(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/base_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom __future__ import annotations\\\\n\\\\nimport abc\\\\nimport json\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.utils import save_prompt\\\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\\\nfrom reviewer.src.utils.logging import get_logger\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import (\\\\n    DiffCheckResult,\\\\n    EstimatedCost,\\\\n    ReviewResponse,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n\\\\n\\\\nclass BaseGateway(abc.ABC):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = self._load_api_key()\\\\n\\\\n    @abc.abstractmethod\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Providerì— ë§ëŠ” API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        ê° í”„ë¡œë°”ì´ë”ë³„ API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n        ê° í•˜ìœ„ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ LLM í”„ë¡œë°”ì´ë”ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    def get_model_name(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ ì „ì²´ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ í”„ë¡œë°”ì´ë”ì— ë§ëŠ” LLM í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            Instructor: êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” LLM í´ë¼ì´ì–¸íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return LLMClientFactory.create_client(self.get_provider(), self.api_key)\\\\n\\\\n    def estimate_review_cost(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì˜ ì˜ˆìƒ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´ (ReviewPrompt ë˜ëŠ” ReviewPromptWithFileContent)\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        combined_text = \\\\\\\"\\\\\\\"\\\\n        combined_text += review_prompt.system_prompt.content + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n        for user_prompt in review_prompt.user_prompts:\\\\n            combined_text += user_prompt.to_message()[\\\\\\\"content\\\\\\\"] + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        return TokenUtils.estimate_cost(combined_text, model_name)\\\\n\\\\n    def check_diff_size(self, diff_content: str) -> DiffCheckResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Diff ë‚´ìš©ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê³  ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            diff_content: diff ë‚´ìš©\\\\n\\\\n        Returns:\\\\n            DiffCheckResult: í¬ê¸° ë° ë¹„ìš© ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        cost_info = TokenUtils.estimate_cost(diff_content, model_name)\\\\n\\\\n        # DiffCheckResult ê°ì²´ ìƒì„±í•˜ì—¬ ë°˜í™˜\\\\n        return DiffCheckResult(\\\\n            model=cost_info.model,\\\\n            input_tokens=cost_info.input_tokens,\\\\n            input_cost_usd=cost_info.input_cost_usd,\\\\n            estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n            estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n            estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n            within_context_limit=cost_info.within_context_limit,\\\\n            character_count=len(diff_content),\\\\n            line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n        )\\\\n\\\\n    def save_raw_response(self, completion: StructuredReviewResponse) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"LLM API ì›ë³¸ ì‘ë‹µì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            completion: API ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            provider = self.get_provider()\\\\n            current_time = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n\\\\n            with open(raw_response_file, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                f.write(f\\\\\\\"# {provider.capitalize()} ì›ë³¸ ì‘ë‹µ\\\\\\\\n\\\\\\\\n\\\\\\\")\\\\n                try:\\\\n                    raw_response = completion.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n                    f.write(\\\\n                        json.dumps(\\\\n                            raw_response, indent=2, default=str, ensure_ascii=False\\\\n                        )\\\\n                    )\\\\n                except Exception:\\\\n                    f.write(str(completion))\\\\n            logger.info(\\\\n                f\\\\\\\"{provider.capitalize()} ì›ë³¸ ì‘ë‹µì„ {raw_response_file}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n\\\\n    def prepare_review_request(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì „ ë¹„ìš© ì¶”ì • ë° ë©”ì‹œì§€ ì¤€ë¹„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            None\\\\n\\\\n        Raises:\\\\n            ContextLimitExceededError: ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì´ˆê³¼í•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        estimated_cost = self.estimate_review_cost(review_prompt)\\\\n\\\\n        if not estimated_cost.within_context_limit:\\\\n            raise ContextLimitExceededError(\\\\n                input_tokens=estimated_cost.input_tokens,\\\\n                context_limit=self.model.get(\\\\\\\"context_limit\\\\\\\"),\\\\n            )\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸: {estimated_cost.model}, \\\\\\\"\\\\n            f\\\\\\\"í† í° ìˆ˜: {estimated_cost.input_tokens}, \\\\\\\"\\\\n            f\\\\\\\"ë¹„ìš©: {estimated_cost.estimated_total_cost_usd} USD\\\\\\\"\\\\n        )\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ì €ì¥\\\\n        save_prompt(review_prompt.to_messages(), self.get_model_name())\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            Exception: API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ìš”ì²­ ì¤€ë¹„\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = self._create_client()\\\\n\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # API ìš”ì²­ ì†¡ì‹ \\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n            self.save_raw_response(completion)\\\\n\\\\n            # ì‘ë‹µ ì²˜ë¦¬\\\\n            if not completion:\\\\n                return ReviewResponse.get_empty_response()\\\\n\\\\n            return ReviewResponse.from_structured_response(completion)\\\\n\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n            return ReviewResponse.get_error_response(e)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_raw_log_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„±\\\\nLOG_DIR = get_default_raw_log_dir()\\\\nLOG_DIR.mkdir(exist_ok=True, parents=True)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n```\\\", \\\"line_number\\\": 29}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 106}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 128}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n            raw_response_file = LOG_DIR / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"13\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"14\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"15\\\", \\\"original_code\\\": \\\"```python\\\\n            completion = client.chat.completions.create(\\\\n                response_model=StructuredReviewResponse, max_retries=2, **params\\\\n            )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n```\\\", \\\"line_number\\\": 241}, {\\\"hunk_idx\\\": \\\"16\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/claude_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"Anthropic Claude APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport logging\\\\nfrom typing import Any\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\nfrom . import get_api_key\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\nclass ClaudeGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Anthropic Claude APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: API í‚¤\\\\n\\\\n        Raises:\\\\n            APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.debug(\\\\\\\"Claude API í‚¤ ë¡œë“œ ì‹œë„ ì¤‘\\\\\\\")\\\\n        api_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n        if not api_key:\\\\n            logger.error(\\\\\\\"Claude API í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\\\\\")\\\\n            raise APIKeyNotFoundError(\\\\\\\"claude\\\\\\\")\\\\n        logger.debug(\\\\\\\"Claude API í‚¤ ë¡œë“œ ì„±ê³µ\\\\\\\")\\\\n        return api_key\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n\\\\n        Raises:\\\\n            InvalidModelProviderError: Claude ëª¨ë¸ì´ ì•„ë‹Œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] != \\\\\\\"claude\\\\\\\":\\\\n            logger.warning(f\\\\\\\"{model_info['full_name']}ì€(ëŠ”) Claude ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n            raise InvalidModelProviderError(model_info[\\\\\\\"full_name\\\\\\\"], \\\\\\\"Claude\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\n                f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\"\\\\n            )\\\\n            self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Claude API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.debug(\\\\\\\"Claude API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì¤‘\\\\\\\")\\\\n        # ê¸°ë³¸ íŒŒë¼ë¯¸í„° ì„¤ì •\\\\n        params = {\\\\n            \\\\\\\"model\\\\\\\": self.get_model_name(),\\\\n            \\\\\\\"messages\\\\\\\": messages,\\\\n            # ClaudeëŠ” max_tokens íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤, Claude 3.7 Sonnet ê¸°ì¤€,\\\\n            # normal 8192, thinking 64000\\\\n            \\\\\\\"max_tokens\\\\\\\": 8192,\\\\n        }\\\\n\\\\n        # ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° ì„¤ì •\\\\n        model_params = self.model[\\\\\\\"params\\\\\\\"]\\\\n        params.update(model_params)\\\\n\\\\n        logger.debug(f\\\\\\\"Claude API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì™„ë£Œ: {self.get_model_name()}\\\\\\\")\\\\n        return params\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport logging\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 15}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"Claude API í‚¤ ë¡œë“œ ì‹œë„ ì¤‘\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\\\\"Claude API í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"Claude API í‚¤ ë¡œë“œ ì„±ê³µ\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"ê²½ê³ : {model_info['full_name']}ì€(ëŠ”) Claude ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.warning(f\\\\\\\"{model_info['full_name']}ì€(ëŠ”) Claude ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"Claude API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì¤‘\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(f\\\\\\\"Claude API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì™„ë£Œ: {self.get_model_name()}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/google_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport logging\\\\nfrom typing import Any\\\\n\\\\nfrom google.genai import types\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\nfrom . import get_api_key\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\nclass GoogleGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: API í‚¤\\\\n\\\\n        Raises:\\\\n            APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.debug(\\\\\\\"Google API í‚¤ ë¡œë“œ ì‹œë„ ì¤‘\\\\\\\")\\\\n        api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n        if not api_key:\\\\n            logger.error(\\\\\\\"Google API í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\\\\\")\\\\n            raise APIKeyNotFoundError(\\\\\\\"google\\\\\\\")\\\\n        logger.debug(\\\\\\\"Google API í‚¤ ë¡œë“œ ì„±ê³µ\\\\\\\")\\\\n        return api_key\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n\\\\n        Raises:\\\\n            InvalidModelProviderError: Google ëª¨ë¸ì´ ì•„ë‹Œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] != \\\\\\\"google\\\\\\\":\\\\n            logger.warning(f\\\\\\\"{model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n            raise InvalidModelProviderError(model_info[\\\\\\\"full_name\\\\\\\"], \\\\\\\"Google\\\\\\\")\\\\n        else:\\\\n            logger.info(\\\\n                f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\"\\\\n            )\\\\n            self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.debug(\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì¤‘\\\\\\\")\\\\n        system_prompt = None\\\\n        contents = []\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì™€ ìœ ì € ë©”ì‹œì§€ êµ¬ë¶„\\\\n        for message in messages:\\\\n            role = message.get(\\\\\\\"role\\\\\\\", \\\\\\\"\\\\\\\")\\\\n            content = message.get(\\\\\\\"content\\\\\\\", \\\\\\\"\\\\\\\")\\\\n\\\\n            if role == \\\\\\\"system\\\\\\\":\\\\n                system_prompt = content\\\\n            elif role == \\\\\\\"user\\\\\\\":\\\\n                contents.append(content)\\\\n\\\\n        # ì˜¨ë„ ì„¤ì • (ê¸°ë³¸ê°’: 0.0)\\\\n        temperature = self.model[\\\\\\\"params\\\\\\\"].get(\\\\\\\"temperature\\\\\\\", 0.0)\\\\n\\\\n        # config ìƒì„±\\\\n        generation_config = types.GenerateContentConfig(\\\\n            temperature=temperature,\\\\n            system_instruction=system_prompt,\\\\n            response_mime_type=\\\\\\\"application/json\\\\\\\",\\\\n            response_schema=StructuredReviewResponse,\\\\n        )\\\\n\\\\n        # Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n        params = {\\\\n            \\\\\\\"model\\\\\\\": self.model[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\".join(contents) if contents else \\\\\\\"\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": generation_config,\\\\n        }\\\\n\\\\n        logger.debug(\\\\n            f\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì™„ë£Œ: {self.model['full_name']}\\\\\\\"\\\\n        )\\\\n        return params\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport logging\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import ReviewResponse, StructuredReviewResponse\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 18}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"Google API í‚¤ ë¡œë“œ ì‹œë„ ì¤‘\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\\\\"Google API í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"Google API í‚¤ ë¡œë“œ ì„±ê³µ\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"ê²½ê³ : {model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.warning(f\\\\\\\"{model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì¤‘\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\n            f\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì™„ë£Œ: {self.model['full_name']}\\\\\\\"\\\\n        )\\\\n```\\\", \\\"line_number\\\": 100}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ë² ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ìš”ì²­ ì¤€ë¹„ ë©”ì†Œë“œ í™œìš©\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # Google Gemini í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = genai.Client(api_key=self.api_key)\\\\n\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # Gemini API ìš”ì²­ ì†¡ì‹ \\\\n            response = client.models.generate_content(**params)\\\\n\\\\n            # êµ¬ì¡°í™”ëœ ì‘ë‹µ ìƒì„±\\\\n            # í…ìŠ¤íŠ¸ ì‘ë‹µì„ StructuredReviewResponse í˜•ì‹ìœ¼ë¡œ íŒŒì‹±\\\\n            try:\\\\n                response_text = response.text\\\\n                if response_text is None:\\\\n                    return ReviewResponse.get_empty_response()\\\\n\\\\n                structured_response = StructuredReviewResponse.model_validate_json(\\\\n                    response_text\\\\n                )\\\\n\\\\n                # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n                self.save_raw_response(structured_response)\\\\n\\\\n                # ì‘ë‹µ ì²˜ë¦¬\\\\n                if not structured_response:\\\\n                    return ReviewResponse.get_empty_response()\\\\n\\\\n                return ReviewResponse.from_structured_response(structured_response)\\\\n\\\\n            except Exception as parse_error:\\\\n                print(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                print(f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text}\\\\\\\")\\\\n                return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n        except Exception as e:\\\\n            return ReviewResponse.get_error_response(e)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 103}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/openai_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"OpenAI APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport logging\\\\nfrom typing import Any\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\nfrom . import get_api_key\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\nclass OpenAIGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"OpenAI APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: API í‚¤\\\\n\\\\n        Raises:\\\\n            APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.debug(\\\\\\\"OpenAI API í‚¤ ë¡œë“œ ì‹œë„ ì¤‘\\\\\\\")\\\\n        api_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n        if not api_key:\\\\n            logger.error(\\\\\\\"OpenAI API í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\\\\\")\\\\n            raise APIKeyNotFoundError(\\\\\\\"openai\\\\\\\")\\\\n        logger.debug(\\\\\\\"OpenAI API í‚¤ ë¡œë“œ ì„±ê³µ\\\\\\\")\\\\n        return api_key\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model_info: model_info ê°ì²´\\\\n\\\\n        Raises:\\\\n            InvalidModelProviderError: OpenAI ëª¨ë¸ì´ ì•„ë‹Œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] != \\\\\\\"openai\\\\\\\":\\\\n            logger.warning(f\\\\\\\"{model_info['full_name']}ì€(ëŠ”) OpenAI ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n            raise InvalidModelProviderError(model_info[\\\\\\\"full_name\\\\\\\"], \\\\\\\"OpenAI\\\\\\\")\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\"\\\\n        )\\\\n        self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"OpenAI API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.debug(\\\\\\\"OpenAI API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì¤‘\\\\\\\")\\\\n        # ê¸°ë³¸ íŒŒë¼ë¯¸í„° ì„¤ì •\\\\n        params = {\\\\n            \\\\\\\"model\\\\\\\": self.get_model_name(),\\\\n            \\\\\\\"messages\\\\\\\": messages,\\\\n        }\\\\n\\\\n        # ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° ì„¤ì •\\\\n        model_params = self.model[\\\\\\\"params\\\\\\\"]\\\\n        params.update(model_params)\\\\n\\\\n        logger.debug(f\\\\\\\"OpenAI API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì™„ë£Œ: {self.get_model_name()}\\\\\\\")\\\\n        return params\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport logging\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 15}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"OpenAI API í‚¤ ë¡œë“œ ì‹œë„ ì¤‘\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\\\\"OpenAI API í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"OpenAI API í‚¤ ë¡œë“œ ì„±ê³µ\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"ê²½ê³ : {model_info['full_name']}ì€(ëŠ”) OpenAI ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.warning(f\\\\\\\"{model_info['full_name']}ì€(ëŠ”) OpenAI ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\"\\\\n        )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(\\\\\\\"OpenAI API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì¤‘\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.debug(f\\\\\\\"OpenAI API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„± ì™„ë£Œ: {self.get_model_name()}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .prompt_utils import save_prompt\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=0\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 3}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompt_utils.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ì™€ ê´€ë ¨ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport json\\\\nfrom datetime import datetime\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_prompt_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_prompt_{timestamp}_{model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(messages, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_review_prompt_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n```\\\", \\\"line_number\\\": 19}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/models.py\\\", \\\"file_content\\\": \\\"import logging\\\\nfrom enum import Enum\\\\nfrom typing import Optional\\\\n\\\\nfrom pydantic import BaseModel, Field\\\\n\\\\nfrom reviewer.src.diff_parser.models.diff_result import DiffResult\\\\n\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n\\\\n# Structured Outputsìš© ìŠ¤í‚¤ë§ˆ í´ë˜ìŠ¤ (ê¸°ë³¸ê°’ ì—†ìŒ)\\\\nclass IssueSeverityEnum(str, Enum):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì´ìŠˆ ì‹¬ê°ë„ ì—´ê±°í˜•\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    INFO = \\\\\\\"info\\\\\\\"\\\\n    WARNING = \\\\\\\"warning\\\\\\\"\\\\n    ERROR = \\\\\\\"error\\\\\\\"\\\\n\\\\n\\\\nclass StructuredReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int]\\\\n    file: Optional[str]\\\\n    description: str\\\\n    suggestion: Optional[str]\\\\n    severity: IssueSeverityEnum\\\\n    original_code: Optional[str]  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str]  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n\\\\nclass StructuredReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Structured Outputsìš© ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[StructuredReviewIssue]\\\\n    summary: str\\\\n    score: Optional[float]\\\\n    recommendations: list[str]\\\\n\\\\n\\\\nclass ReviewRequest(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ìš”ì²­ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    diff_content: str\\\\n    processed_diff: DiffResult\\\\n    file_paths: list[str] = Field(default_factory=list)\\\\n    review_focus: Optional[str] = None\\\\n    use_full_context: bool = True\\\\n    model: str\\\\n\\\\n\\\\nclass ReviewIssue(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì´ìŠˆ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    type: str\\\\n    line_number: Optional[int] = None\\\\n    file: Optional[str] = None\\\\n    description: str\\\\n    suggestion: Optional[str] = None\\\\n    severity: str = \\\\\\\"info\\\\\\\"  # info, warning, error\\\\n    original_code: Optional[str] = None  # ë¦¬ë·° ëŒ€ìƒ ì½”ë“œ\\\\n    improved_code: Optional[str] = None  # ê°œì„ ëœ ì½”ë“œ\\\\n\\\\n    @staticmethod\\\\n    def from_structured_issue(\\\\n        issue: StructuredReviewIssue, index: int = 0\\\\n    ) -> \\\\\\\"ReviewIssue\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´ì—ì„œ ReviewIssue ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            issue: êµ¬ì¡°í™”ëœ ì´ìŠˆ ê°ì²´\\\\n            index: ë””ë²„ê¹…ì„ ìœ„í•œ ì´ìŠˆ ì¸ë±ìŠ¤\\\\n\\\\n        Returns:\\\\n            ReviewIssue: ë³€í™˜ëœ ì´ìŠˆ ê°ì²´\\\\n\\\\n        Raises:\\\\n            Exception: ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            # severity ì²˜ë¦¬ (ëª¨ë“  ê²Œì´íŠ¸ì›¨ì´ì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬)\\\\n            severity_value = issue.severity.value\\\\n\\\\n            return ReviewIssue(\\\\n                type=issue.type,\\\\n                line_number=issue.line_number,\\\\n                file=issue.file,\\\\n                description=issue.description,\\\\n                suggestion=issue.suggestion,\\\\n                severity=severity_value,\\\\n                original_code=issue.original_code,\\\\n                improved_code=issue.improved_code,\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n            raise\\\\n\\\\n\\\\nclass ReviewResponse(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·° ì‘ë‹µ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    issues: list[ReviewIssue] = Field(default_factory=list)\\\\n    summary: str\\\\n    score: Optional[float] = None\\\\n    recommendations: list[str] = Field(default_factory=list)\\\\n\\\\n    @staticmethod\\\\n    def from_structured_response(\\\\n        structured_response: StructuredReviewResponse,\\\\n    ) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´ì—ì„œ ReviewResponse ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            structured_response: êµ¬ì¡°í™”ëœ ì‘ë‹µ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë³€í™˜ëœ ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        issues = []\\\\n\\\\n        # ì´ìŠˆ ë³€í™˜\\\\n        for i, issue in enumerate(structured_response.issues):\\\\n            try:\\\\n                issues.append(ReviewIssue.from_structured_issue(issue, i))\\\\n            except Exception:  # noqa: S112\\\\n                # ê°œë³„ ì´ìŠˆ ë³€í™˜ ì‹¤íŒ¨ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì† ì§„í–‰\\\\n                continue\\\\n\\\\n        # ì˜µì…”ë„ í•„ë“œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\\\\n        return ReviewResponse(\\\\n            issues=issues,\\\\n            summary=structured_response.summary,\\\\n            score=structured_response.score,\\\\n            recommendations=structured_response.recommendations,\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_empty_response() -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ì–´ìˆëŠ” ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ë©”ì‹œì§€ê°€ í¬í•¨ëœ ë¹ˆ ë¦¬ë·° ì‘ë‹µ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=\\\\\\\"LLM ì‘ë‹µì´ ë¹„ì–´ìˆê±°ë‚˜ ë¶ˆì™„ì „í•©ë‹ˆë‹¤.\\\\\\\",\\\\n            recommendations=[\\\\\\\"ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë‚˜ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def get_error_response(error: Exception) -> \\\\\\\"ReviewResponse\\\\\\\":\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"API ì˜¤ë¥˜ì— ëŒ€í•œ ì‘ë‹µ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            error: ë°œìƒí•œ ì˜ˆì™¸\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ì—ëŸ¬ ì •ë³´ê°€ í¬í•¨ëœ ë¦¬ë·° ì‘ë‹µ\\\\n\\\\n        Raises:\\\\n            Exception: ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° ì¬ë°œìƒ\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        import traceback\\\\n\\\\n        import requests\\\\n\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n        traceback.print_exc()\\\\n\\\\n        # ìš”ì²­ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°\\\\n        if isinstance(error, requests.RequestException):\\\\n            raise Exception(f\\\\\\\"API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\") from error\\\\n\\\\n        # ê¸°íƒ€ ì˜ˆì™¸ ì²˜ë¦¬ (í† í° ì œí•œ, íŒŒì‹± ì˜¤ë¥˜ ë“±)\\\\n        return ReviewResponse(\\\\n            issues=[],\\\\n            summary=f\\\\\\\"LLM API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\",\\\\n            recommendations=[\\\\\\\"ìš”ì²­ ë‚´ìš©ì„ ì¤„ì´ê±°ë‚˜ ë‹¤ë¥¸ ëª¨ë¸ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”.\\\\\\\"],\\\\n        )\\\\n\\\\n\\\\nclass EstimatedCost(BaseModel):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¹„ìš© ì¶”ì • ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    model: str\\\\n    input_tokens: int\\\\n    input_cost_usd: float\\\\n    estimated_output_tokens: int\\\\n    estimated_output_cost_usd: float\\\\n    estimated_total_cost_usd: float\\\\n    within_context_limit: bool\\\\n\\\\n\\\\nclass DiffCheckResult(EstimatedCost):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff í¬ê¸° ë° ë¹„ìš© ì •ë³´ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    character_count: int\\\\n    line_count: int\\\\n\\\\n\\\\nclass DiffAnalysisResult(DiffCheckResult):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Diff íŒŒì¼ ë¶„ì„ ê²°ê³¼ ëª¨ë¸\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    file_path: str\\\\n    file_size_kb: float\\\\n    error: Optional[str] = None  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‚¬ìš©\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nimport logging\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nlogger = logging.getLogger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 9}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(f\\\\\\\"ì´ìŠˆ #{index + 1} ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {str(e)}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.warning(\\\\\\\"ì‘ë‹µì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"API ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(error)}\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import get_api_key\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 11}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 126, \"file\": \"reviewer/src/ui.py\", \"description\": \"ì‚¬ì´ë“œë°”ì— í•œêµ­ì–´ UI ì¤‘ ì¼ë¶€ë§Œ ì˜ì–´(\\\"reviewRequest\\\")ë¡œ í‘œì‹œë˜ì–´ ìˆì–´ ì‚¬ìš©ì ê²½í—˜ì´ ì¼ê´€ì„± ì—†ê³  ê°€ë…ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.\", \"suggestion\": \"ëª¨ë“  UI ë¬¸êµ¬ë¥¼ í•œêµ­ì–´ë¡œ í†µì¼í•©ë‹ˆë‹¤. ì˜ˆ: \\\"reviewRequest ìš”ì•½ ìœ„ì¹˜\\\" â†’ \\\"ë¦¬ë·° ìš”ì²­ ìœ„ì¹˜\\\"\", \"severity\": \"warning\", \"original_code\": \"st.sidebar.markdown(f\\\"**reviewRequest ìš”ì•½ ìœ„ì¹˜**: {request_dir}\\\")\", \"improved_code\": \"st.sidebar.markdown(f\\\"**ë¦¬ë·° ìš”ì²­ ìœ„ì¹˜**: {request_dir}\\\")\"}, {\"type\": \"style\", \"line_number\": 155, \"file\": \"reviewer/src/ui.py\", \"description\": \"view_type ê°’ì´ ì˜ì–´(\\\"reviewRequest\\\")ë¡œ ì§€ì •ë˜ì–´ ìˆì–´ ì‚¬ìš©ìì—ê²Œ ë‚¯ì„¤ë©° ê¸°ì¡´ ë©”ë‰´ì˜ í•œêµ­ì–´ ëª…ì¹­ê³¼ ì¼ê´€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\", \"suggestion\": \"view_type ì˜µì…˜ê³¼ ë¹„êµ ë¬¸ìì—´ì„ í•œêµ­ì–´(\\\"ë¦¬ë·° ìš”ì²­\\\")ë¡œ ë³€ê²½í•˜ê³  selectbox í•­ëª©ë„ ë™ì¼í•˜ê²Œ ê°±ì‹ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"view_type = st.sidebar.selectbox(\\n    \\\"ë³´ê¸° ìœ í˜•:\\\", [\\\"ë¦¬ë·° ê²°ê³¼\\\", \\\"ì‹¤í–‰ ë¡œê·¸\\\", \\\"reviewRequest\\\", \\\"í”„ë¡¬í”„íŠ¸\\\"], index=0\\n)\\nelif view_type == \\\"reviewRequest\\\":\", \"improved_code\": \"view_type = st.sidebar.selectbox(\\n    \\\"ë³´ê¸° ìœ í˜•:\\\", [\\\"ë¦¬ë·° ê²°ê³¼\\\", \\\"ì‹¤í–‰ ë¡œê·¸\\\", \\\"ë¦¬ë·° ìš”ì²­\\\", \\\"í”„ë¡¬í”„íŠ¸\\\"], index=0\\n)\\nelif view_type == \\\"ë¦¬ë·° ìš”ì²­\\\":\"}, {\"type\": \"style\", \"line_number\": 279, \"file\": \"reviewer/src/ui.py\", \"description\": \"reviewRequest ë·°ì˜ ì œëª©ì´ ì˜ì–´ í˜¼ìš©(\\\"## reviewRequest ë‚´ìš©\\\")ìœ¼ë¡œ í‘œì‹œë˜ì–´ ìˆì–´ ì¼ê´€ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.\", \"suggestion\": \"ì œëª©ì„ í•œêµ­ì–´(\\\"## ë¦¬ë·° ìš”ì²­ ë‚´ìš©\\\")ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"elif view_type == \\\"reviewRequest\\\":\\n    st.markdown(\\\"## reviewRequest ë‚´ìš©\\\")\", \"improved_code\": \"elif view_type == \\\"ë¦¬ë·° ìš”ì²­\\\":\\n    st.markdown(\\\"## ë¦¬ë·° ìš”ì²­ ë‚´ìš©\\\")\"}, {\"type\": \"bug\", \"line_number\": 39, \"file\": \"resources/prompt/v1/code_review_system_prompt.txt\", \"description\": \"JSON ì˜ˆì‹œì—ì„œ \\\"line_number\\\" í•­ëª© ë’¤ì— ì‰¼í‘œê°€ ë¹ ì ¸ ìˆì–´ ìœ íš¨í•œ JSONì´ ì•„ë‹™ë‹ˆë‹¤.\", \"suggestion\": \"\\\"line_number\\\" í•­ëª© ëì— ì‰¼í‘œë¥¼ ì¶”ê°€í•˜ì—¬ JSON ë¬¸ë²•ì„ ì˜¬ë°”ë¥´ê²Œ ë§Œë“­ë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"      \\\"line_number\\\": ìˆ˜ì • í–‰ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\", \"improved_code\": \"      \\\"line_number\\\": ìˆ˜ì • í–‰ ë²ˆí˜¸,\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\"}, {\"type\": \"bug\", \"line_number\": 133, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"file_info ë³€ìˆ˜ê°€ ë¬¸ìì—´(íŒŒì¼ëª…)ì¸ë° .get(\\\"language\\\", \\\"\\\")ë¥¼ í˜¸ì¶œí•˜ì—¬ AttributeErrorê°€ ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"file_info ëŒ€ì‹  íŒŒì¼ ë©”íƒ€ë°ì´í„°ë¥¼ ë‹´ì€ dictë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ language í•­ëª©ì„ ì œê±°í•˜ê³  í•„ìš”í•œ ê²½ìš° review_request ì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"\\\"language\\\": file_info.get(\\\"language\\\", \\\"\\\"),\", \"improved_code\": \"# ì–¸ì–´ ì •ë³´ê°€ í•„ìš” ì—†ë‹¤ë©´ ì œê±°í•˜ê±°ë‚˜\\n# ì˜ˆì‹œ: \\\"language\\\" í‚¤ë¥¼ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤\\n# \\\"language\\\": review_request.additional_context or \\\"\\\",\\n\"}, {\"type\": \"bug\", \"line_number\": 87, \"file\": \"tests/test_prompt_generator.py\", \"description\": \"í…ŒìŠ¤íŠ¸ì—ì„œ ì‚­ì œëœ language í”„ë¡¬í”„íŠ¸ì™€ ë³€ê²½ëœ hunk ë©”ì‹œì§€ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ê²€ì¦í•˜ì—¬ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤.\", \"suggestion\": \"messages ë°°ì—´ì˜ JSON í˜•ì‹ì„ íŒŒì‹±í•˜ì—¬ hunk_idx, file_name, content ë“±ì„ ê²€ì¦í•˜ë„ë¡ í…ŒìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"assert \\\"ì½”ë“œëŠ” Python ì–¸ì–´ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\\\" in messages[0][\\\"content\\\"]\", \"improved_code\": \"user_msg = json.loads(messages[1][\\\"content\\\"])\\nassert user_msg[\\\"hunk_idx\\\"] == \\\"1\\\"\\nassert user_msg[\\\"file_name\\\"] == \\\"file.py\\\"\\nassert \\\"```diff\\\\n+print('Hello')\\\\n print('World')\\\\n```\\\" in user_msg[\\\"content\\\"]\"}], \"summary\": \"ì´ë²ˆ ë³€ê²½ì—ì„œëŠ” ReviewIssueì™€ StructuredReviewIssue ëª¨ë¸ì˜ line ì†ì„±ì„ line_numberë¡œ ì¼ê´€í™”í•˜ê³ , ReviewRequestì—ì„œ language í•„ë“œë¥¼ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼ CLI ë° ë ˆê±°ì‹œ í…ŒìŠ¤íŠ¸, prompt ìƒì„± ë¡œì§, LLM ê²Œì´íŠ¸ì›¨ì´ ë§¤í•‘ ì½”ë“œ, UI ë·° íƒ€ì… ë“±ì´ ëŒ€ëŒ€ì ìœ¼ë¡œ ë¦¬íŒ©í† ë§ë˜ì—ˆìœ¼ë‚˜, ì¼ë¶€ UI ë¬¸êµ¬ì˜ ì–¸ì–´ í˜¼ìš©, í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ JSON ë¬¸ë²• ì˜¤ë¥˜, prompt_generator ë‚´ë¶€ ë³€ìˆ˜ ì˜¤ìš©ì— ë”°ë¥¸ ëŸ°íƒ€ì„ ì—ëŸ¬, í…ŒìŠ¤íŠ¸ ë¯¸ë°˜ì˜ ì´ìŠˆê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 6.0, \"recommendations\": [\"UI ë¬¸êµ¬ë¥¼ í•œêµ­ì–´ë¡œ ì¼ê´€ë˜ê²Œ í†µì¼í•˜ì„¸ìš”.\", \"resources ë””ë ‰í† ë¦¬ ë‚´ JSON ì˜ˆì‹œ ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ì ê²€í•˜ê³  ìˆ˜ì •í•˜ì„¸ìš”.\", \"prompt_generator.py ë‚´ ë³€ìˆ˜ ì‚¬ìš©ì„ ì¬ê²€í† í•˜ì—¬ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ë°©ì§€í•˜ì„¸ìš”.\", \"í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ì—¬ ìµœì‹  ë©”ì‹œì§€ í¬ë§·ì„ ë°˜ì˜í•˜ë„ë¡ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\n```\\\", \\\"line_number\\\": 22}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 31}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 198}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n```\\\", \\\"line_number\\\": 540}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤ (í‚¤ê°€ ì—†ëŠ” ê²½ìš° ValueError ë°œìƒ)\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        return config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n\\\\n    raise ValueError(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/base_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom __future__ import annotations\\\\n\\\\nimport abc\\\\nimport json\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.utils import save_prompt\\\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\\\nfrom reviewer.src.utils.logging import get_logger\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import (\\\\n    DiffCheckResult,\\\\n    EstimatedCost,\\\\n    ReviewResponse,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n\\\\n\\\\nclass BaseGateway(abc.ABC):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = self._load_api_key()\\\\n\\\\n    @abc.abstractmethod\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Providerì— ë§ëŠ” API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        ê° í”„ë¡œë°”ì´ë”ë³„ API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n        ê° í•˜ìœ„ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ LLM í”„ë¡œë°”ì´ë”ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    def get_model_name(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ ì „ì²´ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ í”„ë¡œë°”ì´ë”ì— ë§ëŠ” LLM í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            Instructor: êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” LLM í´ë¼ì´ì–¸íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return LLMClientFactory.create_client(self.get_provider(), self.api_key)\\\\n\\\\n    def estimate_review_cost(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì˜ ì˜ˆìƒ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´ (ReviewPrompt ë˜ëŠ” ReviewPromptWithFileContent)\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        combined_text = \\\\\\\"\\\\\\\"\\\\n        combined_text += review_prompt.system_prompt.content + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n        for user_prompt in review_prompt.user_prompts:\\\\n            combined_text += user_prompt.to_message()[\\\\\\\"content\\\\\\\"] + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        return TokenUtils.estimate_cost(combined_text, model_name)\\\\n\\\\n    def check_diff_size(self, diff_content: str) -> DiffCheckResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Diff ë‚´ìš©ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê³  ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            diff_content: diff ë‚´ìš©\\\\n\\\\n        Returns:\\\\n            DiffCheckResult: í¬ê¸° ë° ë¹„ìš© ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        cost_info = TokenUtils.estimate_cost(diff_content, model_name)\\\\n\\\\n        # DiffCheckResult ê°ì²´ ìƒì„±í•˜ì—¬ ë°˜í™˜\\\\n        return DiffCheckResult(\\\\n            model=cost_info.model,\\\\n            input_tokens=cost_info.input_tokens,\\\\n            input_cost_usd=cost_info.input_cost_usd,\\\\n            estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n            estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n            estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n            within_context_limit=cost_info.within_context_limit,\\\\n            character_count=len(diff_content),\\\\n            line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n        )\\\\n\\\\n    def save_raw_response(self, completion: StructuredReviewResponse) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"LLM API ì›ë³¸ ì‘ë‹µì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            completion: API ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            provider = self.get_provider()\\\\n            current_time = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n\\\\n            with open(raw_response_file, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                f.write(f\\\\\\\"# {provider.capitalize()} ì›ë³¸ ì‘ë‹µ\\\\\\\\n\\\\\\\\n\\\\\\\")\\\\n                try:\\\\n                    raw_response = completion.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n                    f.write(\\\\n                        json.dumps(\\\\n                            raw_response, indent=2, default=str, ensure_ascii=False\\\\n                        )\\\\n                    )\\\\n                except Exception:\\\\n                    f.write(str(completion))\\\\n            logger.info(\\\\n                f\\\\\\\"{provider.capitalize()} ì›ë³¸ ì‘ë‹µì„ {raw_response_file}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n\\\\n    def prepare_review_request(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì „ ë¹„ìš© ì¶”ì • ë° ë©”ì‹œì§€ ì¤€ë¹„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            None\\\\n\\\\n        Raises:\\\\n            ContextLimitExceededError: ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì´ˆê³¼í•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        estimated_cost = self.estimate_review_cost(review_prompt)\\\\n\\\\n        if not estimated_cost.within_context_limit:\\\\n            raise ContextLimitExceededError(\\\\n                input_tokens=estimated_cost.input_tokens,\\\\n                context_limit=self.model.get(\\\\\\\"context_limit\\\\\\\"),\\\\n            )\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸: {estimated_cost.model}, \\\\\\\"\\\\n            f\\\\\\\"í† í° ìˆ˜: {estimated_cost.input_tokens}, \\\\\\\"\\\\n            f\\\\\\\"ë¹„ìš©: {estimated_cost.estimated_total_cost_usd} USD\\\\\\\"\\\\n        )\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ì €ì¥\\\\n        save_prompt(review_prompt.to_messages(), self.get_model_name())\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            Exception: API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ìš”ì²­ ì¤€ë¹„\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = self._create_client()\\\\n\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # API ìš”ì²­ ì†¡ì‹ \\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n            self.save_raw_response(completion)\\\\n\\\\n            # ì‘ë‹µ ì²˜ë¦¬\\\\n            if not completion:\\\\n                return ReviewResponse.get_empty_response()\\\\n\\\\n            return ReviewResponse.from_structured_response(completion)\\\\n\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n            return ReviewResponse.get_error_response(e)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_raw_log_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„±\\\\nLOG_DIR = get_default_raw_log_dir()\\\\nLOG_DIR.mkdir(exist_ok=True, parents=True)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n```\\\", \\\"line_number\\\": 29}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 106}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 128}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n            raw_response_file = LOG_DIR / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"13\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"14\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"15\\\", \\\"original_code\\\": \\\"```python\\\\n            completion = client.chat.completions.create(\\\\n                response_model=StructuredReviewResponse, max_retries=2, **params\\\\n            )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n```\\\", \\\"line_number\\\": 241}, {\\\"hunk_idx\\\": \\\"16\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/google_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom typing import Any\\\\n\\\\nfrom google.genai import types\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\nfrom . import get_api_key\\\\n\\\\n\\\\nclass GoogleGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: API í‚¤\\\\n\\\\n        Raises:\\\\n            APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n        if not api_key:\\\\n            raise APIKeyNotFoundError(\\\\\\\"google\\\\\\\")\\\\n        return api_key\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n\\\\n        Raises:\\\\n            InvalidModelProviderError: Google ëª¨ë¸ì´ ì•„ë‹Œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] != \\\\\\\"google\\\\\\\":\\\\n            print(f\\\\\\\"ê²½ê³ : {model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n            raise InvalidModelProviderError(model_info[\\\\\\\"full_name\\\\\\\"], \\\\\\\"Google\\\\\\\")\\\\n        else:\\\\n            print(f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\")\\\\n            self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt = None\\\\n        contents = []\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì™€ ìœ ì € ë©”ì‹œì§€ êµ¬ë¶„\\\\n        for message in messages:\\\\n            role = message.get(\\\\\\\"role\\\\\\\", \\\\\\\"\\\\\\\")\\\\n            content = message.get(\\\\\\\"content\\\\\\\", \\\\\\\"\\\\\\\")\\\\n\\\\n            if role == \\\\\\\"system\\\\\\\":\\\\n                system_prompt = content\\\\n            elif role == \\\\\\\"user\\\\\\\":\\\\n                contents.append(content)\\\\n\\\\n        # ì˜¨ë„ ì„¤ì • (ê¸°ë³¸ê°’: 0.0)\\\\n        temperature = self.model[\\\\\\\"params\\\\\\\"].get(\\\\\\\"temperature\\\\\\\", 0.0)\\\\n\\\\n        # config ìƒì„±\\\\n        generation_config = types.GenerateContentConfig(\\\\n            temperature=temperature,\\\\n            system_instruction=system_prompt,\\\\n            response_mime_type=\\\\\\\"application/json\\\\\\\",\\\\n            response_schema=StructuredReviewResponse,\\\\n        )\\\\n\\\\n        # Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n        params = {\\\\n            \\\\\\\"model\\\\\\\": self.model[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\".join(contents) if contents else \\\\\\\"\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": generation_config,\\\\n        }\\\\n\\\\n        return params\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import ReviewResponse, StructuredReviewResponse\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ë² ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ìš”ì²­ ì¤€ë¹„ ë©”ì†Œë“œ í™œìš©\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # Google Gemini í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = genai.Client(api_key=self.api_key)\\\\n\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # Gemini API ìš”ì²­ ì†¡ì‹ \\\\n            response = client.models.generate_content(**params)\\\\n\\\\n            # êµ¬ì¡°í™”ëœ ì‘ë‹µ ìƒì„±\\\\n            # í…ìŠ¤íŠ¸ ì‘ë‹µì„ StructuredReviewResponse í˜•ì‹ìœ¼ë¡œ íŒŒì‹±\\\\n            try:\\\\n                response_text = response.text\\\\n                if response_text is None:\\\\n                    return ReviewResponse.get_empty_response()\\\\n\\\\n                structured_response = StructuredReviewResponse.model_validate_json(\\\\n                    response_text\\\\n                )\\\\n\\\\n                # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n                self.save_raw_response(structured_response)\\\\n\\\\n                # ì‘ë‹µ ì²˜ë¦¬\\\\n                if not structured_response:\\\\n                    return ReviewResponse.get_empty_response()\\\\n\\\\n                return ReviewResponse.from_structured_response(structured_response)\\\\n\\\\n            except Exception as parse_error:\\\\n                print(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                print(f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text}\\\\\\\")\\\\n                return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n        except Exception as e:\\\\n            return ReviewResponse.get_error_response(e)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 91}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .prompt_utils import save_prompt\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=0\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 3}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompt_utils.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ì™€ ê´€ë ¨ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport json\\\\nfrom datetime import datetime\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_prompt_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_prompt_{timestamp}_{model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(messages, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_review_prompt_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n```\\\", \\\"line_number\\\": 19}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import get_api_key\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 11}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 39, \"file\": \"reviewer/src/llm_gateway/google_gateway.py\", \"description\": \"`_set_model` ë©”ì†Œë“œ ë‚´ì— `print` í•¨ìˆ˜ê°€ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì „ë°˜ì˜ ë¡œê¹… í‘œì¤€í™”ì— ë”°ë¼ `logger` ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê³  ë¡œê·¸ ê´€ë¦¬ì— ìš©ì´í•©ë‹ˆë‹¤.\", \"suggestion\": \"`print` ë¬¸ì„ `logger.warning` ë° `logger.info`ë¡œ ë³€ê²½í•˜ì—¬ ë‹¤ë¥¸ ì½”ë“œë² ì´ìŠ¤ì™€ ì¼ê´€ëœ ë¡œê¹… ë°©ì‹ì„ ì ìš©í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"        if model_info[\\\"provider\\\"] != \\\"google\\\":\\n            print(f\\\"ê²½ê³ : {model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\")\\n            raise InvalidModelProviderError(model_info[\\\"full_name\\\"], \\\"Google\\\")\\n        else:\\n            print(f\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\")\\n            self.model = model_info\", \"improved_code\": \"        if model_info[\\\"provider\\\"] != \\\"google\\\":\\n            logger.warning(f\\\"{model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\")\\n            raise InvalidModelProviderError(model_info[\\\"full_name\\\"], \\\"Google\\\")\\n        else:\\n            logger.info(f\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\")\\n            self.model = model_info\"}, {\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 460, \"file\": \"reviewer/cli.py\", \"description\": \"`review_code` í•¨ìˆ˜ ë‚´ì—ì„œ diff ë‚´ìš©ì´ ì—†ì„ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì•Œë¦¬ê¸° ìœ„í•´ `print` í•¨ìˆ˜ê°€ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ë¡œê¹… í‘œì¤€í™” ë¦¬íŒ©í† ë§ ê³¼ì •ì—ì„œ ëˆ„ë½ëœ ë¶€ë¶„ìœ¼ë¡œ ë³´ì´ë©°, `logger`ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\", \"suggestion\": \"`print(\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")`ë¥¼ `logger.warning(\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")` ë˜ëŠ” `logger.info`ë¡œ ë³€ê²½í•˜ì—¬ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì„¸ìš”. ë‚´ìš©ì˜ ì„±ê²©ìƒ `logger.warning`ì´ ë” ì ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"    if not diff_content:\\n        print(\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\", \"improved_code\": \"    if not diff_content:\\n        logger.warning(\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 201, \"file\": \"reviewer/cli.py\", \"description\": \"API í‚¤ ë§ˆìŠ¤í‚¹ ë¡œì§ (`current_key[:4] + \\\"*\\\" * (len(current_key) - 8) + current_key[-4:]`)ì€ API í‚¤ì˜ ê¸¸ì´ê°€ 8ì ë¯¸ë§Œì¼ ê²½ìš°, ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ì§€ ì•Šê±°ë‚˜ ì˜ë„ì¹˜ ì•Šê²Œ í‚¤ì˜ ì¼ë¶€ë¥¼ ë…¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 7ìë¦¬ í‚¤ \\\"1234567\\\"ì€ \\\"12344567\\\"ë¡œ ë§ˆìŠ¤í‚¹ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"API í‚¤ ê¸¸ì´ê°€ ì§§ì€ ê²½ìš°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë§ˆìŠ¤í‚¹ ë¡œì§ì„ ê°œì„ í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í‚¤ ê¸¸ì´ê°€ 8ì ë¯¸ë§Œì¼ ê²½ìš°, ì²« ê¸€ìì™€ ë§ˆì§€ë§‰ ê¸€ìë§Œ ë³´ì—¬ì£¼ê±°ë‚˜, ë³„í‘œì˜ ê°œìˆ˜ê°€ ìŒìˆ˜ê°€ ë˜ì§€ ì•Šë„ë¡ ì¡°ì •í•˜ëŠ” ë°©ì‹ ë“±ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"                masked_key = (\\n                    current_key[:4] + \\\"*\\\" * (len(current_key) - 8) + current_key[-4:]\\n                )\\n                logger.info(f\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\")\", \"improved_code\": \"                if len(current_key) < 8:\\n                    if len(current_key) <= 2:\\n                        masked_key = \\\"*\\\" * len(current_key)\\n                    elif len(current_key) <= 4: # ì˜ˆì‹œ: ì§§ì€ í‚¤ëŠ” ì• 1ìë¦¬, ë’¤ 1ìë¦¬ë§Œ\\n                        masked_key = current_key[0] + \\\"*\\\" * (len(current_key) - 2) + current_key[-1] if len(current_key) > 1 else \\\"*\\\"\\n                    else: # ì˜ˆì‹œ: 4ìë¦¬ ì´ˆê³¼ 8ìë¦¬ ë¯¸ë§Œì€ ì• 2ìë¦¬, ë’¤ 2ìë¦¬\\n                         masked_key = current_key[:2] + \\\"*\\\" * (len(current_key) - 4) + current_key[-2:]\\n                else:\\n                    masked_key = (\\n                        current_key[:4] + \\\"*\\\" * (len(current_key) - 8) + current_key[-4:]\\n                    )\\n                logger.info(f\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\")\"}], \"summary\": \"ì´ë²ˆ ì½”ë“œ ë³€ê²½ì€ ì£¼ë¡œ ë¡œê¹… ì‹œìŠ¤í…œ ê°œì„ ê³¼ Google Gemini ëª¨ë¸ ì§€ì› ì¶”ê°€ì— ì¤‘ì ì„ ë‘ê³  ìˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ `print` ë¬¸ì„ `logger`ë¡œ ëŒ€ì²´í•˜ì—¬ ë¡œê¹…ì˜ ì¼ê´€ì„±ì„ ë†’ì˜€ê³ , ìˆœí™˜ ì°¸ì¡° ë°©ì§€ë¥¼ ìœ„í•´ ì§€ì—° ë¡œë”©(lazy loading) íŒ¨í„´ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, LLM ê²Œì´íŠ¸ì›¨ì´ ë¡œì§ì„ `BaseGateway`ë¡œ ì¤‘ì•™í™”í•˜ê³  ì˜¤ë¥˜ ì²˜ë¦¬ ë° ì˜ˆì™¸ ë¡œê¹…ì„ ê°•í™”í•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤. Gemini ëª¨ë¸ ì§€ì›ì„ ìœ„í•œ í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ë¡œì§ë„ `TokenUtils`ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.5, \"recommendations\": [\"í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì‚¬ìš©ì ëŒ€ë©´ ë©”ì‹œì§€ ë° ë‚´ë¶€ ìƒíƒœ/ì˜¤ë¥˜ ë©”ì‹œì§€ì— `print` ëŒ€ì‹  `logger`ë¥¼ ì¼ê´€ë˜ê²Œ ì‚¬ìš©í•˜ë„ë¡ ëª¨ë“  íŒŒì¼ì„ ê²€í† í•˜ê³  ìˆ˜ì •í•˜ì„¸ìš”.\", \"API í‚¤ ë§ˆìŠ¤í‚¹ ë¡œì§ì„ ë‹¤ì–‘í•œ ê¸¸ì´ì˜ í‚¤ì— ëŒ€í•´ ì•ˆì „í•˜ê²Œ ì‘ë™í•˜ë„ë¡ ê°œì„ í•˜ê³ , ì´ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\", \"CLIì—ì„œ `get_diff_content` ì‹¤íŒ¨ ì‹œ (ì˜ˆ: ì˜ëª»ëœ ì»¤ë°‹ ë²”ìœ„) ì‚¬ìš©ìì—ê²Œ ë³´ë‹¤ êµ¬ì²´ì ì¸ ì˜¤ë¥˜ ì›ì¸ì„ ì „ë‹¬í•˜ëŠ” ë°©ì•ˆì„ ê³ ë ¤í•˜ì„¸ìš”. í˜„ì¬ëŠ” ì¼ë°˜ì ì¸ ë©”ì‹œì§€ë§Œ ì¶œë ¥ë©ë‹ˆë‹¤.\", \"ë¬´ê²ê±°ë‚˜ ìƒí˜¸ ì˜ì¡´ì ì¸ ëª¨ë“ˆì— ëŒ€í•´ ì§€ì—° ë¡œë”© íŒ¨í„´ì„ ì§€ì†ì ìœ¼ë¡œ ì ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œê°„ ë° ìœ ì§€ë³´ìˆ˜ì„±ì„ ê°œì„ í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\n```\\\", \\\"line_number\\\": 22}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 31}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 198}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n```\\\", \\\"line_number\\\": 540}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤ (í‚¤ê°€ ì—†ëŠ” ê²½ìš° ValueError ë°œìƒ)\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        return config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n\\\\n    raise ValueError(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/base_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom __future__ import annotations\\\\n\\\\nimport abc\\\\nimport json\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.utils import save_prompt\\\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\\\nfrom reviewer.src.utils.logging import get_logger\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import (\\\\n    DiffCheckResult,\\\\n    EstimatedCost,\\\\n    ReviewResponse,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n\\\\n\\\\nclass BaseGateway(abc.ABC):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = self._load_api_key()\\\\n\\\\n    @abc.abstractmethod\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Providerì— ë§ëŠ” API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        ê° í”„ë¡œë°”ì´ë”ë³„ API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n        ê° í•˜ìœ„ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ LLM í”„ë¡œë°”ì´ë”ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    def get_model_name(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ ì „ì²´ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ í”„ë¡œë°”ì´ë”ì— ë§ëŠ” LLM í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            Instructor: êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” LLM í´ë¼ì´ì–¸íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return LLMClientFactory.create_client(self.get_provider(), self.api_key)\\\\n\\\\n    def estimate_review_cost(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì˜ ì˜ˆìƒ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´ (ReviewPrompt ë˜ëŠ” ReviewPromptWithFileContent)\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        combined_text = \\\\\\\"\\\\\\\"\\\\n        combined_text += review_prompt.system_prompt.content + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n        for user_prompt in review_prompt.user_prompts:\\\\n            combined_text += user_prompt.to_message()[\\\\\\\"content\\\\\\\"] + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        return TokenUtils.estimate_cost(combined_text, model_name)\\\\n\\\\n    def check_diff_size(self, diff_content: str) -> DiffCheckResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Diff ë‚´ìš©ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê³  ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            diff_content: diff ë‚´ìš©\\\\n\\\\n        Returns:\\\\n            DiffCheckResult: í¬ê¸° ë° ë¹„ìš© ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        cost_info = TokenUtils.estimate_cost(diff_content, model_name)\\\\n\\\\n        # DiffCheckResult ê°ì²´ ìƒì„±í•˜ì—¬ ë°˜í™˜\\\\n        return DiffCheckResult(\\\\n            model=cost_info.model,\\\\n            input_tokens=cost_info.input_tokens,\\\\n            input_cost_usd=cost_info.input_cost_usd,\\\\n            estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n            estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n            estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n            within_context_limit=cost_info.within_context_limit,\\\\n            character_count=len(diff_content),\\\\n            line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n        )\\\\n\\\\n    def save_raw_response(self, completion: StructuredReviewResponse) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"LLM API ì›ë³¸ ì‘ë‹µì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            completion: API ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            provider = self.get_provider()\\\\n            current_time = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n\\\\n            with open(raw_response_file, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                f.write(f\\\\\\\"# {provider.capitalize()} ì›ë³¸ ì‘ë‹µ\\\\\\\\n\\\\\\\\n\\\\\\\")\\\\n                try:\\\\n                    raw_response = completion.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n                    f.write(\\\\n                        json.dumps(\\\\n                            raw_response, indent=2, default=str, ensure_ascii=False\\\\n                        )\\\\n                    )\\\\n                except Exception:\\\\n                    f.write(str(completion))\\\\n            logger.info(\\\\n                f\\\\\\\"{provider.capitalize()} ì›ë³¸ ì‘ë‹µì„ {raw_response_file}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n\\\\n    def prepare_review_request(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì „ ë¹„ìš© ì¶”ì • ë° ë©”ì‹œì§€ ì¤€ë¹„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            None\\\\n\\\\n        Raises:\\\\n            ContextLimitExceededError: ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì´ˆê³¼í•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        estimated_cost = self.estimate_review_cost(review_prompt)\\\\n\\\\n        if not estimated_cost.within_context_limit:\\\\n            raise ContextLimitExceededError(\\\\n                input_tokens=estimated_cost.input_tokens,\\\\n                context_limit=self.model.get(\\\\\\\"context_limit\\\\\\\"),\\\\n            )\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸: {estimated_cost.model}, \\\\\\\"\\\\n            f\\\\\\\"í† í° ìˆ˜: {estimated_cost.input_tokens}, \\\\\\\"\\\\n            f\\\\\\\"ë¹„ìš©: {estimated_cost.estimated_total_cost_usd} USD\\\\\\\"\\\\n        )\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ì €ì¥\\\\n        save_prompt(review_prompt.to_messages(), self.get_model_name())\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            Exception: API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ìš”ì²­ ì¤€ë¹„\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = self._create_client()\\\\n\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # API ìš”ì²­ ì†¡ì‹ \\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n            self.save_raw_response(completion)\\\\n\\\\n            # ì‘ë‹µ ì²˜ë¦¬\\\\n            if not completion:\\\\n                return ReviewResponse.get_empty_response()\\\\n\\\\n            return ReviewResponse.from_structured_response(completion)\\\\n\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n            return ReviewResponse.get_error_response(e)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_raw_log_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„±\\\\nLOG_DIR = get_default_raw_log_dir()\\\\nLOG_DIR.mkdir(exist_ok=True, parents=True)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n```\\\", \\\"line_number\\\": 29}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 106}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 128}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n            raw_response_file = LOG_DIR / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"13\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"14\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"15\\\", \\\"original_code\\\": \\\"```python\\\\n            completion = client.chat.completions.create(\\\\n                response_model=StructuredReviewResponse, max_retries=2, **params\\\\n            )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n            elif isinstance(client, genai.Client):\\\\n                try:\\\\n                    response = client.models.generate_content(**params)\\\\n                    response_text = response.text\\\\n                    if response_text is None:\\\\n                        return ReviewResponse.get_empty_response()\\\\n\\\\n                    completion = StructuredReviewResponse.model_validate_json(\\\\n                        response_text\\\\n                    )\\\\n                except Exception as parse_error:\\\\n                    logger.error(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                    logger.error(\\\\n                        f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\\\\\"\\\\n                    )\\\\n                    return ReviewResponse.get_error_response(parse_error)\\\\n```\\\", \\\"line_number\\\": 241}, {\\\"hunk_idx\\\": \\\"16\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/google_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom typing import Any\\\\n\\\\nfrom google.genai import types\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.api_key_not_found_error import APIKeyNotFoundError\\\\nfrom reviewer.src.exceptions.invalid_model_provider_error import (\\\\n    InvalidModelProviderError,\\\\n)\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n\\\\nfrom . import get_api_key\\\\n\\\\n\\\\nclass GoogleGateway(BaseGateway):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            str: API í‚¤\\\\n\\\\n        Raises:\\\\n            APIKeyNotFoundError: API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n        if not api_key:\\\\n            raise APIKeyNotFoundError(\\\\\\\"google\\\\\\\")\\\\n        return api_key\\\\n\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n\\\\n        Raises:\\\\n            InvalidModelProviderError: Google ëª¨ë¸ì´ ì•„ë‹Œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] != \\\\\\\"google\\\\\\\":\\\\n            print(f\\\\\\\"ê²½ê³ : {model_info['full_name']}ì€(ëŠ”) Google ëª¨ë¸ì´ ì•„ë‹™ë‹ˆë‹¤.\\\\\\\")\\\\n            raise InvalidModelProviderError(model_info[\\\\\\\"full_name\\\\\\\"], \\\\\\\"Google\\\\\\\")\\\\n        else:\\\\n            print(f\\\\\\\"ëª¨ë¸ ì„¤ì •: {model_info['full_name']} - {model_info['description']}\\\\\\\")\\\\n            self.model = model_info\\\\n\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        system_prompt = None\\\\n        contents = []\\\\n\\\\n        # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì™€ ìœ ì € ë©”ì‹œì§€ êµ¬ë¶„\\\\n        for message in messages:\\\\n            role = message.get(\\\\\\\"role\\\\\\\", \\\\\\\"\\\\\\\")\\\\n            content = message.get(\\\\\\\"content\\\\\\\", \\\\\\\"\\\\\\\")\\\\n\\\\n            if role == \\\\\\\"system\\\\\\\":\\\\n                system_prompt = content\\\\n            elif role == \\\\\\\"user\\\\\\\":\\\\n                contents.append(content)\\\\n\\\\n        # ì˜¨ë„ ì„¤ì • (ê¸°ë³¸ê°’: 0.0)\\\\n        temperature = self.model[\\\\\\\"params\\\\\\\"].get(\\\\\\\"temperature\\\\\\\", 0.0)\\\\n\\\\n        # config ìƒì„±\\\\n        generation_config = types.GenerateContentConfig(\\\\n            temperature=temperature,\\\\n            system_instruction=system_prompt,\\\\n            response_mime_type=\\\\\\\"application/json\\\\\\\",\\\\n            response_schema=StructuredReviewResponse,\\\\n        )\\\\n\\\\n        # Gemini API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n        params = {\\\\n            \\\\\\\"model\\\\\\\": self.model[\\\\\\\"full_name\\\\\\\"],\\\\n            \\\\\\\"contents\\\\\\\": \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\".join(contents) if contents else \\\\\\\"\\\\\\\",\\\\n            \\\\\\\"config\\\\\\\": generation_config,\\\\n        }\\\\n\\\\n        return params\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import ReviewResponse, StructuredReviewResponse\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token.models import StructuredReviewResponse\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Google Gemini APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ë² ì´ìŠ¤ í´ë˜ìŠ¤ì˜ ìš”ì²­ ì¤€ë¹„ ë©”ì†Œë“œ í™œìš©\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # Google Gemini í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = genai.Client(api_key=self.api_key)\\\\n\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # Gemini API ìš”ì²­ ì†¡ì‹ \\\\n            response = client.models.generate_content(**params)\\\\n\\\\n            # êµ¬ì¡°í™”ëœ ì‘ë‹µ ìƒì„±\\\\n            # í…ìŠ¤íŠ¸ ì‘ë‹µì„ StructuredReviewResponse í˜•ì‹ìœ¼ë¡œ íŒŒì‹±\\\\n            try:\\\\n                response_text = response.text\\\\n                if response_text is None:\\\\n                    return ReviewResponse.get_empty_response()\\\\n\\\\n                structured_response = StructuredReviewResponse.model_validate_json(\\\\n                    response_text\\\\n                )\\\\n\\\\n                # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n                self.save_raw_response(structured_response)\\\\n\\\\n                # ì‘ë‹µ ì²˜ë¦¬\\\\n                if not structured_response:\\\\n                    return ReviewResponse.get_empty_response()\\\\n\\\\n                return ReviewResponse.from_structured_response(structured_response)\\\\n\\\\n            except Exception as parse_error:\\\\n                print(f\\\\\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\\\\\")\\\\n                print(f\\\\\\\"ì›ë³¸ ì‘ë‹µ: {response.text}\\\\\\\")\\\\n                return ReviewResponse.get_error_response(parse_error)\\\\n\\\\n        except Exception as e:\\\\n            return ReviewResponse.get_error_response(e)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 91}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .prompt_utils import save_prompt\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=0\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 3}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompt_utils.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ì™€ ê´€ë ¨ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport json\\\\nfrom datetime import datetime\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_prompt_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_prompt_{timestamp}_{model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(messages, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_review_prompt_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n```\\\", \\\"line_number\\\": 19}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import get_api_key\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 11}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"style\", \"line_number\": 188, \"file\": \"reviewer/cli.py\", \"description\": \"ì •ë³´ì„± ë©”ì‹œì§€ë¥¼ í‘œì¤€ ì¶œë ¥(print) ëŒ€ì‹  ë¡œê±°(logger.info)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶œë ¥í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¡œê¹… ì „ëµì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ê³ , ë¡œê·¸ ë ˆë²¨ ì„¤ì •ì— ë”°ë¼ ë©”ì‹œì§€ ì¶œë ¥ì„ ì œì–´í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.\", \"suggestion\": \"ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì‚¬ìš©ìì—ê²Œ ì§ì ‘ ë³´ì—¬ì¤˜ì•¼ í•˜ëŠ” ìµœì¢… ê²°ê³¼ë‚˜ ì¤‘ìš”í•œ ì•ˆë‚´ ë©”ì‹œì§€ë¥¼ ì œì™¸í•˜ê³ ëŠ”, ë””ë²„ê¹…, ì •ë³´, ê²½ê³ , ì˜¤ë¥˜ ë“± ë‹¤ì–‘í•œ ìˆ˜ì¤€ì˜ ë©”ì‹œì§€ì— ëŒ€í•´ ë¡œê±° ì‚¬ìš©ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    print(f\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n```\", \"improved_code\": \"```python\\n    logger.info(f\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n```\"}, {\"type\": \"design\", \"line_number\": 29, \"file\": \"reviewer/src/llm_gateway/base_gateway.py\", \"description\": \"ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `LOG_DIR` ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ `get_log_dir`ë¡œ ë³€ê²½í•˜ê³  `reviewer.src.config` ëª¨ë“ˆì„ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì§€ì—° ì„í¬íŠ¸í•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ê¹¨ëŠ” íš¨ê³¼ì ì¸ ë°©ë²• ì¤‘ í•˜ë‚˜ì´ì§€ë§Œ, ì½”ë“œì˜ ê°€ë…ì„±ì„ ì•½ê°„ ì €í•´í•˜ê³  ì˜ì¡´ì„±ì´ ëª…ì‹œì ì´ì§€ ì•Šê²Œ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê°€ëŠ¥í•˜ë‹¤ë©´ ëª¨ë“ˆ êµ¬ì¡°ë¥¼ ì¬ì„¤ê³„í•˜ì—¬ ìˆœí™˜ ì°¸ì¡° ìì²´ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê³µìœ  ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë‚˜ ì„¤ì • ë¡œë”© ë¡œì§ì„ ë³„ë„ì˜ ì €ìˆ˜ì¤€ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„±\\nLOG_DIR = get_default_raw_log_dir()\\nLOG_DIR.mkdir(exist_ok=True, parents=True)\\n```\", \"improved_code\": \"```python\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\nlogger = get_logger(__name__)\\n\\n\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\ndef get_log_dir() -> Path:\\n    \\\"\\\"\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\"\\\"\\\"\\n    from reviewer.src.config import get_default_raw_log_dir\\n\\n    log_dir = get_default_raw_log_dir()\\n    log_dir.mkdir(exist_ok=True, parents=True)\\n    return log_dir\\n```\"}, {\"type\": \"design\", \"line_number\": 150, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"`TokenUtils` í´ë˜ìŠ¤ì— ëª¨ë¸ë³„ ì»¨í…ìŠ¤íŠ¸ ì œí•œì´ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ëª¨ë¸ì´ ì¶”ê°€ë˜ê±°ë‚˜ ê¸°ì¡´ ëª¨ë¸ì˜ ì œí•œì´ ë³€ê²½ë  ê²½ìš° ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í•´ì•¼ í•˜ë¯€ë¡œ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µìŠµë‹ˆë‹¤.\", \"suggestion\": \"ëª¨ë¸ ì •ë³´(ì»¨í…ìŠ¤íŠ¸ ì œí•œ, ê°€ê²© ë“±)ë¥¼ `available_models` ëª¨ë“ˆì´ë‚˜ ë³„ë„ì˜ ì„¤ì • íŒŒì¼/ë°ì´í„° êµ¬ì¡°ì—ì„œ ê´€ë¦¬í•˜ë„ë¡ ë³€ê²½í•˜ì„¸ìš”. `TokenUtils`ëŠ” í•´ë‹¹ ì •ë³´ë¥¼ ì¡°íšŒí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n        context_limits = {\\n            \\\"gpt-4o\\\": 128000,\\n            \\\"o3-mini\\\": 200000,\\n            \\\"o4-mini\\\": 200000,\\n            \\\"gpt-4.1\\\": 1047576,\\n            \\\"claude-3-7-sonnet-20250219\\\": 200000,\\n            \\\"claude-3-5-sonnet-20240620\\\": 180000,\\n            \\\"gemini-1.5-pro-001\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\n            \\\"gemini-1.5-flash-001\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\n        }\\n```\", \"improved_code\": \"```python\\n        # ëª¨ë¸ ì •ë³´ëŠ” available_models ëª¨ë“ˆ ë“± ì¤‘ì•™ ì§‘ì¤‘ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\\n        # ì˜ˆì‹œ: from reviewer.src.available_models import get_model_info\\n        # model_info = get_model_info(model)\\n        # return model_info.get(\\\"context_limit\\\", 128000)\\n\\n        context_limits = {\\n            \\\"gpt-4o\\\": 128000,\\n            \\\"o3-mini\\\": 200000,\\n            \\\"o4-mini\\\": 200000,\\n            \\\"gpt-4.1\\\": 1047576,\\n            \\\"claude-3-7-sonnet-20250219\\\": 200000,\\n            \\\"claude-3-5-sonnet-20240620\\\": 180000,\\n            \\\"gemini-1.5-pro-001\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\n            \\\"gemini-1.5-flash-001\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\n        }\\n\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\n        if \\\"claude\\\" in model.lower() and model not in context_limits:\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\n\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\n        if \\\"gemini\\\" in model.lower() and model not in context_limits:\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\n\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\n```\"}, {\"type\": \"refactoring\", \"line_number\": 540, \"file\": \"reviewer/cli.py\", \"description\": \"`main` í•¨ìˆ˜ì— ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”ê°€ ì¶”ê°€ë˜ì—ˆê³ , ì „ì²´ ì‹¤í–‰ ë¡œì§ì´ `try...except` ë¸”ë¡ìœ¼ë¡œ ê°ì‹¸ì ¸ `KeyboardInterrupt` ë° ì¼ë°˜ `Exception`ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” CLI ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"suggestion\": \"ì˜ˆì™¸ ë°œìƒ ì‹œ ì‚¬ìš©ìì—ê²Œ ë” ìœ ìš©í•œ ì •ë³´ë¥¼ ì œê³µí•˜ê±°ë‚˜, íŠ¹ì • ì˜ˆì™¸ ìœ í˜•ì— ë”°ë¼ ë‹¤ë¥¸ ì²˜ë¦¬ë¥¼ í•˜ë„ë¡ ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ì„ ì„¸ë¶„í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • ì„¤ì • ì˜¤ë¥˜ë‚˜ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì— ëŒ€í•´ ë” êµ¬ì²´ì ì¸ ì•ˆë‚´ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³´ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"```python\\n    \\\"\\\"\\\"ë©”ì¸ í•¨ìˆ˜\\\"\\\"\\\"\\n    args: argparse.Namespace = parse_args()\\n\\n    if args.command == \\\"config\\\":\\n        handle_config_command(args)\\n    elif args.command == \\\"review\\\":\\n        review_code(args)\\n    elif args.command == \\\"results\\\":\\n        handle_results_command(args)\\n    elif args.command == \\\"view\\\":\\n        handle_view_command(args)\\n    else:\\n        print(f\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\")\\n```\", \"improved_code\": \"```python\\n    \\\"\\\"\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\"\\\"\\\"\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\n\\n    try:\\n        args = parse_args()\\n\\n        if args.command == \\\"review\\\":\\n            review_code(args)\\n        elif args.command == \\\"config\\\":\\n            handle_config_command(args)\\n        elif args.command == \\\"results\\\":\\n            handle_results_command(args)\\n        elif args.command == \\\"view\\\":\\n            handle_view_command(args)\\n    except KeyboardInterrupt:\\n        logger.info(\\\"\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n        sys.exit(1)\\n    except Exception as e:\\n        logger.error(f\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\", exc_info=True)\\n        sys.exit(1)\\n```\"}, {\"type\": \"refactoring\", \"line_number\": 241, \"file\": \"reviewer/src/llm_gateway/base_gateway.py\", \"description\": \"`review_code` ë©”ì„œë“œì—ì„œ `instructor`ì™€ `genai` í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ¬ë¶„í•˜ì—¬ ì‘ë‹µì„ ì²˜ë¦¬í•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” Google Gemini API í†µí•©ì„ ìœ„í•´ í•„ìš”í–ˆì§€ë§Œ, ë² ì´ìŠ¤ í´ë˜ìŠ¤ê°€ íŠ¹ì • êµ¬í˜„ì²´ì— ì˜ì¡´í•˜ê²Œ ë˜ëŠ” ê²°ê³¼ë¥¼ ë‚³ì•˜ìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê²Œì´íŠ¸ì›¨ì´ íŒ¨í„´ì˜ ëª©ì ì— ë§ê²Œ, ë² ì´ìŠ¤ í´ë˜ìŠ¤ëŠ” ê°€ëŠ¥í•œ ì¶”ìƒì ì¸ ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜í•˜ê³  ì‹¤ì œ API í˜¸ì¶œ ë° ì‘ë‹µ íŒŒì‹± ë¡œì§ì€ ê° í”„ë¡œë°”ì´ë”ë³„ í•˜ìœ„ í´ë˜ìŠ¤(`OpenAIGateway`, `GoogleGateway` ë“±)ì—ì„œ êµ¬í˜„í•˜ë„ë¡ ë¦¬íŒ©í† ë§í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë² ì´ìŠ¤ í´ë˜ìŠ¤ëŠ” `_call_api`ì™€ ê°™ì€ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ê³ , í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì´ë¥¼ êµ¬í˜„í•˜ë©°, `review_code`ëŠ” ì´ ì¶”ìƒ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n            completion = client.chat.completions.create(\\n                response_model=StructuredReviewResponse, max_retries=2, **params\\n            )\\n```\", \"improved_code\": \"```python\\n            if isinstance(client, instructor.Instructor):\\n                completion = client.chat.completions.create(\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\n                )\\n            elif isinstance(client, genai.Client):\\n                try:\\n                    response = client.models.generate_content(**params)\\n                    response_text = response.text\\n                    if response_text is None:\\n                        return ReviewResponse.get_empty_response()\\n\\n                    completion = StructuredReviewResponse.model_validate_json(\\n                        response_text\\n                    )\\n                except Exception as parse_error:\\n                    logger.error(f\\\"ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜: {str(parse_error)}\\\")\\n                    logger.error(\\n                        f\\\"ì›ë³¸ ì‘ë‹µ: {response.text if 'response' in locals() else 'ì—†ìŒ'}\\\"\\n                    )\\n                    return ReviewResponse.get_error_response(parse_error)\\n```\"}], \"summary\": \"ì´ ì»¤ë°‹ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì— ê±¸ì³ ë¡œê¹… ì‹œìŠ¤í…œì„ ë„ì…í•˜ê³ , ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ê°œì„ í•˜ë©°, Google Gemini ëª¨ë¸ ì§€ì›ì„ í†µí•©í•˜ê³ , ëª¨ë“ˆ ê°„ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë¦¬íŒ©í† ë§ì„ í¬í•¨í•©ë‹ˆë‹¤. CLI ëª…ë ¹ì–´ ì²˜ë¦¬ ë¡œì§ê³¼ ì„¤ì • ê´€ë¦¬, ê²°ê³¼ ê´€ë¦¬ ê¸°ëŠ¥ë„ ì¼ë¶€ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"ëª¨ë“ˆ êµ¬ì¡°ë¥¼ ì¬ì„¤ê³„í•˜ì—¬ ì§€ì—° ì„í¬íŠ¸ ì—†ì´ ìˆœí™˜ ì°¸ì¡°ë¥¼ í•´ê²°í•©ë‹ˆë‹¤.\", \"`TokenUtils`ì— í•˜ë“œì½”ë”©ëœ ëª¨ë¸ë³„ ì •ë³´(ì»¨í…ìŠ¤íŠ¸ ì œí•œ, ê°€ê²©)ë¥¼ ì™¸ë¶€ ì„¤ì •ì´ë‚˜ `available_models` ëª¨ë“ˆì—ì„œ ê´€ë¦¬í•˜ë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤.\", \"ê²Œì´íŠ¸ì›¨ì´ ë² ì´ìŠ¤ í´ë˜ìŠ¤ê°€ íŠ¹ì • LLM í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ì²´ì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ ì¶”ìƒí™” ìˆ˜ì¤€ì„ ë†’ì…ë‹ˆë‹¤.\", \"CLIì˜ `config_api_key`ì™€ ê°™ì€ ë³µì¡í•œ í•¨ìˆ˜ë¥¼ ë” ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ì—¬ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì…ë‹ˆë‹¤.\", \"ë¡œê¹… ë©”ì‹œì§€ì— ë” ë§ì€ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ë””ë²„ê¹… íš¨ìœ¨ì„±ì„ ë†’ì…ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸° - ì§€ì—° ì„í¬íŠ¸\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway.gateway_factory import GatewayFactory\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\n```\\\", \\\"line_number\\\": 22}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 31}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 198}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸° - ì§€ì—° ì„í¬íŠ¸\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n```\\\", \\\"line_number\\\": 540}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤ (í‚¤ê°€ ì—†ëŠ” ê²½ìš° ValueError ë°œìƒ)\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        return config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n\\\\n    raise ValueError(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/base_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom __future__ import annotations\\\\n\\\\nimport abc\\\\nimport json\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.utils import save_prompt\\\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\\\nfrom reviewer.src.utils.logging import get_logger\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import (\\\\n    DiffCheckResult,\\\\n    EstimatedCost,\\\\n    ReviewResponse,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n\\\\n\\\\nclass BaseGateway(abc.ABC):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = self._load_api_key()\\\\n\\\\n    @abc.abstractmethod\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Providerì— ë§ëŠ” API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        ê° í”„ë¡œë°”ì´ë”ë³„ API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n        ê° í•˜ìœ„ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ LLM í”„ë¡œë°”ì´ë”ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    def get_model_name(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ ì „ì²´ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ í”„ë¡œë°”ì´ë”ì— ë§ëŠ” LLM í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            Instructor: êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” LLM í´ë¼ì´ì–¸íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return LLMClientFactory.create_client(self.get_provider(), self.api_key)\\\\n\\\\n    def estimate_review_cost(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì˜ ì˜ˆìƒ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´ (ReviewPrompt ë˜ëŠ” ReviewPromptWithFileContent)\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        combined_text = \\\\\\\"\\\\\\\"\\\\n        combined_text += review_prompt.system_prompt.content + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n        for user_prompt in review_prompt.user_prompts:\\\\n            combined_text += user_prompt.to_message()[\\\\\\\"content\\\\\\\"] + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        return TokenUtils.estimate_cost(combined_text, model_name)\\\\n\\\\n    def check_diff_size(self, diff_content: str) -> DiffCheckResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Diff ë‚´ìš©ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê³  ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            diff_content: diff ë‚´ìš©\\\\n\\\\n        Returns:\\\\n            DiffCheckResult: í¬ê¸° ë° ë¹„ìš© ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        cost_info = TokenUtils.estimate_cost(diff_content, model_name)\\\\n\\\\n        # DiffCheckResult ê°ì²´ ìƒì„±í•˜ì—¬ ë°˜í™˜\\\\n        return DiffCheckResult(\\\\n            model=cost_info.model,\\\\n            input_tokens=cost_info.input_tokens,\\\\n            input_cost_usd=cost_info.input_cost_usd,\\\\n            estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n            estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n            estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n            within_context_limit=cost_info.within_context_limit,\\\\n            character_count=len(diff_content),\\\\n            line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n        )\\\\n\\\\n    def save_raw_response(self, completion: StructuredReviewResponse) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"LLM API ì›ë³¸ ì‘ë‹µì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            completion: API ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            provider = self.get_provider()\\\\n            current_time = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n\\\\n            with open(raw_response_file, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                f.write(f\\\\\\\"# {provider.capitalize()} ì›ë³¸ ì‘ë‹µ\\\\\\\\n\\\\\\\\n\\\\\\\")\\\\n                try:\\\\n                    raw_response = completion.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n                    f.write(\\\\n                        json.dumps(\\\\n                            raw_response, indent=2, default=str, ensure_ascii=False\\\\n                        )\\\\n                    )\\\\n                except Exception:\\\\n                    f.write(str(completion))\\\\n            logger.info(\\\\n                f\\\\\\\"{provider.capitalize()} ì›ë³¸ ì‘ë‹µì„ {raw_response_file}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n\\\\n    def prepare_review_request(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì „ ë¹„ìš© ì¶”ì • ë° ë©”ì‹œì§€ ì¤€ë¹„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            None\\\\n\\\\n        Raises:\\\\n            ContextLimitExceededError: ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì´ˆê³¼í•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        estimated_cost = self.estimate_review_cost(review_prompt)\\\\n\\\\n        if not estimated_cost.within_context_limit:\\\\n            raise ContextLimitExceededError(\\\\n                input_tokens=estimated_cost.input_tokens,\\\\n                context_limit=self.model.get(\\\\\\\"context_limit\\\\\\\"),\\\\n            )\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸: {estimated_cost.model}, \\\\\\\"\\\\n            f\\\\\\\"í† í° ìˆ˜: {estimated_cost.input_tokens}, \\\\\\\"\\\\n            f\\\\\\\"ë¹„ìš©: {estimated_cost.estimated_total_cost_usd} USD\\\\\\\"\\\\n        )\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ì €ì¥\\\\n        save_prompt(review_prompt.to_messages(), self.get_model_name())\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            Exception: API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ìš”ì²­ ì¤€ë¹„\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = self._create_client()\\\\n\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # API ìš”ì²­ ì†¡ì‹ \\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n\\\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n            self.save_raw_response(completion)\\\\n\\\\n            # ì‘ë‹µ ì²˜ë¦¬\\\\n            if not completion:\\\\n                return ReviewResponse.get_empty_response()\\\\n\\\\n            return ReviewResponse.from_structured_response(completion)\\\\n\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n            return ReviewResponse.get_error_response(e)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_raw_log_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„±\\\\nLOG_DIR = get_default_raw_log_dir()\\\\nLOG_DIR.mkdir(exist_ok=True, parents=True)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n```\\\", \\\"line_number\\\": 29}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 106}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 128}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n            raw_response_file = LOG_DIR / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"13\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"14\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"15\\\", \\\"original_code\\\": \\\"```python\\\\n            completion = client.chat.completions.create(\\\\n                response_model=StructuredReviewResponse, max_retries=2, **params\\\\n            )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n```\\\", \\\"line_number\\\": 241}, {\\\"hunk_idx\\\": \\\"16\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .prompt_utils import save_prompt\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=0\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 3}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompt_utils.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ì™€ ê´€ë ¨ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport json\\\\nfrom datetime import datetime\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_prompt_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_prompt_{timestamp}_{model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(messages, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_review_prompt_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n```\\\", \\\"line_number\\\": 19}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•´ ì œê±°\\\\n# from reviewer.src.llm_gateway import get_api_key\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import get_api_key\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•´ ì œê±°\\\\n# from reviewer.src.llm_gateway import get_api_key\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"bug\", \"line_number\": 241, \"file\": \"reviewer/src/llm_gateway/base_gateway.py\", \"description\": \"BaseGatewayì˜ `review_code` ë©”ì„œë“œì—ì„œ LLM í´ë¼ì´ì–¸íŠ¸ê°€ `instructor.Instructor` ì¸ìŠ¤í„´ìŠ¤ì¸ ê²½ìš°ì—ë§Œ API í˜¸ì¶œ(`client.chat.completions.create`)ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤. ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ê°€ `genai.Client`ì™€ ê°™ì€ ë‹¤ë¥¸ íƒ€ì…ì´ë¼ë©´ API í˜¸ì¶œì´ ì™„ì „íˆ ê±´ë„ˆë›°ì–´ì§€ê³  ë¹ˆ ì‘ë‹µì´ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ëŠ” `instructor`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ì— ëŒ€í•´ ë¦¬ë·° ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•Šê²Œ ë§Œë“­ë‹ˆë‹¤.\", \"suggestion\": \"`isinstance` ì²´í¬ í›„, ê° í´ë¼ì´ì–¸íŠ¸ íƒ€ì…ì— ë§ëŠ” API í˜¸ì¶œ ë¡œì§ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `genai.Client`ì˜ ê²½ìš° `client.generate_content`ì™€ ê°™ì€ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"error\", \"original_code\": \"```python\\n            if isinstance(client, instructor.Instructor):\\n                completion = client.chat.completions.create(\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\n                )\\n\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\n            self.save_raw_response(completion)\\n\\n            # ì‘ë‹µ ì²˜ë¦¬\\n            if not completion:\\n                return ReviewResponse.get_empty_response()\\n\\n            return ReviewResponse.from_structured_response(completion)\\n```\", \"improved_code\": \"```python\\n            completion = None\\n            if isinstance(client, instructor.Instructor):\\n                completion = client.chat.completions.create(\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\n                )\\n            # TODO: Add handling for other client types (e.g., genai.Client)\\n            # elif isinstance(client, genai.Client):\\n            #     # Call appropriate method for genai.Client, potentially needing different params\\n            #     # completion = client.generate_content(...) # Example\\n            #     pass # Placeholder - needs actual implementation\\n\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥ (completionì´ Noneì´ ì•„ë‹ ê²½ìš°ì—ë§Œ)\\n            if completion:\\n                self.save_raw_response(completion)\\n\\n            # ì‘ë‹µ ì²˜ë¦¬\\n            if not completion:\\n                logger.warning(\\\"LLM API í˜¸ì¶œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤ (í´ë¼ì´ì–¸íŠ¸ íƒ€ì… ë¯¸ì§€ì› ë˜ëŠ” ì˜¤ë¥˜).\\\")\\n                return ReviewResponse.get_empty_response()\\n\\n            return ReviewResponse.from_structured_response(completion)\\n```\"}, {\"type\": \"bug\", \"line_number\": 60, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"`TokenUtils.count_tokens` ë©”ì„œë“œì—ì„œ Gemini ëª¨ë¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  ë•Œ, `client.models.count_tokens`ì˜ `contents` íŒŒë¼ë¯¸í„°ì— ì›ë³¸ ë¬¸ìì—´ì„ ì§ì ‘ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. Gemini APIì˜ `count_tokens`ëŠ” ì¼ë°˜ì ìœ¼ë¡œ `glm.Content` ê°ì²´ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤. ë˜í•œ `model` íŒŒë¼ë¯¸í„°ë„ `models/model-name` í˜•ì‹ì˜ ì „ì²´ ëª¨ë¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì•ˆì „í•©ë‹ˆë‹¤.\", \"suggestion\": \"í…ìŠ¤íŠ¸ë¥¼ `google.generativeai.types.glm.Content` ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ `contents` íŒŒë¼ë¯¸í„°ì— ì „ë‹¬í•˜ê³ , `model` íŒŒë¼ë¯¸í„°ì— ì „ì²´ ëª¨ë¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\n                response = client.models.count_tokens(model=model_name, contents=text)\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\n                return (\\n                    response.total_tokens\\n                    if response\\n                    and hasattr(response, \\\"total_tokens\\\")\\n                    and response.total_tokens is not None\\n                    else 0\\n                )\\n```\", \"improved_code\": \"```python\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\n                from reviewer.src.config import get_api_key\\n                import google.generativeai as genai # Import genai here for Content object\\n\\n                api_key = get_api_key(\\\"google\\\")\\n\\n                # Client ê°ì²´ ìƒì„±\\n                client = genai.Client(api_key=api_key)\\n\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘ ë° ì „ì²´ ì´ë¦„ ì‚¬ìš©\\n                full_model_name = f\\\"models/{model.lower()}\\\" # Use full model name format\\n\\n                # í…ìŠ¤íŠ¸ë¥¼ Content ê°ì²´ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜\\n                contents = [genai.types.glm.Content(parts=[genai.types.glm.Part(text=text)])]\\n\\n                # í† í° ìˆ˜ ê³„ì‚°\\n                response = client.models.count_tokens(model=full_model_name, contents=contents)\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\n                return (\\n                    response.total_tokens\\n                    if response\\n                    and hasattr(response, \\\"total_tokens\\\")\\n                    and response.total_tokens is not None\\n                    else 0\\n                )\\n```\"}, {\"type\": \"style\", \"line_number\": 34, \"file\": \"reviewer/cli.py\", \"description\": \"ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì£¼ì„ì´ ì‹¤ì œ ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì½”ë“œ ë¼ì¸ ë’¤ì— ìœ„ì¹˜í•˜ì—¬ ê°€ë…ì„±ì„ í•´ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì£¼ì„ì„ í•´ë‹¹ ì½”ë“œ ë¼ì¸ ìœ„ë¡œ ì´ë™ì‹œì¼œ ì–´ë–¤ ì½”ë“œë¥¼ ì„¤ëª…í•˜ëŠ”ì§€ ëª…í™•íˆ í•©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\nlogger = get_logger(__name__)\\n\\n\\ndef parse_args() -> argparse.Namespace:\\n```\", \"improved_code\": \"```python\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\nlogger = get_logger(__name__)\\n\\ndef parse_args() -> argparse.Namespace:\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ë“¤ì€ ì£¼ë¡œ ë¡œê¹… ì‹œìŠ¤í…œì„ ê°œì„ í•˜ê³ , ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ê°•í™”í•˜ë©°, ì ì¬ì ì¸ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸(lazy import) ì „ëµì„ ë„ì…í•˜ëŠ” ë° ì¤‘ì ì„ ë‘ê³  ìˆìŠµë‹ˆë‹¤. `print` ë¬¸ì„ `logger` í˜¸ì¶œë¡œ ëŒ€ì²´í•˜ì—¬ ì¼ê´€ëœ ë¡œê¹…ì„ êµ¬í˜„í–ˆê³ , `try...except` ë¸”ë¡ê³¼ `exc_info=True`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ˆì™¸ ë°œìƒ ì‹œ ë” ë§ì€ ì •ë³´ë¥¼ ê¸°ë¡í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì—¬ëŸ¬ ëª¨ë“ˆ ê°„ì˜ ë³µì¡í•œ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `__init__.py` íŒŒì¼ê³¼ íŠ¹ì • í•¨ìˆ˜ ë‚´ì—ì„œ í•„ìš”í•œ ëª¨ë“ˆì„ ì§€ì—° ë¡œë”©í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ `review_code` ë©”ì„œë“œì—ì„œ `instructor.Instructor` ì™¸ì˜ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ íƒ€ì…(ì˜ˆ: `genai.Client`)ì— ëŒ€í•œ API í˜¸ì¶œ ë¡œì§ì„ êµ¬í˜„í•˜ì—¬ ëª¨ë“  ì§€ì› ëª¨ë¸ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ í•©ë‹ˆë‹¤.\", \"Gemini ëª¨ë¸ì˜ í† í° ê³„ì‚° ì‹œ `client.models.count_tokens`ì— ì „ë‹¬í•˜ëŠ” `contents` íŒŒë¼ë¯¸í„° í˜•ì‹ì„ API ë¬¸ì„œì— ë§ê²Œ `glm.Content` ê°ì²´ ë¦¬ìŠ¤íŠ¸ë¡œ ìˆ˜ì •í•˜ê³ , ëª¨ë¸ ì´ë¦„ í˜•ì‹ì„ `models/model-name`ìœ¼ë¡œ í†µì¼í•©ë‹ˆë‹¤.\", \"ì½”ë“œ ì „ë°˜ì— ê±¸ì³ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ëŠ” ë©”ì‹œì§€ì™€ ë‚´ë¶€ ë¡œê¹… ë©”ì‹œì§€ë¥¼ êµ¬ë¶„í•˜ëŠ” ê¸°ì¤€ì„ ëª…í™•íˆ í•˜ê³  ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” `print`ì™€ `logger`ê°€ í˜¼ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\", \"ê°€ëŠ¥í•œ ê²½ìš° ì¼ë°˜ `Exception` ëŒ€ì‹  ë” êµ¬ì²´ì ì¸ ì˜ˆì™¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¥˜ ì²˜ë¦¬ì˜ ì •í™•ì„±ì„ ë†’ì…ë‹ˆë‹¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸° - ì§€ì—° ì„í¬íŠ¸\\\\n    from reviewer.src.llm_gateway import get_GatewayFactory\\\\n\\\\n    GatewayFactory = get_GatewayFactory()\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import (\\\\n    DETAILED_LOG_FORMAT,\\\\n    LOG_LEVEL_INFO,\\\\n    get_logger,\\\\n    setup_logging,\\\\n)\\\\n```\\\", \\\"line_number\\\": 21}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 30}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        try:\\\\n            current_key = get_api_key(provider)\\\\n            if current_key:\\\\n                masked_key = (\\\\n                    current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n                )\\\\n                logger.info(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n        except ValueError:\\\\n            logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 197}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.warning(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸° - ì§€ì—° ì„í¬íŠ¸\\\\n    from reviewer.src.llm_gateway import get_GatewayFactory\\\\n\\\\n    GatewayFactory = get_GatewayFactory()\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ì¸ ì§„ì…ì .\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ë¡œê¹… ì„¤ì • ì´ˆê¸°í™”\\\\n    setup_logging(level=LOG_LEVEL_INFO, log_format=DETAILED_LOG_FORMAT)\\\\n\\\\n    try:\\\\n        args = parse_args()\\\\n\\\\n        if args.command == \\\\\\\"review\\\\\\\":\\\\n            review_code(args)\\\\n        elif args.command == \\\\\\\"config\\\\\\\":\\\\n            handle_config_command(args)\\\\n        elif args.command == \\\\\\\"results\\\\\\\":\\\\n            handle_results_command(args)\\\\n        elif args.command == \\\\\\\"view\\\\\\\":\\\\n            handle_view_command(args)\\\\n    except KeyboardInterrupt:\\\\n        logger.info(\\\\\\\"\\\\\\\\ní”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ìì— ì˜í•´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        sys.exit(1)\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        sys.exit(1)\\\\n```\\\", \\\"line_number\\\": 542}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/config.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì„¤ì • ê´€ë¦¬ ëª¨ë“ˆ\\\\n\\\\nì´ ëª¨ë“ˆì€ API í‚¤ ë° ê¸°íƒ€ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\\\\nì„¤ì •ì€ ì‚¬ìš©ì í™ˆ ë””ë ‰í† ë¦¬ì˜ .reviewer/config.ini íŒŒì¼ì— ì €ì¥ë©ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport configparser\\\\nimport os\\\\nimport sys\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n# ì„¤ì • íŒŒì¼ ê²½ë¡œ\\\\nMAC_CONFIG_DIR = Path.home() / \\\\\\\"Library\\\\\\\" / \\\\\\\"Application Support\\\\\\\" / \\\\\\\"reviewer\\\\\\\"\\\\nMAC_CONFIG_FILE = MAC_CONFIG_DIR / \\\\\\\"config.ini\\\\\\\"\\\\n\\\\n\\\\ndef ensure_config_dir() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    MAC_CONFIG_DIR.mkdir(exist_ok=True, parents=True)\\\\n\\\\n\\\\ndef load_config() -> configparser.ConfigParser:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•©ë‹ˆë‹¤. íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì„¤ì •ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = configparser.ConfigParser()\\\\n\\\\n    if MAC_CONFIG_FILE.exists():\\\\n        config.read(MAC_CONFIG_FILE)\\\\n\\\\n    # ê¸°ë³¸ ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì¶”ê°€\\\\n    if \\\\\\\"credentials\\\\\\\" not in config:\\\\n        config[\\\\\\\"credentials\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"paths\\\\\\\" not in config:\\\\n        config[\\\\\\\"paths\\\\\\\"] = {}\\\\n\\\\n    if \\\\\\\"default\\\\\\\" not in config:\\\\n        config[\\\\\\\"default\\\\\\\"] = {}\\\\n\\\\n    return config\\\\n\\\\n\\\\ndef save_config(config: configparser.ConfigParser) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì •ì„ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    ensure_config_dir()\\\\n    with open(MAC_CONFIG_FILE, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        config.write(f)\\\\n\\\\n    # íŒŒì¼ ê¶Œí•œ ì„¤ì • (Linux/macOSì—ì„œë§Œ ì‘ë™)\\\\n    if sys.platform != \\\\\\\"win32\\\\\\\":\\\\n        os.chmod(MAC_CONFIG_FILE, 0o600)  # ì†Œìœ ìë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥\\\\n\\\\n\\\\ndef get_api_key(provider: str = \\\\\\\"openai\\\\\\\") -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\n\\\\n    API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ì°¾ìŠµë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        API í‚¤ (í‚¤ê°€ ì—†ëŠ” ê²½ìš° ValueError ë°œìƒ)\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n    if provider in config[\\\\\\\"credentials\\\\\\\"]:\\\\n        return config[\\\\\\\"credentials\\\\\\\"][provider]\\\\n\\\\n    raise ValueError(f\\\\\\\"API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\\n\\\\ndef set_api_key(api_key: str, provider: str = \\\\\\\"openai\\\\\\\") -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ë¥¼ ì„¤ì • íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        api_key: ì €ì¥í•  API í‚¤\\\\n        provider: API ì œê³µì ('openai', 'claude' ë“±)\\\\n\\\\n    Returns:\\\\n        bool: ì €ì¥ ì„±ê³µ ì—¬ë¶€\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"credentials\\\\\\\"][provider] = api_key\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_results_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_results_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"results\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"results\\\\\\\"\\\\n\\\\n\\\\ndef get_default_raw_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì›ë³¸ ë¡œê·¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_raw_log_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_raw_log_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"logs\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"logs\\\\\\\"\\\\n\\\\n\\\\ndef set_default_results_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_results_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_request_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_request_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_request\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_request\\\\\\\"\\\\n\\\\n\\\\ndef set_default_review_request_dir(path: str) -> bool:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        config = load_config()\\\\n        config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_request_dir\\\\\\\"] = path\\\\n        save_config(config)\\\\n        return True\\\\n    except Exception as e:\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n        return False\\\\n\\\\n\\\\ndef get_default_review_prompt_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ì €ì¥ ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    config = load_config()\\\\n\\\\n    # ì„¤ì • íŒŒì¼ì— ì§€ì •ëœ ê²½ìš°\\\\n    if \\\\\\\"default_review_prompt_dir\\\\\\\" in config[\\\\\\\"paths\\\\\\\"]:\\\\n        path = config[\\\\\\\"paths\\\\\\\"][\\\\\\\"default_review_prompt_dir\\\\\\\"]\\\\n        return Path(os.path.expanduser(path))\\\\n\\\\n    # ê¸°ë³¸ ìœ„ì¹˜\\\\n    if sys.platform == \\\\\\\"darwin\\\\\\\":\\\\n        return MAC_CONFIG_DIR / \\\\\\\"review_prompt\\\\\\\"\\\\n    else:\\\\n        return Path.home() / \\\\\\\".local\\\\\\\" / \\\\\\\"share\\\\\\\" / \\\\\\\"reviewer\\\\\\\" / \\\\\\\"review_prompt\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"API í‚¤ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ë””ë ‰í† ë¦¬ ì„¤ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_model_info\\\\nfrom reviewer.src.config import get_api_key\\\\n\\\\n\\\\n# ìˆœí™˜ ì°¸ì¡° ë°©ì§€ë¥¼ ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ í•¨ìˆ˜ ì •ì˜\\\\ndef get_BaseGateway():\\\\n    from .base_gateway import BaseGateway\\\\n\\\\n    return BaseGateway\\\\n\\\\n\\\\ndef get_ClaudeGateway():\\\\n    from .claude_gateway import ClaudeGateway\\\\n\\\\n    return ClaudeGateway\\\\n\\\\n\\\\ndef get_GatewayFactory():\\\\n    from .gateway_factory import GatewayFactory\\\\n\\\\n    return GatewayFactory\\\\n\\\\n\\\\ndef get_OpenAIGateway():\\\\n    from .openai_gateway import OpenAIGateway\\\\n\\\\n    return OpenAIGateway\\\\n\\\\n\\\\n# íŒ¨í‚¤ì§€ ë ˆë²¨ì—ì„œ í´ë˜ìŠ¤ë¥¼ ë°”ë¡œ ë…¸ì¶œí•˜ëŠ” ëŒ€ì‹  í•¨ìˆ˜ë¡œ ì ‘ê·¼í•˜ë„ë¡ í•¨\\\\n__all__ = [\\\\n    \\\\\\\"get_BaseGateway\\\\\\\",\\\\n    \\\\\\\"get_ClaudeGateway\\\\\\\",\\\\n    \\\\\\\"get_OpenAIGateway\\\\\\\",\\\\n    \\\\\\\"get_GatewayFactory\\\\\\\",\\\\n    \\\\\\\"get_api_key\\\\\\\",\\\\n    \\\\\\\"get_model_info\\\\\\\",\\\\n    \\\\\\\"get_default_model\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .base_gateway import BaseGateway\\\\nfrom .claude_gateway import ClaudeGateway\\\\nfrom .gateway_factory import GatewayFactory\\\\nfrom .openai_gateway import OpenAIGateway\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 5}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ìˆœí™˜ ì°¸ì¡° ë°©ì§€ë¥¼ ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ í•¨ìˆ˜ ì •ì˜\\\\ndef get_BaseGateway():\\\\n    from .base_gateway import BaseGateway\\\\n\\\\n    return BaseGateway\\\\n\\\\n\\\\ndef get_ClaudeGateway():\\\\n    from .claude_gateway import ClaudeGateway\\\\n\\\\n    return ClaudeGateway\\\\n\\\\n\\\\ndef get_GatewayFactory():\\\\n    from .gateway_factory import GatewayFactory\\\\n\\\\n    return GatewayFactory\\\\n\\\\n\\\\ndef get_OpenAIGateway():\\\\n    from .openai_gateway import OpenAIGateway\\\\n\\\\n    return OpenAIGateway\\\\n\\\\n\\\\n# íŒ¨í‚¤ì§€ ë ˆë²¨ì—ì„œ í´ë˜ìŠ¤ë¥¼ ë°”ë¡œ ë…¸ì¶œí•˜ëŠ” ëŒ€ì‹  í•¨ìˆ˜ë¡œ ì ‘ê·¼í•˜ë„ë¡ í•¨\\\\n```\\\", \\\"line_number\\\": 7}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    \\\\\\\"BaseGateway\\\\\\\",\\\\n    \\\\\\\"ClaudeGateway\\\\\\\",\\\\n    \\\\\\\"OpenAIGateway\\\\\\\",\\\\n    \\\\\\\"GatewayFactory\\\\\\\",\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"get_BaseGateway\\\\\\\",\\\\n    \\\\\\\"get_ClaudeGateway\\\\\\\",\\\\n    \\\\\\\"get_OpenAIGateway\\\\\\\",\\\\n    \\\\\\\"get_GatewayFactory\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 34}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/base_gateway.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤ ì •ì˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom __future__ import annotations\\\\n\\\\nimport abc\\\\nimport json\\\\nfrom datetime import datetime\\\\nfrom pathlib import Path\\\\nfrom typing import Any\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\nfrom reviewer.src.available_models import ModelInfoDict\\\\nfrom reviewer.src.exceptions.context_limit_exceeded_error import (\\\\n    ContextLimitExceededError,\\\\n)\\\\nfrom reviewer.src.utils import save_prompt\\\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\\\nfrom reviewer.src.utils.logging import get_logger\\\\nfrom reviewer.src.utils.prompts.models import ReviewPrompt, ReviewPromptWithFileContent\\\\nfrom reviewer.src.utils.token.models import (\\\\n    DiffCheckResult,\\\\n    EstimatedCost,\\\\n    ReviewResponse,\\\\n    StructuredReviewResponse,\\\\n)\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n\\\\n\\\\nclass BaseGateway(abc.ABC):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ì˜ ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __init__(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        Args:\\\\n            model_info: ëª¨ë¸ ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        self.model: ModelInfoDict\\\\n        self._set_model(model_info)\\\\n        self.api_key = self._load_api_key()\\\\n\\\\n    @abc.abstractmethod\\\\n    def _load_api_key(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Providerì— ë§ëŠ” API í‚¤ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _set_model(self, model_info: ModelInfoDict) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì‚¬ìš©í•  ëª¨ë¸ì„ ì„¤ì •í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    @abc.abstractmethod\\\\n    def _create_request_params(self, messages: list[dict[str, Any]]) -> dict[str, Any]:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        ê° í”„ë¡œë°”ì´ë”ë³„ API ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n        ê° í•˜ìœ„ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ LLM í”„ë¡œë°”ì´ë”ì— ë§ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            messages: ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸\\\\n\\\\n        Returns:\\\\n            dict: API ìš”ì²­ íŒŒë¼ë¯¸í„°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        raise NotImplementedError\\\\n\\\\n    def get_model_name(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ ì „ì²´ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"full_name\\\\\\\"]\\\\n\\\\n    def get_provider(self) -> str:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ ì„¤ì •ëœ ëª¨ë¸ì˜ í”„ë¡œë°”ì´ë”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return self.model[\\\\\\\"provider\\\\\\\"]\\\\n\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í˜„ì¬ í”„ë¡œë°”ì´ë”ì— ë§ëŠ” LLM í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Returns:\\\\n            Instructor: êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” LLM í´ë¼ì´ì–¸íŠ¸\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        return LLMClientFactory.create_client(self.get_provider(), self.api_key)\\\\n\\\\n    def estimate_review_cost(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì˜ ì˜ˆìƒ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´ (ReviewPrompt ë˜ëŠ” ReviewPromptWithFileContent)\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ìƒì„±\\\\n        combined_text = \\\\\\\"\\\\\\\"\\\\n        combined_text += review_prompt.system_prompt.content + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n        for user_prompt in review_prompt.user_prompts:\\\\n            combined_text += user_prompt.to_message()[\\\\\\\"content\\\\\\\"] + \\\\\\\"\\\\\\\\n\\\\\\\\n\\\\\\\"\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        return TokenUtils.estimate_cost(combined_text, model_name)\\\\n\\\\n    def check_diff_size(self, diff_content: str) -> DiffCheckResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"Diff ë‚´ìš©ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê³  ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            diff_content: diff ë‚´ìš©\\\\n\\\\n        Returns:\\\\n            DiffCheckResult: í¬ê¸° ë° ë¹„ìš© ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n        # í† í° ìˆ˜ì™€ ë¹„ìš© ê³„ì‚°\\\\n        model_name = self.get_model_name()\\\\n        cost_info = TokenUtils.estimate_cost(diff_content, model_name)\\\\n\\\\n        # DiffCheckResult ê°ì²´ ìƒì„±í•˜ì—¬ ë°˜í™˜\\\\n        return DiffCheckResult(\\\\n            model=cost_info.model,\\\\n            input_tokens=cost_info.input_tokens,\\\\n            input_cost_usd=cost_info.input_cost_usd,\\\\n            estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n            estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n            estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n            within_context_limit=cost_info.within_context_limit,\\\\n            character_count=len(diff_content),\\\\n            line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n        )\\\\n\\\\n    def save_raw_response(self, completion: StructuredReviewResponse) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"LLM API ì›ë³¸ ì‘ë‹µì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            completion: API ì‘ë‹µ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            provider = self.get_provider()\\\\n            current_time = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n\\\\n            with open(raw_response_file, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                f.write(f\\\\\\\"# {provider.capitalize()} ì›ë³¸ ì‘ë‹µ\\\\\\\\n\\\\\\\\n\\\\\\\")\\\\n                try:\\\\n                    raw_response = completion.model_dump(mode=\\\\\\\"json\\\\\\\")\\\\n                    f.write(\\\\n                        json.dumps(\\\\n                            raw_response, indent=2, default=str, ensure_ascii=False\\\\n                        )\\\\n                    )\\\\n                except Exception:\\\\n                    f.write(str(completion))\\\\n            logger.info(\\\\n                f\\\\\\\"{provider.capitalize()} ì›ë³¸ ì‘ë‹µì„ {raw_response_file}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\"\\\\n            )\\\\n        except Exception as e:\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n\\\\n    def prepare_review_request(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> None:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ ì „ ë¹„ìš© ì¶”ì • ë° ë©”ì‹œì§€ ì¤€ë¹„ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·° í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            None\\\\n\\\\n        Raises:\\\\n            ContextLimitExceededError: ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì´ˆê³¼í•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        estimated_cost = self.estimate_review_cost(review_prompt)\\\\n\\\\n        if not estimated_cost.within_context_limit:\\\\n            raise ContextLimitExceededError(\\\\n                input_tokens=estimated_cost.input_tokens,\\\\n                context_limit=self.model.get(\\\\\\\"context_limit\\\\\\\"),\\\\n            )\\\\n\\\\n        logger.info(\\\\n            f\\\\\\\"ëª¨ë¸: {estimated_cost.model}, \\\\\\\"\\\\n            f\\\\\\\"í† í° ìˆ˜: {estimated_cost.input_tokens}, \\\\\\\"\\\\n            f\\\\\\\"ë¹„ìš©: {estimated_cost.estimated_total_cost_usd} USD\\\\\\\"\\\\n        )\\\\n\\\\n        # í”„ë¡¬í”„íŠ¸ ì €ì¥\\\\n        save_prompt(review_prompt.to_messages(), self.get_model_name())\\\\n\\\\n    def review_code(\\\\n        self, review_prompt: ReviewPrompt | ReviewPromptWithFileContent\\\\n    ) -> ReviewResponse:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            review_prompt: ë¦¬ë·°ìš© í”„ë¡¬í”„íŠ¸ ê°ì²´\\\\n\\\\n        Returns:\\\\n            ReviewResponse: ë¦¬ë·° ê²°ê³¼\\\\n\\\\n        Raises:\\\\n            Exception: API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ìš”ì²­ ì¤€ë¹„\\\\n        self.prepare_review_request(review_prompt)\\\\n        messages = review_prompt.to_messages()\\\\n\\\\n        try:\\\\n            # í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”\\\\n            client = self._create_client()\\\\n\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n\\\\n            # API ìš”ì²­ íŒŒë¼ë¯¸í„° ìƒì„±\\\\n            params = self._create_request_params(messages)\\\\n\\\\n            # API ìš”ì²­ ì†¡ì‹ \\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n\\\\n            # ì›ë³¸ ì‘ë‹µ ì €ì¥\\\\n            self.save_raw_response(completion)\\\\n\\\\n            # ì‘ë‹µ ì²˜ë¦¬\\\\n            if not completion:\\\\n                return ReviewResponse.get_empty_response()\\\\n\\\\n            return ReviewResponse.from_structured_response(completion)\\\\n\\\\n        except Exception as e:\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n            return ReviewResponse.get_error_response(e)\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom pathlib import Path\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_raw_log_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.token import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„±\\\\nLOG_DIR = get_default_raw_log_dir()\\\\nLOG_DIR.mkdir(exist_ok=True, parents=True)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\n# ë¡œê·¸ ë””ë ‰í† ë¦¬ ì„¤ì • ë° ìƒì„± - ì§€ì—° ì„í¬íŠ¸ë¡œ ë³€ê²½\\\\ndef get_log_dir() -> Path:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¡œê·¸ ë””ë ‰í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from reviewer.src.config import get_default_raw_log_dir\\\\n\\\\n    log_dir = get_default_raw_log_dir()\\\\n    log_dir.mkdir(exist_ok=True, parents=True)\\\\n    return log_dir\\\\n```\\\", \\\"line_number\\\": 29}, {\\\"hunk_idx\\\": \\\"7\\\", \\\"original_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def _create_client(self) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"8\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 106}, {\\\"hunk_idx\\\": \\\"9\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # TokenUtils ì§€ì—° ì„í¬íŠ¸\\\\n        from reviewer.src.utils.token import TokenUtils\\\\n\\\\n```\\\", \\\"line_number\\\": 128}, {\\\"hunk_idx\\\": \\\"10\\\", \\\"original_code\\\": \\\"```python\\\\n            raw_response_file = LOG_DIR / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            log_dir = get_log_dir()\\\\n            raw_response_file = log_dir / f\\\\\\\"{provider}-raw-response-{current_time}.json\\\\\\\"\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"11\\\", \\\"original_code\\\": \\\"```python\\\\n            print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"12\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(\\\\n                f\\\\\\\"{provider.capitalize()} ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\",\\\\n                exc_info=True,\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"13\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.info(\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"14\\\", \\\"original_code\\\": \\\"```python\\\\n            print(f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.info(\\\\n                f\\\\\\\"API ìš”ì²­: ëª¨ë¸={self.get_model_name()}, ë©”ì‹œì§€ ìˆ˜={len(messages)}\\\\\\\"\\\\n            )\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"15\\\", \\\"original_code\\\": \\\"```python\\\\n            completion = client.chat.completions.create(\\\\n                response_model=StructuredReviewResponse, max_retries=2, **params\\\\n            )\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            if isinstance(client, instructor.Instructor):\\\\n                completion = client.chat.completions.create(\\\\n                    response_model=StructuredReviewResponse, max_retries=2, **params\\\\n                )\\\\n```\\\", \\\"line_number\\\": 241}, {\\\"hunk_idx\\\": \\\"16\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            logger.error(f\\\\\\\"ë¦¬ë·° ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/__init__.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom .git_utils import run_git_diff\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n\\\\n__all__ = [\\\\\\\"run_git_diff\\\\\\\", \\\\\\\"save_prompt\\\\\\\"]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .prompt_utils import save_prompt\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# prompt_utilsë¥¼ ì§ì ‘ ì„í¬íŠ¸í•˜ì§€ ì•Šê³  ìƒëŒ€ ê²½ë¡œë¡œ ì°¸ì¡°í•˜ë„ë¡ í•¨ìˆ˜ ì •ì˜\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    ì´ í•¨ìˆ˜ëŠ” ìˆœí™˜ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì§€ì—° ì„í¬íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    from .prompt_utils import save_prompt as _save_prompt\\\\n\\\\n    return _save_prompt(messages, model)\\\\n\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/git_utils.py\\\", \\\"file_content\\\": \\\"import subprocess\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef run_git_diff(repo_path: str, commit_range: str | None = None) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì •ëœ ì €ì¥ì†Œì—ì„œ git diff ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        repo_path (str): Git ì €ì¥ì†Œ ê²½ë¡œ\\\\n        commit_range (str | None): ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: \\\\\\\"HEAD~1..HEAD\\\\\\\")\\\\n\\\\n    Returns:\\\\n        str: git diff ëª…ë ¹ì˜ ì¶œë ¥\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    cmd = [\\\\\\\"git\\\\\\\", \\\\\\\"-C\\\\\\\", repo_path, \\\\\\\"diff\\\\\\\", \\\\\\\"--unified=0\\\\\\\"]\\\\n\\\\n    try:\\\\n        if commit_range and commit_range.startswith(\\\\\\\"-\\\\\\\"):\\\\n            raise ValueError(\\\\\\\"Invalid commit_range: cannot start with '-'\\\\\\\")\\\\n        if commit_range:\\\\n            cmd.append(commit_range)\\\\n        process_result = subprocess.run(\\\\n            cmd, capture_output=True, text=True, check=True, encoding=\\\\\\\"utf-8\\\\\\\"\\\\n        )\\\\n        return process_result.stdout\\\\n    except subprocess.CalledProcessError as e:\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n    except ValueError as e:\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n        return \\\\\\\"\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 3}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"Git diff ëª…ë ¹ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n        print(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        logger.error(f\\\\\\\"ì˜¤ë¥˜: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/prompt_utils.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ì™€ ê´€ë ¨ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport json\\\\nfrom datetime import datetime\\\\n\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\ndef save_prompt(messages: list, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        messages: ì €ì¥í•  ë©”ì‹œì§€ ëª©ë¡\\\\n        model: ëª¨ë¸ ì´ë¦„\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_prompt_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_prompt_{timestamp}_{model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(messages, f, ensure_ascii=False, indent=2)\\\\n\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.config import get_default_review_prompt_dir\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    # ì§€ì—° ì„í¬íŠ¸(lazy import)ë¡œ ìˆœí™˜ ì°¸ì¡° ë°©ì§€\\\\n    from reviewer.src.config import get_default_review_prompt_dir\\\\n\\\\n```\\\", \\\"line_number\\\": 19}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n    print(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    logger.info(f\\\\\\\"í”„ë¡¬í”„íŠ¸ë¥¼ {save_path}ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/__init__.py\\\", \\\"file_content\\\": \\\"from .models import ReviewIssue, ReviewRequest, ReviewResponse\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n\\\\n__all__ = [\\\\n    \\\\\\\"TokenUtils\\\\\\\",\\\\n    \\\\\\\"ReviewRequest\\\\\\\",\\\\n    \\\\\\\"ReviewIssue\\\\\\\",\\\\n    \\\\\\\"ReviewResponse\\\\\\\",\\\\n]\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom .token_utils import TokenUtils\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•œ ë˜í¼ í´ë˜ìŠ¤\\\\nclass _TokenUtilsWrapper:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"TokenUtils í´ë˜ìŠ¤ì— ëŒ€í•œ ì§€ì—° ì„í¬íŠ¸ ë˜í¼.\\\\n\\\\n    ì´ í´ë˜ìŠ¤ëŠ” TokenUtilsì˜ ëª¨ë“  ë©”ì„œë“œì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ì§€ë§Œ,\\\\n    ì‹¤ì œë¡œ TokenUtilsê°€ í•„ìš”í•  ë•Œë§Œ ì„í¬íŠ¸í•©ë‹ˆë‹¤.\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    def __getattr__(self, name):\\\\n        from .token_utils import TokenUtils\\\\n\\\\n        return getattr(TokenUtils, name)\\\\n\\\\n\\\\n# TokenUtils ëŒ€ì‹  ë˜í¼ ì¸ìŠ¤í„´ìŠ¤ ì œê³µ\\\\nTokenUtils = _TokenUtilsWrapper()\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•´ ì œê±°\\\\n# from reviewer.src.llm_gateway import get_api_key\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nfrom reviewer.src.llm_gateway import get_api_key\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ì§€ì—° ì„í¬íŠ¸ë¥¼ ìœ„í•´ ì œê±°\\\\n# from reviewer.src.llm_gateway import get_api_key\\\\nfrom reviewer.src.utils.logging import get_logger\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n# ë¡œê±° ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\\\\nlogger = get_logger(__name__)\\\\n\\\\n```\\\", \\\"line_number\\\": 13}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©) - ì§€ì—° ì„í¬íŠ¸\\\\n                from reviewer.src.config import get_api_key\\\\n\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n                logger.error(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\", exc_info=True)\\\\n```\\\", \\\"line_number\\\": 0}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 1, \"file\": \"legacy_tests/test_diff_parser.py\", \"description\": \"í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ open() í˜¸ì¶œ ì‹œ ëª…ì‹œì  ì¸ì½”ë”©ì´ ì§€ì •ë˜ì§€ ì•Šì•„ í”Œë«í¼(Windows, macOS, Linux) ê°„ ê¸°ë³¸ ì¸ì½”ë”© ì°¨ì´ë¡œ í…ŒìŠ¤íŠ¸ê°€ ë¶ˆì•ˆì •í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"open()ì— encoding=\\\"utf-8\\\" íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ pathlib.Path.read_text(encoding=\\\"utf-8\\\")ë¥¼ ì‚¬ìš©í•´ ì¼ê´€ëœ ì¸ì½”ë”©ì„ ì§€ì •í•˜ì„¸ìš”.\", \"severity\": \"info\", \"original_code\": \"with open(os.path.join(\\\"tests/sample_data\\\", filename)) as f:\", \"improved_code\": \"with open(os.path.join(\\\"tests/sample_data\\\", filename), encoding=\\\"utf-8\\\") as f:\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 113, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"processed_diffê°€ DiffResult íƒ€ì…ì´ ì•„ë‹ ê²½ìš° .files ë˜ëŠ” .hunks ì†ì„± ì°¸ì¡° ì‹œ AttributeErrorê°€ ë°œìƒí•´ ë©”ì‹œì§€ ìƒì„± ë¡œì§ì´ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ì›ë˜ëŒ€ë¡œ isinstance(review_request.processed_diff, DiffResult) ì²´í¬ë¥¼ ë³µì›í•˜ê±°ë‚˜, processed_diffê°€ ì˜¬ë°”ë¥¸ íƒ€ì…ì¸ì§€ ê²€ì¦í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•´ ëŸ°íƒ€ì„ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•˜ì„¸ìš”.\", \"severity\": \"error\", \"original_code\": \"for file in review_request.processed_diff.files:\", \"improved_code\": \"if isinstance(review_request.processed_diff, DiffResult):\\n    for file in review_request.processed_diff.files:\\n        # ì´í•˜ ë™ì¼\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 4, \"file\": \"reviewer/src/utils/prompts/prompt_generator.py\", \"description\": \"json.dumpsë¥¼ ì‚¬ìš©í•˜ëŠ”ë° json ëª¨ë“ˆì´ importë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ NameErrorê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"íŒŒì¼ ìƒë‹¨ì— import json êµ¬ë¬¸ì„ ì¶”ê°€í•´ json ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ì„í¬íŠ¸í•˜ì„¸ìš”.\", \"severity\": \"warning\", \"original_code\": \"from pathlib import Path\\n\\nfrom reviewer.src.utils.token.models import ReviewRequest\", \"improved_code\": \"import json\\nfrom pathlib import Path\\n\\nfrom reviewer.src.utils.token.models import ReviewRequest\"}], \"summary\": \"legacy_tests/test_diff_parser.pyì—ì„œëŠ” pytest ì œê±° ë° open ëª¨ë“œ ê°„ì†Œí™”ê°€ ì´ë¤„ì¡Œìœ¼ë‚˜ ì¸ì½”ë”© ì§€ì •ì´ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤. prompt_generator.pyì—ì„œëŠ” DiffResult ì˜ì¡´ì„± ì œê±°ì™€ íƒ€ì… ì²´í¬ ë¡œì§ ì‚­ì œë¡œ ì¸í•´ processed_diffì˜ ì•ˆì „ì„±ì´ ë–¨ì–´ì¡Œê³ , json ëª¨ë“ˆ ì„í¬íŠ¸ ì—¬ë¶€ë„ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.\", \"score\": 6.0, \"recommendations\": [\"íŒŒì¼ ì…ì¶œë ¥ ì‹œ í•­ìƒ ëª…ì‹œì  ì¸ì½”ë”© ì§€ì •\", \"íƒ€ì… ê²€ì¦ ë¡œì§ì„ ìœ ì§€í•˜ê±°ë‚˜ ê°•í™”í•´ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€\", \"í•„ìˆ˜ ëª¨ë“ˆ(import) ëˆ„ë½ ì—¬ë¶€ ì ê²€\", \"pathlib.Path í™œìš©í•´ ê²½ë¡œ ì²˜ë¦¬ í†µì¼\", \"isort/black ë“± ì½”ë“œ ìŠ¤íƒ€ì¼ ìë™í™” ë„êµ¬ ì ìš©\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"],\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude] [KEY]\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì§€ì›í•˜ëŠ” LLM ëª¨ë¸ ëª©ë¡ê³¼ ê´€ë ¨ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom typing import Literal, TypedDict\\\\n\\\\nfrom reviewer.src.exceptions.unsupported_model_error import UnsupportedModelError\\\\n\\\\n# ëª¨ë¸ ì œê³µì íƒ€ì…\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n\\\\n\\\\nclass ModelParamsDict(TypedDict, total=False):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    temperature: float\\\\n    reasoning_effort: str\\\\n    max_tokens: int\\\\n\\\\n\\\\nclass ModelInfoDict(TypedDict):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì •ë³´ íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    full_name: str\\\\n    aliases: list[str]\\\\n    description: str\\\\n    provider: ModelProvider\\\\n    params: ModelParamsDict\\\\n\\\\n\\\\n# ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ì •ë³´\\\\nAVAILABLE_MODELS: dict[str, ModelInfoDict] = {\\\\n    \\\\\\\"gpt-4o\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4 Omni ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gpt-4.1\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4.1\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4.1 ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"o3-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o3-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"o4-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o4-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"claude-3-7-sonnet\\\\\\\", \\\\\\\"claude-3.7-sonnet\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Claude 3.7 Sonnet ëª¨ë¸, ê· í˜•ì ì¸ ì„±ëŠ¥ê³¼ ê²½ì œì„±\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"claude\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n}\\\\n\\\\n# ëª¨ë¸ ì´ë¦„ ì¶•ì•½í˜•ì„ ì „ì²´ ì´ë¦„ì— ë§¤í•‘\\\\nMODEL_NAME_ALIASES: dict[str, str] = {\\\\n    \\\\\\\"claude-3-7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"claude-3.7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"o3-mini-high\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n    \\\\\\\"o4-mini-high\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-flash\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef get_model_info(model_name: str) -> ModelInfoDict:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        model_name: ëª¨ë¸ ì´ë¦„ (ì •ì‹ ì´ë¦„ ë˜ëŠ” ì¶•ì•½í˜•)\\\\n\\\\n    Returns:\\\\n        ModelInfoDict: ëª¨ë¸ ì •ë³´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì •ì‹ ì´ë¦„ìœ¼ë¡œ ì‹œë„\\\\n    if model_name in AVAILABLE_MODELS:\\\\n        return AVAILABLE_MODELS[model_name]\\\\n\\\\n    # ì¶•ì•½í˜•ìœ¼ë¡œ ì‹œë„\\\\n    full_name = MODEL_NAME_ALIASES.get(model_name)\\\\n    if full_name:\\\\n        return AVAILABLE_MODELS[full_name]\\\\n\\\\n    raise UnsupportedModelError(model_name)\\\\n\\\\n\\\\ndef get_supported_models() -> list[str]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        List[str]: ì§€ì›í•˜ëŠ” ëª¨ë¸ ì´ë¦„ ëª©ë¡\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return list(AVAILABLE_MODELS.keys()) + list(MODEL_NAME_ALIASES.keys())\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    return \\\\\\\"o4-mini\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-flash\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 104}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/gateway_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ìƒì„±ì„ ë‹´ë‹¹í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_default_model\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import get_model_info\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\n\\\\nclass GatewayFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create(model: str) -> BaseGateway:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì£¼ì–´ì§„ ëª¨ë¸ ì´ë¦„ì— ë§ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not model:\\\\n            model = get_default_model()\\\\n\\\\n        model_info = get_model_info(model)\\\\n\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"openai\\\\\\\":\\\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\\\n\\\\n            return OpenAIGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"claude\\\\\\\":\\\\n            from reviewer.src.llm_gateway.claude_gateway import ClaudeGateway\\\\n\\\\n            return ClaudeGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n        else:\\\\n            raise UnsupportedProviderError(model_info[\\\\\\\"provider\\\\\\\"])\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n```\\\", \\\"line_number\\\": 35}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬ ëª¨ë“ˆ\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\n\\\\nclass LLMClientFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ì— ë§ëŠ”, êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            provider: LLM í”„ë¡œë°”ì´ë” (openai ë˜ëŠ” claude)\\\\n            api_key: API í‚¤\\\\n\\\\n        Returns:\\\\n            Instructor: instructor ë˜í•‘ëœ LLM í´ë¼ì´ì–¸íŠ¸\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” í”„ë¡œë°”ì´ë”ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if provider == \\\\\\\"openai\\\\\\\":\\\\n            from openai import OpenAI\\\\n\\\\n            return instructor.from_openai(OpenAI(api_key=api_key))\\\\n        elif provider == \\\\\\\"claude\\\\\\\":\\\\n            from anthropic import Anthropic\\\\n\\\\n            return instructor.from_anthropic(Anthropic(api_key=api_key))\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” LLM í”„ë¡œë°”ì´ë”ì…ë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    def create_client(provider: str, api_key: str) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n```\\\", \\\"line_number\\\": 34}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n                from reviewer.src.llm_gateway import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n                from reviewer.src.llm_gateway import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n```\\\", \\\"line_number\\\": 38}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n```\\\", \\\"line_number\\\": 99}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n```\\\", \\\"line_number\\\": 107}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n```\\\", \\\"line_number\\\": 139}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n```\\\", \\\"line_number\\\": 152}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"bug\", \"line_number\": 42, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"`get_api_key` í•¨ìˆ˜ê°€ `count_tokens` ë©”ì„œë“œ ë‚´ì˜ `try` ë¸”ë¡ ì•ˆì—ì„œ ì˜ëª»ëœ ê²½ë¡œ(`reviewer.src.llm_gateway`)ë¡œ ì„í¬íŠ¸ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì„í¬íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“ˆ ìµœìƒë‹¨ì— ìœ„ì¹˜í•´ì•¼ í•˜ë©°, ì˜¬ë°”ë¥¸ ê²½ë¡œ(`reviewer.src.config`)ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœë¡œëŠ” `get_api_key`ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.\", \"suggestion\": \"`from reviewer.src.llm_gateway import get_api_key` ì„í¬íŠ¸ ë¬¸ì„ íŒŒì¼ ìµœìƒë‹¨ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³ , ê²½ë¡œë¥¼ `from reviewer.src.config import get_api_key`ë¡œ ìˆ˜ì •í•˜ì„¸ìš”.\", \"severity\": \"error\", \"original_code\": \"```python\\n                try:\\n                    # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\n                    from reviewer.src.llm_gateway import get_api_key\\n```\", \"improved_code\": \"```python\\n# íŒŒì¼ ìµœìƒë‹¨ì— ì¶”ê°€\\nfrom reviewer.src.config import get_api_key\\n\\n# ... (count_tokens ë©”ì„œë“œ ë‚´ë¶€)\\n            if \\\"gemini\\\" in model.lower():\\n                try:\\n                    # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\n                    # from reviewer.src.llm_gateway import get_api_key # ì´ ì¤„ì€ ì‚­ì œ\\n```\"}, {\"type\": \"design\", \"line_number\": 45, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"`count_tokens` ë©”ì„œë“œ ë‚´ì—ì„œ Gemini í´ë¼ì´ì–¸íŠ¸ë¥¼ ì§ì ‘ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ `LLMClientFactory`ì—ì„œ í”„ë¡œë°”ì´ë”ë³„ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§ì´ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì½”ë“œ ì¤‘ë³µì„ ì¤„ì´ê³  ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ì¢‹ìŠµë‹ˆë‹¤.\", \"suggestion\": \"`LLMClientFactory.create_client`ë¥¼ ì‚¬ìš©í•˜ì—¬ Gemini í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì„¸ìš”. ì´ë¥¼ ìœ„í•´ `reviewer.src.utils.llm_factory.LLMClientFactory`ë¥¼ íŒŒì¼ ìµœìƒë‹¨ì— ì„í¬íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n                # Client ê°ì²´ ìƒì„±\\n                client = genai.Client(api_key=api_key)\\n```\", \"improved_code\": \"```python\\n# íŒŒì¼ ìµœìƒë‹¨ì— ì¶”ê°€\\nfrom reviewer.src.utils.llm_factory import LLMClientFactory\\n\\n# ... (count_tokens ë©”ì„œë“œ ë‚´ë¶€)\\n                # LLMClientFactoryë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ê°€ì ¸ì˜¤ê¸°\\n                client = LLMClientFactory.create_client(\\\"google\\\", api_key)\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ Google Gemini ëª¨ë¸ ì§€ì›ì„ ì¶”ê°€í•©ë‹ˆë‹¤. CLI ì¸ì íŒŒì‹±, ì§€ì› ëª¨ë¸ ëª©ë¡, LLM ê²Œì´íŠ¸ì›¨ì´ íŒ©í† ë¦¬, LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬, í† í° ê³„ì‚° ìœ í‹¸ë¦¬í‹° ë“± ì—¬ëŸ¬ ëª¨ë“ˆì— ê±¸ì³ Gemini ê´€ë ¨ ë¡œì§ì´ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ê¸°ëŠ¥ í™•ì¥ì€ ì˜ ì´ë£¨ì–´ì¡Œìœ¼ë‚˜, í† í° ê³„ì‚° ìœ í‹¸ë¦¬í‹°ì—ì„œ API í‚¤ ì„í¬íŠ¸ ê²½ë¡œ ì˜¤ë¥˜ ë° í´ë¼ì´ì–¸íŠ¸ ìƒì„± ë¡œì§ ì¤‘ë³µ ë¬¸ì œê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"í† í° ê³„ì‚° ìœ í‹¸ë¦¬í‹°(`token_utils.py`)ì—ì„œ `get_api_key` ì„í¬íŠ¸ ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•˜ê³  ì„í¬íŠ¸ ìœ„ì¹˜ë¥¼ ìµœìƒë‹¨ìœ¼ë¡œ ì˜®ê¸°ì„¸ìš”.\", \"í† í° ê³„ì‚° ìœ í‹¸ë¦¬í‹°ì—ì„œ LLM í´ë¼ì´ì–¸íŠ¸ ìƒì„± ì‹œ `LLMClientFactory`ë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ì¤‘ë³µì„ ì œê±°í•˜ì„¸ìš”.\", \"ìƒˆë¡œ ì¶”ê°€ëœ Gemini ëª¨ë¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ì—¬ ê¸°ëŠ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"],\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude] [KEY]\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì§€ì›í•˜ëŠ” LLM ëª¨ë¸ ëª©ë¡ê³¼ ê´€ë ¨ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom typing import Literal, TypedDict\\\\n\\\\nfrom reviewer.src.exceptions.unsupported_model_error import UnsupportedModelError\\\\n\\\\n# ëª¨ë¸ ì œê³µì íƒ€ì…\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n\\\\n\\\\nclass ModelParamsDict(TypedDict, total=False):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    temperature: float\\\\n    reasoning_effort: str\\\\n    max_tokens: int\\\\n\\\\n\\\\nclass ModelInfoDict(TypedDict):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì •ë³´ íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    full_name: str\\\\n    aliases: list[str]\\\\n    description: str\\\\n    provider: ModelProvider\\\\n    params: ModelParamsDict\\\\n\\\\n\\\\n# ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ì •ë³´\\\\nAVAILABLE_MODELS: dict[str, ModelInfoDict] = {\\\\n    \\\\\\\"gpt-4o\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4 Omni ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gpt-4.1\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4.1\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4.1 ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"o3-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o3-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"o4-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o4-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"claude-3-7-sonnet\\\\\\\", \\\\\\\"claude-3.7-sonnet\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Claude 3.7 Sonnet ëª¨ë¸, ê· í˜•ì ì¸ ì„±ëŠ¥ê³¼ ê²½ì œì„±\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"claude\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n}\\\\n\\\\n# ëª¨ë¸ ì´ë¦„ ì¶•ì•½í˜•ì„ ì „ì²´ ì´ë¦„ì— ë§¤í•‘\\\\nMODEL_NAME_ALIASES: dict[str, str] = {\\\\n    \\\\\\\"claude-3-7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"claude-3.7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"o3-mini-high\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n    \\\\\\\"o4-mini-high\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-flash\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef get_model_info(model_name: str) -> ModelInfoDict:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        model_name: ëª¨ë¸ ì´ë¦„ (ì •ì‹ ì´ë¦„ ë˜ëŠ” ì¶•ì•½í˜•)\\\\n\\\\n    Returns:\\\\n        ModelInfoDict: ëª¨ë¸ ì •ë³´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì •ì‹ ì´ë¦„ìœ¼ë¡œ ì‹œë„\\\\n    if model_name in AVAILABLE_MODELS:\\\\n        return AVAILABLE_MODELS[model_name]\\\\n\\\\n    # ì¶•ì•½í˜•ìœ¼ë¡œ ì‹œë„\\\\n    full_name = MODEL_NAME_ALIASES.get(model_name)\\\\n    if full_name:\\\\n        return AVAILABLE_MODELS[full_name]\\\\n\\\\n    raise UnsupportedModelError(model_name)\\\\n\\\\n\\\\ndef get_supported_models() -> list[str]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        List[str]: ì§€ì›í•˜ëŠ” ëª¨ë¸ ì´ë¦„ ëª©ë¡\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return list(AVAILABLE_MODELS.keys()) + list(MODEL_NAME_ALIASES.keys())\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    return \\\\\\\"o4-mini\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-flash\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 104}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/gateway_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ìƒì„±ì„ ë‹´ë‹¹í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_default_model\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import get_model_info\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\n\\\\nclass GatewayFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create(model: str) -> BaseGateway:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì£¼ì–´ì§„ ëª¨ë¸ ì´ë¦„ì— ë§ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not model:\\\\n            model = get_default_model()\\\\n\\\\n        model_info = get_model_info(model)\\\\n\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"openai\\\\\\\":\\\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\\\n\\\\n            return OpenAIGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"claude\\\\\\\":\\\\n            from reviewer.src.llm_gateway.claude_gateway import ClaudeGateway\\\\n\\\\n            return ClaudeGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n        else:\\\\n            raise UnsupportedProviderError(model_info[\\\\\\\"provider\\\\\\\"])\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n```\\\", \\\"line_number\\\": 35}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬ ëª¨ë“ˆ\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\n\\\\nclass LLMClientFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ì— ë§ëŠ”, êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            provider: LLM í”„ë¡œë°”ì´ë” (openai ë˜ëŠ” claude)\\\\n            api_key: API í‚¤\\\\n\\\\n        Returns:\\\\n            Instructor: instructor ë˜í•‘ëœ LLM í´ë¼ì´ì–¸íŠ¸\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” í”„ë¡œë°”ì´ë”ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if provider == \\\\\\\"openai\\\\\\\":\\\\n            from openai import OpenAI\\\\n\\\\n            return instructor.from_openai(OpenAI(api_key=api_key))\\\\n        elif provider == \\\\\\\"claude\\\\\\\":\\\\n            from anthropic import Anthropic\\\\n\\\\n            return instructor.from_anthropic(Anthropic(api_key=api_key))\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” LLM í”„ë¡œë°”ì´ë”ì…ë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    def create_client(provider: str, api_key: str) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n```\\\", \\\"line_number\\\": 34}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\nfrom google import genai\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n                from reviewer.src.llm_gateway import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n                from reviewer.src.llm_gateway import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(api_key=api_key)\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n```\\\", \\\"line_number\\\": 38}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n```\\\", \\\"line_number\\\": 99}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n```\\\", \\\"line_number\\\": 107}, {\\\"hunk_idx\\\": \\\"5\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n```\\\", \\\"line_number\\\": 139}, {\\\"hunk_idx\\\": \\\"6\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n```\\\", \\\"line_number\\\": 152}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"ìŠ¤íƒ€ì¼\", \"line_number\": 42, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"`get_api_key` í•¨ìˆ˜ê°€ `count_tokens` ë©”ì†Œë“œ ë‚´ë¶€ì— ì§€ì—­ì ìœ¼ë¡œ import ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ê¶Œì¥ë˜ì§€ ì•ŠëŠ” ë°©ì‹ì´ë©°, ëª¨ë“ˆ ìƒë‹¨ì—ì„œ import í•˜ëŠ” ê²ƒì´ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì…ë‹ˆë‹¤. ë˜í•œ, `reviewer.src.llm_gateway`ì—ì„œ `get_api_key`ë¥¼ ê°€ì ¸ì˜¤ê³  ìˆëŠ”ë°, ì´ í•¨ìˆ˜ì˜ ì‹¤ì œ ìœ„ì¹˜ëŠ” `reviewer.src.config`ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤ (cli.py ì°¸ì¡°).\", \"suggestion\": \"`from reviewer.src.config import get_api_key`ë¥¼ `reviewer/src/utils/token/token_utils.py` íŒŒì¼ ìƒë‹¨ìœ¼ë¡œ ì˜®ê¸°ì‹­ì‹œì˜¤. ì´ë ‡ê²Œ í•˜ë©´ ìˆœí™˜ ì°¸ì¡° ìœ„í—˜ì„ ì¤„ì´ê³  ì½”ë“œ ì „ì²´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n        if \\\"gemini\\\" in model.lower():\\n            try:\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\n                from reviewer.src.llm_gateway import get_api_key\\n\\n                api_key = get_api_key(\\\"google\\\")\\n```\", \"improved_code\": \"```python\\n# reviewer/src/utils/token/token_utils.py íŒŒì¼ ìƒë‹¨ì— ì¶”ê°€:\\nfrom reviewer.src.config import get_api_key\\n# ... other imports ...\\n\\nclass TokenUtils:\\n    # ...\\n    @staticmethod\\n    def count_tokens(text: str, model: str = \\\"gpt-4o\\\") -> int:\\n        # ...\\n        if \\\"gemini\\\" in model.lower():\\n            try:\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\n                api_key = get_api_key(\\\"google\\\")\\n                if not api_key:\\n                    print(\\\"Google API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Gemini í† í° ìˆ˜ë¥¼ ì •í™•íˆ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")\\n                    # API í‚¤ê°€ ì—†ìœ¼ë©´ API í˜¸ì¶œ ì‹œë„ ì „ì— ëŒ€ì²´ ë¡œì§ìœ¼ë¡œ ê°€ê±°ë‚˜ 0ì„ ë°˜í™˜\\n                    # (ì•„ë˜ëŠ” ê¸°ì¡´ ëŒ€ì²´ ë¡œì§ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒì„ ê°€ì •)\\n                    raise ValueError(\\\"Google API í‚¤ ì—†ìŒ\\\") # genai.Client ìƒì„± ì „ì— ì˜¤ë¥˜ ë°œìƒ ìœ ë„\\n                # ... client ìƒì„± ë° API í˜¸ì¶œ ...\\n```\"}, {\"type\": \"ë²„ê·¸\", \"line_number\": 58, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Gemini í† í° ê³„ì‚° ì¤‘ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ `except Exception as e:`ë¡œ ë„ˆë¬´ ê´‘ë²”ìœ„í•˜ê²Œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” `get_api_key` ì‹¤íŒ¨(API í‚¤ ë¶€ì¬)ì™€ ê°™ì€ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ì˜¤ë¥˜ê¹Œì§€ í¬ê´„í•˜ì—¬, ì‹¤ì œ API í˜¸ì¶œ ì˜¤ë¥˜ì™€ êµ¬ë¶„í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ê³  ë””ë²„ê¹…ì„ ë³µì¡í•˜ê²Œ í•©ë‹ˆë‹¤. API í‚¤ê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¶€ì •í™•í•œ ì¶”ì •ì¹˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"Google API í˜¸ì¶œ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” íŠ¹ì • ì˜ˆì™¸(ì˜ˆ: `genai.APIError`, `ValueError`, `AttributeError` ë“±)ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³ , API í‚¤ ë¶€ì¬ì™€ ê°™ì€ ì‚¬ì „ ì¡°ê±´ ì‹¤íŒ¨ëŠ” ë³„ë„ë¡œ ì²˜ë¦¬í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ í”¼ë“œë°±ì„ ì œê³µí•˜ì‹­ì‹œì˜¤. ëª¨ë“  ì˜ˆì™¸ë¥¼ í¬ê´„í•˜ëŠ” `except Exception`ì€ ìµœí›„ì˜ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , ì˜¤ë¥˜ ë°œìƒ ì‹œ ëŒ€ì²´ ì¶”ì • ë¡œì§ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒ ì™¸ì— ë¡œê¹…ì„ ê°•í™”í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n            except Exception as e:\\n                print(f\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\")\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\n                korean_chars = len(re.findall(\\\"[ê°€-í£]\\\", text))\\n                english_chars = len(re.findall(\\\"[a-zA-Z]\\\", text))\\n                other_chars = len(text) - korean_chars - english_chars\\n\\n                estimated_tokens = (\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\n                )\\n                return int(estimated_tokens)\\n```\", \"improved_code\": \"```python\\n            except (genai.APIError, AttributeError) as e: # API í˜¸ì¶œ ë˜ëŠ” ì‘ë‹µ ê´€ë ¨ íŠ¹ì • ì˜ˆì™¸\\n                print(f\\\"Gemini í† í° API í˜¸ì¶œ ë˜ëŠ” ì‘ë‹µ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}. ëŒ€ì²´ ì¶”ì •ì¹˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\\\")\\n                # ëŒ€ì²´ ì¶”ì • ë¡œì§ (ì •í™•ë„ì— ëŒ€í•œ ê²½ê³ ì™€ í•¨ê»˜)\\n                korean_chars = len(re.findall(\\\"[ê°€-í£]\\\", text))\\n                english_chars = len(re.findall(\\\"[a-zA-Z]\\\", text))\\n                other_chars = len(text) - korean_chars - english_chars\\n                estimated_tokens = ((korean_chars / 2) + (english_chars / 4) + (other_chars / 3))\\n                print(f\\\"ê²½ê³ : Gemini í† í° ìˆ˜ ì¶”ì •ì¹˜ëŠ” ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì¶”ì •ì¹˜: {int(estimated_tokens)}).\\\")\\n                return int(estimated_tokens)\\n            except ValueError as e: # API í‚¤ ë¶€ì¬ ë“± genai.Client ìƒì„± ì „ ë¬¸ì œ\\n                print(f\\\"Gemini í† í° ê³„ì‚°ì„ ìœ„í•œ ì„¤ì • ì˜¤ë¥˜: {e}. í† í° ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\")\\n                return 0\\n            except Exception as e: # ì˜ˆìƒì¹˜ ëª»í•œ ê¸°íƒ€ ëª¨ë“  ì˜¤ë¥˜\\n                print(f\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ: {e}. í† í° ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\")\\n                return 0\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 47, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹œ `HttpOptions(api_version=\\\"v1\\\")`ì™€ ê°™ì´ API ë²„ì „ì´ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. GenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—…ë°ì´íŠ¸ë˜ê±°ë‚˜ API ë²„ì „ ì •ì±…ì´ ë³€ê²½ë  ê²½ìš°, ì´ ë¶€ë¶„ì„ ìˆ˜ë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"ê°€ëŠ¥í•˜ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ìµœì‹  ë˜ëŠ” ì•ˆì •ì ì¸ ë²„ì „ì„ ì‚¬ìš©í•˜ë„ë¡ `HttpOptions` ì„¤ì •ì„ ìƒëµí•˜ê±°ë‚˜, ì´ ì„¤ì •ì„ ì™¸ë¶€ ì„¤ì • íŒŒì¼ ë˜ëŠ” ìƒìˆ˜ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤. íŠ¹ì • ë²„ì „ ì‚¬ìš©ì´ í•„ìˆ˜ì ì´ë¼ë©´, í•´ë‹¹ ì´ìœ ì™€ í•¨ê»˜ ë‚˜ì¤‘ì— ì—…ë°ì´íŠ¸ í•„ìš”ì„±ì„ ì•Œë¦¬ëŠ” ì£¼ì„ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤ (ì˜ˆ: `# count_tokens APIëŠ” í˜„ì¬ 'v1' API ë²„ì „ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬/API ë³€ê²½ ì‹œ í™•ì¸ í•„ìš”`).\", \"severity\": \"info\", \"original_code\": \"```python\\n                client = genai.Client(\\n                    api_key=api_key, http_options=HttpOptions(api_version=\\\"v1\\\")\\n                )\\n```\", \"improved_code\": \"```python\\n                # count_tokens APIê°€ íŠ¹ì • ë²„ì „ì„ ìš”êµ¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ëª…ì‹œ. ì¶”í›„ API ë³€ê²½ ì‹œ í™•ì¸ í•„ìš”.\\n                client = genai.Client(\\n                    api_key=api_key, http_options=HttpOptions(api_version=\\\"v1\\\") \\n                )\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 98, \"file\": \"reviewer/src/available_models.py\", \"description\": \"`AVAILABLE_MODELS` ë”•ì…”ë„ˆë¦¬ ë‚´ì˜ ê° ëª¨ë¸ ì •ë³´(`ModelInfoDict`)ì— `aliases` í•„ë“œê°€ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤. ë³„ë„ì˜ `MODEL_NAME_ALIASES` ë”•ì…”ë„ˆë¦¬(line 98ì—ì„œ ì •ì˜ ì‹œì‘, hunk 3ì—ì„œ line 104ì— ë‚´ìš© ì¶”ê°€)ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì€ ëª¨ë¸ ë³„ì¹­ ì •ë³´ê°€ ì¤‘ë³µ ê´€ë¦¬ë  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë¸ ì •ë³´ì˜ ë‹¨ì¼ ì¶œì²˜ ì›ì¹™(Single Source of Truth)ì„ ì•½í™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`MODEL_NAME_ALIASES` ë”•ì…”ë„ˆë¦¬ë¥¼ ì œê±°í•˜ê³ , `get_model_info` í•¨ìˆ˜ ë¡œì§ì„ ìˆ˜ì •í•˜ì—¬ `AVAILABLE_MODELS`ì˜ ê° í•­ëª©ì— ìˆëŠ” `aliases` ë¦¬ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ë„ë¡ í†µí•©í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤. `get_supported_models` í•¨ìˆ˜ë„ ì´ì— ë§ì¶° ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ëª¨ë¸ ì •ë³´ ê´€ë¦¬ê°€ ë‹¨ìˆœí•´ì§€ê³  ì¼ê´€ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n# reviewer/src/available_models.py, line 28 (ModelInfoDict definition)\\n# class ModelInfoDict(TypedDict):\\n#     aliases: list[str]\\n#     ...\\n\\n# reviewer/src/available_models.py, line 98 (MODEL_NAME_ALIASES definition)\\nMODEL_NAME_ALIASES: dict[str, str] = {\\n    \\\"claude-3-7-sonnet\\\": \\\"claude-3-7-sonnet-20250219\\\",\\n    \\\"claude-3.7-sonnet\\\": \\\"claude-3-7-sonnet-20250219\\\",\\n    \\\"o3-mini-high\\\": \\\"o3-mini\\\",\\n    \\\"o4-mini-high\\\": \\\"o4-mini\\\",\\n    # Hunk 3 adds gemini aliases here (line 104)\\n}\\n\\ndef get_model_info(model_name: str) -> ModelInfoDict:\\n    # ...\\n    full_name = MODEL_NAME_ALIASES.get(model_name)\\n    # ...\\n```\", \"improved_code\": \"```python\\n# reviewer/src/available_models.py\\n\\n# MODEL_NAME_ALIASES ë”•ì…”ë„ˆë¦¬ ì œê±°\\n\\ndef get_model_info(model_name: str) -> ModelInfoDict:\\n    # 1. ì •ì‹ ì´ë¦„ìœ¼ë¡œ ì§ì ‘ ê²€ìƒ‰\\n    if model_name in AVAILABLE_MODELS:\\n        return AVAILABLE_MODELS[model_name]\\n\\n    # 2. AVAILABLE_MODELS ë‚´ì˜ aliases ëª©ë¡ì—ì„œ ê²€ìƒ‰\\n    for official_name, info in AVAILABLE_MODELS.items():\\n        if model_name in info.get(\\\"aliases\\\", []):\\n            return AVAILABLE_MODELS[official_name]\\n\\n    raise UnsupportedModelError(model_name)\\n\\ndef get_supported_models() -> list[str]:\\n    supported = set(AVAILABLE_MODELS.keys())\\n    for info in AVAILABLE_MODELS.values():\\n        for alias in info.get(\\\"aliases\\\", []):\\n            supported.add(alias)\\n    return sorted(list(supported))\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 410, \"file\": \"reviewer/cli.py\", \"description\": \"`review_code` í•¨ìˆ˜ ë‚´ì—ì„œ API í‚¤ë¥¼ í™•ì¸í•  ë•Œ `get_api_key(\\\"openai\\\")`ë¡œ OpenAI ì œê³µìë¥¼ í•˜ë“œì½”ë”©í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ `--model` ì˜µì…˜ì„ í†µí•´ ë‹¤ë¥¸ ì œê³µì(ì˜ˆ: Claude, Google)ì˜ ëª¨ë¸ì„ ì„ íƒí•œ ê²½ìš°ì—ë„ OpenAI API í‚¤ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í™•ì¸í•˜ê³  ì„¤ì •í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ì ê²½í—˜ì— í˜¼ë€ì„ ì¤„ ìˆ˜ ìˆìœ¼ë©°, ì„ íƒëœ ëª¨ë¸ê³¼ ë‹¤ë¥¸ ì œê³µìì˜ í‚¤ë¥¼ ìš”êµ¬í•˜ê²Œ ë©ë‹ˆë‹¤.\", \"suggestion\": \"ì‚¬ìš©ìê°€ `--model` ì˜µì…˜ìœ¼ë¡œ ì„ íƒí•œ ëª¨ë¸ì˜ ì‹¤ì œ ì œê³µì(provider)ë¥¼ `get_model_info(args.model)[\\\"provider\\\"]`ë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ íŒŒì•…í•˜ê³ , í•´ë‹¹ ì œê³µìì˜ API í‚¤ë¥¼ í™•ì¸í•˜ê³  ìš”ì²­í•˜ë„ë¡ ë¡œì§ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ìš©ìê°€ ì„ íƒí•œ ëª¨ë¸ì— ì í•©í•œ API í‚¤ë¥¼ ì„¤ì •í•˜ë„ë¡ ì•ˆë‚´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\ndef review_code(args: argparse.Namespace) -> None:\\n    \\\"\\\"\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    # API í‚¤ í™•ì¸\\n    api_key = get_api_key(\\\"openai\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\n    if not api_key:\\n        print(\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\")\\n        print(\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\")\\n        print(\\\"  reviewer config api-key openai\\\")\\n        # ... (OpenAI í‚¤ ì„¤ì • ë¡œì§) ...\\n```\", \"improved_code\": \"```python\\nfrom reviewer.src.available_models import get_model_info # íŒŒì¼ ìƒë‹¨ì— import ì¶”ê°€\\n\\ndef review_code(args: argparse.Namespace) -> None:\\n    \\\"\\\"\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\"\\\"\\\"\\n    # ì„ íƒëœ ëª¨ë¸ì˜ ì œê³µì í™•ì¸\\n    # args.modelì€ argparse choicesì— ì˜í•´ ìœ íš¨ì„±ì´ ê²€ì¦ë˜ì—ˆë‹¤ê³  ê°€ì •\\n    model_info = get_model_info(args.model)\\n    provider = model_info[\\\"provider\\\"]\\n\\n    # API í‚¤ í™•ì¸\\n    api_key = get_api_key(provider)\\n    if not api_key:\\n        print(f\\\"{provider.upper()} API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\")\\n        print(f\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\")\\n        print(f\\\"  reviewer config api-key {provider.lower()}\\\")\\n\\n        try:\\n            response = input(f\\\"ì§€ê¸ˆ {provider.upper()} API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\")\\n            if response.lower() == \\\"y\\\":\\n                # ... (ì„ íƒëœ providerì— ëŒ€í•œ API í‚¤ ì„¤ì • ë¡œì§) ...\\n                # new_api_key = getpass.getpass(...)\\n                # set_api_key(new_api_key, provider)\\n                # api_key = new_api_key\\n            else:\\n                print(\\\"API í‚¤ ì„¤ì •ì´ ê±°ë¶€ë˜ì–´ ì‹¤í–‰ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.\\\")\\n                return\\n        except KeyboardInterrupt:\\n            print(\\\"\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\")\\n            return\\n    \\n    if not api_key: # ìµœì¢…ì ìœ¼ë¡œ API í‚¤ê°€ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸\\n        print(f\\\"{provider.upper()} API í‚¤ê°€ ì—†ì–´ ì½”ë“œ ë¦¬ë·°ë¥¼ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\")\\n        return\\n    # ... (ì´í•˜ ì½”ë“œ ë™ì¼)\\n```\"}, {\"type\": \"ì„¤ê³„\", \"line_number\": 60, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Gemini ëª¨ë¸ì˜ í† í° ìˆ˜ë¥¼ APIë¡œ ê³„ì‚°í•˜ì§€ ëª»í•  ê²½ìš° ì‚¬ìš©ë˜ëŠ” ëŒ€ì²´ ì¶”ì • ë¡œì§(line 60-67)ì´ ì œê³µë©ë‹ˆë‹¤. ì´ ì¶”ì • ë°©ì‹(í•œê¸€ ê¸€ìë‹¹ 0.5 í† í°, ì˜ì–´ ê¸€ìë‹¹ 0.25 í† í° ë“±)ì€ Claude ëª¨ë¸ì˜ ì¶”ì • ë°©ì‹ê³¼ ë‹¤ë¥´ë©°, ê° ëª¨ë¸ì˜ ì‹¤ì œ í† í°í™” ë°©ì‹ê³¼ ìƒë‹¹í•œ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆì–´ ë¹„ìš© ì¶”ì •ì˜ ì •í™•ë„ë¥¼ í¬ê²Œ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"Gemini ëª¨ë¸ì˜ ê³µì‹ì ì¸ í† í°í™” ê·œì¹™ì´ë‚˜ ê·¼ì‚¬ì¹˜ ê³„ì‚° ê°€ì´ë“œë¼ì¸ì„ ì°¾ì•„ ìµœëŒ€í•œ ë°˜ì˜í•˜ì‹­ì‹œì˜¤. ê³µì‹ ê°€ì´ë“œê°€ ì—†ë‹¤ë©´, ì¶”ì •ì¹˜ê°€ ë§¤ìš° ë¶€ì •í™•í•  ìˆ˜ ìˆìŒì„ ì‚¬ìš©ìì—ê²Œ ëª…í™•íˆ ì•Œë¦¬ê³ , API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ(íŠ¹íˆ API í‚¤ ë¶€ì¬ ë“±)ì—ëŠ” í† í° ìˆ˜ë¥¼ 0ìœ¼ë¡œ ë°˜í™˜í•˜ê±°ë‚˜ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼œ ë¶€ì •í™•í•œ ë¹„ìš© ê³„ì‚°ì„ ë°©ì§€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì‹­ì‹œì˜¤. í˜„ì¬ëŠ” API í‚¤ê°€ ì—†ì–´ë„ ë¶€ì •í™•í•œ ì¶”ì •ì¹˜ë¥¼ ë°˜í™˜í•  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\n                korean_chars = len(re.findall(\\\"[ê°€-í£]\\\", text))\\n                english_chars = len(re.findall(\\\"[a-zA-Z]\\\", text))\\n                other_chars = len(text) - korean_chars - english_chars\\n\\n                estimated_tokens = (\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\n                )\\n                return int(estimated_tokens)\\n```\", \"improved_code\": \"```python\\n                # ì´ ëŒ€ì²´ ì¶”ì • ë°©ì‹ì€ ì •í™•ë„ê°€ ë‚®ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n                # Gemini ê³µì‹ ë¬¸ì„œë‚˜ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ê¶Œì¥í•˜ëŠ” ì¶”ì • ë°©ì‹ì„ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\\n                korean_chars = len(re.findall(\\\"[ê°€-í£]\\\", text))\\n                english_chars = len(re.findall(\\\"[a-zA-Z]\\\", text))\\n                other_chars = len(text) - korean_chars - english_chars\\n                \\n                # ì˜ˆì‹œ: Claudeì™€ ìœ ì‚¬í•œ ê°€ì¤‘ì¹˜ ë˜ëŠ” ë‹¤ë¥¸ ì—°êµ¬ëœ ê°€ì¤‘ì¹˜ ì ìš© ê³ ë ¤\\n                # estimated_tokens = (korean_chars * 1.2) + (english_chars * 0.4) + (other_chars * 0.8)\\n                # ì„ì‹œë¡œ ê¸°ì¡´ ë¡œì§ ìœ ì§€í•˜ë˜, ë¶€ì •í™•ì„±ì— ëŒ€í•œ ê²½ê³  ê°•í™”\\n                estimated_tokens = ((korean_chars / 2) + (english_chars / 4) + (other_chars / 3))\\n                print(f\\\"ê²½ê³ : Gemini í† í° ìˆ˜ ì¶”ì •ì¹˜ëŠ” ì‹¤ì œì™€ í¬ê²Œ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì¶”ì •ì¹˜: {int(estimated_tokens)}). ë¹„ìš© ê³„ì‚°ì— ìœ ì˜í•˜ì„¸ìš”.\\\")\\n                return int(estimated_tokens)\\n```\"}], \"summary\": \"Google Gemini LLM ëª¨ë¸ ì§€ì›ì´ ì½”ë“œë² ì´ìŠ¤ì— ì„±ê³µì ìœ¼ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë³€ê²½ìœ¼ë¡œ ì‚¬ìš©ìëŠ” OpenAI, Claude ëª¨ë¸ ì™¸ì— Googleì˜ Gemini ëª¨ë¸ë„ ì½”ë“œ ë¦¬ë·°ì— í™œìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì£¼ìš” ìˆ˜ì • ì‚¬í•­ì€ ëª¨ë¸ ëª©ë¡ ì—…ë°ì´íŠ¸, API ì œê³µì ë° í´ë¼ì´ì–¸íŠ¸/ê²Œì´íŠ¸ì›¨ì´ íŒ©í† ë¦¬ ë¡œì§ í™•ì¥, Gemini ëª¨ë¸ì„ ìœ„í•œ í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ê¸°ëŠ¥ ì¶”ê°€ ë“±ì…ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ê¸°ëŠ¥ í™•ì¥ì€ ì˜ ì´ë£¨ì–´ì¡Œìœ¼ë‚˜, API í‚¤ ì²˜ë¦¬, ì˜ˆì™¸ ê´€ë¦¬, ì¼ë¶€ ì„¤ê³„ ì¸¡ë©´ì—ì„œ ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤.\", \"score\": 7.5, \"recommendations\": [\"API í‚¤ ì²˜ë¦¬ ë¡œì§ì„ ê°œì„ í•˜ì—¬ ì‚¬ìš©ìê°€ ì„ íƒí•œ ëª¨ë¸ì˜ ì œê³µìì— ë§ëŠ” API í‚¤ë¥¼ ëª…í™•íˆ ì•ˆë‚´í•˜ê³  ì„¤ì •í•˜ë„ë¡ í•˜ì‹­ì‹œì˜¤.\", \"ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê´€ë¦¬ ë° ì½”ë“œ ìŠ¤íƒ€ì¼ ì¼ê´€ì„±ì„ ìœ„í•´ ì§€ì—­ import ëŒ€ì‹  ì „ì—­ importë¥¼ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\", \"ì™¸ë¶€ API í˜¸ì¶œ(íŠ¹íˆ í† í° ê³„ì‚°) ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ ë³´ë‹¤ êµ¬ì²´ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ í”„ë¡œê·¸ë¨ ì•ˆì •ì„±ì„ ë†’ì´ì‹­ì‹œì˜¤.\", \"ëª¨ë¸ ì •ë³´(íŠ¹íˆ ë³„ì¹­) ê´€ë¦¬ ë°©ì‹ì„ ë‹¨ìˆœí™”í•˜ì—¬ ì¤‘ë³µì„ ì¤„ì´ê³  ë‹¨ì¼ ì¶œì²˜ ì›ì¹™ì„ ê°•í™”í•˜ì‹­ì‹œì˜¤.\", \"API ë²„ì „ê³¼ ê°™ì´ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì„¤ì • ê°’ì˜ í•˜ë“œì½”ë”©ì„ ì§€ì–‘í•˜ê³ , ì£¼ì„ì´ë‚˜ ì„¤ì •ì„ í†µí•´ ê´€ë¦¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚¤ì‹­ì‹œì˜¤.\", \"LLM ëª¨ë¸ë³„ í† í° ê³„ì‚° ëŒ€ì²´ ë¡œì§ì˜ ì •í™•ì„±ì„ ì§€ì†ì ìœ¼ë¡œ ê²€í† í•˜ê³ , ê°€ëŠ¥í•œ ê²½ìš° ê³µì‹ ê°€ì´ë“œë¼ì¸ì„ ë°˜ì˜í•˜ì—¬ ë¹„ìš© ì¶”ì •ì˜ ì‹ ë¢°ë„ë¥¼ ë†’ì´ì‹­ì‹œì˜¤.\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"],\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude] [KEY]\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"original_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-1.5-pro-001\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-1.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 1.5 Pro ëª¨ë¸, ì•ˆì •ì ì¸ ì„±ëŠ¥ê³¼ ê¸´ ì»¨í…ìŠ¤íŠ¸ ì§€ì›\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-1.5-flash-001\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-1.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 1.5 Flash ëª¨ë¸, ë¹ ë¥¸ ì†ë„ì™€ ê²½ì œì ì¸ ë¹„ìš©\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n```\\\", \\\"line_number\\\": 78, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-flash\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n    \\\\\\\"gemini-1.5-pro\\\\\\\": \\\\\\\"gemini-1.5-pro-001\\\\\\\",\\\\n    \\\\\\\"gemini-1.5-flash\\\\\\\": \\\\\\\"gemini-1.5-flash-001\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 122, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/llm_gateway/gateway_factory.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n```\\\", \\\"line_number\\\": 35, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"original_code\\\": \\\"```python\\\\n    def create_client(provider: str, api_key: str) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n```\\\", \\\"line_number\\\": 0, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"4\\\", \\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n```\\\", \\\"line_number\\\": 34, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"1\\\", \\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\nfrom google.genai.types import HttpOptions\\\\n```\\\", \\\"line_number\\\": 5, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"2\\\", \\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower():\\\\n            try:\\\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\\\n                from reviewer.src.llm_gateway import get_api_key\\\\n\\\\n                api_key = get_api_key(\\\\\\\"google\\\\\\\")\\\\n\\\\n                # Client ê°ì²´ ìƒì„±\\\\n                client = genai.Client(\\\\n                    api_key=api_key, http_options=HttpOptions(api_version=\\\\\\\"v1\\\\\\\")\\\\n                )\\\\n\\\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\\\n                model_name = model.lower()\\\\n                if \\\\\\\"2.5\\\\\\\" in model_name:\\\\n                    if \\\\\\\"flash\\\\\\\" in model_name:\\\\n                        model_name = \\\\\\\"gemini-1.5-flash-001\\\\\\\"\\\\n                    else:\\\\n                        model_name = \\\\\\\"gemini-1.5-pro-001\\\\\\\"\\\\n                elif \\\\\\\"1.5\\\\\\\" in model_name:\\\\n                    if \\\\\\\"flash\\\\\\\" in model_name:\\\\n                        model_name = \\\\\\\"gemini-1.5-flash-001\\\\\\\"\\\\n                    else:\\\\n                        model_name = \\\\\\\"gemini-1.5-pro-001\\\\\\\"\\\\n                else:\\\\n                    # ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •\\\\n                    model_name = \\\\\\\"gemini-1.5-flash-001\\\\\\\"\\\\n\\\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\\\n                response = client.models.count_tokens(model=model_name, contents=text)\\\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\\\n                return (\\\\n                    response.total_tokens\\\\n                    if response\\\\n                    and hasattr(response, \\\\\\\"total_tokens\\\\\\\")\\\\n                    and response.total_tokens is not None\\\\n                    else 0\\\\n                )\\\\n            except Exception as e:\\\\n                print(f\\\\\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\\\\\")\\\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\\\n                korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n                english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n                other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n                estimated_tokens = (\\\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\\\n                )\\\\n                return int(estimated_tokens)\\\\n\\\\n```\\\", \\\"line_number\\\": 39, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"3\\\", \\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\\\n```\\\", \\\"line_number\\\": 116, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"4\\\", \\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n```\\\", \\\"line_number\\\": 124, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"5\\\", \\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-1.5-pro-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\\\n            \\\\\\\"gemini-1.5-flash-001\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\\\n```\\\", \\\"line_number\\\": 156, \\\"language\\\": \\\"python\\\"}\"}, {\"role\": \"user\", \"content\": \"{\\\"hunk_idx\\\": \\\"6\\\", \\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n```\\\", \\\"line_number\\\": 169, \\\"language\\\": \\\"python\\\"}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"feature\", \"line_number\": 0, \"file\": \"reviewer/cli.py\", \"description\": \"CLI ëª…ë ¹ì–´ì— Google ëª¨ë¸ ì§€ì› ì¶”ê°€\", \"suggestion\": \"CLI ëª…ë ¹ì–´ì— Google ëª¨ë¸ ì§€ì›ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ Google ëª¨ë¸ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        choices=[\\\"openai\\\", \\\"claude\\\"],\\n```\", \"improved_code\": \"```python\\n        choices=[\\\"openai\\\", \\\"claude\\\", \\\"google\\\"],\\n```\"}, {\"type\": \"feature\", \"line_number\": 0, \"file\": \"reviewer/cli.py\", \"description\": \"CLI ëª…ë ¹ì–´ì— Google ëª¨ë¸ ì§€ì› ì¶”ê°€\", \"suggestion\": \"CLI ëª…ë ¹ì–´ì— Google ëª¨ë¸ ì§€ì›ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ Google ëª¨ë¸ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        print(\\\"  reviewer config api-key [openai|claude] [KEY]\\\")\\n```\", \"improved_code\": \"```python\\n        print(\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\")\\n```\"}, {\"type\": \"feature\", \"line_number\": 0, \"file\": \"reviewer/src/available_models.py\", \"description\": \"Google ëª¨ë¸ ì§€ì› ì¶”ê°€\", \"suggestion\": \"Google ëª¨ë¸ ì§€ì›ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ Google ëª¨ë¸ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\nModelProvider = Literal[\\\"openai\\\", \\\"claude\\\"]\\n```\", \"improved_code\": \"```python\\nModelProvider = Literal[\\\"openai\\\", \\\"claude\\\", \\\"google\\\"]\\n```\"}, {\"type\": \"feature\", \"line_number\": 78, \"file\": \"reviewer/src/available_models.py\", \"description\": \"Google Gemini ëª¨ë¸ ì •ë³´ ì¶”ê°€\", \"suggestion\": \"Google Gemini ëª¨ë¸ ì •ë³´ë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ Google ëª¨ë¸ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n    \\\"gemini-2.5-pro-exp-03-25\\\": {\\n        \\\"full_name\\\": \\\"gemini-2.5-pro-exp-03-25\\\",\\n        \\\"aliases\\\": [\\\"gemini-2.5-pro\\\"],\\n        \\\"description\\\": \\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\",\\n        \\\"provider\\\": \\\"google\\\",\\n        \\\"params\\\": {\\n            \\\"temperature\\\": 0.0,\\n        },\\n    },\\n    \\\"gemini-2.5-flash-preview-04-17\\\": {\\n        \\\"full_name\\\": \\\"gemini-2.5-flash-preview-04-17\\\",\\n        \\\"aliases\\\": [\\\"gemini-2.5-flash\\\"],\\n        \\\"description\\\": \\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\",\\n        \\\"provider\\\": \\\"google\\\",\\n        \\\"params\\\": {\\n            \\\"temperature\\\": 0.0,\\n        },\\n    },\\n    \\\"gemini-1.5-pro-001\\\": {\\n        \\\"full_name\\\": \\\"gemini-1.5-pro-001\\\",\\n        \\\"aliases\\\": [\\\"gemini-1.5-pro\\\"],\\n        \\\"description\\\": \\\"Googleì˜ Gemini 1.5 Pro ëª¨ë¸, ì•ˆì •ì ì¸ ì„±ëŠ¥ê³¼ ê¸´ ì»¨í…ìŠ¤íŠ¸ ì§€ì›\\\",\\n        \\\"provider\\\": \\\"google\\\",\\n        \\\"params\\\": {\\n            \\\"temperature\\\": 0.0,\\n        },\\n    },\\n    \\\"gemini-1.5-flash-001\\\": {\\n        \\\"full_name\\\": \\\"gemini-1.5-flash-001\\\",\\n        \\\"aliases\\\": [\\\"gemini-1.5-flash\\\"],\\n        \\\"description\\\": \\\"Googleì˜ Gemini 1.5 Flash ëª¨ë¸, ë¹ ë¥¸ ì†ë„ì™€ ê²½ì œì ì¸ ë¹„ìš©\\\",\\n        \\\"provider\\\": \\\"google\\\",\\n        \\\"params\\\": {\\n            \\\"temperature\\\": 0.0,\\n        },\\n    },\\n```\"}, {\"type\": \"feature\", \"line_number\": 122, \"file\": \"reviewer/src/available_models.py\", \"description\": \"Google Gemini ëª¨ë¸ ë³„ì¹­ ì¶”ê°€\", \"suggestion\": \"Google Gemini ëª¨ë¸ ë³„ì¹­ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ ë‹¤ì–‘í•œ ì´ë¦„ìœ¼ë¡œ ëª¨ë¸ì„ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n    \\\"gemini-2.5-pro\\\": \\\"gemini-2.5-pro-exp-03-25\\\",\\n    \\\"gemini-2.5-flash\\\": \\\"gemini-2.5-flash-preview-04-17\\\",\\n    \\\"gemini-1.5-pro\\\": \\\"gemini-1.5-pro-001\\\",\\n    \\\"gemini-1.5-flash\\\": \\\"gemini-1.5-flash-001\\\",\\n```\"}, {\"type\": \"feature\", \"line_number\": 35, \"file\": \"reviewer/src/llm_gateway/gateway_factory.py\", \"description\": \"Google Gateway ì§€ì› ì¶”ê°€\", \"suggestion\": \"Google Gateway ì§€ì›ì„ ì¶”ê°€í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n        elif model_info[\\\"provider\\\"] == \\\"google\\\":\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\n\\n            return GoogleGateway(model_info=model_info)\\n```\"}, {\"type\": \"feature\", \"line_number\": 0, \"file\": \"reviewer/src/utils/llm_factory.py\", \"description\": \"Google GenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸\", \"suggestion\": \"Google GenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„í¬íŠ¸í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\nfrom google import genai\\n```\"}, {\"type\": \"feature\", \"line_number\": 0, \"file\": \"reviewer/src/utils/llm_factory.py\", \"description\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ ì§€ì› ì¶”ê°€\", \"suggestion\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ ì§€ì›ì„ ì¶”ê°€í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n    def create_client(provider: str, api_key: str) -> instructor.Instructor:\\n```\", \"improved_code\": \"```python\\n    def create_client(\\n        provider: str, api_key: str\\n    ) -> instructor.Instructor | genai.Client:\\n```\"}, {\"type\": \"feature\", \"line_number\": 0, \"file\": \"reviewer/src/utils/llm_factory.py\", \"description\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ ì§€ì› ì¶”ê°€\", \"suggestion\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ ì§€ì›ì„ ì¶”ê°€í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\n```\"}, {\"type\": \"feature\", \"line_number\": 34, \"file\": \"reviewer/src/utils/llm_factory.py\", \"description\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ ìƒì„±\", \"suggestion\": \"Google GenAI í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n        elif provider == \\\"google\\\":\\n            return genai.Client(api_key=api_key)\\n```\"}, {\"type\": \"feature\", \"line_number\": 5, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google GenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í¬íŠ¸\", \"suggestion\": \"Google GenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„í¬íŠ¸í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\nfrom google import genai\\nfrom google.genai.types import HttpOptions\\n```\"}, {\"type\": \"feature\", \"line_number\": 39, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google Gemini í† í° ê³„ì‚° ê¸°ëŠ¥ ì¶”ê°€\", \"suggestion\": \"Google Gemini í† í° ê³„ì‚° ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ Google ëª¨ë¸ì˜ í† í° ìˆ˜ë¥¼ ì •í™•í•˜ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n        if \\\"gemini\\\" in model.lower():\\n            try:\\n                # API í‚¤ ê°€ì ¸ì˜¤ê¸° (ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ ì‚¬ìš©)\\n                from reviewer.src.llm_gateway import get_api_key\\n\\n                api_key = get_api_key(\\\"google\\\")\\n\\n                # Client ê°ì²´ ìƒì„±\\n                client = genai.Client(\\n                    api_key=api_key, http_options=HttpOptions(api_version=\\\"v1\\\")\\n                )\\n\\n                # ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ëª…ìœ¼ë¡œ ë§¤í•‘\\n                model_name = model.lower()\\n                if \\\"2.5\\\" in model_name:\\n                    if \\\"flash\\\" in model_name:\\n                        model_name = \\\"gemini-1.5-flash-001\\\"\\n                    else:\\n                        model_name = \\\"gemini-1.5-pro-001\\\"\\n                elif \\\"1.5\\\" in model_name:\\n                    if \\\"flash\\\" in model_name:\\n                        model_name = \\\"gemini-1.5-flash-001\\\"\\n                    else:\\n                        model_name = \\\"gemini-1.5-pro-001\\\"\\n                else:\\n                    # ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •\\n                    model_name = \\\"gemini-1.5-flash-001\\\"\\n\\n                # í† í° ìˆ˜ ê³„ì‚° (ìµœì‹  API ì‚¬ìš©)\\n                response = client.models.count_tokens(model=model_name, contents=text)\\n                # total_tokensê°€ Noneì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ë³¸ê°’ 0ì„ ì œê³µ\\n                return (\\n                    response.total_tokens\\n                    if response\\n                    and hasattr(response, \\\"total_tokens\\\")\\n                    and response.total_tokens is not None\\n                    else 0\\n                )\\n            except Exception as e:\\n                print(f\\\"Gemini í† í° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\\\")\\n                # ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•˜ê±°ë‚˜ ì¶”ì •\\n                # ì˜ì–´ëŠ” ì•½ 4ìë‹¹ 1í† í°, í•œê¸€ì€ ì•½ 2ìë‹¹ 1í† í°ìœ¼ë¡œ ì¶”ì •\\n                korean_chars = len(re.findall(\\\"[ê°€-í£]\\\", text))\\n                english_chars = len(re.findall(\\\"[a-zA-Z]\\\", text))\\n                other_chars = len(text) - korean_chars - english_chars\\n\\n                estimated_tokens = (\\n                    (korean_chars / 2) + (english_chars / 4) + (other_chars / 3)\\n                )\\n                return int(estimated_tokens)\\n\\n```\"}, {\"type\": \"feature\", \"line_number\": 116, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google Gemini ëª¨ë¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì¶”ê°€\", \"suggestion\": \"Google Gemini ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì•Œ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n            \\\"gemini-1.5-pro-001\\\": 1048576,  # Gemini 1.5 Pro: ì•½ 1M í† í°\\n            \\\"gemini-1.5-flash-001\\\": 1048576,  # Gemini 1.5 Flash: ì•½ 1M í† í°\\n```\"}, {\"type\": \"feature\", \"line_number\": 124, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google Gemini ëª¨ë¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ ì²˜ë¦¬\", \"suggestion\": \"Google Gemini ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ì²˜ë¦¬í•˜ì—¬ ì‚¬ìš©ìê°€ ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë„˜ì§€ ì•Šë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\n        if \\\"gemini\\\" in model.lower() and model not in context_limits:\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\n\\n```\"}, {\"type\": \"feature\", \"line_number\": 156, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google Gemini ëª¨ë¸ ê°€ê²© ì •ë³´ ì¶”ê°€\", \"suggestion\": \"Google Gemini ëª¨ë¸ì˜ ê°€ê²© ì •ë³´ë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ ëª¨ë¸ì˜ ê°€ê²©ì„ ì•Œ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n            \\\"gemini-1.5-pro-001\\\": {\\n                \\\"input\\\": 0.0015,\\n                \\\"output\\\": 0.0060,\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 1.5 Pro)\\n            \\\"gemini-1.5-flash-001\\\": {\\n                \\\"input\\\": 0.00015,\\n                \\\"output\\\": 0.0006,\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 1.5 Flash)\\n```\"}, {\"type\": \"feature\", \"line_number\": 169, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"Google Gemini ëª¨ë¸ ê°€ê²© ì²˜ë¦¬\", \"suggestion\": \"Google Gemini ëª¨ë¸ì˜ ê°€ê²©ì„ ì²˜ë¦¬í•˜ì—¬ ì‚¬ìš©ìê°€ ëª¨ë¸ì˜ ê°€ê²©ì„ ë„˜ì§€ ì•Šë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n\\n```\", \"improved_code\": \"```python\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\n        elif \\\"gemini\\\" in model_name.lower() and model_name not in pricing:\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\n            model_pricing = {\\\"input\\\": 0.00015, \\\"output\\\": 0.0006}\\n```\"}], \"summary\": \"Google Gemini ëª¨ë¸ ì§€ì›ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. CLI ëª…ë ¹ì–´, ëª¨ë¸ ì •ë³´, ê²Œì´íŠ¸ì›¨ì´, í† í° ê³„ì‚°, ì»¨í…ìŠ¤íŠ¸ ì œí•œ, ê°€ê²© ì •ë³´ ë“±ì„ ì—…ë°ì´íŠ¸í•˜ì—¬ Google ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.\", \"score\": 9.0, \"recommendations\": [\"Google ëª¨ë¸ ì§€ì›ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€\", \"Google ëª¨ë¸ì˜ ì„±ëŠ¥ ë° ì•ˆì •ì„±ì„ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§\"]}"
  },
  {
    "input": "[{\"role\": \"system\", \"content\": \"ë‹¹ì‹ ì€ ìˆ™ë ¨ëœ ì½”ë“œ ë¦¬ë·°ì–´ì…ë‹ˆë‹¤. ì œê³µëœ git diffë¥¼ ë¶„ì„í•˜ì—¬ ì½”ë“œ í’ˆì§ˆ, ë²„ê·¸, ë³´ì•ˆ ë¬¸ì œ, ì„±ëŠ¥ ì´ìŠˆ ë“± ì£¼ìš” ë¬¸ì œì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³ , ê°œì„  ë°©í–¥ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nì¤‘ìš”: ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ì–´ë‚˜ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ë‹µí•˜ì§€ ë§ˆì„¸ìš”.\\n\\nê° ì´ìŠˆëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤:\\n- type: ì´ìŠˆ ìœ í˜• (ë²„ê·¸, ë³´ì•ˆ, ì„±ëŠ¥, ìŠ¤íƒ€ì¼, ì„¤ê³„ ì¤‘ í•˜ë‚˜)\\n- line_number: ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œì˜ ë¼ì¸ ë²ˆí˜¸ (ë°˜ë“œì‹œ ì •í™•í•œ ìˆ«ìë¡œ ì§€ì •, ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ë§Œ null ì‚¬ìš©)\\n- file: ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ ì´ë¦„ (ë°˜ë“œì‹œ ì •í™•í•œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ ì‚¬ìš©, 'íŒŒì¼-1'ê³¼ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ ì‚¬ìš© ê¸ˆì§€)\\n- description: ì´ìŠˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…\\n- suggestion: ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì œì•ˆ\\n- severity: ì´ìŠˆì˜ ì‹¬ê°ë„ (info, warning, error ì¤‘ í•˜ë‚˜)\\n\\në˜í•œ ë‹¤ìŒ ì •ë³´ë„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n- summary: ì „ì²´ ì½”ë“œ ë³€ê²½ì— ëŒ€í•œ ìš”ì•½\\n- score: ì½”ë“œ í’ˆì§ˆì— ëŒ€í•œ 0-10 ì‚¬ì´ì˜ ì ìˆ˜\\n- recommendations: ì „ë°˜ì ì¸ ê°œì„ ì„ ìœ„í•œ ê¶Œì¥ì‚¬í•­ ëª©ë¡\\n\\nê° ì´ìŠˆì— ëŒ€í•´ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¦¬ë·° ëŒ€ìƒ ì½”ë“œì™€ ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš”:\\n\\në¦¬ë·° ëŒ€ìƒ ì½”ë“œ:\\n```\\n[ë¬¸ì œê°€ ìˆëŠ” ì›ë³¸ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nê°œì„ ëœ ì½”ë“œ:\\n```\\n[ê°œì„  ì œì•ˆì´ ë°˜ì˜ëœ ì½”ë“œ ìŠ¤ë‹ˆí«]\\n```\\n\\nì´ìŠˆ ì„¤ëª…ê³¼ ì œì•ˆì€ êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”. ëª¨í˜¸í•œ í‘œí˜„ì´ë‚˜ ì¼ë°˜ì ì¸ ì¡°ì–¸ì€ í”¼í•˜ê³ , ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì–¸ê¸‰í•˜ë©° ì‹¤ì§ˆì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”.\\n\\nissuesì˜ íŒŒì¼ëª…ê³¼ line_numberëŠ” ë°˜ë“œì‹œ ì •í™•í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. íŒŒì¼ëª…ì€ ì‹¤ì œ íŒŒì¼ ê²½ë¡œì™€ ì´ë¦„ì„ ì‚¬ìš©í•˜ê³ , line_numberëŠ” í”„ë¡¬í”„íŠ¸ì— ëª…ì‹œë˜ì–´ ìˆëŠ” line_numberë¥¼ ê·¸ëŒ€ë¡œ í‘œê¸°í•´ì£¼ë©´ë©ë‹ˆë‹¤.\\níŒŒì¼ëª…ì´ë‚˜ ë¼ì¸ ë²ˆí˜¸ëŠ” 'íŒŒì¼-1', 'íŒŒì¼-2'ì™€ ê°™ì€ ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ ëŒ€ì²´í•˜ì§€ ë§ˆì„¸ìš”.\\n\\nìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì€ ë°˜ë“œì‹œ ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤:\\n\\n```json\\n{\\n  \\\"issues\\\": [\\n    {\\n      \\\"type\\\": \\\"ì´ìŠˆ ìœ í˜•\\\",\\n      \\\"line_number\\\": ë¼ì¸ ë²ˆí˜¸\\n      \\\"file\\\": \\\"íŒŒì¼ëª…\\\",\\n      \\\"description\\\": \\\"ì´ìŠˆ ì„¤ëª…\\\",\\n      \\\"suggestion\\\": \\\"ê°œì„  ì œì•ˆ\\\",\\n      \\\"severity\\\": \\\"ì‹¬ê°ë„\\\",\\n      \\\"original_code\\\": \\\"ì›ë³¸ ì½”ë“œ\\\",\\n      \\\"improved_code\\\": \\\"ê°œì„ ëœ ì½”ë“œ\\\"\\n    }\\n  ],\\n  \\\"summary\\\": \\\"ì „ì²´ ìš”ì•½\\\",\\n  \\\"score\\\": ì ìˆ˜,\\n  \\\"recommendations\\\": [\\\"ê¶Œì¥ì‚¬í•­1\\\", \\\"ê¶Œì¥ì‚¬í•­2\\\"]\\n}\\n```\\nì´ìŠˆê°€ ì—†ëŠ” ê²½ìš°ì—ë„ ë¹ˆ ë°°ì—´ \\\"issues\\\": []ë¡œ í‘œì‹œí•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í•„ë“œë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.\\nìœ„ JSON í˜•ì‹ë§Œ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë‚˜ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”. \"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/cli.py\\\", \\\"file_content\\\": \\\"import argparse\\\\nimport getpass\\\\nimport json\\\\nimport os\\\\nimport sys\\\\nfrom datetime import datetime, timedelta\\\\nfrom pathlib import Path\\\\n\\\\nfrom reviewer.src.available_models import get_default_model, get_supported_models\\\\nfrom reviewer.src.config import (\\\\n    get_api_key,\\\\n    get_default_results_dir,\\\\n    get_default_review_request_dir,\\\\n    set_api_key,\\\\n    set_default_results_dir,\\\\n)\\\\nfrom reviewer.src.diff_parser import parse_git_diff\\\\nfrom reviewer.src.llm_gateway import GatewayFactory\\\\nfrom reviewer.src.review_processor import ReviewPostProcessor\\\\nfrom reviewer.src.ui import run_app\\\\nfrom reviewer.src.utils import run_git_diff\\\\nfrom reviewer.src.utils.prompts.prompt_generator import PromptGenerator\\\\nfrom reviewer.src.utils.token.models import ReviewRequest\\\\n\\\\n\\\\ndef parse_args() -> argparse.Namespace:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª…ë ¹ì¤„ ì¸ìˆ˜ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    parser = argparse.ArgumentParser(description=\\\\\\\"LLM ê¸°ë°˜ ì½”ë“œ ë¦¬ë·° ë„êµ¬\\\\\\\")\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ íŒŒì„œ ìƒì„±\\\\n    subparsers = parser.add_subparsers(dest=\\\\\\\"command\\\\\\\", help=\\\\\\\"ëª…ë ¹ì–´\\\\\\\")\\\\n\\\\n    # ë¦¬ë·° ëª…ë ¹ì–´ (ê¸°ë³¸ ê¸°ëŠ¥)\\\\n    review_parser = subparsers.add_parser(\\\\\\\"review\\\\\\\", help=\\\\\\\"ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\\\\")\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--commit-range\\\\\\\", type=str, help=\\\\\\\"ë¹„êµí•  ì»¤ë°‹ ë²”ìœ„ (ì˜ˆ: HEAD~1..HEAD)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-file\\\\\\\", type=str, help=\\\\\\\"Git diff íŒŒì¼ ê²½ë¡œ (--commit-range ëŒ€ì‹  ì‚¬ìš©)\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--output-format\\\\\\\",\\\\n        type=str,\\\\n        choices=[\\\\\\\"markdown\\\\\\\", \\\\\\\"html\\\\\\\", \\\\\\\"json\\\\\\\"],\\\\n        default=\\\\\\\"markdown\\\\\\\",\\\\n        help=\\\\\\\"ì¶œë ¥ í˜•ì‹ (ê¸°ë³¸ê°’: markdown)\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--review-focus\\\\\\\", type=str, help=\\\\\\\"ë¦¬ë·° ì§‘ì¤‘ ì˜ì—­ (ì˜ˆ: 'ë³´ì•ˆ', 'ì„±ëŠ¥')\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--repo-path\\\\\\\",\\\\n        type=str,\\\\n        default=\\\\\\\".\\\\\\\",\\\\n        help=\\\\\\\"Git ì €ì¥ì†Œ ê²½ë¡œ (ê¸°ë³¸ê°’: í˜„ì¬ ë””ë ‰í† ë¦¬)\\\\\\\",\\\\n    )\\\\n\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--model\\\\\\\",\\\\n        type=str,\\\\n        choices=get_supported_models(),\\\\n        default=get_default_model(),\\\\n        help=f\\\\\\\"ì‚¬ìš©í•  AI ëª¨ë¸ (ê¸°ë³¸ê°’: {get_default_model()})\\\\\\\",\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--open-ui\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ë¦¬ë·° ì™„ë£Œ í›„ UIë¡œ ê²°ê³¼ ë³´ê¸°\\\\\\\"\\\\n    )\\\\n    review_parser.add_argument(\\\\n        \\\\\\\"--diff-only\\\\\\\",\\\\n        action=\\\\\\\"store_true\\\\\\\",\\\\n        help=\\\\\\\"ë³€ê²½ëœ ë¶€ë¶„ë§Œ ë¶„ì„ (ê¸°ë³¸ê°’: íŒŒì¼ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©)\\\\\\\",\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª…ë ¹ì–´\\\\n    config_parser = subparsers.add_parser(\\\\\\\"config\\\\\\\", help=\\\\\\\"ì„¤ì • ê´€ë¦¬\\\\\\\")\\\\n    config_subparsers = config_parser.add_subparsers(\\\\n        dest=\\\\\\\"config_command\\\\\\\", help=\\\\\\\"ì„¤ì • ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # API í‚¤ ì„¤ì •\\\\n    api_key_parser = config_subparsers.add_parser(\\\\\\\"api-key\\\\\\\", help=\\\\\\\"API í‚¤ ì„¤ì •\\\\\\\")\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"provider\\\\\\\",\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n        default=\\\\\\\"openai\\\\\\\",\\\\n        nargs=\\\\\\\"?\\\\\\\",\\\\n        help=\\\\\\\"API ì œê³µì (ê¸°ë³¸ê°’: openai)\\\\\\\",\\\\n    )\\\\n    api_key_parser.add_argument(\\\\n        \\\\\\\"key\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"API í‚¤ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­)\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir_parser = config_subparsers.add_parser(\\\\n        \\\\\\\"results-dir\\\\\\\", help=\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\\\\"\\\\n    )\\\\n    results_dir_parser.add_argument(\\\\n        \\\\\\\"path\\\\\\\", nargs=\\\\\\\"?\\\\\\\", help=\\\\\\\"ì €ì¥ ê²½ë¡œ (ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ í˜„ì¬ ì„¤ì • í‘œì‹œ)\\\\\\\"\\\\n    )\\\\n\\\\n    # ì„¤ì • ëª©ë¡ í‘œì‹œ\\\\n    config_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ëª¨ë“  ì„¤ì • í‘œì‹œ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\n    results_parser = subparsers.add_parser(\\\\\\\"results\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ ê´€ë¦¬\\\\\\\")\\\\n    results_subparsers = results_parser.add_subparsers(\\\\n        dest=\\\\\\\"results_command\\\\\\\", help=\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´\\\\\\\"\\\\n    )\\\\n\\\\n    # ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\n    results_subparsers.add_parser(\\\\\\\"list\\\\\\\", help=\\\\\\\"ìµœê·¼ ê²°ê³¼ ëª©ë¡ í‘œì‹œ\\\\\\\")\\\\n\\\\n    # íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\n    show_parser = results_subparsers.add_parser(\\\\\\\"show\\\\\\\", help=\\\\\\\"íŠ¹ì • ê²°ê³¼ í‘œì‹œ\\\\\\\")\\\\n    show_parser.add_argument(\\\\\\\"result_id\\\\\\\", help=\\\\\\\"ê²°ê³¼ íŒŒì¼ëª… ë˜ëŠ” ID\\\\\\\")\\\\n\\\\n    # ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\n    clean_parser = results_subparsers.add_parser(\\\\\\\"clean\\\\\\\", help=\\\\\\\"ì˜¤ë˜ëœ ê²°ê³¼ ì •ë¦¬\\\\\\\")\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--days\\\\\\\",\\\\n        type=int,\\\\n        default=30,\\\\n        help=\\\\\\\"ì´ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ë¥¼ ì‚­ì œ (ê¸°ë³¸ê°’: 30ì¼)\\\\\\\",\\\\n    )\\\\n    clean_parser.add_argument(\\\\n        \\\\\\\"--dry-run\\\\\\\", action=\\\\\\\"store_true\\\\\\\", help=\\\\\\\"ì‹¤ì œë¡œ ì‚­ì œí•˜ì§€ ì•Šê³  ì‚­ì œë  íŒŒì¼ë§Œ í‘œì‹œ\\\\\\\"\\\\n    )\\\\n\\\\n    # UI ë³´ê¸° ëª…ë ¹ì–´\\\\n    view_parser = subparsers.add_parser(\\\\\\\"view\\\\\\\", help=\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ UIë¡œ ë³´ê¸°\\\\\\\")\\\\n    view_parser.add_argument(\\\\n        \\\\\\\"--port\\\\\\\", type=int, default=8501, help=\\\\\\\"Streamlit ì„œë²„ í¬íŠ¸ (ê¸°ë³¸ê°’: 8501)\\\\\\\"\\\\n    )\\\\n\\\\n    args = parser.parse_args()\\\\n\\\\n    # í•˜ìœ„ ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ìœ¼ë¡œ review ëª…ë ¹ì–´ ì‚¬ìš©\\\\n    if not args.command:\\\\n        args.command = \\\\\\\"review\\\\\\\"\\\\n\\\\n    return args\\\\n\\\\n\\\\ndef get_diff_content(args: argparse.Namespace) -> str:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"Git diff ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if args.diff_file:\\\\n        # íŒŒì¼ì—ì„œ diff ë‚´ìš© ì½ê¸°\\\\n        with open(args.diff_file, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n            return f.read()\\\\n    else:\\\\n        # Git ëª…ë ¹ìœ¼ë¡œ diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n        repo_path = Path(args.repo_path)\\\\n        if not repo_path.exists() or not (repo_path / \\\\\\\".git\\\\\\\").exists():\\\\n            raise ValueError(f\\\\\\\"ì˜¤ë¥˜: ìœ íš¨í•œ Git ì €ì¥ì†Œ ê²½ë¡œë¥¼ ì§€ì •í•˜ì„¸ìš”: {repo_path}\\\\\\\")\\\\n        return run_git_diff(str(repo_path), args.commit_range)\\\\n\\\\n\\\\ndef save_output(content: str, output_format: str, model: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •\\\\n    results_dir = Path(get_default_results_dir())\\\\n\\\\n    # í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ review_results í´ë” ì‚¬ìš©\\\\n    if \\\\\\\"pytest\\\\\\\" in sys.modules:\\\\n        results_dir = Path.cwd() / \\\\\\\"review_results\\\\\\\"\\\\n\\\\n    # ë””ë ‰í† ë¦¬ê°€ ì—†ìœ¼ë©´ ìƒì„±\\\\n    results_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # ì¶œë ¥ íŒŒì¼ëª… ìƒì„±\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    output_file = f\\\\\\\"review_{timestamp}_{model}\\\\\\\"\\\\n\\\\n    # íŒŒì¼ í™•ì¥ì ì¶”ê°€\\\\n    output_path = results_dir / f\\\\\\\"{output_file}.{output_format}\\\\\\\"\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    output_path.write_text(content, encoding=\\\\\\\"utf-8\\\\\\\")\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ê°€ {output_path}ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_api_key(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"API í‚¤ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    provider = args.provider\\\\n\\\\n    # API í‚¤ê°€ ëª…ë ¹ì¤„ì—ì„œ ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° ëŒ€í™”í˜•ìœ¼ë¡œ ìš”ì²­\\\\n    if not hasattr(args, \\\\\\\"key\\\\\\\") or not args.key:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_key = get_api_key(provider)\\\\n        if current_key:\\\\n            masked_key = (\\\\n                current_key[:4] + \\\\\\\"*\\\\\\\" * (len(current_key) - 8) + current_key[-4:]\\\\n            )\\\\n            print(f\\\\\\\"í˜„ì¬ {provider.upper()} API í‚¤: {masked_key}\\\\\\\")\\\\n\\\\n        # ìƒˆ í‚¤ ì…ë ¥ ìš”ì²­\\\\n        try:\\\\n            prompt_message = f\\\\\\\"{provider.upper()} API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” \\\\\\\"\\\\n            prompt_message += \\\\\\\"(ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n            api_key = getpass.getpass(prompt_message)\\\\n            if not api_key:\\\\n                print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n    else:\\\\n        api_key = args.key\\\\n\\\\n    # API í‚¤ ì €ì¥\\\\n    if set_api_key(api_key, provider):\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(f\\\\\\\"{provider.upper()} API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_results_dir(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"path\\\\\\\") or not args.path:\\\\n        # í˜„ì¬ ì„¤ì • í‘œì‹œ\\\\n        current_dir = get_default_results_dir()\\\\n        print(f\\\\\\\"í˜„ì¬ ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {current_dir}\\\\\\\")\\\\n        return\\\\n\\\\n    # ìƒˆ ê²½ë¡œ ì €ì¥\\\\n    if set_default_results_dir(args.path):\\\\n        print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ê°€ {args.path}ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef config_list() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë“  ì„¤ì •ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    print(\\\\\\\"==== reviewer ì„¤ì • ====\\\\\\\")\\\\n\\\\n    # API í‚¤\\\\n    openai_key = get_api_key(\\\\\\\"openai\\\\\\\")\\\\n    claude_key = get_api_key(\\\\\\\"claude\\\\\\\")\\\\n\\\\n    if openai_key:\\\\n        masked_key = openai_key[:4] + \\\\\\\"*\\\\\\\" * (len(openai_key) - 8) + openai_key[-4:]\\\\n        print(f\\\\\\\"OpenAI API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"OpenAI API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    if claude_key:\\\\n        masked_key = claude_key[:4] + \\\\\\\"*\\\\\\\" * (len(claude_key) - 8) + claude_key[-4:]\\\\n        print(f\\\\\\\"Claude API í‚¤: {masked_key}\\\\\\\")\\\\n    else:\\\\n        print(\\\\\\\"Claude API í‚¤: ì„¤ì •ë˜ì§€ ì•ŠìŒ\\\\\\\")\\\\n\\\\n    # ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬\\\\n    print(f\\\\\\\"ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬: {get_default_results_dir()}\\\\\\\")\\\\n\\\\n    # ê¸°ë³¸ ëª¨ë¸\\\\n    print(f\\\\\\\"ê¸°ë³¸ ëª¨ë¸: {get_default_model()}\\\\\\\")\\\\n\\\\n\\\\ndef handle_config_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì„¤ì • ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"config_command\\\\\\\") or not args.config_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ì • ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config results-dir [PATH]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config model [MODEL_NAME]\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config list\\\\\\\")\\\\n        return\\\\n\\\\n    if args.config_command == \\\\\\\"api-key\\\\\\\":\\\\n        config_api_key(args)\\\\n    elif args.config_command == \\\\\\\"results-dir\\\\\\\":\\\\n        config_results_dir(args)\\\\n    elif args.config_command == \\\\\\\"list\\\\\\\":\\\\n        config_list()\\\\n\\\\n\\\\ndef handle_results_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if not hasattr(args, \\\\\\\"results_command\\\\\\\") or not args.results_command:\\\\n        # ëª…ë ¹ì–´ê°€ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´ ë„ì›€ë§ í‘œì‹œ\\\\n        print(\\\\\\\"ì‚¬ìš© ê°€ëŠ¥í•œ ê²°ê³¼ ê´€ë¦¬ ëª…ë ¹ì–´:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results list\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results show <result_id>\\\\\\\")\\\\n        print(\\\\\\\"  reviewer results clean [--days <days>] [--dry-run]\\\\\\\")\\\\n        return\\\\n\\\\n    # ê²°ê³¼ ë””ë ‰í† ë¦¬ í™•ì¸\\\\n    results_dir = get_default_results_dir()\\\\n    if not results_dir.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ ë””ë ‰í† ë¦¬({results_dir})ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    if args.results_command == \\\\\\\"list\\\\\\\":\\\\n        list_results(results_dir)\\\\n    elif args.results_command == \\\\\\\"show\\\\\\\":\\\\n        show_result(results_dir, args.result_id)\\\\n    elif args.results_command == \\\\\\\"clean\\\\\\\":\\\\n        clean_results(results_dir, args.days, args.dry_run)\\\\n\\\\n\\\\ndef list_results(results_dir: Path) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    result_files = sorted(\\\\n        results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n    )\\\\n\\\\n    if not result_files:\\\\n        print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ê²°ê³¼ ëª©ë¡ (ì €ì¥ ìœ„ì¹˜: {results_dir}):\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n    print(f\\\\\\\"{'ID':4} | {'ë‚ ì§œ':16} | {'í¬ê¸°':8} | {'íŒŒì¼ëª…'}\\\\\\\")\\\\n    print(\\\\\\\"-\\\\\\\" * 80)\\\\n\\\\n    for i, file in enumerate(result_files, 1):\\\\n        # íŒŒì¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        size = file.stat().st_size\\\\n        size_str = f\\\\\\\"{size / 1024:.1f}KB\\\\\\\" if size >= 1024 else f\\\\\\\"{size}B\\\\\\\"\\\\n\\\\n        print(f\\\\\\\"{i:4} | {mtime:16} | {size_str:8} | {file.name}\\\\\\\")\\\\n\\\\n\\\\ndef show_result(results_dir: Path, result_id: str) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"íŠ¹ì • ë¦¬ë·° ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ê²°ê³¼ IDê°€ ìˆ«ìì¸ ê²½ìš° (ëª©ë¡ ì¸ë±ìŠ¤)\\\\n    if result_id.isdigit():\\\\n        idx = int(result_id)\\\\n        result_files = sorted(\\\\n            results_dir.glob(\\\\\\\"*.*\\\\\\\"), key=lambda f: f.stat().st_mtime, reverse=True\\\\n        )\\\\n\\\\n        if not result_files:\\\\n            print(\\\\\\\"ì €ì¥ëœ ë¦¬ë·° ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n        if 1 <= idx <= len(result_files):\\\\n            file_path = result_files[idx - 1]\\\\n        else:\\\\n            print(\\\\n                f\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ID: {idx} (1-{len(result_files)} ì‚¬ì´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”)\\\\\\\"\\\\n            )\\\\n            return\\\\n    else:\\\\n        # íŒŒì¼ëª…ìœ¼ë¡œ ì§ì ‘ ì§€ì •í•œ ê²½ìš°\\\\n        file_path = results_dir / result_id\\\\n        if not file_path.exists() and \\\\\\\".\\\\\\\" not in result_id:\\\\n            # í™•ì¥ìê°€ ì—†ëŠ” ê²½ìš° ì¶”ê°€ë¡œ í™•ì¥ìê°€ ìˆëŠ” íŒŒì¼ ê²€ìƒ‰\\\\n            matching_files = sorted(results_dir.glob(f\\\\\\\"{result_id}.*\\\\\\\"))\\\\n            if matching_files:\\\\n                file_path = matching_files[0]\\\\n\\\\n    # íŒŒì¼ ì¡´ì¬ í™•ì¸\\\\n    if not file_path.exists():\\\\n        print(f\\\\\\\"ê²°ê³¼ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {result_id}\\\\\\\")\\\\n        return\\\\n\\\\n    # íŒŒì¼ ë‚´ìš© í‘œì‹œ\\\\n    print(f\\\\\\\"=== {file_path.name} ===\\\\\\\")\\\\n    print()\\\\n\\\\n    with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        content = f.read()\\\\n        print(content)\\\\n\\\\n\\\\ndef clean_results(results_dir: Path, days: int, dry_run: bool) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì˜¤ë˜ëœ ë¦¬ë·° ê²°ê³¼ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    if days <= 0:\\\\n        print(\\\\\\\"ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ê°„ì…ë‹ˆë‹¤. 1ì¼ ì´ìƒì˜ ê°’ì„ ì§€ì •í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    # í˜„ì¬ ì‹œê°„ì—ì„œ ì§€ì •ëœ ì¼ìˆ˜ë¥¼ ëº€ íƒ€ì„ìŠ¤íƒ¬í”„ ê³„ì‚°\\\\n    cutoff_time = datetime.now() - timedelta(days=days)\\\\n    cutoff_timestamp = cutoff_time.timestamp()\\\\n\\\\n    # ëª¨ë“  ê²°ê³¼ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°\\\\n    result_files = sorted(results_dir.glob(\\\\\\\"*.*\\\\\\\"))\\\\n    old_files = [f for f in result_files if f.stat().st_mtime < cutoff_timestamp]\\\\n\\\\n    if not old_files:\\\\n        print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    print(f\\\\\\\"{days}ì¼ë³´ë‹¤ ì˜¤ë˜ëœ ê²°ê³¼ íŒŒì¼ ({len(old_files)}ê°œ):\\\\\\\")\\\\n    for file in old_files:\\\\n        mtime = datetime.fromtimestamp(file.stat().st_mtime).strftime(\\\\\\\"%Y-%m-%d %H:%M\\\\\\\")\\\\n        print(f\\\\\\\"  - {file.name} (ìˆ˜ì •ì¼: {mtime})\\\\\\\")\\\\n\\\\n    if dry_run:\\\\n        print(\\\\\\\"\\\\\\\\nì´ëŠ” ë¯¸ë¦¬ë³´ê¸°ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì‚­ì œí•˜ë ¤ë©´ --dry-run ì˜µì…˜ì„ ì œê±°í•˜ì„¸ìš”.\\\\\\\")\\\\n        return\\\\n\\\\n    try:\\\\n        response = input(\\\\\\\"\\\\\\\\nìœ„ íŒŒì¼ë“¤ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n        if response.lower() == \\\\\\\"y\\\\\\\":\\\\n            for file in old_files:\\\\n                file.unlink()\\\\n            print(f\\\\\\\"{len(old_files)}ê°œ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        else:\\\\n            print(\\\\\\\"ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n\\\\n\\\\ndef save_review_request(review_request: ReviewRequest) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë¦¬ë·° ìš”ì²­ì„ ì €ì¥í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì €ì¥ ë””ë ‰í† ë¦¬ ìƒì„±\\\\n    save_dir = get_default_review_request_dir()\\\\n    save_dir.mkdir(parents=True, exist_ok=True)\\\\n\\\\n    # íŒŒì¼ëª… ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨)\\\\n    timestamp = datetime.now().strftime(\\\\\\\"%Y%m%d_%H%M%S\\\\\\\")\\\\n    filename = f\\\\\\\"review_request_{timestamp}_{review_request.model}.json\\\\\\\"\\\\n    save_path = save_dir / filename\\\\n\\\\n    # JSONìœ¼ë¡œ ì €ì¥\\\\n    with open(save_path, \\\\\\\"w\\\\\\\", encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n        json.dump(\\\\n            review_request.model_dump(mode=\\\\\\\"json\\\\\\\"), f, ensure_ascii=False, indent=2\\\\n        )\\\\n\\\\n    print(f\\\\\\\"ë¦¬ë·° ìš”ì²­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {save_path}\\\\\\\")\\\\n\\\\n\\\\ndef review_code(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì½”ë“œ ë¦¬ë·°ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # API í‚¤ í™•ì¸\\\\n    api_key = get_api_key(\\\\\\\"openai\\\\\\\")  # ê¸°ë³¸ì ìœ¼ë¡œ OpenAI ëª¨ë¸ ì‚¬ìš©\\\\n    if not api_key:\\\\n        print(\\\\\\\"API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\\\\\\\")\\\\n        print(\\\\\\\"  reviewer config api-key openai\\\\\\\")\\\\n\\\\n        # ëŒ€í™”í˜•ìœ¼ë¡œ í‚¤ ì„¤ì • ì œì•ˆ\\\\n        try:\\\\n            response = input(\\\\\\\"ì§€ê¸ˆ API í‚¤ë¥¼ ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (y/n): \\\\\\\")\\\\n            if response.lower() == \\\\\\\"y\\\\\\\":\\\\n                try:\\\\n                    new_api_key = getpass.getpass(\\\\n                        \\\\\\\"OpenAI API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì…ë ¥ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤): \\\\\\\"\\\\n                    )\\\\n                    if new_api_key:\\\\n                        if set_api_key(new_api_key, \\\\\\\"openai\\\\\\\"):\\\\n                            print(\\\\\\\"API í‚¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            api_key = new_api_key\\\\n                        else:\\\\n                            print(\\\\\\\"API í‚¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                            return\\\\n                    else:\\\\n                        print(\\\\\\\"API í‚¤ê°€ ì…ë ¥ë˜ì§€ ì•Šì•„ ì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                        return\\\\n                except KeyboardInterrupt:\\\\n                    print(\\\\\\\"\\\\\\\\nì„¤ì •ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n                    return\\\\n            else:\\\\n                return\\\\n        except KeyboardInterrupt:\\\\n            print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n            return\\\\n\\\\n    # Git diff ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\\\\n    diff_content = get_diff_content(args)\\\\n    if not diff_content:\\\\n        print(\\\\\\\"ë³€ê²½ ì‚¬í•­ì´ ì—†ê±°ë‚˜ diffë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        return\\\\n\\\\n    # diff íŒŒì‹± ë° ë©”íƒ€ë°ì´í„° ì¶”ê°€\\\\n    use_full_context = not args.diff_only\\\\n    diff_result = parse_git_diff(diff_content, use_full_context)\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ìƒì„±\\\\n    review_request = ReviewRequest(\\\\n        diff_content=diff_content,\\\\n        processed_diff=diff_result,\\\\n        file_paths=[file.filename for file in diff_result.files],\\\\n        review_focus=args.review_focus,\\\\n        use_full_context=use_full_context,\\\\n        model=args.model,\\\\n    )\\\\n\\\\n    # ë¦¬ë·° ìš”ì²­ ì €ì¥\\\\n    save_review_request(review_request)\\\\n\\\\n    # LLM ê²Œì´íŠ¸ì›¨ì´ ê°€ì ¸ì˜¤ê¸°\\\\n    llm_gateway = GatewayFactory.create(model=review_request.model)\\\\n\\\\n    # ì½”ë“œ ë¦¬ë·° ìˆ˜í–‰\\\\n    print(f\\\\\\\"ì½”ë“œ ë¦¬ë·° ì¤‘... (ëª¨ë¸: {review_request.model})\\\\\\\")\\\\n    review_prompt = PromptGenerator().create_code_review_prompt(review_request)\\\\n    review_response = llm_gateway.review_code(review_prompt)\\\\n\\\\n    # ë¦¬ë·° ê²°ê³¼ ì²˜ë¦¬\\\\n    processor = ReviewPostProcessor()\\\\n    output_content = processor.process_review(review_response, args.output_format)\\\\n\\\\n    # ê²°ê³¼ ì €ì¥\\\\n    save_output(output_content, args.output_format, review_request.model)\\\\n\\\\n    # UI ìë™ ì‹¤í–‰\\\\n    if args.open_ui:\\\\n        print(\\\\\\\"ë¦¬ë·° ê²°ê³¼ UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\\\\\\\")\\\\n        handle_view_command(args)\\\\n\\\\n\\\\ndef handle_view_command(args: argparse.Namespace) -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"UI ë³´ê¸° ëª…ë ¹ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        # port ì†ì„±ì´ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ 8501 ì‚¬ìš©\\\\n        port = getattr(args, \\\\\\\"port\\\\\\\", 8501)\\\\n        print(\\\\n            f\\\\\\\"Streamlit UIë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. \\\\\\\"\\\\n            f\\\\\\\"ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:{port}ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”...\\\\\\\"\\\\n        )\\\\n        # í¬íŠ¸ ì„¤ì •\\\\n        os.environ[\\\\\\\"STREAMLIT_SERVER_PORT\\\\\\\"] = str(port)\\\\n        # UI ì‹¤í–‰\\\\n        run_app()\\\\n    except ImportError:\\\\n        print(\\\\\\\"Streamlit ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.\\\\\\\")\\\\n        print(\\\\\\\"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”: pip install streamlit\\\\\\\")\\\\n        return\\\\n\\\\n\\\\ndef main() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ë©”ì¸ í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    args: argparse.Namespace = parse_args()\\\\n\\\\n    if args.command == \\\\\\\"config\\\\\\\":\\\\n        handle_config_command(args)\\\\n    elif args.command == \\\\\\\"review\\\\\\\":\\\\n        review_code(args)\\\\n    elif args.command == \\\\\\\"results\\\\\\\":\\\\n        handle_results_command(args)\\\\n    elif args.command == \\\\\\\"view\\\\\\\":\\\\n        handle_view_command(args)\\\\n    else:\\\\n        print(f\\\\\\\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´: {args.command}\\\\\\\")\\\\n\\\\n\\\\ndef main_cli() -> None:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"CLI ë„êµ¬ì˜ ì§„ì…ì  í•¨ìˆ˜\\\\\\\"\\\\\\\"\\\\\\\"\\\\n    try:\\\\n        main()\\\\n    except KeyboardInterrupt:\\\\n        print(\\\\\\\"\\\\\\\\nì‹¤í–‰ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\\\\\\\")\\\\n    except Exception as e:\\\\n        print(f\\\\\\\"ì˜¤ë¥˜ ë°œìƒ: {str(e)}\\\\\\\")\\\\n        sys.exit(1)\\\\n\\\\n\\\\nif __name__ == \\\\\\\"__main__\\\\\\\":\\\\n    main_cli()\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"],\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        choices=[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"],\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude] [KEY]\\\\\\\")\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        print(\\\\\\\"  reviewer config api-key [openai|claude|google] [KEY]\\\\\\\")\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/available_models.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"\\\\nì§€ì›í•˜ëŠ” LLM ëª¨ë¸ ëª©ë¡ê³¼ ê´€ë ¨ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.\\\\n\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom typing import Literal, TypedDict\\\\n\\\\nfrom reviewer.src.exceptions.unsupported_model_error import UnsupportedModelError\\\\n\\\\n# ëª¨ë¸ ì œê³µì íƒ€ì…\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n\\\\n\\\\nclass ModelParamsDict(TypedDict, total=False):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ë³„ íŒŒë¼ë¯¸í„° íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    temperature: float\\\\n    reasoning_effort: str\\\\n    max_tokens: int\\\\n\\\\n\\\\nclass ModelInfoDict(TypedDict):\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì •ë³´ íƒ€ì…\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    full_name: str\\\\n    aliases: list[str]\\\\n    description: str\\\\n    provider: ModelProvider\\\\n    params: ModelParamsDict\\\\n\\\\n\\\\n# ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ì •ë³´\\\\nAVAILABLE_MODELS: dict[str, ModelInfoDict] = {\\\\n    \\\\\\\"gpt-4o\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4o\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4 Omni ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gpt-4.1\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gpt-4.1\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"GPT-4.1 ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"o3-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o3-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"o4-mini\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"o4-mini-high\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"OpenAIì˜ ëª¨ë¸, reasoningì— ìµœì í™”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"openai\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"reasoning_effort\\\\\\\": \\\\\\\"high\\\\\\\",\\\\n        },\\\\n    },\\\\n    \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"claude-3-7-sonnet\\\\\\\", \\\\\\\"claude-3.7-sonnet\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Claude 3.7 Sonnet ëª¨ë¸, ê· í˜•ì ì¸ ì„±ëŠ¥ê³¼ ê²½ì œì„±\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"claude\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n}\\\\n\\\\n# ëª¨ë¸ ì´ë¦„ ì¶•ì•½í˜•ì„ ì „ì²´ ì´ë¦„ì— ë§¤í•‘\\\\nMODEL_NAME_ALIASES: dict[str, str] = {\\\\n    \\\\\\\"claude-3-7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"claude-3.7-sonnet\\\\\\\": \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\",\\\\n    \\\\\\\"o3-mini-high\\\\\\\": \\\\\\\"o3-mini\\\\\\\",\\\\n    \\\\\\\"o4-mini-high\\\\\\\": \\\\\\\"o4-mini\\\\\\\",\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n}\\\\n\\\\n\\\\ndef get_model_info(model_name: str) -> ModelInfoDict:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ ì´ë¦„ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Args:\\\\n        model_name: ëª¨ë¸ ì´ë¦„ (ì •ì‹ ì´ë¦„ ë˜ëŠ” ì¶•ì•½í˜•)\\\\n\\\\n    Returns:\\\\n        ModelInfoDict: ëª¨ë¸ ì •ë³´\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    # ì •ì‹ ì´ë¦„ìœ¼ë¡œ ì‹œë„\\\\n    if model_name in AVAILABLE_MODELS:\\\\n        return AVAILABLE_MODELS[model_name]\\\\n\\\\n    # ì¶•ì•½í˜•ìœ¼ë¡œ ì‹œë„\\\\n    full_name = MODEL_NAME_ALIASES.get(model_name)\\\\n    if full_name:\\\\n        return AVAILABLE_MODELS[full_name]\\\\n\\\\n    raise UnsupportedModelError(model_name)\\\\n\\\\n\\\\ndef get_supported_models() -> list[str]:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"ì§€ì›í•˜ëŠ” ëª¨ë“  ëª¨ë¸ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n    Returns:\\\\n        List[str]: ì§€ì›í•˜ëŠ” ëª¨ë¸ ì´ë¦„ ëª©ë¡\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"\\\\n    return list(AVAILABLE_MODELS.keys()) + list(MODEL_NAME_ALIASES.keys())\\\\n\\\\n\\\\ndef get_default_model() -> str:\\\\n    return \\\\\\\"o4-mini\\\\\\\"\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\"]\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nModelProvider = Literal[\\\\\\\"openai\\\\\\\", \\\\\\\"claude\\\\\\\", \\\\\\\"google\\\\\\\"]\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-pro\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Pro ëª¨ë¸, ì½”ë”© ë° ë³µì¡í•œ ì¶”ë¡  ì‘ì—…ì— íƒì›”\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n    \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\": {\\\\n        \\\\\\\"full_name\\\\\\\": \\\\\\\"gemini-2.5-flash-preview-04-17\\\\\\\",\\\\n        \\\\\\\"aliases\\\\\\\": [\\\\\\\"gemini-2.5-flash\\\\\\\"],\\\\n        \\\\\\\"description\\\\\\\": \\\\\\\"Googleì˜ Gemini 2.5 Flash ëª¨ë¸, ì„±ëŠ¥ê³¼ ì†ë„ì˜ ê· í˜•ì´ ì˜ ë§ëŠ” ëª¨ë¸\\\\\\\",\\\\n        \\\\\\\"provider\\\\\\\": \\\\\\\"google\\\\\\\",\\\\n        \\\\\\\"params\\\\\\\": {\\\\n            \\\\\\\"temperature\\\\\\\": 0.0,\\\\n        },\\\\n    },\\\\n```\\\", \\\"line_number\\\": 78}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    \\\\\\\"gemini-2.5-pro\\\\\\\": \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\",\\\\n```\\\", \\\"line_number\\\": 0}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/llm_gateway/gateway_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ìƒì„±ì„ ë‹´ë‹¹í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nfrom reviewer.src.available_models import get_default_model\\\\nfrom reviewer.src.exceptions.unsupported_provider_error import UnsupportedProviderError\\\\nfrom reviewer.src.llm_gateway import get_model_info\\\\nfrom reviewer.src.llm_gateway.base_gateway import BaseGateway\\\\n\\\\n\\\\nclass GatewayFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create(model: str) -> BaseGateway:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ì£¼ì–´ì§„ ëª¨ë¸ ì´ë¦„ì— ë§ëŠ” LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            OpenAIGateway | ClaudeGateway: LLM ê²Œì´íŠ¸ì›¨ì´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if not model:\\\\n            model = get_default_model()\\\\n\\\\n        model_info = get_model_info(model)\\\\n\\\\n        if model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"openai\\\\\\\":\\\\n            from reviewer.src.llm_gateway.openai_gateway import OpenAIGateway\\\\n\\\\n            return OpenAIGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"claude\\\\\\\":\\\\n            from reviewer.src.llm_gateway.claude_gateway import ClaudeGateway\\\\n\\\\n            return ClaudeGateway(model_info=model_info)\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n        else:\\\\n            raise UnsupportedProviderError(model_info[\\\\\\\"provider\\\\\\\"])\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif model_info[\\\\\\\"provider\\\\\\\"] == \\\\\\\"google\\\\\\\":\\\\n            from reviewer.src.llm_gateway.google_gateway import GoogleGateway\\\\n\\\\n            return GoogleGateway(model_info=model_info)\\\\n```\\\", \\\"line_number\\\": 35}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/llm_factory.py\\\", \\\"file_content\\\": \\\"\\\\\\\"\\\\\\\"\\\\\\\"LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬ ëª¨ë“ˆ\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\nimport instructor\\\\nfrom google import genai\\\\n\\\\n\\\\nclass LLMClientFactory:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬ í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í”„ë¡œë°”ì´ë”ì— ë§ëŠ”, êµ¬ì¡°í™”ëœ ì‘ë‹µì„ ì§€ì›í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            provider: LLM í”„ë¡œë°”ì´ë” (openai ë˜ëŠ” claude)\\\\n            api_key: API í‚¤\\\\n\\\\n        Returns:\\\\n            Instructor: instructor ë˜í•‘ëœ LLM í´ë¼ì´ì–¸íŠ¸\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n        Raises:\\\\n            ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” í”„ë¡œë°”ì´ë”ì¸ ê²½ìš°\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        if provider == \\\\\\\"openai\\\\\\\":\\\\n            from openai import OpenAI\\\\n\\\\n            return instructor.from_openai(OpenAI(api_key=api_key))\\\\n        elif provider == \\\\\\\"claude\\\\\\\":\\\\n            from anthropic import Anthropic\\\\n\\\\n            return instructor.from_anthropic(Anthropic(api_key=api_key))\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n        else:\\\\n            raise ValueError(f\\\\\\\"ì§€ì›í•˜ì§€ ì•ŠëŠ” LLM í”„ë¡œë°”ì´ë”ì…ë‹ˆë‹¤: {provider}\\\\\\\")\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\nfrom google import genai\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n    def create_client(provider: str, api_key: str) -> instructor.Instructor:\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n    def create_client(\\\\n        provider: str, api_key: str\\\\n    ) -> instructor.Instructor | genai.Client:\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            genai.Client: Google Gemini í´ë¼ì´ì–¸íŠ¸\\\\n```\\\", \\\"line_number\\\": 0}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        elif provider == \\\\\\\"google\\\\\\\":\\\\n            return genai.Client(api_key=api_key)\\\\n```\\\", \\\"line_number\\\": 34}]}\"}, {\"role\": \"user\", \"content\": \"{\\\"file_name\\\": \\\"reviewer/src/utils/token/token_utils.py\\\", \\\"file_content\\\": \\\"import os\\\\nimport re\\\\n\\\\nimport tiktoken\\\\n\\\\nfrom .models import DiffAnalysisResult, EstimatedCost\\\\n\\\\n\\\\nclass TokenUtils:\\\\n    \\\\\\\"\\\\\\\"\\\\\\\"í† í° ê³„ì‚° ë° ë¹„ìš© ì¶”ì • ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\\\\\\\"\\\\\\\"\\\\\\\"\\\\n\\\\n    @staticmethod\\\\n    def count_tokens(text: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í…ìŠ¤íŠ¸ì˜ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: í† í° ìˆ˜\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # Claude ëª¨ë¸ì¸ ê²½ìš° ê·¼ì‚¬ í† í° ê³„ì‚° ì‚¬ìš©\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower():\\\\n            # ClaudeëŠ” ëŒ€ëµ 1ê¸€ìë‹¹ 0.55 í† í°ìœ¼ë¡œ ê³„ì‚° (ì˜ì–´ ê¸°ì¤€)\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ ì•½ 2-3ìê°€ í•„ìš”í•˜ë¯€ë¡œ ë” ê°€ì¤‘ì¹˜ ë¶€ì—¬\\\\n            korean_chars = len(re.findall(\\\\\\\"[ê°€-í£]\\\\\\\", text))\\\\n            english_chars = len(re.findall(\\\\\\\"[a-zA-Z]\\\\\\\", text))\\\\n            other_chars = len(text) - korean_chars - english_chars\\\\n\\\\n            # í•œê¸€ì€ ê¸€ìë‹¹ 1.5 í† í°, ì˜ì–´ëŠ” 0.5 í† í°, ê¸°íƒ€ ë¬¸ìëŠ” 1 í† í°ìœ¼ë¡œ ê³„ì‚°\\\\n            estimated_tokens = (\\\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\\\n            )\\\\n            return int(estimated_tokens)\\\\n\\\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\\\n        try:\\\\n            encoding = tiktoken.encoding_for_model(model)\\\\n        except KeyError:\\\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\\\n            encoding = tiktoken.get_encoding(\\\\\\\"cl100k_base\\\\\\\")\\\\n\\\\n        return len(encoding.encode(text))\\\\n\\\\n    @staticmethod\\\\n    def get_model_context_limit(model: str) -> int:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ì œí•œì„ ë°˜í™˜í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            model: ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            int: ì»¨í…ìŠ¤íŠ¸ ì œí•œ (í† í° ìˆ˜)\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        context_limits = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": 128000,\\\\n            \\\\\\\"o3-mini\\\\\\\": 200000,\\\\n            \\\\\\\"o4-mini\\\\\\\": 200000,\\\\n            \\\\\\\"gpt-4.1\\\\\\\": 1047576,\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": 200000,\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": 180000,\\\\n            \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": 1048576,  # Gemini 2.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-2.5-flash\\\\\\\": 1048576,  # Gemini 2.5 Flash: ì•½ 1M í† í°\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 180000  # Claude ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n        return context_limits.get(model, 128000)  # ê¸°ë³¸ê°’ì€ gpt-4oì˜ ì œí•œ\\\\n\\\\n    @staticmethod\\\\n    def estimate_cost(text: str, model_name: str = \\\\\\\"gpt-4o\\\\\\\") -> EstimatedCost:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"í† í° ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API í˜¸ì¶œ ë¹„ìš©ì„ ì¶”ì •í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            text: í† í° ìˆ˜ë¥¼ ê³„ì‚°í•  í…ìŠ¤íŠ¸\\\\n            model_name: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            EstimatedCost: ë¹„ìš© ì¶”ì • ì •ë³´ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        # ëª¨ë¸ë³„ ê°€ê²© (1K í† í°ë‹¹ USD)\\\\n        token_count = TokenUtils.count_tokens(text, model_name)\\\\n        pricing = {\\\\n            \\\\\\\"gpt-4o\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0025, \\\\\\\"output\\\\\\\": 0.01},  # $2.50/$10.00 per 1M tokens\\\\n            \\\\\\\"gpt-4.1\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0020, \\\\\\\"output\\\\\\\": 0.0080},  # $2.00/$8.00 per 1M tokens\\\\n            \\\\\\\"o3-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"o4-mini\\\\\\\": {\\\\\\\"input\\\\\\\": 0.0011, \\\\\\\"output\\\\\\\": 0.0044},  # $1.10/$4.40 per 1M tokens\\\\n            \\\\\\\"claude-3-7-sonnet-20250219\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0075,\\\\n            },  # $1.50/$7.50 per 1M tokens\\\\n            \\\\\\\"claude-3-5-sonnet-20240620\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.003,\\\\n                \\\\\\\"output\\\\\\\": 0.015,\\\\n            },  # $3.00/$15.00 per 1M tokens\\\\n            \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 2.5 Pro)\\\\n            \\\\\\\"gemini-2.5-flash\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 2.5 Flash)\\\\n        }\\\\n\\\\n        # Claude ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"claude\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.0015, \\\\\\\"output\\\\\\\": 0.0075}  # Claude ê¸°ë³¸ ê°€ê²© ì‚¬ìš©\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n        else:\\\\n            # ëª¨ë¸ì´ pricingì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ëª¨ë¸ ê°€ê²© ì‚¬ìš©\\\\n            model_pricing = pricing.get(model_name, pricing[\\\\\\\"gpt-4o\\\\\\\"])\\\\n\\\\n        # ì…ë ¥ í† í° ë¹„ìš© ê³„ì‚°\\\\n        input_cost = (token_count / 1000) * model_pricing[\\\\\\\"input\\\\\\\"]\\\\n\\\\n        # ì˜ˆìƒ ì¶œë ¥ í† í° ìˆ˜ (ì…ë ¥ì˜ ì•½ 20%ë¡œ ê°€ì •)\\\\n        estimated_output_tokens = int(token_count * 0.2)\\\\n        output_cost = (estimated_output_tokens / 1000) * model_pricing[\\\\\\\"output\\\\\\\"]\\\\n\\\\n        # ì´ ë¹„ìš©\\\\n        total_cost = input_cost + output_cost\\\\n\\\\n        return EstimatedCost(\\\\n            model=model_name,\\\\n            input_tokens=token_count,\\\\n            input_cost_usd=round(input_cost, 6),\\\\n            estimated_output_tokens=estimated_output_tokens,\\\\n            estimated_output_cost_usd=round(output_cost, 6),\\\\n            estimated_total_cost_usd=round(total_cost, 6),\\\\n            within_context_limit=token_count\\\\n            <= TokenUtils.get_model_context_limit(model_name),\\\\n        )\\\\n\\\\n    @staticmethod\\\\n    def analyze_diff_file(file_path: str, model: str = \\\\\\\"gpt-4o\\\\\\\") -> DiffAnalysisResult:\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"diff íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ í† í° ìˆ˜ì™€ ë¹„ìš©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\\\\n\\\\n        Args:\\\\n            file_path: diff íŒŒì¼ ê²½ë¡œ\\\\n            model: ì‚¬ìš©í•  ëª¨ë¸ ì´ë¦„\\\\n\\\\n        Returns:\\\\n            DiffAnalysisResult: ë¶„ì„ ê²°ê³¼ ê°ì²´\\\\n        \\\\\\\"\\\\\\\"\\\\\\\"\\\\n        try:\\\\n            with open(file_path, encoding=\\\\\\\"utf-8\\\\\\\") as f:\\\\n                diff_content = f.read()\\\\n\\\\n            # ë¹„ìš© ì¶”ì •\\\\n            cost_info = TokenUtils.estimate_cost(diff_content, model)\\\\n\\\\n            return DiffAnalysisResult(\\\\n                model=cost_info.model,\\\\n                input_tokens=cost_info.input_tokens,\\\\n                input_cost_usd=cost_info.input_cost_usd,\\\\n                estimated_output_tokens=cost_info.estimated_output_tokens,\\\\n                estimated_output_cost_usd=cost_info.estimated_output_cost_usd,\\\\n                estimated_total_cost_usd=cost_info.estimated_total_cost_usd,\\\\n                within_context_limit=cost_info.within_context_limit,\\\\n                character_count=len(diff_content),\\\\n                line_count=diff_content.count(\\\\\\\"\\\\\\\\n\\\\\\\") + 1,\\\\n                file_path=file_path,\\\\n                file_size_kb=os.path.getsize(file_path) / 1024,\\\\n            )\\\\n        except Exception as e:\\\\n            return DiffAnalysisResult(\\\\n                model=model,  # ì—ëŸ¬ ì‹œ ëª¨ë¸ëª…ì´ë¼ë„ ì „ë‹¬\\\\n                input_tokens=0,\\\\n                input_cost_usd=0.0,\\\\n                estimated_output_tokens=0,\\\\n                estimated_output_cost_usd=0.0,\\\\n                estimated_total_cost_usd=0.0,\\\\n                within_context_limit=False,\\\\n                character_count=0,\\\\n                line_count=0,\\\\n                file_path=file_path,\\\\n                file_size_kb=0.0,\\\\n                error=str(e),\\\\n            )\\\\n\\\", \\\"formatted_hunks\\\": [{\\\"hunk_idx\\\": \\\"1\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": 1048576,  # Gemini 2.5 Pro: ì•½ 1M í† í°\\\\n            \\\\\\\"gemini-2.5-flash\\\\\\\": 1048576,  # Gemini 2.5 Flash: ì•½ 1M í† í°\\\\n```\\\", \\\"line_number\\\": 63}, {\\\"hunk_idx\\\": \\\"2\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Gemini ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        if \\\\\\\"gemini\\\\\\\" in model.lower() and model not in context_limits:\\\\n            return 1048576  # Gemini ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì œí•œ\\\\n\\\\n```\\\", \\\"line_number\\\": 71}, {\\\"hunk_idx\\\": \\\"3\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n            \\\\\\\"gemini-2.5-pro-exp-03-25\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.0015,\\\\n                \\\\\\\"output\\\\\\\": 0.0060,\\\\n            },  # $1.50/$6.00 per 1M tokens (Gemini 2.5 Pro)\\\\n            \\\\\\\"gemini-2.5-flash\\\\\\\": {\\\\n                \\\\\\\"input\\\\\\\": 0.00015,\\\\n                \\\\\\\"output\\\\\\\": 0.0006,\\\\n            },  # $0.15/$0.60 per 1M tokens (Gemini 2.5 Flash)\\\\n```\\\", \\\"line_number\\\": 103}, {\\\"hunk_idx\\\": \\\"4\\\", \\\"original_code\\\": \\\"```python\\\\n\\\\n```\\\", \\\"modified_code\\\": \\\"```python\\\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\\\n        elif \\\\\\\"gemini\\\\\\\" in model_name.lower() and model_name not in pricing:\\\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\\\n            model_pricing = {\\\\\\\"input\\\\\\\": 0.00015, \\\\\\\"output\\\\\\\": 0.0006}\\\\n```\\\", \\\"line_number\\\": 116}]}\"}]",
    "actual_output": "{\"issues\": [{\"type\": \"design\", \"line_number\": 39, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"í† í° ê³„ì‚° ë¡œì§ì—ì„œ Claude ëª¨ë¸ ì™¸ì—ëŠ” `tiktoken`ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. `tiktoken`ì€ OpenAI ëª¨ë¸ì— ìµœì í™”ë˜ì–´ ìˆìœ¼ë©°, Google Gemini ëª¨ë¸ì˜ ì •í™•í•œ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•˜ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •í™•í•œ í† í° ìˆ˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œí•œ í™•ì¸ ë° ë¹„ìš© ì¶”ì •ì— ì¤‘ìš”í•©ë‹ˆë‹¤.\", \"suggestion\": \"Google Gemini ëª¨ë¸ì— ëŒ€í•´ì„œëŠ” `google-generativeai` ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“± Googleì—ì„œ ì œê³µí•˜ëŠ” ê³µì‹ í† í¬ë‚˜ì´ì €ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •í™•í•œ í† í° ìˆ˜ë¥¼ ê³„ì‚°í•˜ë„ë¡ ë¡œì§ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.\", \"severity\": \"warning\", \"original_code\": \"```python\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\n        try:\\n            encoding = tiktoken.encoding_for_model(model)\\n        except KeyError:\\n            # ëª¨ë¸ì´ tiktokenì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì¸ì½”ë”© ì‚¬ìš©\\n            encoding = tiktoken.get_encoding(\\\"cl100k_base\\\")\\n\\n        return len(encoding.encode(text))\\n```\", \"improved_code\": \"```python\\n        # OpenAI ëª¨ë¸ì¸ ê²½ìš° tiktoken ì‚¬ìš©\\n        if \\\"gemini\\\" in model.lower():\\n            # TODO: Google Gemini ê³µì‹ í† í¬ë‚˜ì´ì € ì‚¬ìš©\\n            # ì˜ˆ: from google.generativeai import get_tokenizer\\n            # tokenizer = get_tokenizer(model)\\n            # return len(tokenizer.encode(text))\\n            # í˜„ì¬ëŠ” ì„ì‹œë¡œ tiktoken ì‚¬ìš© (ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)\\n            try:\\n                encoding = tiktoken.encoding_for_model(model)\\n            except KeyError:\\n                encoding = tiktoken.get_encoding(\\\"cl100k_base\\\")\\n            return len(encoding.encode(text))\\n        elif \\\"claude\\\" in model.lower():\\n            # Claude í† í° ê³„ì‚° ë¡œì§ ìœ ì§€\\n            korean_chars = len(re.findall(\\\"[ê°€-í£]\\\", text))\\n            english_chars = len(re.findall(\\\"[a-zA-Z]\\\", text))\\n            other_chars = len(text) - korean_chars - english_chars\\n            estimated_tokens = (\\n                (korean_chars * 1.5) + (english_chars * 0.5) + other_chars\\n            )\\n            return int(estimated_tokens)\\n        else:\\n            # ê¸°íƒ€ ëª¨ë¸ (ì£¼ë¡œ OpenAI)ì€ tiktoken ì‚¬ìš©\\n            try:\\n                encoding = tiktoken.encoding_for_model(model)\\n            except KeyError:\\n                encoding = tiktoken.get_encoding(\\\"cl100k_base\\\")\\n            return len(encoding.encode(text))\\n```\"}, {\"type\": \"accuracy\", \"line_number\": 115, \"file\": \"reviewer/src/utils/token/token_utils.py\", \"description\": \"`estimate_cost` í•¨ìˆ˜ì—ì„œ Google Gemini ëª¨ë¸ì˜ ê°€ê²© ì •ë³´ê°€ `pricing` ë”•ì…”ë„ˆë¦¬ì— ëª…ì‹œì ìœ¼ë¡œ ì—†ì„ ê²½ìš°, ê¸°ë³¸ê°’ìœ¼ë¡œ `gemini-2.5-flash`ì˜ ê°€ê²©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŠ” ë” ë¹„ì‹¼ Gemini ëª¨ë¸(ì˜ˆ: Pro ë²„ì „)ì´ ì‚¬ìš©ë  ê²½ìš° ì‹¤ì œ ë¹„ìš©ë³´ë‹¤ í˜„ì €íˆ ë‚®ê²Œ ì¶”ì •ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"suggestion\": \"`pricing` ë”•ì…”ë„ˆë¦¬ì— ì§€ì›í•˜ëŠ” ëª¨ë“  Google Gemini ëª¨ë¸ì˜ ê°€ê²© ì •ë³´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ë˜ëŠ” ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë¸ì— ëŒ€í•´ ë” ë³´ìˆ˜ì ì¸(ë†’ì€) ê°€ê²©ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ê²½ê³ /ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ë¡œì§ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\", \"severity\": \"info\", \"original_code\": \"```python\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\n        elif \\\"gemini\\\" in model_name.lower() and model_name not in pricing:\\n            # Gemini ê¸°ë³¸ ê°€ê²© (Flash ëª¨ë¸ ê¸°ì¤€)\\n            model_pricing = {\\\"input\\\": 0.00015, \\\"output\\\": 0.0006}\\n```\", \"improved_code\": \"```python\\n        # Google ëª¨ë¸ì´ì§€ë§Œ ì •í™•íˆ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ê²½ìš°\\n        # TODO: ì•Œ ìˆ˜ ì—†ëŠ” Gemini ëª¨ë¸ì— ëŒ€í•œ ê°€ê²© ì •ì±… ì¬ê²€í†  (ê²½ê³  ë˜ëŠ” ë³´ìˆ˜ì  ê°€ê²© ì‚¬ìš©)\\n        elif \\\"gemini\\\" in model_name.lower() and model_name not in pricing:\\n            # í˜„ì¬ëŠ” Flash ëª¨ë¸ ê°€ê²© ì‚¬ìš© (ì£¼ì˜: ì‹¤ì œ ë¹„ìš©ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ)\\n            model_pricing = {\\\"input\\\": 0.00015, \\\"output\\\": 0.0006}\\n```\"}], \"summary\": \"ì´ ë³€ê²½ì‚¬í•­ì€ Google Gemini ëª¨ë¸ ì§€ì›ì„ ì¶”ê°€í•©ë‹ˆë‹¤. CLI ì„¤ì •, ì§€ì› ëª¨ë¸ ëª©ë¡, ê²Œì´íŠ¸ì›¨ì´ íŒ©í† ë¦¬, LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬, í† í° ìœ í‹¸ë¦¬í‹° ë“± ì—¬ëŸ¬ ëª¨ë“ˆì— ê±¸ì³ Gemini ê´€ë ¨ ì½”ë“œê°€ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ìƒˆë¡œìš´ ëª¨ë¸ì„ ì‹œìŠ¤í…œì— ì—°ê²°í•˜ëŠ” êµ¬ì¡°ëŠ” ì˜ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.\", \"score\": 8.0, \"recommendations\": [\"Google Gemini ëª¨ë¸ì— ëŒ€í•œ ì •í™•í•œ í† í° ê³„ì‚°ì„ ìœ„í•´ ê³µì‹ í† í¬ë‚˜ì´ì €ë¥¼ ì‚¬ìš©í•˜ë„ë¡ `TokenUtils.count_tokens` í•¨ìˆ˜ë¥¼ ê°œì„ í•˜ì„¸ìš”.\", \"`TokenUtils.estimate_cost` í•¨ìˆ˜ì—ì„œ ì§€ì›í•˜ëŠ” ëª¨ë“  Gemini ëª¨ë¸ì˜ ê°€ê²© ì •ë³´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•˜ì—¬ ë¹„ìš© ì¶”ì •ì˜ ì •í™•ì„±ì„ ë†’ì´ì„¸ìš”.\", \"ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë¸ì´ ì‚¬ìš©ë  ê²½ìš° ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ í”¼ë“œë°±(ê²½ê³  ë˜ëŠ” ì˜¤ë¥˜)ì„ ì œê³µí•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”.\"]}"
  }
]